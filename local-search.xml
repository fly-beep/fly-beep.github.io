<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>VTKå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰</title>
    <link href="/post/d287c7b.html"/>
    <url>/post/d287c7b.html</url>
    
    <content type="html"><![CDATA[<p>æœ¬ç³»åˆ—æ–‡ç« ä¸»è¦å¯¹<ahref="https://vtk.org/">VTK</a>çš„ç›¸å…³çŸ¥è¯†è¿›è¡Œæ€»ç»“ã€‚ <span id="more"></span></p><h1 id="vtkå­¦ä¹ ç¬”è®°ä¸‰">VTKå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰</h1><h2 id="vtkå›¾åƒæ•°æ®ç»“æ„">VTKå›¾åƒæ•°æ®ç»“æ„ğŸ¦­</h2><p>æ•°å­—å›¾åƒæ–‡ä»¶å†…å®¹ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼šå›¾åƒå¤´ä¿¡æ¯å’Œæ•°æ®ã€‚å›¾åƒå¤´ä¿¡æ¯å®šä¹‰äº†å›¾åƒçš„åŸºæœ¬ä¿¡æ¯ï¼Œä¸»è¦åŒ…æ‹¬èµ·ç‚¹ä½ç½®ï¼ˆOriginï¼‰ï¼Œåƒç´ é—´éš”ï¼ˆspaceï¼‰å’Œç»´æ•°ï¼ˆdimensionï¼‰ã€‚é€šè¿‡è¿™ä¸‰ä¸ªå‚æ•°å³å¯ä»¥å†³å®šå›¾åƒç©ºé—´ä½ç½®å’Œè§„æ¨¡ã€‚å›¾åƒå¯ä»¥çœ‹åšæ˜¯ç©ºé—´ä¸­çš„ä¸€ä¸ªè§„åˆ™ç½‘æ ¼ï¼Œç½‘æ ¼ä¸­çš„æ¯ä¸ªæœ€å°å•å…ƒç§°ä¹‹ä¸ºä¸€ä¸ªåƒç´ ï¼ˆäºŒç»´ï¼‰æˆ–è€…ä½“ç´ ï¼ˆä¸‰ç»´ï¼‰ï¼Œè¿™æ ·ç½‘æ ¼åœ¨æ¯ä¸ªæ–¹å‘ä¸Šçš„åƒç´ æˆ–è€…ä½“ç´ ä¸ªæ•°å³ä¸ºå›¾åƒåœ¨è¯¥æ–¹å‘çš„ç»´æ•°ã€‚åƒç´ ç´¢å¼•è¡¨ç¤ºæ¯ä¸ªåƒç´ åœ¨å›¾åƒç½‘æ ¼ä¸­çš„ä½ç½®ï¼Œæ˜¯å›¾åƒå†…éƒ¨çš„ç½‘æ ¼åæ ‡ã€‚è€Œåœ¨åŒ»å­¦å›¾åƒä¸­ï¼Œæ¯ä¸ªå›¾åƒé™¤äº†å†…éƒ¨åæ ‡å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªä¸–ç•Œåæ ‡ã€‚è¿™ä¸ªä¸–ç•Œåæ ‡ä¾èµ–äºæˆåƒè®¾å¤‡ã€‚åœ¨åŒ»å­¦å›¾åƒä¸­èµ·ç‚¹ä½ç½®ï¼ˆOriginï¼‰ï¼Œåƒç´ é—´éš”ï¼ˆspaceï¼‰å’Œå›¾åƒç»´æ•°å†³å®šäº†ä¸–ç•Œåæ ‡ç³»ã€‚è¿™æ ·é€šè¿‡èµ·ç‚¹ä½ç½®ï¼Œåƒç´ é—´éš”å’Œåƒç´ ç´¢å¼•å³å¯è®¡ç®—æ¯ä¸ªåƒç´ çš„ä¸–ç•Œåæ ‡ä½ç½®ã€‚</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212031654586.png" style="zoom:80%;" /></p><p>ä¸Šå›¾è¡¨ç¤ºä¸€ä¸ª4x2x3çš„å›¾åƒï¼Œå³å›¾åƒçš„ç»´æ•°ï¼Œæ¯ä¸€ä¸ªå°çƒè¡¨ç¤ºä¸€ä¸ªåƒç´ ï¼›è€Œå›¾åƒçš„åŸç‚¹ä¸º(5.1,10.0,6.5)ï¼Œä¸¤ä¸¤åƒç´ ä¹‹é—´çš„é—´éš”è¡¨ç¤ºåƒç´ é—´éš”ï¼Œæ¯ä¸ªæ–¹å‘çš„åƒç´ é—´éš”ä¸º1.5ï¼Œ1.5å’Œ1.8ã€‚</p><p>å›¾åƒæ•°æ®å³ä¸ºå›¾åƒåƒç´ çš„åƒç´ å€¼ï¼Œä¸€èˆ¬é‡‡ç”¨ä¸€ç»´æ•°ç»„æ¥è¡¨ç¤ºå’Œå­˜å‚¨ã€‚å·²çŸ¥åƒç´ ç´¢å¼•å’Œå›¾åƒç»´æ•°ä¸‹ï¼Œå³å¯è®¡ç®—æ¯ä¸ªåƒç´ å¯¹åº”çš„åƒç´ å€¼ã€‚é€šå¸¸å›¾åƒçš„åƒç´ å€¼ä¸ºä¸€ä¸ªæ ‡é‡ï¼Œä¾‹å¦‚ä¸€èˆ¬ç°åº¦å›¾åƒï¼›å›¾åƒåƒç´ å€¼ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‘é‡ï¼Œä¾‹å¦‚å½©è‰²å›¾åƒï¼›å¦å¤–å›¾åƒåƒç´ å€¼è¿˜å¯ä»¥æ˜¯å¼ é‡ï¼Œå¦‚æ¢¯åº¦åœºå›¾åƒã€‚åŒ»å­¦å›¾åƒå¤„ç†ä¸­å¤§éƒ¨åˆ†çš„å›¾åƒéƒ½æ˜¯ç°åº¦å›¾åƒã€‚</p><p>è¿™é‡Œéœ€è¦æ³¨æ„ç°åº¦å›¾åƒçš„ç°åº¦å€¼çš„æ•°æ®ç±»å‹ï¼Œåœ¨ä¸€èˆ¬çš„ç°åº¦å›¾åƒå¤„ç†ä¸­ä¸éœ€è¦è€ƒè™‘ï¼Œå› ä¸ºå…¶èŒƒå›´é»˜è®¤ä¸º0-255ï¼Œå¯ä»¥é‡‡ç”¨ä¸€ä¸ªunsignedcharç±»å‹ç±»è¡¨ç¤ºã€‚ä½†æ˜¯åœ¨åŒ»å­¦å›¾åƒå¤„ç†ä¸­ï¼Œ256ç°åº¦çº§è¿œè¿œä¸èƒ½æ»¡è¶³è¦æ±‚ï¼Œå› æ­¤ç°åº¦èŒƒå›´å¾€å¾€å¤§äº256çº§ã€‚å¸¸è§çš„åŒ»å­¦å›¾åƒçš„åƒç´ æ•°æ®ç±»å‹ä¸ºunsignedshortï¼Œç°åº¦èŒƒå›´ä¸º0-65536ã€‚å¦å¤–ï¼Œæœ‰æ—¶ä¸ºäº†ç²¾åº¦çš„è€ƒè™‘ï¼Œä¹Ÿä¼šä½¿ç”¨intã€floatç”šè‡³doubleç±»å‹ï¼Œå› æ­¤éœ€è¦æ ¼å¤–æ³¨æ„ã€‚</p><p>åˆ©ç”¨vtkImageDataï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„åˆ›å»ºã€è¯»å†™ã€å’Œè®¿é—®å›¾åƒæ•°æ®ã€‚</p><hr /><h2 id="vtkå›¾åƒåˆ›å»º">VTKå›¾åƒåˆ›å»ºğŸ˜¼</h2><h4 id="é€šè¿‡source">é€šè¿‡SourceğŸ¤¥</h4><p>VTKä¸­å†…ç½®äº†å¤šä¸ªåˆ›å»ºå›¾åƒçš„Sourceï¼Œåˆ©ç”¨è¿™äº›Sourceå¯ä»¥å¿«é€Ÿçš„åˆ›å»ºå›¾åƒï¼Œå…¶ä¸­ä»¥vtkImageCanvasSource2Dä¸ºä»£è¡¨ã€‚è¯¥SourceåŠŸèƒ½æ˜¯åˆ›å»ºä¸€ä¸ªç”»å¸ƒï¼ˆç©ºç™½å›¾åƒï¼‰ï¼Œå¹¶æä¾›äº†å¤šç§å‡ ä½•å›¾å½¢ï¼ˆç‚¹ã€çº¿æ®µã€åœ†ã€çŸ©å½¢ä»¥åŠå›¾åƒç­‰ï¼‰çš„ç»˜åˆ¶å¡«å……åŠŸèƒ½ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vtkSmartPointer&lt;vtkImageCanvasSource2D&gt; canvas = vtkSmartPointer&lt;vtkImageCanvasSource2D&gt;::<span class="hljs-built_in">New</span>();<br>    canvas-&gt;<span class="hljs-built_in">SetScalarTypeToUnsignedChar</span>();<br>    canvas-&gt;<span class="hljs-built_in">SetNumberOfScalarComponents</span>(<span class="hljs-number">1</span>);<br>    canvas-&gt;<span class="hljs-built_in">SetExtent</span>(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>, <span class="hljs-number">0</span>, <span class="hljs-number">100</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br><br>    canvas-&gt;<span class="hljs-built_in">SetDrawColor</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>    canvas-&gt;<span class="hljs-built_in">FillBox</span>(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>, <span class="hljs-number">0</span>, <span class="hljs-number">100</span>);<br><br>    canvas-&gt;<span class="hljs-built_in">SetDrawColor</span>(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>    canvas-&gt;<span class="hljs-built_in">FillBox</span>(<span class="hljs-number">20</span>, <span class="hljs-number">40</span>, <span class="hljs-number">20</span>, <span class="hljs-number">40</span>);<br><br>    canvas-&gt;<span class="hljs-built_in">Update</span>();<br><br>    <span class="hljs-comment">// ç”Ÿæˆæ¸²æŸ“å¯¹è±¡</span><br>    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; iren = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>    vtkSmartPointer&lt;vtkImageViewer2&gt; viewer = vtkSmartPointer&lt;vtkImageViewer2&gt;::<span class="hljs-built_in">New</span>();<br>    viewer-&gt;<span class="hljs-built_in">SetInputConnection</span>(canvas-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br>    viewer-&gt;<span class="hljs-built_in">SetupInteractor</span>(iren);<br>    iren-&gt;<span class="hljs-built_in">Initialize</span>();<br>    iren-&gt;<span class="hljs-built_in">Start</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212031736847.png" style="zoom:67%;" /></p><p>åœ¨ä¸Šé¢ä»£ç ç‰‡æ®µä¸­ï¼Œé¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªvtkImageCanvasSource2Dçš„æŒ‡é’ˆï¼Œç„¶åè®¾ç½®ç”»å¸ƒçš„åƒç´ æ•°æ®ç±»å‹ï¼Œåƒç´ æˆåˆ†æ•°ç›®å’Œç”»å¸ƒçš„å¤§å°ã€‚ç„¶åï¼Œåœ¨è¯¥ç”»å¸ƒä¸­ï¼Œåˆ©ç”¨FillBoxç»˜åˆ¶ä¸¤ä¸ªå¡«å……çŸ©å½¢ï¼Œå¹¶é€šè¿‡SetDrawColor()æ¥è®¾ç½®ä¸¤ä¸ªçŸ©å½¢çš„é¢œè‰²ã€‚</p><p>é™¤äº†vtkImageCanvasSource2Då¤–ï¼ŒVTKä¸­è¿˜æä¾›äº†å…¶ä»–ç±»ä¼¼çš„sourceç±»æ¥å¿«é€Ÿç”Ÿæˆç‰¹å®šçš„å›¾åƒï¼Œä¾‹å¦‚vtkImageEllipsoidSourceï¼Œè¯¥ç±»æ ¹æ®æŒ‡å®šçš„ä¸­å¿ƒï¼Œå„ä¸ªè½´çš„åŠå¾„æ¥ç”Ÿæˆä¸€ä¸ªå‰æ™¯ä¸ºæ¤­åœ†ï¼ˆçƒï¼‰çš„äºŒå€¼å›¾åƒï¼›vtkImageGaussianSourceç±»ç”Ÿæˆä¸€å‰¯åƒç´ å€¼æœä»é«˜æ–¯åˆ†å¸ƒçš„å›¾åƒï¼›vtkImageGridSourceç”¨äºç”Ÿæˆç½‘æ ¼çº¿å›¾åƒï¼›vtkImageNoiseSourceç”Ÿæˆä¸€ä¸ªåƒç´ å€¼ä¸ºéšæœºæ•°çš„å™ªå£°å›¾åƒï¼›vtkImageSinusoidSourceç”Ÿæˆçš„å›¾åƒåƒç´ å€¼ç”±æ­£å¼¦å‡½æ•°å†³å®šã€‚</p><hr /><h4 id="é€šè¿‡æ‰‹åŠ¨">é€šè¿‡æ‰‹åŠ¨ğŸ‚ğŸ»</h4><p>åˆ©ç”¨ä¸Šè¿°å›¾åƒSourceå¯ä»¥å¿«é€Ÿçš„ç”Ÿæˆç‰¹å®šçš„å›¾åƒï¼Œä¸è¿‡ç›¸å¯¹æ¥è¯´ï¼Œåœ¨å®é™…åº”ç”¨ä¸­è¾ƒå°‘ç”¨åˆ°ä»–ä»¬ã€‚VTKä¸­å¯ä»¥æ‰‹åŠ¨ç”Ÿæˆå›¾åƒï¼Œç„¶åæ ¹æ®éœ€è¦è¿›è¡Œåƒç´ èµ‹å€¼ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-type">int</span> main<br>&#123;<br>    vtkSmartPointer&lt;vtkImageData&gt; img = vtkSmartPointer&lt;vtkImageData&gt;::<span class="hljs-built_in">New</span>();<br>    vtkSmartPointer&lt;vtkInformation&gt; info = vtkSmartPointer&lt;vtkInformation&gt;::<span class="hljs-built_in">New</span>();<br>    img-&gt;<span class="hljs-built_in">SetDimensions</span>(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-number">10</span>);<br>    img-&gt;<span class="hljs-built_in">SetScalarType</span>(VTK_UNSIGNED_CHAR, info);<br>    img-&gt;<span class="hljs-built_in">SetNumberOfScalarComponents</span>(<span class="hljs-number">1</span>,info); <span class="hljs-comment">// æ¯ä¸ªåƒç´ éœ€è¦è¡¨ç¤ºçš„ç»„ä»½ =1æ˜¯æŒ‡æ ‡é‡å›¾</span><br>    img-&gt;<span class="hljs-built_in">AllocateScalars</span>(info);<br><br>    <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>* ptr = (<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>*)img-&gt;<span class="hljs-built_in">GetScalarPointer</span>();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span> * <span class="hljs-number">10</span> * <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        *ptr++ = i % <span class="hljs-number">256</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// ç”Ÿæˆæ¸²æŸ“å¯¹è±¡</span><br>    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; iren = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>    vtkSmartPointer&lt;vtkImageViewer2&gt; viewer = vtkSmartPointer&lt;vtkImageViewer2&gt;::<span class="hljs-built_in">New</span>();<br>    viewer-&gt;<span class="hljs-built_in">SetInputData</span>(img);<br>    viewer-&gt;<span class="hljs-built_in">SetupInteractor</span>(iren);<br>    iren-&gt;<span class="hljs-built_in">Initialize</span>();<br>    iren-&gt;<span class="hljs-built_in">Start</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062100953.png" alt="" style="zoom:67%;" /></p><p>é¦–å…ˆå®šä¹‰vtkImageDataæŒ‡é’ˆï¼Œç„¶åæŒ‡å®šå›¾åƒçš„ç»´æ•°ï¼Œè€Œå›¾åƒçš„åŸç‚¹å’Œåƒç´ é—´éš”åˆ™éƒ½æ˜¯é‡‡ç”¨é»˜è®¤å€¼ï¼Œå› æ­¤ä¸éœ€è¦è®¾ç½®ã€‚SetScalarTypeæŒ‡å®šå›¾åƒçš„æ¯ä¸ªåƒç´ å€¼çš„æ•°æ®ç±»å‹ä¸ºunsignedcharï¼ŒSetNumberOfScalarComponentsåˆ™æŒ‡å®šäº†æ¯ä¸ªåƒç´ å€¼çš„æ•°æ®æˆåˆ†ä¸º1ï¼Œæ¯ä¸ªåƒç´ å€¼ä¸º1ä¸ªæ ‡é‡å€¼ï¼Œå‚æ•°è®¾ç½®å®Œæ¯•åï¼Œè°ƒç”¨AllocateScalars()åˆ†é…å†…å­˜ï¼Œç”Ÿæˆå›¾åƒæ•°æ®ã€‚å›¾åƒç”Ÿæˆåï¼Œé»˜è®¤æ‰€æœ‰åƒç´ å€¼ä¸º0ã€‚å¯ä»¥é€šè¿‡è®¿é—®å›¾åƒæ•°æ®æ•°ç»„æ¥è®¾ç½®æ¯ä¸ªåƒç´ å€¼ï¼ŒGetScalarPointer()å³è¿”å›å›¾åƒçš„æ•°æ®æ•°ç»„ï¼ˆå›¾åƒæ•°æ®æ•°ç»„éƒ½é‡‡ç”¨ä¸€ç»´æ•°ç»„ï¼‰ï¼Œç„¶åæ ¹æ®å›¾åƒçš„å¤§å°ï¼Œè®¿é—®æ¯ä¸ªåƒç´ å¹¶ä¸ºå…¶èµ‹å€¼ã€‚</p><hr /><h2 id="vtkå›¾åƒæ˜¾ç¤º">VTKå›¾åƒæ˜¾ç¤ºğŸŒƒ</h2><h4 id="vtkimageviewer2">vtkImageViewer2ğŸš</h4><p>åœ¨VTKæ—©æœŸç‰ˆæœ¬ä¸­ï¼Œæä¾›äº†vtkImageViewerç±»æ¥æ˜¾ç¤ºå›¾åƒã€‚éšç€ç‰ˆæœ¬çš„å‘å±•ï¼Œç›®å‰ä½¿ç”¨vtkImageViewer2æ¥ä»£æ›¿vtkImageViewerå®ç°å›¾åƒçš„æ˜¾ç¤ºã€‚vtkImageViewer2ä¸­å°è£…äº†VTKå›¾åƒæ˜¾ç¤ºçš„ç®¡çº¿ï¼ŒåŒ…æ‹¬vtkActorï¼ŒvtkRenderï¼ŒvtkRenderWindowï¼ŒvtkInteractorStypeImageç­‰å¯¹è±¡ï¼Œå¯ä»¥æ–¹ä¾¿çš„å®Œæˆå›¾åƒæ˜¾ç¤ºå’Œäº¤äº’ã€‚è¯¥ç±»æä¾›çš„ä¸»è¦äº¤äº’æ“ä½œæœ‰ï¼šå›¾åƒæ”¾ç¼©ï¼Œçª—å®½çª—ä½è°ƒèŠ‚ï¼Œå¹¶æä¾›åˆ‡ç‰‡é€‰æ‹©ï¼Œåˆ‡ç‰‡æ–¹å‘è®¾ç½®æ¥å£ï¼Œå°¤å…¶é€‚åˆä¸‰ç»´å›¾åƒçš„æ˜¾ç¤ºã€‚</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vtkSmartPointer&lt;vtkMetaImageReader&gt;reader = vtkSmartPointer&lt;vtkMetaImageReader&gt;::<span class="hljs-built_in">New</span>();<br>    reader-&gt;<span class="hljs-built_in">SetFileName</span>(<span class="hljs-string">&quot;brain.mhd&quot;</span>);<br>    reader-&gt;<span class="hljs-built_in">Update</span>();<br><br>    vtkSmartPointer&lt;vtkImageViewer2&gt; imageViewer = vtkSmartPointer&lt;vtkImageViewer2&gt;::<span class="hljs-built_in">New</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">SetInputConnection</span>(reader-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br>    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;renderWindowInteractor = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">SetupInteractor</span>(renderWindowInteractor);<br><br>    imageViewer-&gt;<span class="hljs-built_in">SetColorLevel</span>(<span class="hljs-number">500</span>);<br>    imageViewer-&gt;<span class="hljs-built_in">SetColorWindow</span>(<span class="hljs-number">2000</span>);<br>    imageViewer-&gt;<span class="hljs-built_in">SetSlice</span>(<span class="hljs-number">40</span>);<br>    imageViewer-&gt;<span class="hljs-built_in">SetSliceOrientationToXY</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">Render</span>();<br><br>    renderWindowInteractor-&gt;<span class="hljs-built_in">Start</span>();<br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062100488.png" style="zoom: 50%;" /></p><p>é¦–å…ˆä½¿ç”¨vtkMetaImageReaderè¯»å…¥ä¸€ä¸ªmhdå›¾åƒï¼Œç„¶åå®šä¹‰ä¸€ä¸ªvtkImageViewer2å¯¹è±¡æ˜¾ç¤ºå›¾åƒã€‚æ¥ä¸‹æ¥å®šä¹‰äº†ä¸€ä¸ªvtkRenderWindowInteractorå¯¹è±¡ï¼Œå¹¶ä¼ é€’ç»™vtkImageViewer2å¯¹è±¡ï¼Œç”¨äºå®Œæˆé¼ æ ‡ã€é”®ç›˜ç­‰æ¶ˆæ¯å“åº”ï¼Œä¾¿äºè¿›è¡Œå›¾åƒçš„äº¤äº’æ“ä½œã€‚æ¥ä¸‹æ¥åˆ†åˆ«è®¾ç½®äº†å››ä¸ªå‚æ•°ï¼Œçª—ä½(ColorLevel)ã€çª—å®½(ColorWindow)ã€åˆ‡ç‰‡(Slice)å’Œåˆ‡ç‰‡æ–¹å‘(Orientation)ã€‚å¦å¤–ï¼ŒæŒ‰ä¸‹é¼ æ ‡å·¦é”®æ‹–åŠ¨é¼ æ ‡ï¼Œå¯ä»¥è°ƒèŠ‚å›¾åƒçš„çª—å®½çª—ä½ï¼Œä»è€Œæ˜¾ç¤ºä¸åŒç°åº¦èŒƒå›´å†…å®¹ï¼›æŒ‰ä¸‹é¼ æ ‡å³é”®æ‹–åŠ¨é¼ æ ‡å¯ä»¥æ”¾ç¼©å›¾åƒã€‚å½“ç„¶è¿™äº›äº¤äº’æ“ä½œå¯ä»¥ç”±ç”¨æˆ·æ ¹æ®éœ€è¦è‡ªå·±å®šä¹‰vtkInteractorStyleå­ç±»ï¼Œå¹¶å“åº”ç›¸åº”çš„æ“ä½œã€‚</p><p>çª—å®½æ˜¯CTå›¾åƒä¸Šæ˜¾ç¤ºçš„CTå€¼èŒƒå›´ã€‚ä¸€èˆ¬æ˜¾ç¤ºå™¨çš„ç°åº¦èŒƒå›´ä¸º256çº§ï¼Œè€ŒXå…‰å›¾åƒçš„ç°åº¦èŒƒå›´åˆ™è¿œè¿œå¤§äºè¯¥èŒƒå›´ï¼Œå› æ­¤é€šè¿‡æ˜¾ç¤ºå™¨æ˜¾ç¤ºæ—¶ä¸èƒ½æ˜¾ç¤ºæ‰€æœ‰ç°åº¦çº§ã€‚å› æ­¤éœ€è¦çª—å®½æ¥å®šä¹‰éœ€è¦æ˜¾ç¤ºçš„ç°åº¦èŒƒå›´ã€‚å½“ç°åº¦å€¼é«˜äºè¯¥èŒƒå›´çš„æœ€å¤§å€¼æ—¶ï¼Œå‡ä»¥ç™½å½±æ˜¾ç¤ºï¼›è€Œä½äºè¯¥èŒƒå›´æ—¶å‡æ˜¾ç¤ºä¸ºé»‘è‰²ã€‚å¢å¤§çª—å®½ï¼Œæ˜¾ç¤ºå…·æœ‰ä¸åŒç°åº¦å€¼çš„ç»„ç»‡ç»“æ„å¢å¤šï¼Œä½†æ˜¯ä¼šé™ä½ç»„ç»‡ä¹‹é—´çš„å¯¹æ¯”åº¦ã€‚å‡å°çª—å®½ï¼Œåˆ™å¯è§†çš„ä¸åŒç°åº¦ç»„ç»‡ç»“æ„ä¼šå‡å°‘ï¼ŒåŒæ—¶å¢å¤§ç»„ç»‡ç»“æ„çš„å¯¹æ¯”åº¦ã€‚</p><p>çª—ä½æ˜¯çª—çš„ä¸­å¿ƒä½ç½®ã€‚çª—å®½åªæ˜¯ç¡®å®šäº†CTå›¾åƒç°åº¦èŒƒå›´ä¸Šçš„å¯è§†éƒ¨åˆ†èŒƒå›´ï¼Œè¿˜éœ€è¦çª—ä½æ¥ç¡®å®šå¯è§†ç°åº¦èŒƒå›´çš„å…·ä½“ä½ç½®ã€‚åŒæ ·çš„çª—å®½ï¼Œä¼šæ ¹æ®çª—ä½çš„ä½ç½®å˜åŒ–æ¥æ˜¾ç¤ºä¸åŒçš„ç»„ç»‡ç»“æ„ã€‚æ¯”å¦‚ï¼Œçª—å®½ä¸º200æ—¶ï¼Œå½“çª—ä½ä¸º100æ—¶ï¼Œå¯è§†ç°åº¦èŒƒå›´ä¸º0è‡³200ï¼›å½“çª—ä½ä¸º500æ—¶ï¼Œåˆ™å¯è§†ç°åº¦èŒƒå›´ä¸º400è‡³600ã€‚å½“çª—å®½çª—ä½ç¡®å®šä»¥åï¼Œæ˜¾ç¤ºæ—¶åº•å±‚ä¼šå°†å¯è§†ç°åº¦èŒƒå›´è½¬æ¢åˆ°256ç°åº¦çº§è¿›è¡Œæ˜¾ç¤ºã€‚</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062100201.png" style="zoom:80%;" /></p><p>è€Œæ˜¾ç¤ºä¸‰ç»´å›¾åƒæ—¶ï¼Œéœ€è¦ç¡®å®šå½“å‰æ˜¾ç¤ºåˆ‡ç‰‡å’Œæ–¹å‘ã€‚vtkImageViewer2æä¾›äº†SetSlice()å‡½æ•°è®¾ç½®åˆ‡ç‰‡å·ï¼ŒSetSliceOrientationToXY()åˆ™å°†åˆ‡ç‰‡çš„æ–¹å‘è®¾ç½®ä¸ºå‚ç›´XYå¹³é¢æ–¹å‘ã€‚æ­¤å¤–è¿˜å¯ä»¥è®¾ç½®ä¸ºå‚ç›´YZæˆ–è€…XZå¹³é¢æ–¹å‘ï¼Œå…¶å¯¹åº”å‡½æ•°åˆ†åˆ«ä¸ºSetSliceOrientationToYZ()å’ŒSetSliceOrientationToXZ()ã€‚é»˜è®¤æƒ…å†µä¸‹åˆ‡ç‰‡æ–¹å‘ä¸ºå‚ç›´äºXYå¹³é¢å³æ²¿ç€Zè½´æ–¹å‘ï¼Œæ ¹æ®è®¾ç½®çš„åˆ‡ç‰‡å·è·å–Zè½´æ–¹å‘çš„å…·ä½“åˆ‡ç‰‡è¿›è¡Œæ˜¾ç¤ºã€‚</p><p>åˆ‡ç‰‡ï¼ˆsliceï¼‰ä¸åˆ‡é¢æ˜¯ä¸‰ç»´å›¾åƒæ¯”è¾ƒå¸¸ç”¨çš„æ¦‚å¿µã€‚å°¤å…¶æ˜¯åœ¨åŒ»å­¦å›¾åƒä¸­ï¼Œä¸åŒæ–¹å‘çš„åˆ‡é¢éƒ½æœ‰ç‰¹å®šçš„åå­—ã€‚çŸ¢çŠ¶é¢ï¼ˆsagitalï¼‰æ˜¯æ²¿ç€èº«ä½“å‰åå¾„æ‰€åšçš„ä¸åœ°é¢å‚ç›´çš„åˆ‡é¢ï¼›å† çŠ¶é¢ï¼ˆcoronalï¼‰æ˜¯æ²¿ç€èº«ä½“å·¦å³å¾„æ‰€åšçš„ä¸åœ°é¢å‚ç›´çš„åˆ‡é¢ï¼›è€Œæ¨ªæ–­é¢ï¼ˆtransverse/axialï¼‰æ˜¯æŒ‡æ¨ªæ–­èº«ä½“ä¸åœ°é¢å¹³è¡Œçš„åˆ‡é¢ã€‚</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062100035.png" style="zoom:60%;" /></p><p>è®¾ç½®åˆ‡ç‰‡çš„æ–¹å‘å³æ˜¯é€šè¿‡ä¸åŒçš„æ–¹å‘æ¥è§‚å¯Ÿäººä½“å†…éƒ¨ç»„ç»‡ç»“æ„ã€‚å› æ­¤ï¼Œå¸¸è§çš„åŒ»å­¦å›¾åƒå¯è§†åŒ–è½¯ä»¶å¸¸å¸¸æä¾›å››ä¸ªè§†å›¾ç”¨æ¥æ˜¾ç¤ºå›¾åƒï¼šæ¨ªæ–­é¢è§†å›¾ï¼ŒçŸ¢çŠ¶é¢è§†å›¾ï¼Œå† çŠ¶é¢è§†å›¾å’Œä¸‰ç»´è§†å›¾ã€‚</p><hr /><h4 id="vtkimageactor">vtkImageActorğŸ’´</h4><p>vtkImageActoræ˜¯ä¸€ä¸ªä¸‰ç»´å›¾åƒæ¸²æŸ“Actorï¼Œé€šè¿‡çº¹ç†æ˜ å°„å°†å›¾åƒæ˜ å°„åˆ°ä¸€ä¸ªå¤šè¾¹å½¢ä¸Šè¿›è¡Œæ˜¾ç¤ºã€‚ä½¿ç”¨vtkImageActorè¾ƒvtkImageViewer2è¦å¤æ‚ä¸€äº›ï¼Œéœ€è¦å»ºç«‹å®Œæ•´çš„æ¸²æŸ“ç®¡çº¿ï¼šåŒ…æ‹¬vtkImageActorï¼ŒvtkRenderï¼ŒvtkRenderWindowï¼ŒvtkRenderWindowInteractorç®¡çº¿ã€‚å¦å¤–ï¼Œä½œä¸ºå›¾åƒäºŒç»´æµè§ˆå™¨ï¼Œä¸éœ€è¦åœ¨ä¸‰ç»´ç©ºé—´ä¸­è¿›è¡Œæ—‹è½¬æ“ä½œï¼Œå› æ­¤è¿˜éœ€è¦ä¸ºvtkRenderWindowå®šä¹‰ä¸€ä¸ªvtkInteractorStyleImageå¯¹è±¡ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vtkSmartPointer&lt;vtkBMPReader&gt; reader = vtkSmartPointer&lt;vtkBMPReader&gt;::<span class="hljs-built_in">New</span>();<br>    reader-&gt;<span class="hljs-built_in">SetFileName</span>(<span class="hljs-string">&quot;lena.bmp&quot;</span>);<br>    reader-&gt;<span class="hljs-built_in">Update</span>();<br><br>    vtkSmartPointer&lt;vtkImageActor&gt; imgActor = vtkSmartPointer&lt;vtkImageActor&gt;::<span class="hljs-built_in">New</span>();<br>    imgActor-&gt;<span class="hljs-built_in">SetInputData</span>(reader-&gt;<span class="hljs-built_in">GetOutput</span>());<br><br>    vtkSmartPointer&lt;vtkRenderer&gt; renderer = vtkSmartPointer&lt;vtkRenderer&gt;::<span class="hljs-built_in">New</span>();<br>    renderer-&gt;<span class="hljs-built_in">AddActor</span>(imgActor);<br>    renderer-&gt;<span class="hljs-built_in">SetBackground</span>(<span class="hljs-number">0.4</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.6</span>);<br><br>    vtkSmartPointer&lt;vtkRenderWindow&gt; renderWindow = vtkSmartPointer&lt;vtkRenderWindow&gt;::<span class="hljs-built_in">New</span>();<br>    renderWindow-&gt;<span class="hljs-built_in">SetSize</span>(<span class="hljs-number">500</span>, <span class="hljs-number">500</span>);<br>    renderWindow-&gt;<span class="hljs-built_in">AddRenderer</span>(renderer);<br>    renderWindow-&gt;<span class="hljs-built_in">Render</span>();<br><br>    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; renderWindowInteractor = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>    vtkSmartPointer&lt;vtkInteractorObserver&gt; style = vtkSmartPointer&lt;vtkInteractorStyle&gt;::<span class="hljs-built_in">New</span>();<br><br>    renderWindowInteractor-&gt;<span class="hljs-built_in">SetInteractorStyle</span>(style);<br>    renderWindowInteractor-&gt;<span class="hljs-built_in">SetRenderWindow</span>(renderWindow);<br>    renderWindowInteractor-&gt;<span class="hljs-built_in">Initialize</span>();<br><br>    renderWindowInteractor-&gt;<span class="hljs-built_in">Start</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062100024.png" style="zoom:67%;" /></p><p>ä¸Šé¢ä»£ç ä¸­åœ¨è¯»å…¥å›¾åƒåï¼Œä¾æ¬¡å»ºç«‹vtkImageActorï¼ŒvtkRenderï¼ŒvtkRenderWindowï¼ŒvtkRenderWindowInteractorï¼Œå¹¶ç»„è£…ä¸ºç®¡çº¿ã€‚ä¸ºäº†å±è”½æ—‹è½¬æ“ä½œï¼Œå»ºç«‹vtkInteractorStyleImageå¯¹è±¡ï¼Œå¹¶é€šè¿‡renderWindowInteractor-&gt;SetInteractorStyle(style)è®¾ç½®äº¤äº’å¯¹è±¡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒvtkImageActoræ¥æ”¶çš„å›¾åƒvtkImageDataæ•°æ®ç±»å‹å¿…é¡»ä¸ºunsignedcharç±»å‹ï¼Œå› æ­¤åœ¨æ˜¾ç¤ºä¹‹å‰ï¼Œéœ€è¦åˆ©ç”¨vtkImageCastå°†å›¾åƒæ•°æ®ç±»å‹è½¬æ¢ä¸ºunsignedcharã€‚</p><hr /><h4 id="å›¾åƒèåˆ">å›¾åƒèåˆğŸ¤¿</h4><p>ä¸Šé¢ä¸¤ç§æ–¹æ³•éƒ½æ˜¯åœ¨ä¸€ä¸ªçª—å£ä¸­æ˜¾ç¤ºä¸€ä¸ªå›¾åƒã€‚ä½†æ˜¯åœ¨å¸¸è§çš„åŒ»å­¦å¤„ç†è½¯ä»¶ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°åœ¨ä¸€ä¸ªçª—å£ä¸­æ˜¾ç¤ºå¤šä¸ªå›¾åƒï¼Œè¿™å°±ä¼šç”¨åˆ°å›¾åƒèåˆæŠ€æœ¯ã€‚å›¾åƒèåˆæ˜¯åˆ©ç”¨å›¾åƒçš„alphaé€šé“å’Œä¸é€æ˜åº¦æ¥å®ç°ã€‚VTKä¸­vtkImageBlendå®ç°å›¾åƒçš„èåˆã€‚</p><p>vtkImageBlendå¯ä»¥æ¥æ”¶å¤šä¸ªå›¾åƒè¾“å…¥ï¼Œè¾“å‡ºä¸ºèåˆå›¾åƒã€‚è¾“å‡ºå›¾åƒçš„åƒç´ é—´éš”ã€åŸç‚¹ã€èŒƒå›´ï¼ˆextentï¼‰ä»¥åŠåƒç´ ç»„åˆ†ä¸ªæ•°ä¸ç¬¬ä¸€ä¸ªå›¾åƒä¸€è‡´ã€‚è¯¥ç±»æä¾›äº†ä¸¤ç§èåˆæ¨¡å¼ï¼Œç¬¬ä¸€ç§æ˜¯æ ‡å‡†æ¨¡å¼ï¼Œä¹Ÿæ˜¯é»˜è®¤çš„èåˆæ–¹å¼ã€‚</p><figure class="highlight scss"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs scss">output &lt;- <span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[0]</span><br>foreach <span class="hljs-selector-tag">input</span> <span class="hljs-selector-tag">i</span> &#123;<br>    foreach pixel px &#123;<br>        r &lt;- <span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[i]</span>(px)(alpha)* <span class="hljs-attribute">opacity</span><span class="hljs-selector-attr">[i]</span><br>        f &lt;- (<span class="hljs-number">255</span> - r)<br>        <span class="hljs-built_in">output</span>(px) &lt;- <span class="hljs-built_in">output</span>(px) * f + <span class="hljs-selector-tag">input</span>(px) *r<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>ç¬¬äºŒç§æ˜¯æ··åˆæ¨¡å¼ï¼ˆCompoundï¼‰ã€‚è¯¥æ¨¡å¼ä¸‹è¾“å‡ºç»“æœç»è¿‡alpha/opacityä¸é€æ˜åº¦çš„å’Œåšè¿‡å½’ä¸€åŒ–ã€‚å¦å¤–è¿˜å¯ä»¥è®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œå½“alpha*opacityå°äºç­‰äºè¯¥é˜ˆå€¼æ—¶ä¼šå¿½ç•¥è¯¥åƒç´ ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-built_in">output</span> &lt;- <span class="hljs-number">0</span><br><span class="hljs-built_in">foreach</span> pixel px &#123;<br>    sum &lt;- <span class="hljs-number">0</span><br>    <span class="hljs-built_in">foreach</span> <span class="hljs-built_in">input</span> i &#123;<br>        r &lt;- <span class="hljs-built_in">input</span>[i](px)(alpha) * opacity(i)<br>        sum &lt;- sum + r<br>        <span class="hljs-keyword">if</span> r &gt; threshold &#123;<br>        <span class="hljs-built_in">output</span>(px) &lt;- <span class="hljs-built_in">output</span>(px) + <span class="hljs-built_in">input</span>(px) *r<br>    &#125;<br>    &#125;<br><span class="hljs-built_in">output</span>(px) &lt;- <span class="hljs-built_in">output</span>(px) / sum<br>&#125;<br></code></pre></div></td></tr></table></figure><p>ä¸‹é¢çš„ä»£ç ä¸­è¯»å…¥äº†ä¸€å‰¯ç°åº¦å›¾åƒï¼Œå¹¶ç”Ÿæˆäº†ä¸€ä¸ªäºŒå€¼å›¾åƒï¼›ç„¶åå®šä¹‰äº†vtkImageBlendå¯¹è±¡ï¼Œå‡½æ•°SetInput()è®¾ç½®ä¸¤ä¸ªå›¾åƒä½œä¸ºè¾“å…¥ã€‚è¿™é‡Œè®¾ç½®è¾“å…¥å›¾åƒæ—¶ï¼Œç”±äºå¯ä»¥è¾“å…¥å¤šä¸ªå›¾åƒï¼Œå› æ­¤éœ€è¦ç»™å®šå›¾åƒçš„idå·æ¥è®¾ç½®è¾“å…¥ã€‚SetOpacity()ç”¨äºè®¾ç½®å¯¹åº”idå·çš„å›¾åƒä¸é€æ˜åº¦çš„å¤§å°ï¼Œå½“ä¸é€æ˜åº¦ä¸º1.0æ—¶ï¼Œä¸ºå®Œå…¨ä¸é€æ˜ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vtkSmartPointer&lt;vtkJPEGReader&gt;reader = vtkSmartPointer&lt;vtkJPEGReader&gt;::<span class="hljs-built_in">New</span>();<br>    reader-&gt;<span class="hljs-built_in">SetFileName</span>(<span class="hljs-string">&quot;lena.jpg&quot;</span>);<br>    reader-&gt;<span class="hljs-built_in">Update</span>();<br><br>    vtkSmartPointer&lt;vtkImageCanvasSource2D&gt; imageSource = vtkSmartPointer&lt;vtkImageCanvasSource2D&gt;::<span class="hljs-built_in">New</span>();<br>    imageSource-&gt;<span class="hljs-built_in">SetNumberOfScalarComponents</span>(<span class="hljs-number">1</span>);<br>    imageSource-&gt;<span class="hljs-built_in">SetScalarTypeToUnsignedChar</span>();<br>    imageSource-&gt;<span class="hljs-built_in">SetExtent</span>(<span class="hljs-number">0</span>, <span class="hljs-number">512</span>, <span class="hljs-number">0</span>, <span class="hljs-number">512</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>    imageSource-&gt;<span class="hljs-built_in">SetDrawColor</span>(<span class="hljs-number">0.0</span>);<br>    imageSource-&gt;<span class="hljs-built_in">FillBox</span>(<span class="hljs-number">0</span>, <span class="hljs-number">512</span>, <span class="hljs-number">0</span>, <span class="hljs-number">512</span>);<br>    imageSource-&gt;<span class="hljs-built_in">SetDrawColor</span>(<span class="hljs-number">255.0</span>);<br>    imageSource-&gt;<span class="hljs-built_in">FillBox</span>(<span class="hljs-number">100</span>, <span class="hljs-number">400</span>, <span class="hljs-number">100</span>, <span class="hljs-number">400</span>);<br>    imageSource-&gt;<span class="hljs-built_in">Update</span>();<br><br>    vtkSmartPointer&lt;vtkImageBlend&gt; imageBlend = vtkSmartPointer&lt;vtkImageBlend&gt;::<span class="hljs-built_in">New</span>();<br>imageBlend-&gt;<span class="hljs-built_in">AddInputData</span>(reader-&gt;<span class="hljs-built_in">GetOutput</span>());<br>    imageBlend-&gt;<span class="hljs-built_in">AddInputData</span>(imageSource-&gt;<span class="hljs-built_in">GetOutput</span>());<br>    imageBlend-&gt;<span class="hljs-built_in">SetOpacity</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0.4</span>);<br>    imageBlend-&gt;<span class="hljs-built_in">SetOpacity</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0.6</span>);<br>    imageBlend-&gt;<span class="hljs-built_in">Update</span>();<br><br><span class="hljs-comment">// Create actors</span><br>vtkSmartPointer&lt;vtkImageActor&gt; originalActor1 = vtkSmartPointer&lt;vtkImageActor&gt;::<span class="hljs-built_in">New</span>();<br>originalActor1-&gt;<span class="hljs-built_in">SetInputData</span>(reader-&gt;<span class="hljs-built_in">GetOutput</span>());<br><br>vtkSmartPointer&lt;vtkImageActor&gt; originalActor2 = vtkSmartPointer&lt;vtkImageActor&gt;::<span class="hljs-built_in">New</span>();<br>originalActor2-&gt;<span class="hljs-built_in">SetInputData</span>(imageSource-&gt;<span class="hljs-built_in">GetOutput</span>());<br><br>vtkSmartPointer&lt;vtkImageActor&gt; blendActor = vtkSmartPointer&lt;vtkImageActor&gt;::<span class="hljs-built_in">New</span>();<br>blendActor-&gt;<span class="hljs-built_in">SetInputData</span>(imageBlend-&gt;<span class="hljs-built_in">GetOutput</span>());<br><br><span class="hljs-comment">// Define viewport ranges</span><br><span class="hljs-comment">// (xmin, ymin, xmax, ymax)</span><br><span class="hljs-type">double</span> leftViewport[<span class="hljs-number">4</span>] = &#123; <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">0.33</span>, <span class="hljs-number">1.0</span> &#125;;<br><span class="hljs-type">double</span> midViewport[<span class="hljs-number">4</span>] = &#123; <span class="hljs-number">0.33</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">0.66</span>, <span class="hljs-number">1.0</span> &#125;;<br><span class="hljs-type">double</span> rightViewport[<span class="hljs-number">4</span>] = &#123; <span class="hljs-number">0.66</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span> &#125;;<br><br><span class="hljs-comment">// Setup renderers</span><br>vtkSmartPointer&lt;vtkRenderer&gt; originalRenderer1 = vtkSmartPointer&lt;vtkRenderer&gt;::<span class="hljs-built_in">New</span>();<br>originalRenderer1-&gt;<span class="hljs-built_in">SetViewport</span>(leftViewport);<br>originalRenderer1-&gt;<span class="hljs-built_in">AddActor</span>(originalActor1);<br>originalRenderer1-&gt;<span class="hljs-built_in">ResetCamera</span>();<br>originalRenderer1-&gt;<span class="hljs-built_in">SetBackground</span>(<span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>);<br><br>vtkSmartPointer&lt;vtkRenderer&gt; originalRenderer2 = vtkSmartPointer&lt;vtkRenderer&gt;::<span class="hljs-built_in">New</span>();<br>originalRenderer2-&gt;<span class="hljs-built_in">SetViewport</span>(midViewport);<br>originalRenderer2-&gt;<span class="hljs-built_in">AddActor</span>(originalActor2);<br>originalRenderer2-&gt;<span class="hljs-built_in">ResetCamera</span>();<br>originalRenderer2-&gt;<span class="hljs-built_in">SetBackground</span>(<span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>);<br><br>vtkSmartPointer&lt;vtkRenderer&gt; blendRenderer = vtkSmartPointer&lt;vtkRenderer&gt;::<span class="hljs-built_in">New</span>();<br>blendRenderer-&gt;<span class="hljs-built_in">SetViewport</span>(rightViewport);<br>blendRenderer-&gt;<span class="hljs-built_in">AddActor</span>(blendActor);<br>blendRenderer-&gt;<span class="hljs-built_in">ResetCamera</span>();<br>blendRenderer-&gt;<span class="hljs-built_in">SetBackground</span>(<span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>);<br><br>vtkSmartPointer&lt;vtkRenderWindow&gt; renderWindow = vtkSmartPointer&lt;vtkRenderWindow&gt;::<span class="hljs-built_in">New</span>();<br>renderWindow-&gt;<span class="hljs-built_in">AddRenderer</span>(originalRenderer1);<br>renderWindow-&gt;<span class="hljs-built_in">AddRenderer</span>(originalRenderer2);<br>renderWindow-&gt;<span class="hljs-built_in">AddRenderer</span>(blendRenderer);<br>renderWindow-&gt;<span class="hljs-built_in">SetSize</span>(<span class="hljs-number">640</span>, <span class="hljs-number">320</span>);<br>renderWindow-&gt;<span class="hljs-built_in">Render</span>();<br><br>vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; renderWindowInteractor = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>vtkSmartPointer&lt;vtkInteractorObserver&gt; style = vtkSmartPointer&lt;vtkInteractorStyleImage&gt;::<span class="hljs-built_in">New</span>();<br>renderWindowInteractor-&gt;<span class="hljs-built_in">SetInteractorStyle</span>(style);<br>renderWindowInteractor-&gt;<span class="hljs-built_in">SetRenderWindow</span>(renderWindow);<br>renderWindowInteractor-&gt;<span class="hljs-built_in">Initialize</span>();<br>renderWindowInteractor-&gt;<span class="hljs-built_in">Start</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062100647.png" style="zoom:80%;" /></p><hr /><h2 id="vtkimagedataåŸºæœ¬æ“ä½œ">vtkImageDataåŸºæœ¬æ“ä½œğŸ˜ï¸</h2><h4 id="å›¾åƒä¿¡æ¯è®¿é—®å’Œä¿®æ”¹">å›¾åƒä¿¡æ¯è®¿é—®å’Œä¿®æ”¹ğŸ«</h4><p>å›¾åƒå¤„ç†ç¦»ä¸å¼€ä¸€äº›åŸºæœ¬çš„å›¾åƒæ•°æ®æ“ä½œï¼Œä¾‹å¦‚è·å–å’Œä¿®æ”¹å›¾åƒçš„åŸºæœ¬ä¿¡æ¯ï¼Œè®¿é—®å’Œä¿®æ”¹å›¾åƒåƒç´ å€¼ï¼Œå›¾åƒæ˜¾ç¤ºï¼Œå›¾åƒç±»å‹è½¬æ¢ç­‰ç­‰ã€‚ç†Ÿç»ƒæŒæ¡è¿™äº›åŸºæœ¬æ“ä½œæœ‰åŠ©äºä½¿ç”¨VTKè¿›è¡Œå›¾åƒå¤„ç†çš„å¿«é€Ÿå¼€å‘ã€‚</p><p>vtkImageDataä¸­æä¾›äº†å¤šä¸ªå‡½æ•°ç”¨äºè®¿é—®æˆ–è€…è·å–å›¾åƒçš„åŸºæœ¬ä¿¡æ¯ï¼Œè¿™äº›å‡½æ•°é€šå¸¸ä½¿ç”¨Setæˆ–è€…GetåŠ ä¸Šç›¸åº”çš„ä¿¡æ¯åçš„å½¢å¼ï¼Œä¾‹å¦‚è·å–å›¾åƒç»´æ•°çš„æ–¹æ³•å®šä¹‰ä¸ºGetDimensions()ã€‚å½“ç„¶è¿™é‡Œä¸»è¦ä»ç±»çš„å±‚æ¬¡ä¸Šè¿›è¡ŒVTKçš„å­¦ä¹ ï¼Œè¿™é‡Œä¸å†å…·ä½“èµ˜è¿°æ¯ä¸ªå‡½æ•°çš„åŸºæœ¬åç§°å’Œä½¿ç”¨ï¼Œç”¨æˆ·å¯ä»¥æŸ¥é˜…ç›¸åº”çš„ç±»æ–‡æ¡£ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vtkSmartPointer&lt;vtkBMPReader&gt; reader = vtkSmartPointer&lt;vtkBMPReader&gt;::<span class="hljs-built_in">New</span>();<br>    reader-&gt;<span class="hljs-built_in">SetFileName</span>(<span class="hljs-string">&quot;lena.bmp&quot;</span>);<br>    reader-&gt;<span class="hljs-built_in">Update</span>();<br><br>    <span class="hljs-type">int</span> dims[<span class="hljs-number">3</span>];<br>    reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetDimensions</span>(dims);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;å›¾åƒç»´æ•°:&quot;</span> &lt;&lt; dims[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; dims[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; dims[<span class="hljs-number">2</span>] &lt;&lt; std::endl;<br><br>    <span class="hljs-type">double</span> origin[<span class="hljs-number">3</span>];<br>    reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetOrigin</span>(origin);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;å›¾åƒåŸç‚¹:&quot;</span> &lt;&lt; origin[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; origin[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; origin[<span class="hljs-number">2</span>] &lt;&lt; std::endl;<br><br>    <span class="hljs-type">double</span> spaceing[<span class="hljs-number">3</span>];<br>    reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetSpacing</span>(spaceing);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;åƒç´ é—´éš”:&quot;</span> &lt;&lt; spaceing[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; spaceing[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; spaceing[<span class="hljs-number">2</span>] &lt;&lt; std::endl;<br><br><br>    vtkSmartPointer&lt;vtkImageViewer2&gt; imageViewer = vtkSmartPointer&lt;vtkImageViewer2&gt;::<span class="hljs-built_in">New</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">SetInputConnection</span>(reader-&gt;<span class="hljs-built_in">GetOutputPort</span>()); <br>    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; renderWindowInteractor = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">SetupInteractor</span>(renderWindowInteractor);<br>    imageViewer-&gt;<span class="hljs-built_in">Render</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">GetRenderer</span>()-&gt;<span class="hljs-built_in">ResetCamera</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">Render</span>();<br><br>    renderWindowInteractor-&gt;<span class="hljs-built_in">Start</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062100151.png" style="zoom: 50%;" /></p><p>ä¸Šä¾‹ä¸­ä¸»è¦è·å–äº†å›¾åƒçš„ä¸‰ä¸ªä¿¡æ¯ï¼Œå›¾åƒç»´æ•°ï¼Œå›¾åƒåŸç‚¹å’Œåƒç´ é—´éš”ã€‚VTKä¸­äºŒç»´å’Œä¸‰ç»´å›¾åƒéƒ½ç”¨vtkImageDataè¡¨ç¤ºï¼Œå› æ­¤ç¬¬å…­è¡Œä¸­å®šä¹‰å›¾åƒç»´æ•°ä¸ºdims[3]ï¼Œç„¶ååˆ©ç”¨GetDimensions()å‡½æ•°è·å–å›¾åƒçš„ç»´æ•°ï¼›å›¾åƒçš„åŸç‚¹å’Œåƒç´ é—´éš”éƒ½æ˜¯ç‰©ç†ç©ºé—´æ•°å€¼ï¼Œå› æ­¤éƒ½æ˜¯å®šä¹‰doubleç±»å‹ã€‚æœ¬ä¾‹è¯»å…¥äº†äºŒç»´lenaå›¾åƒï¼Œä¸Šå›¾ä¸­æ˜¾ç¤ºäº†è·å–çš„å›¾åƒä¿¡æ¯ã€‚å…¶ä¸­ï¼Œå›¾åƒç»´æ•°ä¸º512*512*1ï¼Œé€šè¿‡ç»´æ•°å¯ä»¥çœ‹æˆzæ–¹å‘çš„ç»´æ•°ä¸º1ï¼Œè¯´æ˜è¯¥å›¾åƒä¸ºäºŒç»´å›¾åƒï¼›è€Œå›¾åƒçš„åŸç‚¹ä¸º(0,0,0)ç‚¹ï¼Œè€Œåƒç´ é—´éš”ä¸º(1,1,1)ã€‚</p><hr /><p>vtkImageDataä¸­æä¾›äº†å¤šä¸ªSetå‡½æ•°ç”¨äºè®¾ç½®å›¾åƒçš„åŸºæœ¬ä¿¡æ¯ã€‚å½“å¯¹ä¸€ä¸ªç®¡çº¿çš„è¾“å‡ºä¿®æ”¹å›¾åƒä¿¡æ¯åï¼Œå¦‚æœç®¡çº¿é‡æ–°Updateï¼Œé‚£ä¹ˆè¿™äº›ä¿®æ”¹éƒ½ä¼šæ¢å¤å›åŸæ¥çš„å€¼ã€‚è€ŒvtkChangeImageInformationå¯ä»¥ä½œä¸ºç®¡çº¿ä¸­çš„ä¸€ä¸ªfilteræ¥ä¿®æ”¹å›¾åƒä¿¡æ¯ã€‚åˆ©ç”¨è¿™ä¸ªfilterå¯ä»¥ä¿®æ”¹å›¾åƒçš„åŸç‚¹ï¼Œåƒç´ é—´éš”ï¼Œä»¥åŠèŒƒå›´èµ·ç‚¹ï¼ˆextentï¼‰ï¼Œå¦å¤–è¿˜å¯ä»¥å¯¹å›¾åƒå¹³ç§»ç¼©æ”¾ç­‰æ“ä½œã€‚</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vtkSmartPointer&lt;vtkBMPReader&gt; reader = vtkSmartPointer&lt;vtkBMPReader&gt;::<span class="hljs-built_in">New</span>();<br>    reader-&gt;<span class="hljs-built_in">SetFileName</span>(<span class="hljs-string">&quot;lena.bmp&quot;</span>);<br>    reader-&gt;<span class="hljs-built_in">Update</span>();<br><br>    <span class="hljs-type">int</span> dims[<span class="hljs-number">3</span>];<br>    <span class="hljs-type">double</span> origin[<span class="hljs-number">3</span>];<br>    <span class="hljs-type">double</span> spaceing[<span class="hljs-number">3</span>];<br><br>    reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetDimensions</span>(dims);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;åŸå›¾åƒç»´æ•°:&quot;</span> &lt;&lt; dims[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; dims[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; dims[<span class="hljs-number">2</span>] &lt;&lt; std::endl;<br>    reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetOrigin</span>(origin);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;åŸå›¾åƒåŸç‚¹:&quot;</span> &lt;&lt; origin[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; origin[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; origin[<span class="hljs-number">2</span>] &lt;&lt; std::endl;<br>    reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetSpacing</span>(spaceing);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;åŸåƒç´ é—´éš”:&quot;</span> &lt;&lt; spaceing[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; spaceing[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; spaceing[<span class="hljs-number">2</span>] &lt;&lt; std::endl &lt;&lt; std::endl;<br><br>    vtkSmartPointer&lt;vtkImageChangeInformation&gt; changer =  vtkSmartPointer&lt;vtkImageChangeInformation&gt;::<span class="hljs-built_in">New</span>();<br>    changer-&gt;<span class="hljs-built_in">SetInputConnection</span>(reader-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br>    changer-&gt;<span class="hljs-built_in">SetOutputOrigin</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">0</span>);<br>    changer-&gt;<span class="hljs-built_in">SetOutputSpacing</span>(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>);<br>    changer-&gt;<span class="hljs-built_in">SetCenterImage</span>(<span class="hljs-number">1</span>);<br>    changer-&gt;<span class="hljs-built_in">Update</span>();<br><br><br>    changer-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetDimensions</span>(dims);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;ä¿®æ”¹åå›¾åƒç»´æ•°:&quot;</span> &lt;&lt; dims[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; dims[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot;&quot;</span> &lt;&lt; dims[<span class="hljs-number">2</span>] &lt;&lt; std::endl;<br>    changer-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetOrigin</span>(origin);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;ä¿®æ”¹å›¾åƒåŸç‚¹:&quot;</span> &lt;&lt; origin[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; origin[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot;&quot;</span> &lt;&lt; origin[<span class="hljs-number">2</span>] &lt;&lt; std::endl;<br>    changer-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetSpacing</span>(spaceing);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;ä¿®æ”¹ååƒç´ é—´éš”:&quot;</span> &lt;&lt; spaceing[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; spaceing[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot;&quot;</span> &lt;&lt; spaceing[<span class="hljs-number">2</span>] &lt;&lt; std::endl;<br><br><br>    vtkSmartPointer&lt;vtkImageViewer2&gt; imageViewer = vtkSmartPointer&lt;vtkImageViewer2&gt;::<span class="hljs-built_in">New</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">SetInputConnection</span>(changer-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br><br>    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; renderWindowInteractor = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">SetupInteractor</span>(renderWindowInteractor);<br>    imageViewer-&gt;<span class="hljs-built_in">Render</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">GetRenderer</span>()-&gt;<span class="hljs-built_in">ResetCamera</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">Render</span>();<br><br>    renderWindowInteractor-&gt;<span class="hljs-built_in">Start</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062101523.png" style="zoom: 50%;" /></p><p>ä¸Šä¾‹ä¸­é¦–å…ˆè¯»å…¥å›¾åƒï¼Œç”±vtkImageDataæä¾›å‡½æ•°æ¥å£è·å–å›¾åƒçš„ç»´æ•°ï¼ŒåŸç‚¹å’Œåƒç´ é—´éš”ã€‚ç„¶åå®šä¹‰vtkImageChangeInformationæŒ‡é’ˆï¼Œå¹¶è®¾ç½®è¾“å‡ºå›¾åƒåŸç‚¹ä¸ºï¼ˆ100,100, 0ï¼‰ï¼Œè¾“å‡ºå›¾åƒåƒç´ é—´éš”ä¸ºï¼ˆ5, 5,1ï¼‰ï¼Œç„¶åè°ƒç”¨CenterImage()å‡½æ•°å°†å›¾åƒçš„åŸç‚¹ç½®äºå›¾åƒçš„ä¸­å¿ƒã€‚</p><p>ä»ä¸Šé¢ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼Œæ“ä½œåçš„ç»“æœä½¿å¾—å›¾åƒçš„åŸç‚¹ä½äº(-1277.5,-1275.5, 0)ï¼ŒSetOutputOrigin(100, 100,0)å¹¶æ²¡æœ‰èµ·ä½œç”¨ã€‚åŸå› åœ¨å“ªé‡Œå‘¢ï¼Ÿå¦‚æœçœ‹ä¸‹CenterImage()å‡½æ•°çš„æ³¨é‡Šï¼Œå¯ä»¥å‘ç°è¯¥å‡½æ•°çš„ä½œç”¨æ˜¯å°†ï¼ˆ0,0,0ï¼‰ç‚¹ç½®äºå›¾åƒçš„ä¸­å¿ƒã€‚å½“CenterImageè¯¥å‡½æ•°æ‰§è¡Œæ—¶ä¼šé‡å†™SetOutputOrigin()ï¼Œæ‰€ä»¥SetOutputOriginå‡½æ•°ä¸ä¼šäº§ç”Ÿä»»ä½•ä½œç”¨ã€‚é‚£(-1277.5,-1275.5,0)åˆæ˜¯å¦‚ä½•è®¡ç®—å‡ºæ¥çš„å‘¢ï¼Ÿå¦‚ä¸‹å›¾ï¼Œæ ¹æ®å›¾åƒçš„ç»´æ•°å’Œåƒç´ é—´éš”è®¡ç®—å¾—åˆ°æ–°çš„å›¾åƒçš„å®½åº¦å’Œé«˜åº¦ä¸º(512-1)*5ï¼Œåˆå§‹å›¾åƒçš„åŸç‚¹ä½äºï¼ˆ0,0,0ï¼‰ï¼Œç°åœ¨å°†å›¾åƒçš„ä¸­å¿ƒå¹³ç§»è‡³åŸç‚¹ï¼Œå¹³ç§»é‡ä¸ºï¼ˆ-(512-1)*5/2,(512-1)*5/2,0ï¼‰ = (-1277.5, -1275.5,0)ã€‚</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062101233.png" style="zoom: 80%;" /></p><hr /><h4 id="å›¾åƒåƒç´ å€¼è®¿é—®å’Œä¿®æ”¹">å›¾åƒåƒç´ å€¼è®¿é—®å’Œä¿®æ”¹ğŸ¨</h4><p>å›¾åƒåƒç´ å€¼çš„è®¿é—®ä¸ä¿®æ”¹æ˜¯æœ€å¸¸ç”¨çš„ä¸€ä¸ªæ“ä½œã€‚VTKä¸­æä¾›äº†ä¸¤ç§è®¿é—®å›¾åƒåƒç´ å€¼çš„æ–¹æ³•ã€‚ç¬¬ä¸€ç§æ˜¯ç›´æ¥è®¿é—®vtkImageDataçš„æ•°æ®æ•°ç»„ã€‚è¿™ç§æ–¹å¼æœ€ç›´æ¥ã€‚åœ¨ç¬¬ä¸€èŠ‚ä¸Šæ–°å»ºå›¾åƒèµ‹å€¼ä¹Ÿæ˜¯é‡‡ç”¨çš„è¿™ç§æ–¹æ³•ã€‚vtkImageDataä¸­æä¾›äº†GetScalarPointer()å‡½æ•°è·å–æ•°æ®æ•°ç»„æŒ‡é’ˆï¼Œè¯¥å‡½æ•°æœ‰ä¸‰ç§å½¢å¼ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> *<span class="hljs-title">GetScalarPointer</span><span class="hljs-params">(<span class="hljs-type">int</span> coordinates[<span class="hljs-number">3</span>])</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> *<span class="hljs-title">GetScalarPointer</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y, <span class="hljs-type">int</span> z)</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> *<span class="hljs-title">GetScalarPointer</span><span class="hljs-params">()</span></span>;<br></code></pre></div></td></tr></table></figure><p>å‰ä¸¤ç§å½¢å¼æ ¹æ®ç»™å®šçš„åƒç´ ç´¢å¼•å¾—åˆ°æŒ‡å®šçš„åƒç´ å€¼ï¼Œæ³¨æ„è¿”å›çš„æ˜¯ç¬¬(x,y,z)ä¸ªåƒç´ å€¼çš„åœ°å€ã€‚è€Œç¬¬ä¸‰ç§æ–¹å¼æ˜¯è¿”å›å›¾åƒæ•°æ®æ•°ç»„çš„å¤´æŒ‡é’ˆï¼Œç„¶åæ ¹æ®å¤´æŒ‡é’ˆå¯ä»¥ä¾æ¬¡è®¿é—®ç´¢å¼•åƒç´ ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vtkSmartPointer&lt;vtkBMPReader&gt; reader = vtkSmartPointer&lt;vtkBMPReader&gt;::<span class="hljs-built_in">New</span>();<br>    reader-&gt;<span class="hljs-built_in">SetFileName</span>(<span class="hljs-string">&quot;lena.bmp&quot;</span>);<br>    reader-&gt;<span class="hljs-built_in">Update</span>();<br><br>    <span class="hljs-type">int</span> dims[<span class="hljs-number">3</span>];<br>    reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetDimensions</span>(dims);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt; dims[<span class="hljs-number">2</span>]; k++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; dims[<span class="hljs-number">1</span>]; j++)<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; dims[<span class="hljs-number">0</span>]; i++)<br>            &#123;<br>                <span class="hljs-keyword">if</span> (i &lt; <span class="hljs-number">100</span> &amp;&amp; j &lt; <span class="hljs-number">100</span>)<br>                &#123;<br>                    <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>* pixel = (<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>*)(reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetScalarPointer</span>(i, j, k));<br>                    *pixel = <span class="hljs-number">0</span>;<br>                    *(pixel + <span class="hljs-number">1</span>) = <span class="hljs-number">0</span>;<br>                    *(pixel + <span class="hljs-number">2</span>) = <span class="hljs-number">0</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    vtkSmartPointer&lt;vtkImageViewer2&gt; imageViewer = vtkSmartPointer&lt;vtkImageViewer2&gt;::<span class="hljs-built_in">New</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">SetInputConnection</span>(reader-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br>    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; renderWindowInteractor = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">SetupInteractor</span>(renderWindowInteractor);<br>    imageViewer-&gt;<span class="hljs-built_in">Render</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">GetRenderer</span>()-&gt;<span class="hljs-built_in">ResetCamera</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">Render</span>();<br><br>    renderWindowInteractor-&gt;<span class="hljs-built_in">Start</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062101893.png" style="zoom:67%;" /></p><p>ä¸Šé¢ä»£ç å®ç°äº†å°†å›¾åƒçš„100*100å¤§å°çš„åŒºåŸŸè®¾ç½®ä¸ºé»‘è‰²ã€‚é¦–å…ˆå®šä¹‰ä¸€ä¸ªreaderè¯»å–ä¸€å‰¯bmpå›¾åƒï¼Œé€šè¿‡vtkImageDataå‡½æ•°GetDimensions()è·å–å›¾åƒçš„å¤§å°ã€‚å»ºç«‹ä¸‰æ¬¡å¾ªç¯ï¼Œé€šè¿‡GetScalarPointer(i,j,k)å‡½æ•°è·å–è®¿é—®å›¾åƒåƒç´ å€¼ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒGetScalarPointer()å‡½æ•°è¿”å›çš„æ˜¯void<em>ç±»å‹ï¼Œå› æ­¤éœ€è¦æ ¹æ®å›¾åƒçš„å®é™…ç±»å‹è¿›è¡Œå¼ºåˆ¶è½¬æ¢ã€‚å¦‚ä¸Šé¢ä»£ç ä¸­å°†åƒç´ å€¼æ•°ç»„çš„å¤´æŒ‡é’ˆç±»å‹è½¬æ¢ä¸ºunsignedchar</em>ã€‚å¦‚æœå¯¹äºæ•°æ®ç±»å‹ä¸ç¡®å®šçš„è¯ï¼Œè¿˜å¯ä»¥å…ˆé€šè¿‡vtkImageCastå°†å›¾åƒæ•°æ®ç±»å‹å¼ºåˆ¶è½¬æ¢ä¸ºç‰¹å®šçš„æ•°æ®ç±»å‹ï¼Œå†è¿›è¡Œéå†ã€‚</p><p>å¦å¤–è¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„åœ°æ–¹ï¼Œå½©è‰²ä»¥åŠå‘é‡å›¾åƒé‡‡ç”¨çš„æ˜¯ç±»ä¼¼ä¸‹å›¾è¿™ç§åƒç´ å­˜å‚¨æ ¼å¼ï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062101901.png" style="zoom:67%;" /></p><p>å› æ­¤åœ¨ä¿®æ”¹RGBå›¾åƒä»¥åŠå‘é‡å›¾åƒåƒç´ æ—¶ï¼Œéœ€è¦æ ¹æ®åƒç´ çš„å…ƒç»„çš„ç»„åˆ†æ•°ç›®æ¥è®¿é—®ã€‚ä¸Šä¾‹ä¸­ï¼Œéœ€è¦ä¿®æ”¹æ¯ä¸ªåƒç´ çš„RGBå€¼æ—¶ï¼Œé¦–å…ˆè·å¾—ç¬¬(i,j,k)ä¸ªåƒç´ çš„åœ°å€ä¹Ÿå°±æ˜¯Rå€¼çš„åœ°å€ï¼Œç„¶åå°†åœ°å€åŠ 1æ¥è®¿é—®åç»­Gå€¼ä»¥åŠBå€¼ã€‚å¦‚æœå¯¹äºåƒç´ çš„å…ƒç»„ç»„åˆ†ä¸ç¡®å®šæ—¶ï¼Œå¯ä»¥é€šè¿‡å‡½æ•°GetNumberOfScalarComponents()æ¥è·å–ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-type">int</span> nbOfComp = reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetNumberOfScalarComponents</span>();<br></code></pre></div></td></tr></table></figure><hr /><p>VTKä¸­æä¾›äº†vtkImageIteratorç±»æ¥åˆ©ç”¨è¿­ä»£å™¨æ–¹æ³•è®¿é—®å›¾åƒåƒç´ ã€‚è¯¥ç±»æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œä½¿ç”¨æ—¶ï¼Œéœ€è¦æä¾›è¿­ä»£çš„å›¾åƒåƒç´ ç±»å‹ä»¥åŠè¿­ä»£çš„åŒºåŸŸå¤§å°ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vtkSmartPointer&lt;vtkBMPReader&gt;reader = vtkSmartPointer&lt;vtkBMPReader&gt;::<span class="hljs-built_in">New</span>();<br>    reader-&gt;<span class="hljs-built_in">SetFileName</span>(<span class="hljs-string">&quot;lena.bmp&quot;</span>);<br>    reader-&gt;<span class="hljs-built_in">Update</span>();<br><br>    <span class="hljs-type">int</span> subRegion[<span class="hljs-number">6</span>] = &#123; <span class="hljs-number">0</span>,<span class="hljs-number">300</span>, <span class="hljs-number">0</span>, <span class="hljs-number">300</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span> &#125;;<br>    <span class="hljs-function">vtkImageIterator&lt;<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>&gt; <span class="hljs-title">it</span><span class="hljs-params">(reader-&gt;GetOutput(), subRegion)</span></span>;<br><br>    <span class="hljs-keyword">while</span> (!it.<span class="hljs-built_in">IsAtEnd</span>())<br>    &#123;<br>        <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>* inSI = it.<span class="hljs-built_in">BeginSpan</span>();<br>        <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>* inSIEnd = it.<span class="hljs-built_in">EndSpan</span>();<br><br>        <span class="hljs-keyword">while</span> (inSI != inSIEnd)<br>        &#123;<br>            *inSI = <span class="hljs-number">255</span> - *inSI;<br>            ++inSI;<br>        &#125;<br>    it.<span class="hljs-built_in">NextSpan</span>();<br>    &#125;<br><br>    vtkSmartPointer&lt;vtkImageViewer2&gt; imageViewer = vtkSmartPointer&lt;vtkImageViewer2&gt;::<span class="hljs-built_in">New</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">SetInputConnection</span>(reader-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br>    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; renderWindowInteractor = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">SetupInteractor</span>(renderWindowInteractor);<br>    imageViewer-&gt;<span class="hljs-built_in">Render</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">GetRenderer</span>()-&gt;<span class="hljs-built_in">ResetCamera</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">Render</span>();<br><br>    renderWindowInteractor-&gt;<span class="hljs-built_in">Start</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062101936.png" style="zoom:67%;" /></p><p>ä¸Šé¢ä»£ç ä¸­é¦–å…ˆè¯»å–äº†ä¸€å‰¯bmpå›¾åƒï¼Œç„¶åå®šä¹‰äº†ä¸€ä¸ªå­åŒºåŸŸã€‚æ³¨æ„åœ¨å®šä¹‰å­åŒºåŸŸçš„æ—¶å€™ï¼Œä¸è¦è¶…è¿‡å›¾åƒçš„å¤§å°èŒƒå›´ã€‚subRegionçš„å…­ä¸ªå€¼åˆ†åˆ«è¡¨ç¤ºåŒºåŸŸä¸­xçš„æœ€å°æœ€å¤§å€¼ï¼Œyçš„æœ€å°æœ€å¤§å€¼ï¼Œzçš„æœ€å°æœ€å¤§å€¼ã€‚ç”±äºå¤„ç†çš„å›¾åƒä¸ºäºŒç»´å›¾åƒï¼Œå› æ­¤zçš„å–å€¼èŒƒå›´ä¸º[0,0]ã€‚ç„¶åæ ¹æ®å›¾åƒç±»å‹unsignedcharå®šä¹‰å®ä¾‹åŒ–ä¸€ä¸ªå›¾åƒè¿­ä»£å™¨itï¼Œå®šä¹‰itæ—¶æœ‰ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªæ˜¯è¦è®¿é—®çš„å›¾åƒï¼Œå¦å¤–ä¸€ä¸ªæ˜¯è®¿é—®çš„å›¾åƒåŒºåŸŸã€‚è®¾ç½®å®Œæ¯•åï¼Œè¿­ä»£å™¨å¼€å§‹å·¥ä½œã€‚æ³¨æ„ï¼Œä¸Šé¢ä»£ç ä¸­æœ‰ä¸¤ä¸ªwhileå¾ªç¯ã€‚</p><p>é¦–å…ˆçœ‹ç¬¬ä¸€ä¸ªwhileå¾ªç¯ï¼Œè¿™é‡Œåˆ¤æ–­è¿­ä»£å™¨æ˜¯å¦ç»“æŸã€‚è¿›å…¥å¾ªç¯åï¼Œå¯¹äºæ¯ä¸ªè¿­ä»£å™¨itï¼Œåˆå­˜åœ¨ç¬¬äºŒä¸ªå¾ªç¯ã€‚è¿™ä¸ªå¾ªç¯åˆ¤æ–­çš„æ˜¯å½“å‰åƒç´ çš„ç»„åˆ†æ˜¯å¦è¿­ä»£å®Œæ¯•ã€‚ç”±äºvtkä¸­æ‰€æœ‰ç±»å‹çš„å›¾åƒæ ¼å¼éƒ½æ˜¯vtkImageDataï¼Œå› æ­¤æ¯ä¸ªåƒç´ å¯èƒ½æ˜¯æ ‡é‡ï¼Œä¹Ÿå¯èƒ½æ˜¯å‘é‡ã€‚å› æ­¤ï¼Œæ¯å½“è®¿é—®åˆ°ä¸€ä¸ªåƒç´ æ—¶ï¼Œéœ€è¦è¿­ä»£å½“å‰åƒç´ çš„ç»„åˆ†ã€‚ç»„åˆ†è¿­ä»£æ—¶ï¼ŒinSI= it.BeginSpan()è·å–ç¬¬ä¸€ä¸ªç»„åˆ†ï¼ŒinSIEnd =it.EndSpan()è¡¨ç¤ºç»„åˆ†è¿­ä»£å®Œæ¯•ï¼Œé€šè¿‡++inSIä¸æ–­è¿­ä»£ç»„åˆ†ï¼Œå¹¶å¯¹åƒç´ çš„ç»„åˆ†å€¼è¿›è¡Œå¤„ç†ï¼Œå½“inSIä¸inSIEndç›¸ç­‰æ—¶ç»„åˆ†è¿­ä»£å®Œæ¯•ã€‚ç„¶åç»§ç»­è¿­ä»£åƒç´ itï¼Œç›´è‡³è¿­ä»£å®Œæ¯•æ‰€æœ‰åƒç´ ã€‚ä¸Šé¢ä»£ç ä¸­å°†æŒ‡å®šåŒºåŸŸçš„åƒç´ å€¼å–åã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>VTK</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VTKå­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰</title>
    <link href="/post/4036df29.html"/>
    <url>/post/4036df29.html</url>
    
    <content type="html"><![CDATA[<p>æœ¬ç³»åˆ—æ–‡ç« ä¸»è¦å¯¹<ahref="https://vtk.org/">VTK</a>çš„ç›¸å…³çŸ¥è¯†è¿›è¡Œæ€»ç»“ã€‚ <span id="more"></span></p><h1 id="vtkå­¦ä¹ ç¬”è®°äºŒ">VTKå­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰</h1><h2 id="vtkobjectbaseå’Œvtkobject">vtkObjectBaseå’ŒvtkObjectğŸƒ</h2><p>vtkObjectBaseæ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ï¼Œæ´¾ç”Ÿå‡ºç»å¤§å¤šæ•°çš„VTKç±»ã€‚å®ƒæ˜¯VTKé‡Œæ‰€æœ‰å¼•ç”¨è®¡æ•°(ReferenceCounting)ç±»çš„åŸºç±»ï¼Œè‘—åçš„å­ç±»åŒ…æ‹¬ï¼švtkCommandï¼ŒvtkInformationKeyå’ŒvtkObjectã€‚</p><p>å¦‚æœå¾ˆå¤šå¯¹è±¡æœ‰ç›¸åŒçš„å€¼ï¼Œå°†è¿™ä¸ªå€¼å­˜å‚¨å¤šæ¬¡æ˜¯å¾ˆæ— èŠçš„ã€‚æ›´å¥½çš„åŠæ³•æ˜¯è®©æ‰€æœ‰çš„å¯¹è±¡å…±äº«è¿™ä¸ªå€¼çš„å®ç°ã€‚è¿™ä¹ˆåšä¸ä½†èŠ‚çœå†…å­˜ï¼Œè€Œä¸”å¯ä»¥ä½¿å¾—ç¨‹åºè¿è¡Œæ›´å¿«ï¼Œå› ä¸ºä¸éœ€è¦æ„é€ å’Œææ„è¿™ä¸ªå€¼çš„æ‹·è´ã€‚å¼•ç”¨è®¡æ•°å°±æ˜¯è¿™æ ·ä¸€ä¸ªæŠ€å·§ï¼Œå®ƒå…è®¸å¤šä¸ªæœ‰ç›¸åŒå€¼çš„å¯¹è±¡å…±äº«è¿™ä¸ªå€¼çš„å®ç°ã€‚å¼•ç”¨è®¡æ•°æ˜¯ä¸ªç®€å•çš„åƒåœ¾å›æ”¶ä½“ç³»ï¼Œåªè¦å…¶å®ƒå¯¹è±¡å¼•ç”¨æŸå¯¹è±¡(è®°ä¸ºå¯¹è±¡O)ï¼Œå¯¹è±¡Oå°±ä¼šå­˜åœ¨ä¸€ä¸ªå¼•ç”¨è®¡æ•°ï¼Œå½“æœ€åå¼•ç”¨å¯¹è±¡Oçš„å¯¹è±¡ç§»é™¤ï¼ŒOå¯¹è±¡å°±ä¼šè‡ªåŠ¨ææ„ã€‚VTKé‡Œä½¿ç”¨å¼•ç”¨è®¡æ•°çš„å¥½å¤„æ˜¯ï¼Œå¯ä»¥å®ç°æ•°æ®ä¹‹é—´çš„å…±äº«è€Œä¸ç”¨æ‹·è´ï¼Œä»è€Œè¾¾åˆ°èŠ‚çœå†…å­˜çš„ç›®çš„ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;vtkSmartPointer.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;vtkBMPReader.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;vtkImageData.h&quot;</span></span><br><br><span class="hljs-comment">// å› ä¸ºæˆ‘æ²¡æœ‰ä½¿ç”¨ CMake è¿›è¡Œé…ç½®ï¼Œæ‰€ä»¥éœ€è¦ä¸‹é¢è¯­å¥</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vtkAutoInit.h&gt;</span></span><br><span class="hljs-built_in">VTK_MODULE_INIT</span>(vtkRenderingOpenGL2);<br><span class="hljs-built_in">VTK_MODULE_INIT</span>(vtkInteractionStyle);<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vtkSmartPointer&lt;vtkBMPReader&gt;reader = vtkSmartPointer&lt;vtkBMPReader&gt;::<span class="hljs-built_in">New</span>();<br>reader-&gt;<span class="hljs-built_in">SetFileName</span>(<span class="hljs-string">&quot;lena.bmp&quot;</span>);<br>reader-&gt;<span class="hljs-built_in">Update</span>();<br>std::cout &lt;&lt; <span class="hljs-string">&quot;Reference Count of reader-&gt;GetOutput (BeforeAssignment) = &quot;</span> <br>        &lt;&lt; reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetReferenceCount</span>() &lt;&lt; std::endl;<br>vtkSmartPointer&lt;vtkImageData&gt; image1 = reader-&gt;<span class="hljs-built_in">GetOutput</span>();<br>std::cout &lt;&lt; <span class="hljs-string">&quot;Reference Count of reader-&gt;GetOutput (Assignto image1) = &quot;</span> <br>        &lt;&lt; reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetReferenceCount</span>() &lt;&lt; std::endl;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;Reference Count of image1 = &quot;</span> &lt;&lt; image1-&gt;<span class="hljs-built_in">GetReferenceCount</span>() &lt;&lt; std::endl;<br>vtkSmartPointer&lt;vtkImageData&gt; image2 = reader-&gt;<span class="hljs-built_in">GetOutput</span>();<br>std::cout &lt;&lt; <span class="hljs-string">&quot;Reference Count of reader-&gt;GetOutput (Assignto image2) = &quot;</span> <br>        &lt;&lt; reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetReferenceCount</span>() &lt;&lt; std::endl;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;Reference Count of image2 = &quot;</span> &lt;&lt; image2-&gt;<span class="hljs-built_in">GetReferenceCount</span>() &lt;&lt; std::endl;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212011516764.png" style="zoom:80%;" /></p><p>åœ¨ä¸Šä¾‹é‡Œï¼Œæˆ‘ä»¬å…ˆç”¨vtkBMPReaderè¯»å…¥ä¸€å¹…BMPå›¾åƒlena.bmpï¼Œåœ¨èµ‹å€¼ä¹‹å‰æˆ‘ä»¬è¾“å‡ºäº†reader-&gt;GetOutput()çš„å¼•ç”¨è®¡æ•°å€¼ï¼Œå…¶å€¼ä¸º1(ä½¿ç”¨æ–¹æ³•New()åˆ›å»ºå¯¹è±¡ä»¥åï¼Œåˆå§‹çš„å¼•ç”¨è®¡æ•°å€¼å°±ç­‰äº1)ï¼›ç„¶åæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªvtkImageDataç±»å‹çš„å¯¹è±¡image1ï¼Œå¹¶æŠŠreaderçš„è¾“å‡ºèµ‹ç»™äº†image1ï¼Œè¿™æ—¶image1å°±æŒ‡å‘äº†readerçš„è¾“å‡ºï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œreaderçš„è¾“å‡ºå¤šäº†ä¸€ä¸ªå¼•ç”¨ï¼Œè¿™ä¸ªæ—¶å€™è¾“å‡ºçš„reader-&gt;GetOutput()å’Œimage1çš„å¼•ç”¨è®¡æ•°éƒ½ä¸º2ï¼›æ¥ç€æˆ‘ä»¬åˆåˆ›å»ºä¸€ä¸ªç±»å‹åŒæ ·ä¸ºvtkImageDataçš„å¯¹è±¡image2ï¼ŒåŒæ ·ä¹Ÿæ˜¯æŠŠreaderçš„è¾“å‡ºèµ‹å€¼ç»™image2ï¼Œè¿™æ—¶ï¼Œimage2ä¹ŸæŒ‡å‘readerçš„è¾“å‡ºï¼Œäº¦å³readerçš„è¾“å‡ºåˆå¤šäº†ä¸€ä¸ªå¼•ç”¨ï¼Œæ‰€ä»¥è¾“å‡ºçš„reader-&gt;GetOutput()å’Œimage2çš„å¼•ç”¨è®¡æ•°å€¼å˜æˆäº†3ã€‚</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212011520669.png" style="zoom:80%;" /></p><p>ä¸€æ—¦æŸä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°ç­‰äº0æ—¶ï¼Œå°±è¡¨æ˜æ²¡æœ‰åˆ«çš„å¯¹è±¡å†å¼•ç”¨å®ƒï¼Œå®ƒçš„ä½¿å‘½ä¹Ÿå®£å‘Šå®Œæˆï¼Œç¨‹åºå°±ä¼šè‡ªåŠ¨çš„ææ„è¿™ä¸ªå¯¹è±¡ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹é‡Œï¼Œæˆ‘ä»¬çœ‹ä¸åˆ°å¼•ç”¨è®¡æ•°å‡å°‘çš„ç›¸å…³ä»£ç ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†æ™ºèƒ½æŒ‡é’ˆvtkSmartPointerã€‚</p><hr /><h2 id="æ™ºèƒ½æŒ‡é’ˆ">æ™ºèƒ½æŒ‡é’ˆğŸ¥¶</h2><p>æ™ºèƒ½æŒ‡é’ˆä¼šè‡ªåŠ¨ç®¡ç†å¼•ç”¨è®¡æ•°çš„å¢åŠ ä¸å‡å°‘ï¼Œå¦‚æœæ£€æµ‹åˆ°æŸå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å€¼å‡å°‘ä¸º0ï¼Œåˆ™ä¼šè‡ªåŠ¨åœ°é‡Šæ”¾è¯¥å¯¹è±¡çš„èµ„æºï¼Œä»è€Œè¾¾åˆ°è‡ªåŠ¨ç®¡ç†å†…å­˜çš„ç›®çš„ã€‚</p><p>VTKé‡Œï¼Œè¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡å¯ä»¥ç”¨ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯ä½¿ç”¨vtkObjectBaseé‡Œçš„é™æ€æˆå‘˜å˜é‡New()ï¼Œç”¨Delete()æ–¹æ³•ææ„ï¼›å¦ä¸€ç§å°±æ˜¯æˆ‘ä»¬ç¤ºä¾‹é‡Œä½¿ç”¨å¤šæ¬¡çš„ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆvtkSmartPointer<T>ã€‚</p><p>å¯¹äºç¬¬ä¸€ç§æ–¹æ³•ï¼Œç”¨New()åˆ›å»ºçš„å¯¹è±¡ï¼Œç¨‹åºæœ€åå¿…é¡»è¦è°ƒç”¨Delete()æ–¹æ³•é‡Šæ”¾å¯¹åº”çš„å†…å­˜ï¼Œè€Œä¸”ç”±äºvtkObjectBaseåŠå…¶å­ç±»çš„æ„é€ å‡½æ•°éƒ½æ˜¯å£°æ˜ä¸ºå—ä¿æŠ¤çš„ï¼Œè¿™æ„å‘³ç€å®ƒä»¬ä¸èƒ½åœ¨æ ˆåŒº(æ ˆåŒºä¸Šçš„å†…å­˜æ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…ä¸é‡Šæ”¾çš„ï¼Œå †åŒºä¸Šçš„å†…å­˜åˆ™æ˜¯ç”±ç¨‹åºå‘˜åˆ†é…å’Œæ‰‹åŠ¨é‡Šæ”¾çš„ã€‚)ä¸Šåˆ†é…å†…å­˜ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">//åˆ›å»ºvtkBMPReaderå¯¹è±¡</span><br>vtkBMPReader*reader = vtkBMPReader::<span class="hljs-built_in">New</span>(); <br>...<br><span class="hljs-comment">//ç¨‹åºæœ€åè¦è°ƒç”¨Delete()ï¼Œè¿™é‡Œå¹¶æ²¡æœ‰ç›´æ¥ææ„å¯¹è±¡ï¼Œè€Œæ˜¯ä½¿å¼•ç”¨è®¡æ•°å€¼å‡1ã€‚</span><br>reader-&gt;<span class="hljs-built_in">Delete</span>();<br></code></pre></div></td></tr></table></figure><p>ç”¨New()åˆ›å»ºçš„å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰ç”¨Delete()æ–¹æ³•åˆ é™¤çš„è¯ï¼Œç¨‹åºæœ‰å¯èƒ½ä¼šå‡ºç°å†…å­˜æ³„æ¼ï¼Œå³ç”¨æˆ·è´Ÿè´£å¯¹è±¡å†…å­˜çš„ç®¡ç†ã€‚</p><p>å¦‚æœä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆåˆ›å»ºçš„å¯¹è±¡ï¼Œåˆ™æ— éœ€æ‰‹åŠ¨è°ƒç”¨Delete()æ–¹æ³•è®©å¼•ç”¨è®¡æ•°å‡å°‘ï¼Œå› ä¸ºå¼•ç”¨è®¡æ•°çš„å¢åŠ ä¸å‡å°‘éƒ½æ˜¯ç”±æ™ºèƒ½æŒ‡é’ˆè‡ªåŠ¨å®Œæˆçš„ã€‚ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆæ—¶ï¼Œé¦–å…ˆæ˜¯è¦åŒ…å«æ™ºèƒ½æŒ‡é’ˆçš„å¤´æ–‡ä»¶ï¼š<code>#include "vtkSmartPointer.h"</code>ã€‚vtkSmartPointeræ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œæ‰€éœ€çš„æ¨¡æ¿å‚æ•°å°±æ˜¯å¾…åˆ›å»ºçš„å¯¹è±¡çš„ç±»åï¼Œå¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">// æ³¨æ„ç­‰å·ä¸¤ç«¯éƒ½è¦åŠ ä¸ŠvtkSmartPointer</span><br>vtkSmartPointer&lt;vtkImageData&gt;image = vtkSmartPointer&lt;vtkImageData&gt;::<span class="hljs-built_in">New</span>();<br></code></pre></div></td></tr></table></figure><p>æ™ºèƒ½æŒ‡é’ˆå¯ä»¥åšå‡½æ•°è¿”å›å€¼ã€ç±»æˆå‘˜å˜é‡ã€‚åœ¨åšç±»æˆå‘˜å˜é‡æ—¶ï¼Œä¸éœ€è¦åœ¨ææ„å‡½æ•°ä¸­è¿›è¡Œåˆ é™¤ã€‚</p><p><strong>å½“ä½ åˆ›å»ºä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆç±»å‹çš„å¯¹è±¡ï¼Œç„¶åæ”¹å˜å®ƒçš„æŒ‡å‘ï¼Œè¿™æ—¶å¼•ç”¨è®¡æ•°å°±ä¼šå‡ºé”™ã€‚</strong>ä¾‹å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++">vtkSmartPointer&lt;vtkImageData&gt; imageData = vtkSmartPointer&lt;vtkImageData&gt;::<span class="hljs-built_in">New</span>();<br>imageData = Reader-&gt;<span class="hljs-built_in">GetOutput</span>();<br></code></pre></div></td></tr></table></figure><p>ä¸Šé¢ä¸¤è¡Œä»£ç é‡Œï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªimageDataï¼Œå¹¶ç»™ä»–åˆ†é…å¥½äº†å†…å­˜ï¼Œæ¥ç€æˆ‘ä»¬åˆæŠŠimageDataæŒ‡å‘Readerçš„è¾“å‡ºï¼Œè€Œä¸æ˜¯ä¸€ç›´æŒ‡å‘æˆ‘ä»¬åˆ›å»ºçš„é‚£å—å†…å­˜ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬åªè¦ç®€å•åœ°è°ƒç”¨ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++">vtkImageData*imageData = Reader-&gt;<span class="hljs-built_in">GetOutput</span>();<br></code></pre></div></td></tr></table></figure><p>è¿™é‡Œæ²¡æœ‰å¿…è¦ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å®é™…åˆ›å»ºä»»ä½•æ–°çš„å¯¹è±¡ã€‚</p><hr /><h2 id="è¿è¡Œæ—¶ç±»å‹è¯†åˆ«rtti">è¿è¡Œæ—¶ç±»å‹è¯†åˆ«ï¼ˆRTTIï¼‰ğŸŒ</h2><p>åœ¨C++é‡Œï¼Œå¯¹è±¡ç±»å‹æ˜¯é€šè¿‡typeid(éœ€è¦åŒ…å«å¤´æ–‡ä»¶#include<type_info>)è·å–çš„ï¼›VTKé‡Œåœ¨vtkObjectBaseå®šä¹‰äº†è·å–å¯¹è±¡ç±»å‹çš„æ–¹æ³•ï¼šGetClassName()å’ŒIsA()ã€‚GetClassName()è¿”å›çš„æ˜¯è¯¥å¯¹è±¡ç±»åçš„å­—ç¬¦ä¸²(VTKç”¨ç±»åæ¥è¯†åˆ«å„ä¸ªå¯¹è±¡)ï¼Œå¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++">vtkSmartPointer&lt;vtkBMPReader&gt;Reader = vtkSmartPointer&lt;vtkBMPReader&gt;::<span class="hljs-built_in">New</span>();<br><span class="hljs-comment">//è¿”å›â€œvtkBMPReaderâ€å­—ç¬¦ä¸²</span><br>constchar* type = Reader-&gt;<span class="hljs-built_in">GetClassName</span>(); <br></code></pre></div></td></tr></table></figure><p>IsA()æ–¹æ³•ç”¨äºæµ‹è¯•æŸä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæŒ‡å®šå­—ç¬¦ä¸²çš„ç±»å‹æˆ–å…¶å­ç±»ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">// è¿™é‡ŒIsA()ä¼šè¿”å›çœŸã€‚</span><br><span class="hljs-keyword">if</span>(Reader-&gt;<span class="hljs-built_in">IsA</span>(â€œvtkImageReaderâ€) ) &#123;â€¦â€¦&#125;; <br></code></pre></div></td></tr></table></figure><p>ç±»æ¯”C++é‡Œçš„æ“ä½œRTTIæ“ä½œç¬¦ï¼Œé™¤äº†typeidä¹‹å¤–ï¼Œè¿˜æœ‰dynamic_castï¼Œä¸»è¦ç”¨äºåŸºç±»å‘å­ç±»çš„ç±»å‹è½¬æ¢ï¼Œç§°ä¸ºå‘ä¸‹è½¬å‹ã€‚VTKé‡ŒåŒæ ·æä¾›äº†ç±»ä¼¼çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯vtkObjecté‡Œå®šä¹‰çš„SafeDownCast()ï¼Œå®ƒæ˜¯vtkObjecté‡Œçš„é™æ€æˆå‘˜å‡½æ•°ï¼Œæ„å‘³ç€å®ƒæ˜¯å±äºç±»çš„ï¼Œè€Œä¸æ˜¯å±äºå¯¹è±¡çš„ï¼Œå³å¯ä»¥ç”¨vtkObject::SafeDownCast()ç›´æ¥è°ƒç”¨ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++">vtkSmartPointer&lt;vtkImageReader&gt;ReaderBase = vtkSmartPointer&lt;vtkImageReader&gt;::<span class="hljs-built_in">New</span>();<br>vtkBMPReader* bmpReader = vtkBMPReader::<span class="hljs-built_in">SafeDownCast</span>(ReaderBase);<br></code></pre></div></td></tr></table></figure><p>ä¸dynamic_castç±»ä¼¼ï¼ŒSafeDownCastä¹Ÿæ˜¯è¿è¡Œæ—¶æ‰è½¬æ¢çš„ï¼Œè¿™ç§è½¬æ¢åªæœ‰å½“bmpReaderçš„ç±»å‹ç¡®å®æ˜¯ReaderBaseçš„æ´¾ç”Ÿç±»æ—¶æ‰æœ‰æ•ˆï¼Œå¦åˆ™è¿”å›ç©ºæŒ‡é’ˆã€‚</p><p>é™¤äº†è¿è¡Œæ—¶ç±»å‹è¯†åˆ«ï¼ŒvtkObjectBaseè¿˜æä¾›äº†ç”¨äºè°ƒè¯•çš„çŠ¶æ€è¾“å‡ºæ¥å£Print()ã€‚è™½ç„¶vtkObjectBaseé‡Œé™¤äº†Print()è¿˜æä¾›PrintSelf()ã€PrintHeader()ã€PrintTrailer()ç­‰å…¬å…±æ¥å£ï¼Œä½†åœ¨è°ƒè¯•VTKç¨‹åºæ—¶ï¼Œå¦‚æœéœ€è¦è¾“å‡ºæŸä¸ªå¯¹è±¡çš„çŠ¶æ€ä¿¡æ¯æ—¶ï¼Œä¸€èˆ¬éƒ½æ˜¯è°ƒç”¨Print()å‡½æ•°ï¼Œå¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++">bmpReader-&gt;<span class="hljs-built_in">Print</span>(std::cout);<br></code></pre></div></td></tr></table></figure><hr /><h2 id="vtkobject">vtkObjectğŸ‘¾</h2><p>vtkObjecté‡Œå®šä¹‰äº†ä¸ç¨‹åºè°ƒè¯•ç›¸å…³çš„ä¸€äº›å…¬å…±æ¥å£ï¼ŒåŒ…æ‹¬ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-built_in">DebugOn</span>() | <span class="hljs-built_in">DebugOff</span>() | <span class="hljs-built_in">GetDebug</span>() | <span class="hljs-built_in">SetDebug</span>(unsignedchar)<br><span class="hljs-built_in">SetGlobalWarningDisplay</span>(<span class="hljs-type">int</span>) | <span class="hljs-built_in">GetGlobalWarningDisplay</span>() | <span class="hljs-built_in">GlobalWarningDisplayOn</span>() | <span class="hljs-built_in">GlobalWarningDisplayOff</span>()<br></code></pre></div></td></tr></table></figure><p>å…¶ä¸­åå››ä¸ªæ˜¯é™æ€æˆå‘˜å‡½æ•°ã€‚</p><hr /><p>vtkObjectå®ç°äº†è§‚å¯Ÿè€…/å‘½ä»¤è®¾è®¡æ¨¡å¼</p><p>vtkObjectå®šä¹‰äº†ä¸è§‚å¯Ÿè€…Observerç›¸å…³çš„æ–¹æ³•(å¦‚ï¼ŒAddObserver()/RemoveObserver())ï¼Œè§‚å¯Ÿè€…æ¨¡å¼ä¸»è¦é’ˆå¯¹ä¸¤ä¸ªå¯¹è±¡ï¼šObjectå’ŒObserverã€‚ä¸€ä¸ªObjectå¯ä»¥æœ‰å¤šä¸ªObserverï¼Œå®ƒå®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“â€”ä¸ªObjectå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„Observerå¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥è¢«è‡ªåŠ¨æ›´æ–°ã€‚</p><p>å‘½ä»¤æ¨¡å¼å±äºå¯¹è±¡è¡Œä¸ºæ¨¡å¼ï¼Œå®ƒå°†â€”ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶æä¾›ä¸€è‡´æ€§å‘é€è¯·æ±‚çš„æ¥å£ï¼Œå½“ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå®ƒä¸ç›´æ¥æŠŠäº‹ä»¶ä¼ é€’åˆ°äº‹ä»¶è°ƒç”¨è€…ï¼Œè€Œæ˜¯åœ¨å‘½ä»¤å’Œè°ƒç”¨è€…ä¹‹é—´å¢åŠ ä¸€ä¸ªä¸­é—´è€…ï¼Œå°†è¿™ç§ç›´æ¥å…³ç³»åˆ‡æ–­ï¼ŒåŒæ—¶ä¸¤è€…ä¹‹é—´éƒ½éš”ç¦»ã€‚äº‹ä»¶è°ƒç”¨è€…åªæ˜¯å’Œæ¥å£æ‰“äº¤é“ï¼Œä¸å’Œå…·ä½“å®ç°äº¤äº’ã€‚å‘½ä»¤æ¨¡å¼çš„å®ç°æ˜¯ç”±vtkObjectBaseçš„å¦å¤–ä¸€ä¸ªé‡è¦å­ç±»vtkCommandåŠå…¶æ´¾ç”Ÿç±»å®ç°çš„ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;vtkSmartPointer.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;vtkBMPReader.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;vtkImageViewer2.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;vtkRenderWindowInteractor.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;vtkCallbackCommand.h&quot;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vtkAutoInit.h&gt;</span></span><br><span class="hljs-built_in">VTK_MODULE_INIT</span>(vtkRenderingOpenGL2);<br><span class="hljs-built_in">VTK_MODULE_INIT</span>(vtkInteractionStyle);<br><br><span class="hljs-type">long</span> pressCounts = <span class="hljs-number">0</span>;<br><br><span class="hljs-comment">//ç¬¬ä¸€æ­¥ï¼Œå®šä¹‰å›è°ƒå‡½æ•°ã€‚</span><br><span class="hljs-comment">//æ³¨æ„å›è°ƒå‡½æ•°çš„ç­¾åï¼Œä¸èƒ½æ›´æ”¹ã€‚</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MyCallbackFunc</span><span class="hljs-params">(vtkObject*, <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> eid, <span class="hljs-type">void</span>* clientdata,<span class="hljs-type">void</span> *calldata)</span></span><br><span class="hljs-function"></span>&#123;<br>std::cout&lt;&lt;<span class="hljs-string">&quot;You have clicked:&quot;</span>&lt;&lt;++pressCounts&lt;&lt;<span class="hljs-string">&quot; times.&quot;</span>&lt;&lt;std::endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vtkSmartPointer&lt;vtkBMPReader&gt; reader = vtkSmartPointer&lt;vtkBMPReader&gt;::<span class="hljs-built_in">New</span>();<br>reader-&gt;<span class="hljs-built_in">SetFileName</span>(<span class="hljs-string">&quot;lena.bmp&quot;</span>);<br>reader-&gt;<span class="hljs-built_in">Allow8BitBMPOn</span>();<br>reader-&gt;<span class="hljs-built_in">SetDebug</span>(<span class="hljs-number">0</span>);<br>reader-&gt;<span class="hljs-built_in">GlobalWarningDisplayOff</span>();<br>reader-&gt;<span class="hljs-built_in">Update</span>();<br>vtkSmartPointer&lt;vtkImageViewer2&gt; viewer = vtkSmartPointer&lt;vtkImageViewer2&gt;::<span class="hljs-built_in">New</span>();<br>viewer-&gt;<span class="hljs-built_in">SetInputData</span>(reader-&gt;<span class="hljs-built_in">GetOutput</span>());<br><br>vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; interactor = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>viewer-&gt;<span class="hljs-built_in">SetupInteractor</span>(interactor);<br>viewer-&gt;<span class="hljs-built_in">Render</span>();<br><span class="hljs-comment">//ç¬¬äºŒæ­¥ï¼Œè®¾ç½®å›è°ƒå‡½æ•°ã€‚</span><br>vtkSmartPointer&lt;vtkCallbackCommand&gt; mouseCallback = vtkSmartPointer&lt;vtkCallbackCommand&gt;::<span class="hljs-built_in">New</span>();<br>mouseCallback-&gt;<span class="hljs-built_in">SetCallback</span>(MyCallbackFunc);<br><span class="hljs-comment">//ç¬¬ä¸‰æ­¥ï¼Œå°†vtkCallbackCommandå¯¹è±¡æ·»åŠ åˆ°è§‚å¯Ÿè€…åˆ—è¡¨ã€‚</span><br>interactor-&gt;<span class="hljs-built_in">SetRenderWindow</span>(viewer-&gt;<span class="hljs-built_in">GetRenderWindow</span>());<br>interactor-&gt;<span class="hljs-built_in">AddObserver</span>(vtkCommand::LeftButtonPressEvent, mouseCallback);<br>interactor-&gt;<span class="hljs-built_in">Initialize</span>();<br>interactor-&gt;<span class="hljs-built_in">Start</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212021022024.png" style="zoom: 50%;" /></p><p>é¦–å…ˆï¼Œå®šä¹‰å›è°ƒå‡½æ•°ã€‚å›è°ƒå‡½æ•°çš„ç­¾ååªèƒ½æ˜¯ä»¥ä¸‹å½¢å¼ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MyCallbackFunc</span><span class="hljs-params">(vtkObject*obj,<span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> eid, <span class="hljs-type">void</span>* clientdata, <span class="hljs-type">void</span> *calldata)</span></span>;<br></code></pre></div></td></tr></table></figure><p>å…¶æ¬¡æ˜¯åˆ›å»ºä¸€ä¸ªvtkCallbackCommandå¯¹è±¡ï¼Œå¹¶è°ƒç”¨vtkCallbackCommand::SetCallback()è®¾ç½®ç¬¬ä¸€æ­¥å®šä¹‰çš„å›è°ƒå‡½æ•°ã€‚</p><p>æœ€åæ˜¯å°†vtkCallbackCommandå¯¹è±¡æ·»åŠ åˆ°å¯¹è±¡çš„è§‚å¯Ÿè€…åˆ—è¡¨ã€‚</p><p>ä¸‹é¢è¯´å¦ä¸€ç§ä½¿ç”¨å›è°ƒå‡½æ•°çš„æ–¹æ³•ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;vtkSmartPointer.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;vtkConeSource.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;vtkPolyDataMapper.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;vtkRenderWindow.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;vtkRenderWindowInteractor.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;vtkCamera.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;vtkActor.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;vtkRenderer.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;vtkCommand.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;vtkBoxWidget.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;vtkTransform.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;vtkInteractorStyleTrackballCamera.h&quot;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vtkAutoInit.h&gt;</span></span><br><span class="hljs-built_in">VTK_MODULE_INIT</span>(vtkRenderingOpenGL2);<br><span class="hljs-built_in">VTK_MODULE_INIT</span>(vtkInteractionStyle);<br><br><span class="hljs-comment">//ç¬¬ä¸€æ­¥</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">vtkMyCallback</span> : <span class="hljs-keyword">public</span> vtkCommand<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">static</span> vtkMyCallback* <span class="hljs-title">New</span><span class="hljs-params">()</span> </span>&#123; <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> vtkMyCallback; &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Execute</span><span class="hljs-params">(vtkObject* caller, <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> eventId, <span class="hljs-type">void</span>* callData)</span></span><br><span class="hljs-function">    </span>&#123;<br>        vtkTransform* t = vtkTransform::<span class="hljs-built_in">New</span>();<br>        vtkBoxWidget* widget = <span class="hljs-built_in">reinterpret_cast</span>&lt;vtkBoxWidget*&gt;(caller);<br>        widget-&gt;<span class="hljs-built_in">GetTransform</span>(t);<br>        widget-&gt;<span class="hljs-built_in">GetProp3D</span>()-&gt;<span class="hljs-built_in">SetUserTransform</span>(t);<br>        t-&gt;<span class="hljs-built_in">Delete</span>();<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vtkSmartPointer&lt;vtkConeSource&gt; cone = vtkSmartPointer&lt;vtkConeSource&gt;::<span class="hljs-built_in">New</span>();<br>    cone-&gt;<span class="hljs-built_in">SetHeight</span>(<span class="hljs-number">3.0</span>);<br>    cone-&gt;<span class="hljs-built_in">SetRadius</span>(<span class="hljs-number">1.0</span>);<br>    cone-&gt;<span class="hljs-built_in">SetResolution</span>(<span class="hljs-number">10</span>);<br><br>    vtkSmartPointer&lt;vtkPolyDataMapper&gt; coneMapper = vtkSmartPointer&lt;vtkPolyDataMapper&gt;::<span class="hljs-built_in">New</span>();<br>    coneMapper-&gt;<span class="hljs-built_in">SetInputConnection</span>(cone-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br><br>    vtkSmartPointer&lt;vtkActor&gt; coneActor = vtkSmartPointer&lt;vtkActor&gt;::<span class="hljs-built_in">New</span>();<br>    coneActor-&gt;<span class="hljs-built_in">SetMapper</span>(coneMapper);<br><br>    vtkSmartPointer&lt;vtkRenderer&gt; ren1 = vtkSmartPointer&lt;vtkRenderer&gt;::<span class="hljs-built_in">New</span>();<br>    ren1-&gt;<span class="hljs-built_in">AddActor</span>(coneActor);<br>    ren1-&gt;<span class="hljs-built_in">SetBackground</span>(<span class="hljs-number">0.1</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">0.4</span>);<br><br>    vtkSmartPointer&lt;vtkRenderWindow&gt; renWin = vtkSmartPointer&lt;vtkRenderWindow&gt;::<span class="hljs-built_in">New</span>();<br>    renWin-&gt;<span class="hljs-built_in">AddRenderer</span>(ren1);<br>    renWin-&gt;<span class="hljs-built_in">SetSize</span>(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>);<br><br>    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; iren = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>    iren-&gt;<span class="hljs-built_in">SetRenderWindow</span>(renWin);<br><br>    vtkSmartPointer&lt;vtkInteractorStyleTrackballCamera&gt; style = vtkSmartPointer&lt;vtkInteractorStyleTrackballCamera&gt;::<span class="hljs-built_in">New</span>();<br>    iren-&gt;<span class="hljs-built_in">SetInteractorStyle</span>(style);<br><br>    <span class="hljs-comment">//é€šè¿‡vtkBoxWidgetå¯ä»¥æ§åˆ¶coneActorçš„å˜æ¢çŸ©é˜µï¼Œä»è€Œå®ç°coneActorçš„å½¢å˜</span><br>    vtkSmartPointer&lt;vtkBoxWidget&gt; boxWidget = vtkSmartPointer&lt;vtkBoxWidget&gt;::<span class="hljs-built_in">New</span>();<br>    boxWidget-&gt;<span class="hljs-built_in">SetInteractor</span>(iren);<br>    boxWidget-&gt;<span class="hljs-built_in">SetPlaceFactor</span>(<span class="hljs-number">1.25</span>);<br>    boxWidget-&gt;<span class="hljs-built_in">SetProp3D</span>(coneActor);<br>    boxWidget-&gt;<span class="hljs-built_in">PlaceWidget</span>();<br><br>    <span class="hljs-comment">//ç¬¬äºŒæ­¥</span><br>    vtkSmartPointer&lt;vtkMyCallback&gt; callback = vtkSmartPointer&lt;vtkMyCallback&gt;::<span class="hljs-built_in">New</span>();<br>    <span class="hljs-comment">//ç¬¬ä¸‰æ­¥</span><br>    boxWidget-&gt;<span class="hljs-built_in">AddObserver</span>(vtkCommand::InteractionEvent, callback);<br><br>    <span class="hljs-comment">//æ¿€æ´»Widgetã€‚æŒ‰â€œiâ€é”®å¯ä»¥å…³é—­æˆ–æ¿€æ´»Widgetã€‚</span><br>    boxWidget-&gt;<span class="hljs-built_in">On</span>();<br><br>    iren-&gt;<span class="hljs-built_in">Initialize</span>();<br>    iren-&gt;<span class="hljs-built_in">Start</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212021108926.png" style="zoom:67%;" /></p><p>é¦–å…ˆæˆ‘ä»¬ä»vtkCommandæ´¾ç”Ÿå‡ºç±»vtkMyCallbackï¼Œè¯¥ç±»ä¸»è¦å®ç°ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯New()ï¼Œç”¨äºä¸ºåˆ›å»ºçš„å¯¹è±¡ç”³è¯·å†…å­˜ï¼›ä¸€ä¸ªæ˜¯Execute()ï¼Œè¿™æ˜¯çˆ¶ç±»vtkCommandé‡Œå®šä¹‰çš„çº¯è™šå‡½æ•°ï¼Œå…¶åŸå‹ä¸ºï¼š</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Execute</span><span class="hljs-params">(vtkObject *caller, <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> eventId,<span class="hljs-type">void</span> *callData)</span> </span>= <span class="hljs-number">0</span>;<br></code></pre></div></td></tr></table></figure><p>è¿™æ„å‘³ç€ï¼Œåªè¦ä»vtkCommandæ´¾ç”Ÿçš„ç±»ï¼Œéƒ½å¿…é¡»å®ç°è¿™ä¸ªæ–¹æ³•ã€‚è€Œè¿™ä¸ªæ–¹æ³•çš„ä½œç”¨å°±æ˜¯ä¸€æ—¦ç›‘å¬åˆ°æ‰€è¦ç›‘å¬çš„äº‹ä»¶ï¼Œå°±ä¼šè‡ªåŠ¨åœ°è°ƒç”¨è¯¥æ–¹æ³•ã€‚ç›‘å¬åˆ°äº‹ä»¶åï¼Œè¦å®Œæˆä»€ä¹ˆæ ·çš„æ“ä½œï¼Œéƒ½æ˜¯åœ¨Execute()æ–¹æ³•é‡Œå®ç°ã€‚</p><hr /><p>åœ¨vtkObject.hæ–‡ä»¶é‡Œé¢æœ‰ä¸€ä¸ªå—ä¿æŠ¤çš„æ•°æ®æˆå‘˜MTimeï¼Œä¸è¿™ä¸ªMTimeç›¸å…³çš„å…¬å…±æ¥å£æœ‰GetMTime()(è¿”å›MTimeçš„å€¼)ä»¥åŠModified()ã€‚MTimeå…¨ç§°æ˜¯ModificationTimeï¼ŒvtkObjectå®ç°äº†å¯è§†åŒ–ç®¡çº¿ã€‚</p><hr /><h2 id="å¯è§†åŒ–ç®¡çº¿">å¯è§†åŒ–ç®¡çº¿ğŸ˜</h2><p>åœ¨ä¹‹å‰çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ä»¥ä¸‹åˆ—å‡ºçš„ç±»æˆ–å…¶å­ç±»ï¼š</p><p>vtkProp; vtkAbstractMapper;vtkProperty; vtkCamera; vtkLight;vtkRenderer; vtkRenderWindow;vtkRenderWindowInteractor; vtkTransform;vtkLookupTable</p><p>æˆ‘ä»¬å‘ç°ï¼Œè¿™äº›ç±»éƒ½æ˜¯ä¸æ•°æ®æ˜¾ç¤ºæˆ–è€…è¯´æ¸²æŸ“ç›¸å…³çš„ã€‚ç”¨ä¸€ä¸ªä¸“ä¸šçš„è¯æ±‡æ¥è¯´ï¼Œå®ƒä»¬æ„æˆäº†VTKçš„æ¸²æŸ“å¼•æ“(RenderingEngine)ã€‚æ¸²æŸ“å¼•æ“ä¸»è¦è´Ÿè´£æ•°æ®çš„å¯è§†åŒ–è¡¨è¾¾ï¼Œå®ƒæ˜¯VTKé‡Œçš„ä¸¤ä¸ªé‡è¦æ¨¡å—ä¹‹ä¸€ï¼Œå¦å¤–ä¸€ä¸ªé‡è¦çš„æ¨¡å—å°±æ˜¯å¯è§†åŒ–ç®¡çº¿(VisualizationPipeline)ã€‚</p><p>å¯è§†åŒ–ç®¡çº¿æ˜¯æŒ‡ç”¨äºè·å–æˆ–åˆ›å»ºæ•°æ®ï¼Œå¤„ç†æ•°æ®ï¼Œä»¥åŠæŠŠæ•°æ®å†™å…¥æ–‡ä»¶æˆ–è€…æŠŠæ•°æ®ä¼ é€’ç»™æ¸²æŸ“å¼•æ“è¿›è¡Œæ˜¾ç¤ºï¼Œè¿™æ ·çš„ä¸€ç§ç»“æ„åœ¨VTKé‡Œå°±ç§°ä¹‹ä¸ºå¯è§†åŒ–ç®¡çº¿ã€‚æ•°æ®å¯¹è±¡(DataObject)ã€å¤„ç†å¯¹è±¡(Process Object)å’Œæ•°æ®æµæ–¹å‘(Direction of DataFlow)æ˜¯å¯è§†åŒ–ç®¡çº¿çš„ä¸‰ä¸ªåŸºæœ¬è¦ç´ ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;vtkSmartPointer.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;vtkStructuredPointsReader.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;vtkRenderer.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;vtkRenderWindow.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;vtkRenderWindowInteractor.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;vtkMarchingCubes.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;vtkPolyDataMapper.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;vtkActor.h&quot;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vtkAutoInit.h&gt;</span></span><br><span class="hljs-built_in">VTK_MODULE_INIT</span>(vtkRenderingOpenGL2);<br><span class="hljs-built_in">VTK_MODULE_INIT</span>(vtkInteractionStyle);<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//è¯»å…¥Structured_Pointsç±»å‹çš„vtkæ–‡ä»¶ã€‚</span><br>    vtkSmartPointer&lt;vtkStructuredPointsReader&gt; reader = vtkSmartPointer&lt;vtkStructuredPointsReader&gt;::<span class="hljs-built_in">New</span>();<br>    <span class="hljs-comment">// æ­¤ vtk æ–‡ä»¶åœ°å€ ï¼š https://masterwangzx.com/assets/vtk_res/head.vtk</span><br>    reader-&gt;<span class="hljs-built_in">SetFileName</span>(<span class="hljs-string">&quot;head.vtk&quot;</span>);<br><br>    <span class="hljs-comment">//ç”¨ç§»åŠ¨ç«‹æ–¹ä½“æ³•æå–ç­‰å€¼é¢ã€‚</span><br>    vtkSmartPointer&lt;vtkMarchingCubes&gt; marchingCubes = vtkSmartPointer&lt;vtkMarchingCubes&gt;::<span class="hljs-built_in">New</span>();<br>    marchingCubes-&gt;<span class="hljs-built_in">SetInputConnection</span>(reader-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br>    marchingCubes-&gt;<span class="hljs-built_in">SetValue</span>(<span class="hljs-number">0</span>, <span class="hljs-number">500</span>);<br><br>    <span class="hljs-comment">//å°†ç”Ÿæˆçš„ç­‰å€¼é¢æ•°æ®è¿›è¡ŒMapper</span><br>    vtkSmartPointer&lt;vtkPolyDataMapper&gt; mapper = vtkSmartPointer&lt;vtkPolyDataMapper&gt;::<span class="hljs-built_in">New</span>();<br>    mapper-&gt;<span class="hljs-built_in">SetInputConnection</span>(marchingCubes-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br><br>    <span class="hljs-comment">//æŠŠMapperçš„è¾“å‡ºé€å…¥æ¸²æŸ“å¼•æ“è¿›è¡Œæ˜¾ç¤º</span><br>    <span class="hljs-comment">//æ¸²æŸ“å¼•æ“éƒ¨åˆ†</span><br>    vtkSmartPointer&lt;vtkActor&gt; actor = vtkSmartPointer&lt;vtkActor&gt;::<span class="hljs-built_in">New</span>();<br>    actor-&gt;<span class="hljs-built_in">SetMapper</span>(mapper);<br><br>    vtkSmartPointer&lt;vtkRenderWindow&gt; renWin = vtkSmartPointer&lt;vtkRenderWindow&gt;::<span class="hljs-built_in">New</span>();<br>    vtkSmartPointer&lt;vtkRenderer&gt; renderer = vtkSmartPointer&lt;vtkRenderer&gt;::<span class="hljs-built_in">New</span>();<br>    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; interactor = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br><br>    renderer-&gt;<span class="hljs-built_in">AddActor</span>(actor);<br>    renWin-&gt;<span class="hljs-built_in">AddRenderer</span>(renderer);<br>    interactor-&gt;<span class="hljs-built_in">SetRenderWindow</span>(renWin);<br><br>    interactor-&gt;<span class="hljs-built_in">Initialize</span>();<br>    interactor-&gt;<span class="hljs-built_in">Start</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212021639654.png" style="zoom:67%;" /></p><p>åœ¨æˆ‘ä»¬ä¹‹å‰çš„é¡¹ç›®ä¸­ï¼Œé¡¹ç›®çš„å¯è§†åŒ–ç®¡çº¿ä¸€èˆ¬æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212021455051.png" style="zoom: 80%;" /></p><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­çš„å¯è§†åŒ–ç®¡çº¿æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212021456235.png" style="zoom:80%;" /></p><p>ä¸Šä¾‹ä¸­å¤šäº†ä¸€ä¸ªvtkMarchingCubesç”¨äºå¤„ç†è¯»å…¥çš„æ•°æ®ã€‚<strong>åœ¨VTKé‡Œï¼Œæˆ‘ä»¬æŠŠä¸vtkMarchingCubesç±»ä¼¼çš„å¯¹æ•°æ®åšå¤„ç†çš„ç±»ç§°ä¸ºFilter</strong>ã€‚æˆ‘ä»¬è¿˜å¯ä»¥æŠ½è±¡å‡ºæ›´ä¸€èˆ¬çš„VTKå¯è§†åŒ–ç®¡çº¿ç»“æ„å›¾ï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212021457013.png" style="zoom: 80%;" /></p><p>Sourceæ˜¯æŒ‡ç”¨äºåˆ›å»ºæ•°æ®(å¦‚vtkCylinderSource)æˆ–è€…è¯»å–æ•°æ®(å¦‚vtkBMPReaderã€vtkStructuredPointsReaderç­‰)çš„ç±»çš„ç»Ÿç§°ï¼Œå³VTKçš„æ•°æ®æºã€‚Sourceè¾“å‡ºçš„æ•°æ®ä½œä¸ºFilterçš„è¾“å…¥ï¼Œç»Filterå¤„ç†ä»¥å(å¯ä»¥ç»å¤šä¸ªFilterå¤„ç†)ï¼Œç”Ÿæˆæ–°çš„æ•°æ®ã€‚Filterçš„è¾“å‡ºå¯ä»¥ç›´æ¥å†™å…¥æ–‡ä»¶ï¼Œæˆ–è€…ç»Mapperå˜æ¢åé€å…¥æ¸²æŸ“å¼•æ“è¿›è¡Œæ¸²æŸ“ã€æ˜¾ç¤ºï¼Œç»“æŸå¯è§†åŒ–ç®¡çº¿ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå¯è§†åŒ–ç®¡çº¿çš„ä¸‰è¦ç´ åˆ†åˆ«æ˜¯æ•°æ®å¯¹è±¡ã€å¤„ç†å¯¹è±¡å’Œæ•°æ®æµæ–¹å‘ï¼ŒSourceã€Filterå’ŒMapperä¸€èµ·å°±æ„æˆäº†å¤„ç†å¯¹è±¡ï¼Œå®ƒä»¬çš„åŒºåˆ«æ˜¯åŸºäºæ•°æ®æµçš„åˆå§‹åŒ–ã€ç»´æŒå’Œç»ˆæ­¢ã€‚æ ¹æ®æ•°æ®çš„ç”Ÿæˆæ–¹å¼ï¼ŒSourceå¯ä»¥åˆ†ä¸ºProceduralå¯¹è±¡(å¦‚vtkCylinderSourceï¼Œé€šè¿‡ç¨‹åºä»£ç ç”Ÿæˆç›¸å…³çš„æ•°æ®)å’ŒReaderå¯¹è±¡(å¦‚vtkBMPReaderï¼Œä»å¤–éƒ¨æ–‡ä»¶ä¸­å¯¼å…¥æ•°æ®)ã€‚</p><p>å…³äºSourceã€Filterå’ŒMapperçš„åŒºåˆ«å¯ä»¥ç®€å•åœ°é€šè¿‡ä¸‹å›¾è¡¨ç¤ºã€‚Sourceæ²¡æœ‰è¾“å…¥ï¼Œä½†è‡³å°‘æœ‰ä¸€ä¸ªè¾“å‡ºï¼›Filterå¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å…¥ï¼Œäº§ç”Ÿä¸€ä¸ªæˆ–å¤šä¸ªè¾“å‡ºï¼›Mapperæ¥å—ä¸€ä¸ªæˆ–å¤šä¸ªçš„è¾“å‡ºï¼Œä½†æ²¡æœ‰è¾“å‡ºï¼Œå†™æ–‡ä»¶çš„Writer(å¦‚vtkBMPWriter)å¯ä»¥çœ‹ä½œæ˜¯Mapperï¼Œè´Ÿè´£æŠŠæ•°æ®å†™å…¥æ–‡ä»¶æˆ–è€…æµ(Stream)ä¸­ï¼Œå› æ­¤ï¼ŒMapperæ˜¯å¯è§†åŒ–ç®¡çº¿çš„ç»ˆç‚¹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¯è§†åŒ–ç®¡çº¿å’Œæ¸²æŸ“å¼•æ“(æœ‰æ—¶ä¹Ÿç§°ä¹‹ä¸ºå›¾å½¢ç®¡çº¿)çš„æ¡¥æ¢ã€‚</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212021501637.png" style="zoom:80%;" /></p><p>å¯è§†åŒ–ç®¡çº¿é‡Œå„ä¸ªæ¨¡å—çš„è¿æ¥æ˜¯é€šè¿‡æ¥å£SetInputConnection()å’ŒGetOutputPort()æ¥å®Œæˆçš„ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++">marchingCubes-&gt;<span class="hljs-built_in">SetInputConnection</span>(reader-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br></code></pre></div></td></tr></table></figure><p>ä¸Šè¡Œä»£ç æŠŠreaderçš„è¾“å‡º(ç”±GetOutputPort()å¾—åˆ°)ä½œä¸ºmarchingCubesçš„è¾“å…¥(SetInputConnection()è®¾ç½®å…¶è¾“å…¥)ã€‚</p><p>vtkMarchingCubesä½œä¸ºFilteråªæ¥å—ä¸€ä¸ªè¾“å…¥ï¼ŒFilteræ¦‚æ‹¬èµ·æ¥æœ‰ä»¥ä¸‹ä¸‰ç§ç±»å‹ï¼šå•ä¸ªè¾“å…¥ï¼Œäº§ç”Ÿå•ä¸ªè¾“å‡ºï¼›å¤šä¸ªè¾“å…¥ï¼Œäº§ç”Ÿå•ä¸ªè¾“å‡ºï¼Œä½†è¾“å‡ºçš„æ•°æ®å¯æœ‰å¤šç§ç”¨é€”ï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬è¯»å…¥æ•°æ®ä»¥åï¼Œå¯ä»¥å¯¹å…¶ä½œç­‰å€¼é¢æå–ï¼Œå¦å¤–è¿˜å¯ä»¥é’ˆå¯¹è¯»å…¥çš„æ•°æ®ç”Ÿæˆè½®å»“çº¿(Outline)ï¼›ç¬¬ä¸‰ç§Filteræ˜¯å•ä¸ªè¾“å…¥ï¼Œäº§ç”Ÿå¤šä¸ªè¾“å‡ºã€‚</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212021505275.png" style="zoom:75%;" /></p><hr /><p>å¯è§†åŒ–ç®¡çº¿è¿æ¥å®Œæˆåï¼Œå¿…é¡»æœ‰ä¸€ç§æœºåˆ¶æ¥æ§åˆ¶ç®¡çº¿çš„æ‰§è¡Œã€‚æ¯”å¦‚æŸäº›æ—¶å€™ï¼Œå¯¹æŸä¸€éƒ¨åˆ†æ•°æ®åšäº†æ”¹å˜ï¼Œæˆ‘ä»¬å¸Œæœ›å¾—åˆ°çš„ç»“æœæ˜¯ï¼šæ”¹å˜çš„è¿™éƒ¨åˆ†æ•°æ®åœ¨å¯è§†åŒ–ç®¡çº¿é‡Œä½œæ›´æ–°ï¼Œè€Œå…¶ä»–æ²¡åšæ”¹å˜çš„æ•°æ®åˆ™ä¸è¦å»æƒŠåŠ¨å®ƒã€‚ä¸‹å›¾ä¸­ï¼Œå‡å¦‚FilterDçš„è¾“å…¥å‘ç”Ÿäº†å˜åŒ–ï¼ŒEå’ŒFæ˜¯ä¾èµ–äºDçš„è¾“å…¥çš„ï¼Œæ‰€ä»¥çº¢è‰²è™šçº¿æ¡†å†…çš„éƒ¨åˆ†æ˜¯éœ€è¦é‡æ–°æ‰§è¡Œçš„ç®¡çº¿ï¼Œè€ŒCå’ŒGæ˜¯å¦å¤–ä¸€ä¸ªåˆ†æ”¯ï¼ŒDè¾“å…¥æ”¹å˜ä¸å½±å“Cå’ŒGï¼Œæ‰€ä»¥ï¼Œä¸ºäº†èŠ‚çœè¿è¡Œæ—¶é—´ï¼ŒCå’ŒGæ˜¯ä¸éœ€è¦é‡æ–°æ‰§è¡Œçš„ã€‚æ¯•ç«Ÿå¯¹äºä¸‰ç»´çš„åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œä¸€èˆ¬æ‰€å¤„ç†çš„æ•°æ®éƒ½æ˜¯å¤§å¾—æƒŠäººçš„ï¼Œå¦‚æœçœŸèƒ½åšåˆ°è¿™æ ·ï¼Œä¹Ÿæœ‰åˆ©äºæé«˜ç¨‹åºçš„è¿è¡Œé€Ÿç‡ã€‚</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212021521475.png" style="zoom:80%;" /></p><p>VTKé‡‡ç”¨ä¸€ç§å«åšâ€œæƒ°æ€§èµ‹å€¼â€(LazyEvaluation)çš„æ–¹æ¡ˆæ¥æ§åˆ¶ç®¡çº¿çš„æ‰§è¡Œï¼Œæƒ°æ€§èµ‹å€¼æ˜¯æŒ‡æ ¹æ®æ¯ä¸ªå¯¹è±¡çš„å†…éƒ¨ä¿®æ”¹æ—¶é—´æ¥å†³å®šä»€ä¹ˆæ—¶å€™æ‰§è¡Œç®¡çº¿ï¼Œåªæœ‰å½“ä½ æˆ–è€…ç¨‹åºå‘å‡ºâ€œè¯·æ±‚æ•°æ®â€æ—¶ï¼Œç®¡çº¿æ‰ä¼šè¢«æ‰§è¡Œ(å‰é¢æåˆ°vtkObjecté‡Œæœ‰ä¸€ä¸ªé‡è¦çš„æˆå‘˜å˜é‡MTimeï¼Œç®¡çº¿é‡Œçš„æ¯ä¸ªä»vtkObjectæ´¾ç”Ÿçš„ç±»çš„å¯¹è±¡éƒ½ä¼šè·Ÿè¸ªè‡ªå·±çš„å†…éƒ¨ä¿®æ”¹æ—¶é—´ï¼Œå½“é‡åˆ°â€œè¯·æ±‚æ•°æ®â€æ—¶ï¼Œè¯¥å¯¹è±¡ä¼šæ¯”è¾ƒè¿™ä¸ªä¿®æ”¹æ—¶é—´ï¼Œå¦‚æœå‘ç°ä¿®æ”¹æ—¶é—´å‘ç”Ÿäº†æ”¹å˜ï¼Œå¯¹è±¡å°±ä¼šæ‰§è¡Œã€‚)ã€‚æ¢è¨€ä¹‹ï¼ŒVTKæ˜¯é‡‡ç”¨å‘½ä»¤é©±åŠ¨(DemandDriven)çš„æ–¹æ³•æ¥æ§åˆ¶ç®¡çº¿çš„æ‰§è¡Œï¼Œè¿™ç§æ–¹æ³•çš„å¥½å¤„æ˜¯ï¼Œå½“å¯¹æ•°æ®å¯¹è±¡ä½œäº†æ›´æ”¹æ—¶ï¼Œä¸å¿…ç«‹å³ä½œè®¡ç®—ï¼Œåªæœ‰å½“å‘å‡ºè¯·æ±‚æ—¶æ‰å¼€å§‹å¤„ç†ï¼Œè¿™æ ·èƒ½æœ€å°åŒ–è®¡ç®—æ‰€éœ€çš„æ—¶é—´ï¼Œä»¥ä¾¿æ›´æµç•…åœ°ä¸æ•°æ®è¿›è¡Œäº¤äº’ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vtkSmartPointer&lt;vtkBMPReader&gt; reader = vtkSmartPointer&lt;vtkBMPReader&gt;::<span class="hljs-built_in">New</span>();<br>    reader-&gt;<span class="hljs-built_in">SetFileName</span>(<span class="hljs-string">&quot;lena.bmp&quot;</span>);<br>    vtkImageData* imageData = reader-&gt;<span class="hljs-built_in">GetOutput</span>();<br>    <span class="hljs-comment">// åˆ é™¤ä¸‹é¢è¿™è¡Œä»£ç æ˜¯æœ‰é—®é¢˜çš„</span><br>    <span class="hljs-comment">// reader-&gt;Update();</span><br>    <span class="hljs-type">int</span> extent[<span class="hljs-number">6</span>];<br>    imageData-&gt;<span class="hljs-built_in">GetExtent</span>(extent);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Extent of image:&quot;</span> &lt;&lt; extent[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot;,&quot;</span> &lt;&lt; extent[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot;,&quot;</span> &lt;&lt; extent[<span class="hljs-number">2</span>] &lt;&lt; <span class="hljs-string">&quot;,&quot;</span><br>        &lt;&lt; extent[<span class="hljs-number">3</span>] &lt;&lt; <span class="hljs-string">&quot;,&quot;</span> &lt;&lt; extent[<span class="hljs-number">4</span>] &lt;&lt; <span class="hljs-string">&quot;,&quot;</span> &lt;&lt; extent[<span class="hljs-number">5</span>] &lt;&lt; std::endl;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç æ˜¯æ— æ³•è¾“å‡ºè¿™å¼ å›¾ç‰‡çš„é•¿å®½ç­‰ä¿¡æ¯çš„ï¼Œä¸»è¦åŸå› åœ¨äºåœ¨æ¸²æŸ“å¼•æ“çš„æœ€åï¼Œå½“æˆ‘ä»¬è°ƒç”¨Render()å‡½æ•°çš„æ—¶å€™ï¼ŒActorå°±ä¼šæ”¶åˆ°æ¸²æŸ“è¯·æ±‚ï¼Œæ¥ç€Actorä¼šè¯·æ±‚Mapperç»™å®ƒå‘é€æ•°æ®ï¼Œè€ŒMapperåˆä¼šè¯·æ±‚ä¸Šä¸€å±‚çš„Filterçš„æ•°æ®ï¼ŒFilteræœ€åå»è¯·æ±‚Sourceç»™å®ƒæ•°æ®ï¼Œäºæ˜¯ï¼Œæ•´æ¡ç®¡çº¿å°±è¢«æ‰§è¡Œã€‚é™¤éåƒä¸Šé¢çš„ä»£ç æ®µé‡Œåˆ—å‡ºçš„ï¼Œè¯»å…¥æ•°æ®ä»¥åï¼Œä¸­é—´æƒ³è¦è¾“å‡ºæŸäº›ä¿¡æ¯ï¼Œåœ¨å¾—åˆ°è¿™äº›ä¿¡æ¯ä¹‹å‰ï¼Œä½ å°±åº”è¯¥æ˜¾æ€§åœ°è°ƒç”¨Update()å‡½æ•°ã€‚</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212021537566.png" style="zoom:80%;" /></p><hr /><h2 id="æ€»ç»“">æ€»ç»“ğŸª”</h2><p>vtkObjectBaseå’ŒvtkObjectæ˜¯VTKé‡Œä¸¤ä¸ªé‡è¦çš„çˆ¶ç±»ï¼ŒvtkObjectBaseé‡‡ç”¨å¼•ç”¨è®¡æ•°å’Œæ™ºèƒ½æŒ‡é’ˆçš„æŠ€æœ¯æ¥ç®¡ç†VTKå¯¹è±¡çš„å†…å­˜åˆ†é…ä¸å›æ”¶ã€‚vtkObjectBaseå®šä¹‰äº†è¿è¡Œæ—¶ç±»å‹è¯†åˆ«åŠçŠ¶æ€ä¿¡æ¯è¾“å‡ºçš„ç›¸å…³æ¥å£ï¼Œæœ‰åŠ©äºè°ƒè¯•VTKåº”ç”¨ç¨‹åºã€‚VTKæ¡†æ¶é‡Œï¼Œå¤§å¤šæ•°çš„ç±»éƒ½æ˜¯ä»vtkObjectæ´¾ç”Ÿï¼ŒvtkObjectå®ç°äº†è§‚å¯Ÿè€…/å‘½ä»¤(Observer/Command)è®¾è®¡æ¨¡å¼ï¼Œå†…éƒ¨ç»´æŠ¤ä¸€ä¸ªä¿®æ”¹æ—¶é—´ï¼Œç”¨äºæ§åˆ¶å¯è§†åŒ–ç®¡çº¿çš„æ‰§è¡Œã€‚å¯è§†åŒ–ç®¡çº¿æ˜¯VTKé‡Œçš„é‡è¦æ¦‚å¿µï¼Œç®¡çº¿çš„è¿æ¥åº”è¯¥ä½¿ç”¨SetInputConnection()/GetOutputPort()æ¥å£è¿›è¡Œè¿æ¥ã€‚VTKé‡‡ç”¨â€œæƒ°æ€§èµ‹å€¼â€(LazyEvaluation)çš„æ–¹æ¡ˆæ¥æ§åˆ¶ç®¡çº¿çš„æ‰§è¡Œï¼Œåªæœ‰å½“å‘å‡ºâ€œè¯·æ±‚æ•°æ®â€æ—¶ï¼Œç®¡çº¿æ‰ä¼šè¢«æ‰§è¡Œã€‚å¥½å¤„æ˜¯ï¼Œå½“å¯¹æ•°æ®å¯¹è±¡ä½œäº†æ›´æ”¹æ—¶ï¼Œä¸å¿…ç«‹å³ä½œè®¡ç®—ï¼Œåªæœ‰å½“å‘å‡ºè¯·æ±‚æ—¶æ‰å¼€å§‹å¤„ç†ï¼Œè¿™æ ·èƒ½æœ€å°åŒ–è®¡ç®—æ‰€éœ€çš„æ—¶é—´ï¼Œä»¥ä¾¿æ›´æµç•…åœ°è¿›è¡Œäº¤äº’ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>VTK</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VTKå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰</title>
    <link href="/post/702033f1.html"/>
    <url>/post/702033f1.html</url>
    
    <content type="html"><![CDATA[<p>æœ¬ç³»åˆ—æ–‡ç« ä¸»è¦å¯¹<ahref="https://vtk.org/">VTK</a>çš„ç›¸å…³çŸ¥è¯†è¿›è¡Œæ€»ç»“ã€‚ <span id="more"></span></p><h1 id="vtkå­¦ä¹ ç¬”è®°ä¸€">VTKå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰</h1><h2 id="vtkç®€ä»‹">VTKç®€ä»‹ğŸ—»</h2><p>VTKï¼Œå…¨ç§°ä¸ºVisualizationToolkitï¼Œä¹Ÿå°±æ˜¯å¯è§†åŒ–å·¥å…·åŒ…ã€‚æ˜¯ä¸€ä¸ªå¼€æºã€è·¨å¹³å°ã€å¯è‡ªç”±è·å–ã€æ”¯æŒå¹¶è¡Œå¤„ç†çš„å›¾å½¢åº”ç”¨å‡½æ•°åº“ã€‚</p><p>ä¸‰ç»´è®¡ç®—æœºå›¾å½¢ã€å›¾åƒå¤„ç†åŠå¯è§†åŒ–æ˜¯VTKä¸»è¦çš„åº”ç”¨æ–¹å‘ã€‚</p><p>VTKåŒ…å«ä¸€ä¸ªC++ç±»åº“ï¼Œä¼—å¤šçš„ç¿»è¯‘æ¥å£å±‚ï¼ˆä¸å…¶ä»–è¯­è¨€å¯¹æ¥ï¼‰ã€‚VTKæ˜¯åœ¨ä¸‰ç»´å‡½æ•°åº“OpenGLçš„åŸºç¡€ä¸Šé‡‡ç”¨é¢å‘å¯¹è±¡çš„è®¾è®¡æ–¹æ³•å‘å±•èµ·æ¥çš„ï¼Œå®ƒå°†æˆ‘ä»¬åœ¨å¯è§†åŒ–å¼€å‘è¿‡ç¨‹ä¸­ä¼šç»å¸¸é‡åˆ°çš„ç»†èŠ‚å±è”½èµ·æ¥ï¼Œå¹¶å°†ä¸€äº›å¸¸ç”¨çš„ç®—æ³•å°è£…èµ·æ¥ã€‚</p><h2 id="vtkitkç¼–è¯‘å®‰è£…">VTKã€ITKç¼–è¯‘å®‰è£…ğŸ¦œ</h2><p>å…ˆæ¥è¯´ä¸€ä¸‹æˆ‘çš„ç”µè„‘é…ç½®ï¼š</p><ul><li>VS2019 + QT5.15.2 + VTK8.2.0 + ITK5.2.1 + CMake3.24.3</li></ul><p>å‚è€ƒè¿™ä¸ª<ahref="https://blog.csdn.net/qq_41955524/article/details/120876226?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522166927919116782429785768%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=166927919116782429785768&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-1-120876226-null-null.142%5Ev66%5Econtrol,201%5Ev3%5Econtrol_1,213%5Ev2%5Et3_esquery_v3&amp;utm_term=vs2019%2Bvtk8.2.0%2Bqt5.15&amp;spm=1018.2226.3001.4187">é“¾æ¥</a>è¿›è¡Œå®‰è£…å³å¯</p><p><strong>éœ€è¦æ³¨æ„çš„ç‚¹ï¼š</strong></p><ol type="1"><li>QTã€VTKã€ITKéƒ½è¦è®¾ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œæ¯æ¬¡ä¿®æ”¹å®Œç¯å¢ƒå˜é‡éƒ½åº”è¯¥é‡å¯ç”µè„‘ï¼ˆæ‰€ä»¥è¦é‡å¯ä¸‰æ¬¡ï¼‰ã€‚</li><li>å®‰è£…VTKæ—¶ï¼Œæˆ‘é‡åˆ°çš„æƒ…å†µæ˜¯CMakeé€‰ä¸­QTç»„ä»¶ï¼Œåœ¨VSé‡Œç¼–è¯‘ä¼šæŠ¥é”™ï¼Œåªéœ€è¦ç»™æŠ¥é”™çš„æ–‡ä»¶<code>include</code>ç›¸åº”çš„å¤´æ–‡ä»¶å³å¯ã€‚</li></ol><h2 id="vtkåŸºæœ¬æ¦‚å¿µ">VTKåŸºæœ¬æ¦‚å¿µâš—ï¸</h2><h4 id="ä¸€ä¸ªä¾‹å­">ä¸€ä¸ªä¾‹å­ğŸ¦‰</h4><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;vtkSmartPointer.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;vtkRenderWindow.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;vtkRenderer.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;vtkRenderWindowInteractor.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;vtkInteractorStyleTrackballCamera.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;vtkCylinderSource.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;vtkPolyDataMapper.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;vtkActor.h&quot;</span></span><br><br><span class="hljs-comment">// å› ä¸ºæˆ‘æ²¡æœ‰ä½¿ç”¨ CMake è¿›è¡Œé…ç½®ï¼Œæ‰€ä»¥éœ€è¦ä¸‹é¢è¯­å¥</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vtkAutoInit.h&gt;</span></span><br><span class="hljs-built_in">VTK_MODULE_INIT</span>(vtkRenderingOpenGL2);<br><span class="hljs-built_in">VTK_MODULE_INIT</span>(vtkInteractionStyle);<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vtkSmartPointer&lt;vtkCylinderSource&gt; cylinder = vtkSmartPointer&lt;vtkCylinderSource&gt;::<span class="hljs-built_in">New</span>();<br>    cylinder-&gt;<span class="hljs-built_in">SetHeight</span>(<span class="hljs-number">3.0</span>);<br>    cylinder-&gt;<span class="hljs-built_in">SetRadius</span>(<span class="hljs-number">1.0</span>);<br>    cylinder-&gt;<span class="hljs-built_in">SetResolution</span>(<span class="hljs-number">10</span>);<br><br>    vtkSmartPointer&lt;vtkPolyDataMapper&gt; cylinderMapper = vtkSmartPointer&lt;vtkPolyDataMapper&gt;::<span class="hljs-built_in">New</span>();<br>    cylinderMapper-&gt;<span class="hljs-built_in">SetInputConnection</span>(cylinder-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br><br>    vtkSmartPointer&lt;vtkActor&gt; cylinderActor = vtkSmartPointer&lt;vtkActor&gt;::<span class="hljs-built_in">New</span>();<br>    cylinderActor-&gt;<span class="hljs-built_in">SetMapper</span>(cylinderMapper);<br><br>    vtkSmartPointer&lt;vtkRenderer&gt; renderer = vtkSmartPointer&lt;vtkRenderer&gt;::<span class="hljs-built_in">New</span>();<br>    renderer-&gt;<span class="hljs-built_in">AddActor</span>(cylinderActor);<br>    renderer-&gt;<span class="hljs-built_in">SetBackground</span>(<span class="hljs-number">0.1</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">0.4</span>);<br><br>    vtkSmartPointer&lt;vtkRenderWindow&gt; renWin = vtkSmartPointer&lt;vtkRenderWindow&gt;::<span class="hljs-built_in">New</span>();<br>    renWin-&gt;<span class="hljs-built_in">AddRenderer</span>(renderer);<br>    renWin-&gt;<span class="hljs-built_in">SetSize</span>(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>);<br><br>    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; iren = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>    iren-&gt;<span class="hljs-built_in">SetRenderWindow</span>(renWin);<br><br>    vtkSmartPointer&lt;vtkInteractorStyleTrackballCamera&gt; style = vtkSmartPointer&lt;vtkInteractorStyleTrackballCamera&gt;::<span class="hljs-built_in">New</span>();<br>    iren-&gt;<span class="hljs-built_in">SetInteractorStyle</span>(style);<br><br>    iren-&gt;<span class="hljs-built_in">Initialize</span>();<br>    iren-&gt;<span class="hljs-built_in">Start</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202211271511223.png" style="zoom:80%;" /></p><p>ä¸‹é¢è§£æç›¸åº”ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++">vtkSmartPointer&lt;vtkCylinderSource&gt; cylinder = vtkSmartPointer&lt;vtkCylinderSource&gt;::<span class="hljs-built_in">New</span>();<br>cylinder-&gt;<span class="hljs-built_in">SetHeight</span>(<span class="hljs-number">3.0</span>);<br>cylinder-&gt;<span class="hljs-built_in">SetRadius</span>(<span class="hljs-number">1.0</span>);<br>cylinder-&gt;<span class="hljs-built_in">SetResolution</span>(<span class="hljs-number">10</span>);<br></code></pre></div></td></tr></table></figure><p><code>vtkCylinderSource</code>ï¼šæ´¾ç”Ÿè‡ªvtkPolyDataAlgorithmã€‚é¡¾åæ€ä¹‰ï¼ŒvtkCylinderSourceç”Ÿæˆçš„æ•°æ®ç±»å‹å°±æ˜¯PolyData(vtkPolyData)çš„ï¼Œå®ƒä¸»è¦æ˜¯ç”Ÿæˆä¸€ä¸ªä¸­å¿ƒåœ¨æ¸²æŸ“åœºæ™¯åŸç‚¹çš„æŸ±ä½“ï¼ŒæŸ±ä½“çš„é•¿è½´æ²¿ç€Yè½´ï¼ŒæŸ±ä½“çš„é«˜åº¦ã€æˆªé¢åŠå¾„ç­‰éƒ½å¯ä»¥ä»»æ„æŒ‡å®šã€‚</p><p>vtkCylinderSource::SetHeight() ï¼šè®¾ç½®æŸ±ä½“çš„é«˜ã€‚</p><p>vtkCylinderSource::SetRadius() ï¼šè®¾ç½®æŸ±ä½“æ¨ªæˆªé¢çš„åŠå¾„ã€‚</p><p>vtkCylinderSource::SetResolution()ï¼šè®¾ç½®æŸ±ä½“æ¨ªæˆªé¢çš„ç­‰è¾¹å¤šè¾¹å½¢çš„è¾¹æ•°ã€‚</p><hr /><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++">vtkSmartPointer&lt;vtkPolyDataMapper&gt; cylinderMapper = vtkSmartPointer&lt;vtkPolyDataMapper&gt;::<span class="hljs-built_in">New</span>();<br>cylinderMapper-&gt;<span class="hljs-built_in">SetInputConnection</span>(cylinder-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br></code></pre></div></td></tr></table></figure><p><code>vtkPolyDataMapper</code>ï¼šæ¸²æŸ“å¤šè¾¹å½¢å‡ ä½•æ•°æ®(vtkPolyData)ï¼Œæ´¾ç”Ÿè‡ªç±»vtkMapperï¼Œå°†è¾“å…¥çš„æ•°æ®è½¬æ¢ä¸ºå‡ ä½•å›¾å…ƒ(ç‚¹ã€çº¿ã€å¤šè¾¹å½¢)è¿›è¡Œæ¸²æŸ“ã€‚</p><p>vtkPolyDataMapper::SetInputConnection()ï¼šVTKå¯è§†åŒ–ç®¡çº¿çš„è¾“å…¥æ•°æ®æ¥å£ï¼Œå¯¹åº”çš„å¯è§†åŒ–ç®¡çº¿è¾“å‡ºæ•°æ®çš„æ¥å£ä¸ºGetOutputPort()ï¼›VTK5.0ä¹‹å‰çš„ç‰ˆæœ¬ä½¿ç”¨SetInput()å’ŒGetOutput()ä½œä¸ºè¾“å…¥è¾“å‡ºæ¥å£ï¼ŒVTK5.0ä»¥åç‰ˆæœ¬ä¿ç•™äº†å¯¹è¿™ä¸¤ä¸ªæ¥å£çš„æ”¯æŒã€‚</p><hr /><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++">vtkSmartPointer&lt;vtkActor&gt; cylinderActor = vtkSmartPointer&lt;vtkActor&gt;::<span class="hljs-built_in">New</span>();<br>cylinderActor-&gt;<span class="hljs-built_in">SetMapper</span>(cylinderMapper);<br></code></pre></div></td></tr></table></figure><p><code>vtkActor</code>ï¼šæ´¾ç”Ÿè‡ªvtkPropç±»ï¼Œæ¸²æŸ“åœºæ™¯ä¸­æ•°æ®çš„å¯è§†åŒ–è¡¨è¾¾æ˜¯é€šè¿‡vtkPropçš„å­ç±»è´Ÿè´£çš„ã€‚æ¯”å¦‚ï¼Œæœ¬ä¾‹è¦æ¸²æŸ“ä¸€ä¸ªæŸ±ä½“ï¼ŒæŸ±ä½“çš„æ•°æ®ç±»å‹æ˜¯vtkPolyDataï¼Œæ•°æ®è¦åœ¨åœºæ™¯ä¸­æ¸²æŸ“æ—¶ï¼Œä¸æ˜¯ç›´æ¥æŠŠæ•°æ®åŠ å…¥æ¸²æŸ“åœºæ™¯å°±å¯ä»¥ï¼Œå¾…æ¸²æŸ“çš„æ•°æ®æ˜¯ä»¥vtkPropçš„å½¢å¼å­˜åœ¨äºæ¸²æŸ“åœºæ™¯ä¸­ã€‚ä¸‰ç»´ç©ºé—´ä¸­æ¸²æŸ“å¯¹è±¡æœ€å¸¸ç”¨çš„vtkPropå­ç±»æ˜¯vtkActor(è¡¨è¾¾åœºæ™¯ä¸­çš„å‡ ä½•æ•°æ®)å’ŒvtkVolume(è¡¨è¾¾åœºæ™¯ä¸­çš„ä½“æ•°æ®)ï¼›äºŒç»´ç©ºé—´ä¸­çš„æ•°æ®åˆ™æ˜¯ç”¨vtkActor2Dè¡¨è¾¾ã€‚vtkPropå­ç±»è´Ÿè´£ç¡®å®šæ¸²æŸ“åœºæ™¯ä¸­å¯¹è±¡çš„ä½ç½®ã€å¤§å°å’Œæ–¹å‘ä¿¡æ¯ã€‚Propä¾èµ–äºä¸¤ä¸ªå¯¹è±¡(Propä¸€è¯æ¥æºäºæˆå‰§é‡Œçš„â€œé“å…·â€ï¼Œåœ¨VTKé‡Œè¡¨ç¤ºçš„æ˜¯æ¸²æŸ“åœºæ™¯ä¸­å¯ä»¥çœ‹å¾—åˆ°çš„å¯¹è±¡ã€‚)ï¼Œä¸€ä¸ªæ˜¯Mapper(vtkMapper)å¯¹è±¡ï¼Œè´Ÿè´£å­˜æ”¾æ•°æ®å’Œæ¸²æŸ“ä¿¡æ¯ï¼Œå¦ä¸€ä¸ªæ˜¯å±æ€§(vtkProperty)å¯¹è±¡ï¼Œè´Ÿè´£æ§åˆ¶é¢œè‰²ã€ä¸é€æ˜åº¦ç­‰å‚æ•°ã€‚</p><hr /><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++">vtkSmartPointer&lt;vtkRenderer&gt; renderer = vtkSmartPointer&lt;vtkRenderer&gt;::<span class="hljs-built_in">New</span>();<br>renderer-&gt;<span class="hljs-built_in">AddActor</span>(cylinderActor);<br>renderer-&gt;<span class="hljs-built_in">SetBackground</span>(<span class="hljs-number">0.1</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">0.4</span>);<br><br>vtkSmartPointer&lt;vtkRenderWindow&gt; renWin = vtkSmartPointer&lt;vtkRenderWindow&gt;::<span class="hljs-built_in">New</span>();<br>renWin-&gt;<span class="hljs-built_in">AddRenderer</span>(renderer);<br>renWin-&gt;<span class="hljs-built_in">SetSize</span>(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>);<br></code></pre></div></td></tr></table></figure><p><code>vtkRenderWindow</code>ï¼šå°†æ“ä½œç³»ç»Ÿä¸VTKæ¸²æŸ“å¼•æ“è¿æ¥åˆ°ä¸€èµ·ã€‚ä¸åŒå¹³å°ä¸‹çš„vtkRenderWindowå­ç±»è´Ÿè´£æœ¬åœ°è®¡ç®—æœºç³»ç»Ÿä¸­çª—å£åˆ›å»ºå’Œæ¸²æŸ“è¿‡ç¨‹ç®¡ç†ã€‚å½“ä½¿ç”¨VTKå¼€å‘åº”ç”¨ç¨‹åºæ—¶ï¼Œåªéœ€è¦ä½¿ç”¨å¹³å°æ— å…³çš„vtkRendererWindowç±»ï¼Œè¿è¡Œæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ›¿æ¢ä¸ºå¹³å°ç›¸å…³çš„vtkRendererWindowå­ç±»ã€‚æ¯”å¦‚ï¼ŒWindowsä¸‹è¿è¡Œä¸Šè¿°çš„VTKç¨‹åºï¼Œå®é™…åˆ›å»ºçš„æ˜¯vtkWin32OpenGLRenderWindow(vtkRenderWindowçš„å­ç±»)å¯¹è±¡ã€‚vtkRenderWindowä¸­åŒ…å«äº†vtkRendereré›†åˆã€æ¸²æŸ“å‚æ•°ï¼Œå¦‚ç«‹ä½“æ˜¾ç¤ºï¼ˆStereoï¼‰ï¼Œåèµ°æ ·ï¼Œè¿åŠ¨æ¨¡ç³Šï¼ˆMotionBlurï¼‰å’Œç„¦ç‚¹æ·±åº¦ï¼ˆFocal Depthï¼‰ç­‰ã€‚</p><p>vtkRenderWindow::AddRenderer() ï¼šåŠ å…¥vtkRendererå¯¹è±¡ã€‚</p><p>vtkRenderWindow::SetSize()ï¼šè¯¥æ–¹æ³•æ˜¯ä»vtkRenderWindowçš„çˆ¶ç±»vtkWindowç»§æ‰¿è¿‡æ¥çš„ï¼Œç”¨äºè®¾ç½®çª—å£çš„å¤§å°ï¼Œä»¥åƒç´ ä¸ºå•ä½ã€‚</p><p><code>vtkRenderer</code>ï¼šè´Ÿè´£ç®¡ç†åœºæ™¯çš„æ¸²æŸ“è¿‡ç¨‹ã€‚ç»„æˆåœºæ™¯çš„æ‰€æœ‰å¯¹è±¡åŒ…æ‹¬Propï¼Œç…§ç›¸æœº(Camera)å’Œå…‰ç…§(Light)éƒ½è¢«é›†ä¸­åœ¨ä¸€ä¸ªvtkRendererå¯¹è±¡ä¸­ã€‚ä¸€ä¸ªvtkRenderWindowä¸­å¯ä»¥æœ‰å¤šä¸ªvtkRendererå¯¹è±¡ï¼Œè€Œè¿™äº›vtkRendererå¯ä»¥æ¸²æŸ“åœ¨çª—å£ä¸­ä¸åŒçš„çŸ©å½¢åŒºåŸŸä¸­(å³è§†å£)ï¼Œæˆ–è€…è¦†ç›–æ•´ä¸ªçª—å£åŒºåŸŸã€‚</p><p>vtkRenderer::AddActor() ï¼šæ·»åŠ vtkPropç±»å‹çš„å¯¹è±¡åˆ°æ¸²æŸ“åœºæ™¯ä¸­ã€‚</p><p>vtkRenderer::SetBackground()ï¼šè¯¥æ–¹æ³•æ˜¯ä»vtkRendererçš„çˆ¶ç±»vtkViewportç»§æ‰¿çš„ï¼Œç”¨äºè®¾ç½®æ¸²æŸ“åœºæ™¯çš„èƒŒæ™¯é¢œè‰²ï¼Œç”¨Rã€Gã€Bçš„æ ¼å¼è®¾ç½®ï¼Œä¸‰ä¸ªåˆ†é‡çš„å–å€¼ä¸º0.0~1.0ã€‚(0.0,0.0, 0.0)ä¸ºé»‘è‰²ï¼Œ(1.0,1.0,1.0)ä¸ºç™½è‰²ã€‚é™¤äº†å¯ä»¥è®¾ç½®å•ä¸€çš„èƒŒæ™¯é¢œè‰²ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è®¾ç½®æ¸å˜çš„èƒŒæ™¯é¢œè‰²ï¼ŒvtkViewport::SetBackground2()ç”¨äºè®¾ç½®æ¸å˜çš„å¦å¤–ä¸€ç§é¢œè‰²ï¼Œä½†æ˜¯è¦ä½¿èƒŒæ™¯é¢œè‰²æ¸å˜ç”Ÿæ•ˆæˆ–è€…å…³é—­ï¼Œå¿…é¡»è°ƒç”¨ä»¥ä¸‹çš„æ–¹æ³•ï¼š</p><p>vtkViewport::SetGradientBackground(bool)ï¼šå‚æ•°ä¸º0æ˜¯å…³é—­ï¼Œåä¹‹ï¼Œæ‰“å¼€ã€‚</p><p>vtkViewport::GradientBackgroundOn() ï¼šæ‰“å¼€èƒŒæ™¯é¢œè‰²æ¸å˜æ•ˆæœï¼Œç›¸å½“äºè°ƒç”¨æ–¹æ³•SetGradientBackground(1)ã€‚</p><p>vtkViewport::GradientBackgroundOff()ï¼šå…³é—­èƒŒæ™¯é¢œè‰²æ¸å˜æ•ˆæœã€‚ç›¸å½“äºè°ƒç”¨æ–¹æ³•SetGradientBackground(0)ã€‚</p><hr /><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++">vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; iren = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>iren-&gt;<span class="hljs-built_in">SetRenderWindow</span>(renWin);<br></code></pre></div></td></tr></table></figure><p><code>vtkRenderWindowInteractor</code>ï¼šæä¾›å¹³å°ç‹¬ç«‹çš„å“åº”é¼ æ ‡ã€é”®ç›˜å’Œæ—¶é’Ÿäº‹ä»¶çš„äº¤äº’æœºåˆ¶ï¼Œé€šè¿‡VTKçš„Command/Observerè®¾è®¡æ¨¡å¼å°†ç›‘å¬åˆ°çš„ç‰¹å®šå¹³å°çš„é¼ æ ‡ã€é”®ç›˜å’Œæ—¶é’Ÿäº‹ä»¶äº¤ç”±vtkInteractorObserveræˆ–å…¶å­ç±»ï¼Œå¦‚vtkInteractorStyleè¿›è¡Œå¤„ç†ã€‚vtkInteractorStyleç­‰ç›‘å¬è¿™äº›æ¶ˆæ¯å¹¶è¿›è¡Œå¤„ç†ä»¥å®Œæˆæ—‹è½¬ã€æ‹‰ä¼¸å’Œæ”¾ç¼©ç­‰è¿åŠ¨æ§åˆ¶ã€‚vtkRenderWindowInteractorè‡ªåŠ¨å»ºç«‹ä¸€ä¸ªé»˜è®¤çš„3Dåœºæ™¯äº¤äº’å™¨æ ·å¼(InteractorStyle)ï¼švtkInteractorStyleSwitchï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–çš„äº¤äº’å™¨æ ·å¼ï¼Œæˆ–è€…æ˜¯åˆ›å»ºè‡ªå·±çš„äº¤äº’å™¨æ ·å¼ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œé€‰æ‹©äº†å…¶ä»–çš„äº¤äº’å™¨æ ·å¼æ¥æ›¿ä»£é»˜è®¤çš„ï¼švtkInteractorStyleTrackballCameraã€‚</p><p>vtkRenderWindowInteractor::SetRenderWindow()ï¼šè®¾ç½®æ¸²æŸ“çª—å£ï¼Œæ¶ˆæ¯æ˜¯é€šè¿‡æ¸²æŸ“çª—å£æ•è·åˆ°çš„ï¼Œæ‰€ä»¥å¿…é¡»è¦ç»™äº¤äº’å™¨å¯¹è±¡è®¾ç½®æ¸²æŸ“çª—å£ã€‚</p><p>vtkRenderWindowInteractor::SetInteractorStyle()ï¼šå®šä¹‰äº¤äº’å™¨æ ·å¼ï¼Œé»˜è®¤çš„äº¤äº’æ ·å¼ä¸ºvtkInteractorStyleSwitchã€‚</p><p>vtkRenderWindowInteractor::Initialize()ï¼šä¸ºå¤„ç†çª—å£äº‹ä»¶åšå‡†å¤‡ï¼Œäº¤äº’å™¨å·¥ä½œä¹‹å‰å¿…é¡»å…ˆè°ƒç”¨è¿™ä¸ªæ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ã€‚</p><p>vtkRenderWindowInteractor::Start()ï¼šå¼€å§‹è¿›å…¥äº‹ä»¶å“åº”å¾ªç¯ï¼Œäº¤äº’å™¨å¤„äºç­‰å¾…çŠ¶æ€ï¼Œç­‰å¾…ç”¨æˆ·äº¤äº’äº‹ä»¶çš„å‘ç”Ÿã€‚è¿›å…¥äº‹ä»¶å“åº”å¾ªç¯ä¹‹å‰å¿…é¡»å…ˆè°ƒç”¨Initialize()æ–¹æ³•ã€‚</p><hr /><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++">vtkSmartPointer&lt;vtkInteractorStyleTrackballCamera&gt; style = vtkSmartPointer&lt;vtkInteractorStyleTrackballCamera&gt;::<span class="hljs-built_in">New</span>();<br>iren-&gt;<span class="hljs-built_in">SetInteractorStyle</span>(style);<br></code></pre></div></td></tr></table></figure><p><code>vtkInteractorStyleTrackballCamera</code>ï¼šäº¤äº’å™¨æ ·å¼çš„ä¸€ç§ï¼Œè¯¥æ ·å¼ä¸‹ï¼Œç”¨æˆ·æ˜¯é€šè¿‡æ§åˆ¶ç›¸æœºå¯¹ç‰©ä½“ä½œæ—‹è½¬ã€æ”¾å¤§ã€ç¼©å°ç­‰æ“ä½œã€‚åšä¸ªç±»æ¯”ï¼šåœ¨ç…§ç›¸çš„æ—¶å€™å¦‚æœè¦æƒ³ç‰©ä½“çœ‹èµ·æ¥æ˜¾å¾—å¤§ä¸€äº›ï¼Œå¯ä»¥é‡‡å–ä¸¤ç§åšæ³•ï¼Œç¬¬ä¸€ç§åšæ³•æ˜¯ç›¸æœºä¸åŠ¨ï¼Œè®©æˆ‘ä»¬è¦æ‹çš„ç‰©ä½“é è¿‘æˆ‘ä»¬ï¼›ç¬¬äºŒç§åšæ³•æ˜¯ç‰©ä½“ä¸è¦åŠ¨ï¼Œæˆ‘ä»¬æŠŠç›¸æœºé è¿‘ç‰©ä½“ï¼Œè¿™æ ·ç‰©ä½“çœ‹èµ·æ¥ä¹Ÿæ˜¯å¤§ä¸€äº›ã€‚ç¬¬äºŒç§åšæ³•å°±æ˜¯vtkInteractorStyleTrackballCameraçš„é£æ ¼ã€‚å…¶çˆ¶ç±»ä¸ºvtkInteractorStyleï¼Œé™¤äº†vtkInteractorStyleTrackballCameraä¹‹å¤–ï¼ŒVTKè¿˜å®šä¹‰äº†å…¶ä»–å¤šç§äº¤äº’å™¨æ ·å¼ï¼Œå¦‚vtkInteractorStyleImageï¼Œä¸»è¦ç”¨äºæ˜¾ç¤ºäºŒç»´å›¾åƒæ—¶çš„äº¤äº’ã€‚</p><hr /><p>ä¸‹é¢ä¸¾ä¸€ä¸ªä¾‹å­è¿›è¡Œæ±‡æ€»ï¼š</p><p>å½“æˆ‘ä»¬å»çœ‹èˆå°å‰§çš„æ—¶å€™ï¼Œæˆ‘ä»¬ååœ¨å°ä¸‹ï¼Œå±•ç°åœ¨æˆ‘ä»¬é¢å‰çš„æ˜¯ä¸€ä¸ªèˆå°ï¼Œèˆå°ä¸Šæœ‰å„å¼çš„ç¯å…‰ï¼Œå„æ ·çš„æ¼”å‘˜ã€‚æ¼”å‘˜å‡ºåœºçš„æ—¶å€™è‚¯å®šæ˜¯ä¼šå…ˆåŒ–å¦†ï¼Œæœ‰äº›æ¼”å‘˜å¯èƒ½ä¼šæ‰“æ‰®æˆé«˜å¯Œå¸…ï¼Œæœ‰äº›æ¼”å‘˜å¯èƒ½ä¼šåŒ–å¦†æˆç™½å¯Œç¾ã€‚è§‚ä¼—æœ‰æ—¶è¿˜ä¼šä¸å°ä¸Šçš„æ¼”å‘˜æœ‰ä¸€å®šçš„äº’åŠ¨ã€‚</p><p>æ•´ä¸ªå‰§é™¢å°±å¥½æ¯”VTKç¨‹åºçš„æ¸²æŸ“çª—å£(vtkRenderWindow)ï¼›èˆå°å°±ç›¸å½“äºæ¸²æŸ“åœºæ™¯(vtkRenderer)ï¼›è€Œé‚£äº›é«˜å¯Œå¸…ã€ç™½å¯Œç¾å°±æ˜¯æˆ‘ä»¬ç¨‹åºä¸­çš„Actor(æœ‰äº›æ–‡çŒ®ç¿»è¯‘æˆâ€œæ¼”å‘˜â€ï¼Œæœ‰äº›ç¿»è¯‘æˆâ€œè§’è‰²â€ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸ä½œç¿»è¯‘)ï¼›å°ä¸Šçš„æ¼”å‘˜ä¸å°ä¸‹è§‚ä¼—çš„äº’åŠ¨å¯ä»¥çœ‹æˆæ˜¯ç¨‹åºçš„äº¤äº’(vtkRenderWindowInteractor)ï¼›æ¼”å‘˜ä¸è§‚ä¼—çš„äº’åŠ¨æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œç°åœºçš„è§‚ä¼—å¯ä»¥ç›´æ¥ä¸Šå°è·Ÿæ¼”å‘˜ä»¬æ¡æ‰‹æ‹¥æŠ±ï¼Œç”µè§†æœºå‰çš„å¯ä»¥å‘çŸ­ä¿¡ï¼Œç”µè„‘ã€ç§»åŠ¨ç»ˆç«¯ç”¨æˆ·ç­‰å¯ä»¥å¾®åšå…³æ³¨ã€åŠ ç²‰ç­‰ç­‰ï¼Œè¿™å°±å¥½æ¯”æˆ‘ä»¬ç¨‹åºé‡Œçš„äº¤äº’å™¨æ ·å¼(vtkInteractorStyle)ï¼›èˆå°ä¸Šçš„æ¼”å‘˜æˆ‘ä»¬éƒ½èƒ½ä¸€ä¸€åˆ†è¾¨å‡ºæ¥ï¼Œä¸ä¼šæŠŠé«˜å¯Œå¸…å¼„æ··æ·†ï¼Œæ˜¯å› ä¸ºä»–ä»¬åŒ–çš„å¦†ã€ç©¿çš„æœé¥°éƒ½ä¸ä¸€æ ·ï¼Œè¿™å°±ç›¸å½“äºæˆ‘ä»¬ç¨‹åºé‡ŒvtkActorçš„ä¸åŒå±æ€§(vtkProperty)ï¼›å°ä¸‹è§‚ä¼—çš„çœ¼ç›å¯ä»¥çœ‹ä½œæ˜¯vtkCameraï¼Œå‰æ’çš„è§‚ä¼—å› ä¸ºç¦»å¾—è¿‘ï¼Œçœ‹å°ä¸Šæ¼”å‘˜ä¼šæ˜¾å¾—æ¯”è¾ƒé«˜å¤§ï¼Œè€Œåæ’çš„è§‚ä¼—çœ‹åˆ°çš„ä¼šæ˜¾å¾—å°ç‚¹ï¼Œæ¯ä¸ªè§‚ä¼—çœ‹åˆ°çš„ä¸œè¥¿åœ¨ä»–çš„ä¸–ç•Œé‡Œéƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥æ¸²æŸ“åœºæ™¯Rendereré‡Œçš„vtkCameraå¯¹è±¡ä¹Ÿæ˜¯åªæœ‰ä¸€ä¸ªï¼›èˆå°ä¸Šçš„ç¯å…‰å¯ä»¥æœ‰å¤šä¸ªï¼Œæ‰€ä»¥æ¸²æŸ“åœºæ™¯é‡Œçš„vtkLightä¹Ÿå­˜åœ¨å¤šä¸ªã€‚</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202211301440523.png" style="zoom:80%;" /></p><hr /><h4 id="vtkactoråŠç›¸å…³å±æ€§">vtkActoråŠç›¸å…³å±æ€§â›º</h4><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/img/202211301529774.png" /></p><p>æ•°æ®æ¸²æŸ“æ—¶ä¸æ˜¯ç›´æ¥åŠ å…¥æ¸²æŸ“åœºæ™¯ï¼Œè€Œæ˜¯ä»¥vtkPropçš„å½¢å¼å­˜åœ¨çš„ï¼Œå› æ­¤æœ‰å¿…è¦å†è¯¦ç»†è®¨è®ºä¸€ä¸‹vtkPropåŠå…¶å­ç±»ï¼Œä¸Šå›¾ä¸ºvtkPropçš„ç±»å›¾ã€‚</p><p>vtkPropæ˜¯ä»»ä½•å­˜åœ¨äºæ¸²æŸ“çª—å£çš„å¯¹è±¡çš„çˆ¶ç±»ï¼ŒåŒ…æ‹¬äºŒç»´æˆ–è€…ä¸‰ç»´çš„å¯¹è±¡ã€‚æ¢è¨€ä¹‹ï¼Œåœ¨æ¸²æŸ“çª—å£é‡Œèƒ½å¤Ÿçœ‹å¾—åˆ°çš„å¯¹è±¡(è¿™äº›å¯¹è±¡éƒ½ç§°ä½œProp)ï¼Œéƒ½æ˜¯ä»vtkPropç»§æ‰¿è¿‡æ¥çš„ã€‚åœ¨è¿™ä¸ªç±»é‡Œå®šä¹‰äº†ç”¨äºæ‹¾å–(Picking)ã€LOD(Level-Of-Detail)æ“ä½œçš„æ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿå®šä¹‰äº†ç¡®å®šPropæ˜¯å¦å¯è§ã€å¯å¦è¢«æ‹¾å–ä»¥åŠå¯å¦è¢«æ‹–åŠ¨ç­‰çš„å˜é‡ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-built_in">SetVisibility</span> (<span class="hljs-type">int</span>) | <span class="hljs-built_in">GetVisibility</span> () | <span class="hljs-built_in">VisibilityOn</span> () | <span class="hljs-built_in">VisibilityOff</span> () | <span class="hljs-built_in">Pick</span> () | <span class="hljs-built_in">SetPickable</span> (<span class="hljs-type">int</span>) | <span class="hljs-built_in">GetPickable</span> () | <span class="hljs-built_in">PickableOn</span>() | <span class="hljs-built_in">PickableOff</span> () | <span class="hljs-built_in">SetDragable</span> (<span class="hljs-type">int</span>) | <span class="hljs-built_in">GetDragable</span> () | <span class="hljs-built_in">DragableOn</span> () | <span class="hljs-built_in">DragableOff</span>()<br></code></pre></div></td></tr></table></figure><p>vtkProp3Dä»vtkPropç›´æ¥æ´¾ç”Ÿï¼Œæ˜¯å¯¹è±¡åœ¨ä¸‰ç»´æ¸²æŸ“åœºæ™¯ä¸­çš„è¡¨è¾¾å½¢å¼ã€‚æŠŠä¸€ä¸ªå¯¹è±¡æ”¾ç½®åœ¨ä¸‰ç»´åœºæ™¯æ—¶ï¼Œé¦–å…ˆè¦è€ƒè™‘çš„æ˜¯è¿™ä¸ªå¯¹è±¡åˆ°åº•è¦æ”¾åœ¨åœºæ™¯ä¸­çš„å“ªä¸ªä½ç½®ï¼Œæ‘†æ”¾çš„æ–¹å‘å¦‚ä½•ç­‰ç­‰ï¼Œè¿™äº›ä¿¡æ¯åœ¨vtkProp3Då†…éƒ¨ç”¨ä¸€ä¸ª4Ã—4çš„çŸ©é˜µæ¥è¡¨ç¤ºã€‚é»˜è®¤æ„é€ çš„vtkProp3Då¯¹è±¡åŸç‚¹ä¸º(0,0,0)ï¼Œæ”¾ç½®çš„ä½ç½®ä¸º(0,0,0)ï¼Œæ”¾ç½®çš„æ–¹å‘ä¸º(0,0,0)ï¼Œç”¨æˆ·è‡ªå®šä¹‰çš„çŸ©é˜µæˆ–è€…å˜æ¢ä¸ºç©ºã€‚ä»¥ä¸‹æ˜¯vtkProp3Då®šä¹‰çš„ç”¨äºæ”¾ç½®vtkProp3Då¯¹è±¡çš„æ–¹æ³•ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">// è®¾ç½®/è·å–å„å‘åŒæ€§çš„ç¼©æ”¾æ¯”ä¾‹ã€‚</span><br><span class="hljs-built_in">SetScale</span> (<span class="hljs-type">double</span>) / <span class="hljs-built_in">GetScale</span> ();<br><span class="hljs-comment">// è®¾ç½®/è·å–å„åŒå¼‚æ€§çš„ç¼©æ”¾æ¯”ä¾‹ã€‚</span><br><span class="hljs-built_in">SetScale</span> (<span class="hljs-type">double</span>, <span class="hljs-type">double</span>,<span class="hljs-type">double</span>) / <span class="hljs-built_in">GetScale</span> (<span class="hljs-type">double</span>);<br><span class="hljs-comment">// åˆ†åˆ«ç»•Xã€Yã€Zè½´æ—‹è½¬æŒ‡å®šè§’åº¦ã€‚ </span><br><span class="hljs-built_in">RotateX</span> (<span class="hljs-type">double</span>) / <span class="hljs-built_in">RotateY</span> (<span class="hljs-type">double</span>) / <span class="hljs-built_in">RotateZ</span> (<span class="hljs-type">double</span>);<br><span class="hljs-comment">// ç»•æŒ‡å®šçš„æ–¹å‘æ—‹è½¬æŒ‡å®šçš„è§’åº¦ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºæ—‹è½¬è§’åº¦ï¼Œåä¸‰ä¸ªå‚æ•°ç¡®å®šä¸€ä¸ªæ–¹å‘ã€‚</span><br><span class="hljs-built_in">RotateWXYZ</span> (<span class="hljs-type">double</span>, <span class="hljs-type">double</span>,<span class="hljs-type">double</span>, <span class="hljs-type">double</span>);<br><span class="hljs-comment">// ç”¨äºè·å–å¯¹åº”çš„æ•°æ®ã€‚</span><br><span class="hljs-built_in">GetOrientationWXYZ</span>();<br><span class="hljs-comment">// è®¾ç½®vtkProp3Då¯¹è±¡çš„æ–¹å‘ã€‚å…ˆç»•Zè½´æ—‹è½¬ï¼Œç„¶åç»•Xè½´ï¼Œæœ€åç»•Yè½´æ—‹è½¬ï¼Œä»è€Œç¡®å®švtkProp3Då¯¹è±¡çš„æ–¹å‘ã€‚</span><br><span class="hljs-built_in">SetOrientation</span> (<span class="hljs-type">double</span>, <span class="hljs-type">double</span>,<span class="hljs-type">double</span>) / <span class="hljs-built_in">GetOrientation</span> ();<br><span class="hljs-comment">// åœ¨vtkProp3Då¯¹è±¡çš„å½“å‰æ–¹å‘å¢åŠ ä¸€ä¸ªç»™å®šçš„åç§»ã€‚</span><br><span class="hljs-built_in">AddOrientation</span> (<span class="hljs-type">double</span>, <span class="hljs-type">double</span>,<span class="hljs-type">double</span>);<br><span class="hljs-comment">// åœ¨ä¸–ç•Œåæ ‡ç³»ä¸‹ï¼ŒæŒ‡å®š/è·å–vtkProp3Då¯¹è±¡çš„ä½ç½®ã€‚</span><br><span class="hljs-built_in">SetPosition</span> (<span class="hljs-type">double</span>, <span class="hljs-type">double</span>,<span class="hljs-type">double</span>) / <span class="hljs-built_in">GetPosition</span> ();<br><span class="hljs-comment">// åœ¨vtkProp3Då¯¹è±¡çš„å½“å‰ä½ç½®å¢åŠ ä¸€ä¸ªåç§»ã€‚</span><br><span class="hljs-built_in">AddPosition</span> (<span class="hljs-type">double</span>, <span class="hljs-type">double</span>,<span class="hljs-type">double</span>);<br><span class="hljs-comment">// è®¾ç½®/è·å–vtkProp3Då¯¹è±¡çš„åŸç‚¹ã€‚</span><br><span class="hljs-built_in">SetOrigin</span> (<span class="hljs-type">double</span>, <span class="hljs-type">double</span>,<span class="hljs-type">double</span> ) / <span class="hljs-built_in">GetOrigin</span> ();<br></code></pre></div></td></tr></table></figure><hr /><p>Propä¾èµ–äºä¸¤ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯Mapper(vtkMapper)å¯¹è±¡ï¼Œè´Ÿè´£å­˜æ”¾æ•°æ®å’Œæ¸²æŸ“ä¿¡æ¯ï¼Œå¦ä¸€ä¸ªæ˜¯å±æ€§(vtkProperty)å¯¹è±¡ï¼Œè´Ÿè´£æ§åˆ¶é¢œè‰²ã€ä¸é€æ˜åº¦ç­‰å‚æ•°ã€‚å¯¹åº”çš„è¿™ä¸¤ä¸ªæ–¹æ³•å°±æ˜¯åœ¨ç±»vtkActoré‡Œå®šä¹‰çš„ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">// è®¾ç½®å®šä¹‰Actorå‡ ä½•å½¢çŠ¶çš„Mapperã€‚</span><br><span class="hljs-built_in">SetMapper</span> (vtkMapper *);<br><span class="hljs-comment">// è®¾ç½®Actorçš„å±æ€§ï¼ŒåŒ…æ‹¬è¡¨é¢å±æ€§ï¼Œå¦‚ç¯å¢ƒå…‰(Ambient)ã€æ•£å°„å…‰(Diffuse)ã€é•œé¢å…‰(Specular)ã€é¢œè‰²ã€é€æ˜åº¦ç­‰ï¼›çº¹ç†æ˜ å°„ï¼›ç‚¹çš„å¤§å°ï¼Œçº¿çš„å®½åº¦è®¾ç½®ç­‰ã€‚</span><br><span class="hljs-built_in">SetProperty</span> (vtkProperty *);<br></code></pre></div></td></tr></table></figure><p>æ¯ä¸€ä¸ªActoréƒ½æœ‰ä¸€ä¸ªå±æ€§å¯¹è±¡(vtkPropertyçš„å®ä¾‹)ä¸ä¹‹ç›¸å…³è”ï¼Œå¦‚æœæ²¡æœ‰ç»™ActtoræŒ‡å®šç›¸åº”çš„å±æ€§ï¼ŒVTKä¼šæŒ‡å®šé»˜è®¤çš„å±æ€§å¯¹è±¡ã€‚</p><hr /><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">// è®¾ç½® vtkActorçš„ Property</span><br><span class="hljs-comment">// æ–¹æ³•ä¸€</span><br><span class="hljs-comment">// cylinderActor-&gt;GetProperty()-&gt;SetColor(1, 0, 0);</span><br><br><span class="hljs-comment">// æ–¹æ³•äºŒï¼ˆæ¨èï¼‰</span><br>vtkSmartPointer&lt;vtkProperty&gt; cylinderProperty = vtkSmartPointer&lt;vtkProperty&gt;::<span class="hljs-built_in">New</span>();<br>cylinderProperty-&gt;<span class="hljs-built_in">SetColor</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>cylinderActor-&gt;<span class="hljs-built_in">SetProperty</span>(cylinderProperty);<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202211301658575.png" style="zoom:80%;" /></p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++">vtkSmartPointer&lt;vtkBMPReader&gt; bmpReader = vtkSmartPointer&lt;vtkBMPReader&gt;::<span class="hljs-built_in">New</span>();<br>bmpReader-&gt;<span class="hljs-built_in">SetFileName</span>(<span class="hljs-string">&quot;lena.bmp&quot;</span>);<br><br>vtkSmartPointer&lt;vtkTexture&gt; texture = vtkSmartPointer&lt;vtkTexture&gt;::<span class="hljs-built_in">New</span>();<br>texture-&gt;<span class="hljs-built_in">SetInputConnection</span>(bmpReader-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br>texture-&gt;<span class="hljs-built_in">InterpolateOn</span>();<br><br>cylinderActor-&gt;<span class="hljs-built_in">SetTexture</span>(texture);<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202211301735964.png" style="zoom:80%;" /></p><hr /><h4 id="å…‰ç…§">å…‰ç…§ğŸŒ…</h4><p>å‰§åœºé‡Œæœ‰å„å¼å„æ ·çš„ç¯å…‰ï¼Œä¸‰ç»´æ¸²æŸ“åœºæ™¯ä¸­ä¹Ÿä¸€æ ·ï¼Œå¯ä»¥æœ‰å¤šä¸ªå…‰ç…§å­˜åœ¨ã€‚å…‰ç…§å’Œç›¸æœºæ˜¯ä¸‰ç»´æ¸²æŸ“åœºæ™¯å¿…å¤‡çš„å› ç´ ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼ŒvtkRenderä¼šè‡ªåŠ¨åœ°åˆ›å»ºé»˜è®¤çš„å…‰ç…§å’Œç›¸æœºã€‚VTKé‡Œç”¨ç±»vtkLightæ¥è¡¨ç¤ºæ¸²æŸ“åœºæ™¯ä¸­çš„å…‰ç…§ã€‚ä¸ç°å®ä¸­çš„ç¯å…‰ç±»ä¼¼ï¼ŒVTKä¸­çš„vtkLightå®ä¾‹ä¹Ÿå¯ä»¥æ‰“å¼€ã€å…³é—­ï¼Œè®¾ç½®å…‰ç…§çš„é¢œè‰²ï¼Œç…§å°„ä½ç½®(å³ç„¦ç‚¹)ï¼Œå…‰ç…§æ‰€åœ¨çš„ä½ç½®ï¼Œå¼ºåº¦ç­‰ç­‰ã€‚</p><p>vtkLightå¯ä»¥åˆ†ä¸ºä½ç½®å…‰ç…§(PositionalLightï¼Œå³èšå…‰ç¯)å’Œæ–¹å‘å…‰ç…§(DirectionLight)ã€‚ä½ç½®å…‰ç…§æ˜¯å…‰æºä½ç½®åœ¨æ¸²æŸ“åœºæ™¯ä¸­çš„æŸä¸ªä½ç½®ï¼Œå¯ä»¥æŒ‡å®šå…‰ç…§çš„è¡°å‡å€¼ã€é”¥è§’ç­‰ï¼›æ–¹å‘å…‰ç…§å³å…‰æºä½ç½®åœ¨æ— ç©·è¿œï¼Œå…‰çº¿å¯ä»¥è®¤ä¸ºæ˜¯å¹³è¡Œçš„ï¼Œæ¯”å¦‚è‡ªç„¶ç•Œä¸­çš„å¤ªé˜³å…‰ã€‚å…‰æºçš„ä½ç½®å’Œç„¦ç‚¹çš„è¿çº¿å®šä¹‰å…‰çº¿çš„æ–¹å‘ï¼Œé»˜è®¤çš„vtkLightå³ä¸ºæ–¹å‘å…‰ç…§ã€‚</p><p>vtkLightå¸¸çš„æ–¹æ³•æœ‰ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">// è®¾ç½®å…‰ç…§çš„é¢œè‰²ï¼Œä»¥RGBçš„å½¢å¼æŒ‡å®šé¢œè‰²ã€‚</span><br><span class="hljs-built_in">SetColor</span>();<br><span class="hljs-comment">// è®¾ç½®å…‰ç…§ä½ç½®ã€‚</span><br><span class="hljs-built_in">SetPosition</span>();<br><span class="hljs-comment">// è®¾ç½®å…‰ç…§ç„¦ç‚¹ã€‚</span><br><span class="hljs-built_in">SetFocalPoint</span>();<br><span class="hljs-comment">// è®¾ç½®å…‰ç…§çš„å¼ºåº¦ã€‚</span><br><span class="hljs-built_in">SetIntensity</span>();<br><span class="hljs-comment">// æ‰“å¼€æˆ–å…³é—­å¯¹åº”çš„å…‰ç…§ã€‚</span><br><span class="hljs-built_in">SetSwitch</span>() / <span class="hljs-built_in">SwitchOn</span>()/ <span class="hljs-built_in">SwitchOff</span>();<br></code></pre></div></td></tr></table></figure><p>æˆ‘ä»¬åœ¨è®²vtkPropçš„æ—¶å€™ï¼Œè¯¥ç±»æœ‰æ–¹æ³•<code>SetVisibility (int) | GetVisibility() | VisibilityOn() | VisibilityOff()</code>ç­‰æ¥æ§åˆ¶vtkPropå¯¹è±¡çš„å¯è§ä¸ä¸å¯è§çš„å±æ€§ã€‚åŒæ ·ï¼ŒvtkLighté‡Œä¹Ÿæœ‰ç±»ä¼¼å‘½åé£æ ¼çš„æ–¹æ³•ï¼š<code>SetSwitch() | GetSwitch() | SwitchOn() | SwitchOff()</code>ã€‚ä¸éš¾å‘ç°ï¼Œåœ¨VTKé‡Œï¼ŒæŸä¸ªå±æ€§çš„è®¾ç½®éƒ½æ˜¯é‡‡å–è¿™ä¸€ç±»æ–¹æ³•ï¼Œä»¥vtkLightä¸ºä¾‹ï¼ŒSwitchOn()è·ŸSetSwitch(1)å®ç°çš„æ•ˆæœæ˜¯ä¸€æ ·ï¼ŒSwitchOff()åˆ™ä¸SetSwitch(0)æ˜¯ä¸€æ ·çš„ï¼ŒGetSwitch()åˆ™æ˜¯ç”¨äºè·å–vtkLightå¯¹è±¡å…³é—­æˆ–æ‰“å¼€è¿™ä¸ªå±æ€§çš„å€¼ã€‚å¦‚æœæŸä¸ªç±»æœ‰æä¾›SetXXX()æ–¹æ³•ï¼Œä¸€èˆ¬ä¹Ÿä¼šæä¾›GetXXX()æ–¹æ³•æ¥è·å–ç›¸åº”çš„å€¼ï¼Œè¿™ä¸ªæˆ‘ä»¬åœ¨å‰é¢çš„å†…å®¹ä¹Ÿå·²ç»æœ‰ä¸€äº›äº†è§£ã€‚å†æ¯”å¦‚ï¼ŒvtkLightè¿˜æä¾›ï¼š<code>SetPositional() | GetPositional() | PositionalOn() | PositionalOff()</code>ä¸€ç±»æ–¹æ³•æ¥è®¾ç½®ä½ç½®å…‰ç…§ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++">vtkSmartPointer&lt;vtkLight&gt; myLight = vtkSmartPointer&lt;vtkLight&gt;::<span class="hljs-built_in">New</span>();<br>myLight-&gt;<span class="hljs-built_in">SetColor</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>myLight-&gt;<span class="hljs-built_in">SetPosition</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);<br>myLight-&gt;<span class="hljs-built_in">SetFocalPoint</span>(renderer-&gt;<span class="hljs-built_in">GetActiveCamera</span>()-&gt;<span class="hljs-built_in">GetFocalPoint</span>());<br>renderer-&gt;<span class="hljs-built_in">AddLight</span>(myLight);<br><br>vtkSmartPointer&lt;vtkLight&gt; myLight2 = vtkSmartPointer&lt;vtkLight&gt;::<span class="hljs-built_in">New</span>();<br>myLight2-&gt;<span class="hljs-built_in">SetColor</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);<br>myLight2-&gt;<span class="hljs-built_in">SetPosition</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">-1</span>);<br>myLight2-&gt;<span class="hljs-built_in">SetFocalPoint</span>(renderer-&gt;<span class="hljs-built_in">GetActiveCamera</span>()-&gt;<span class="hljs-built_in">GetFocalPoint</span>());<br>renderer-&gt;<span class="hljs-built_in">AddLight</span>(myLight2);<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202211302002786.png" style="zoom:80%;" /></p><p>ä¸Šè¿°å®šä¹‰äº†ä¸¤ä¸ªvtkLightå¯¹è±¡ï¼Œä¸€ä¸ªä¸ºç»¿è‰²å…‰ï¼Œä½ç½®åœ¨(0,0,1)ï¼Œç„¦ç‚¹å¯¹ç€ç›¸æœºçš„ç„¦ç‚¹ï¼›å¦ä¸€ä¸ªä¸ºè“è‰²å…‰ï¼Œä½ç½®åœ¨(0,0,-1)ï¼Œç„¦ç‚¹ä¹Ÿæ˜¯å¯¹ç€ç›¸æœºçš„ç„¦ç‚¹ï¼Œæœ€åä¸¤ä¸ªå…‰ç…§è°ƒç”¨vtkRendererçš„æ–¹æ³•AddLight()åŠ å…¥åˆ°æ¸²æŸ“åœºæ™¯ä¸­ï¼Œå› ä¸ºRendereré‡Œå¯ä»¥æœ‰å¤šä¸ªç¯ç…§ï¼Œæ‰€ä»¥ï¼ŒVTKæä¾›çš„æ¥å£æ˜¯AddLight()è€Œä¸æ˜¯SetLight()ã€‚</p><hr /><h4 id="ç›¸æœº">ç›¸æœºğŸ¦Œ</h4><p>è§‚ä¼—çš„çœ¼ç›å°±å¥½æ¯”ä¸‰ç»´æ¸²æŸ“åœºæ™¯ä¸­çš„ç›¸æœºï¼ŒVTKåˆ™æ˜¯ç”¨vtkCameraç±»æ¥è¡¨ç¤ºä¸‰ç»´æ¸²æŸ“åœºæ™¯ä¸­çš„ç›¸æœºã€‚vtkCameraè´Ÿè´£æŠŠä¸‰ç»´åœºæ™¯æŠ•å½±åˆ°äºŒç»´å¹³é¢ï¼Œå¦‚å±å¹•ã€å›¾åƒç­‰ã€‚</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202211302008165.png" style="zoom:80%;" /></p><p>å›¾ä¸­åè¯è§£é‡Šï¼š</p><ul><li>æŠ•å½±æ–¹å‘ï¼šç›¸æœºä½ç½®åˆ°ç›¸æœºç„¦ç‚¹çš„å‘é‡æ–¹å‘å³ä¸ºæŠ•å½±æ–¹å‘ã€‚</li><li>æŠ•å½±æ–¹æ³•ï¼šç¡®å®šActoræ˜¯å¦‚ä½•æ˜ å°„åˆ°åƒå¹³é¢çš„ã€‚vtkCameraå®šä¹‰äº†ä¸¤ç§æŠ•å½±æ–¹æ³•ï¼Œä¸€ç§æ˜¯æ­£äº¤æŠ•å½±(OrthographicProjection)ï¼Œä¹Ÿå«å¹³è¡ŒæŠ•å½±(ParallelProjection)ï¼Œå³è¿›å…¥ç›¸æœºçš„å…‰çº¿ä¸æŠ•å½±æ–¹å‘æ˜¯å¹³è¡Œçš„ã€‚å¦ä¸€ç§æ˜¯é€è§†æŠ•å½±(PerspectiveProjection)ï¼Œå³æ‰€æœ‰çš„å…‰çº¿ç›¸äº¤äºä¸€ç‚¹ã€‚</li><li>è§†è§’ï¼šé€è§†æŠ•å½±æ—¶éœ€è¦æŒ‡å®šç›¸æœºçš„è§†è§’(ViewAngle)ï¼Œé»˜è®¤çš„è§†è§’å¤§å°ä¸º30Âºï¼Œå¯ä»¥ç”¨æ–¹æ³•vtkCamera::SetViewAngle()è®¾ç½®ã€‚</li><li>å‰åè£å‰ªå¹³é¢ï¼šè£å‰ªå¹³é¢ä¸æŠ•å½±æ–¹å‘ç›¸äº¤ï¼Œä¸€èˆ¬ä¸æŠ•å½±æ–¹å‘ä¹Ÿæ˜¯å‚ç›´çš„ã€‚è£å‰ªå¹³é¢ä¸»è¦ç”¨äºè¯„ä¼°Actorä¸ç›¸æœºè·ç¦»çš„è¿œè¿‘ï¼Œåªæœ‰åœ¨å‰åè£å‰ªå¹³é¢ä¹‹é—´çš„Actoræ‰æ˜¯å¯è§çš„ã€‚è£å‰ªå¹³é¢çš„ä½ç½®å¯ä»¥ç”¨æ–¹æ³•vtkCamera::SetClippingRange()è®¾ç½®ã€‚</li></ul><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºä¸ç›¸æœºæŠ•å½±ç›¸å…³çš„å› ç´ ä¸»è¦æœ‰ï¼š</p><ul><li>ç›¸æœºä½ç½®ï¼šå³ç›¸æœºæ‰€åœ¨çš„ä½ç½®ï¼Œç”¨æ–¹æ³•vtkCamera::SetPosition()è®¾ç½®ã€‚</li><li>ç›¸æœºç„¦ç‚¹ï¼šç”¨æ–¹æ³•vtkCamera::SetFocusPoint()è®¾ç½®ï¼Œé»˜è®¤çš„ç„¦ç‚¹ä½ç½®åœ¨ä¸–ç•Œåæ ‡ç³»çš„åŸç‚¹ã€‚</li><li>æœä¸Šæ–¹å‘ï¼šå³å“ªä¸ªæ–¹å‘ä¸ºç›¸æœºæœä¸Šçš„æ–¹å‘ã€‚å°±å¥½æ¯”æˆ‘ä»¬ç›´ç«‹çœ‹ä¸œè¥¿ï¼Œæ–¹å‘ä¸ºå¤´æœä¸Šï¼Œçœ‹åˆ°çš„ä¸œè¥¿ä¹Ÿæ˜¯ç›´ç«‹çš„ï¼Œå¦‚æœæˆ‘ä»¬å€’ç«‹çœ‹æŸä¸ªä¸œè¥¿ï¼Œè¿™æ—¶æ–¹å‘ä¸ºå¤´æœä¸‹ï¼Œçœ‹åˆ°çš„ä¸œè¥¿å½“ç„¶å°±æ˜¯å€’ç«‹çš„ã€‚ç›¸æœºä½ç½®ã€ç›¸æœºç„¦ç‚¹å’Œæœä¸Šæ–¹å‘ä¸‰ä¸ªå› ç´ ç¡®å®šäº†ç›¸æœºçš„å®é™…æ–¹å‘ï¼Œå³ç¡®å®šç›¸æœºçš„è§†å›¾ã€‚</li></ul><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212011431910.png" style="zoom:50%;" /></p><p>ä¸Šå›¾å¯ä»¥ç›´è§‚çš„çœ‹å‡ºè®¾ç½®æ¯ä¸€ä¸ªé‡çš„ä½œç”¨ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++">vtkSmartPointer&lt;vtkCamera&gt; myCamera = vtkSmartPointer&lt;vtkCamera&gt;::<span class="hljs-built_in">New</span>();<br><span class="hljs-comment">// è®¾ç½®å‰åè£å‰ªå¹³é¢</span><br>myCamera-&gt;<span class="hljs-built_in">SetClippingRange</span>(<span class="hljs-number">0.2</span>, <span class="hljs-number">3.5</span>);<br><span class="hljs-comment">// è®¾ç½®ç„¦ç‚¹</span><br>myCamera-&gt;<span class="hljs-built_in">SetFocalPoint</span>(<span class="hljs-number">0.02</span>, <span class="hljs-number">0.03</span>, <span class="hljs-number">-0.8</span>);<br><span class="hljs-comment">// è®¾ç½®ä½ç½®</span><br>myCamera-&gt;<span class="hljs-built_in">SetPosition</span>(<span class="hljs-number">0.3</span>, <span class="hljs-number">0.6</span>, <span class="hljs-number">-0.3</span>);<br><span class="hljs-comment">// æ ¹æ®è®¾ç½®çš„ç›¸æœºä½ç½®ã€ç„¦ç‚¹ç­‰ä¿¡æ¯ï¼Œé‡æ–°è®¡ç®—è§†å¹³é¢(View Plane)çš„æ³•å‘é‡ã€‚ä¸€èˆ¬è¯¥æ³•å‘é‡ä¸è§†å¹³é¢æ˜¯å‚ç›´çš„ï¼Œ</span><br><span class="hljs-comment">// å¦‚æœä¸æ˜¯å‚ç›´çš„è¯ï¼ŒActorç­‰çœ‹èµ·æ¥ä¼šæœ‰ä¸€äº›ç‰¹æ®Šçš„æ•ˆæœï¼Œå¦‚é”™åˆ‡ã€‚</span><br>myCamera-&gt;<span class="hljs-built_in">ComputeViewPlaneNormal</span>();<br><span class="hljs-comment">// è®¾ç½®ç›¸æœºæœä¸Šæ–¹å‘</span><br>myCamera-&gt;<span class="hljs-built_in">SetViewUp</span>(<span class="hljs-number">-0.2</span>, <span class="hljs-number">0.9</span>, <span class="hljs-number">0.03</span>);<br>renderer-&gt;<span class="hljs-built_in">SetActiveCamera</span>(myCamera);<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202211302031298.png" style="zoom: 80%;" /></p><p>vtkCameraé™¤äº†æä¾›è®¾ç½®ä¸ç›¸æœºæŠ•å½±å› ç´ ç›¸å…³çš„æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜æä¾›äº†å¤§é‡çš„æ§åˆ¶ç›¸æœºè¿åŠ¨çš„æ–¹æ³•ï¼Œå¦‚ï¼švtkCamera::Dolly()ï¼ŒvtkCamera::Roll()ï¼ŒvtkCamera::Azimuth()ï¼ŒvtkCamera::Yaw()ï¼ŒvtkCamera::Elevation()ï¼ŒvtkCamera::Pitch()ï¼ŒvtkCamera::Zoom()ã€‚</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202211302033203.png" alt="" style="zoom:80%;" /></p><p>vtkCameraå…·ä½“å¯å‚è§<ahref="https://blog.csdn.net/wzheng92/article/details/79935059">é“¾æ¥</a></p><hr /><h4 id="é¢œè‰²">é¢œè‰²ğŸ§Ÿ</h4><p>VTKé‡‡ç”¨RGBå’ŒHSVä¸¤ç§é¢œè‰²ç³»ç»Ÿæ¥æè¿°é¢œè‰²ã€‚</p><p>RGBé¢œè‰²ç³»ç»Ÿå°±æ˜¯ç”±ä¸‰ä¸ªé¢œè‰²åˆ†é‡ï¼šçº¢è‰²(R)ã€ç»¿è‰²(G)å’Œè“è‰²(B)çš„ç»„åˆè¡¨ç¤ºï¼Œåœ¨VTKé‡Œè¿™ä¸‰ä¸ªåˆ†é‡çš„å–å€¼éƒ½æ˜¯ä»0åˆ°1ï¼Œ(0,0, 0)è¡¨ç¤ºé»‘è‰²ï¼Œ(1, 1,1)è¡¨ç¤ºç™½è‰²ã€‚vtkProperty::SetColor(r,g,b)é‡‡ç”¨çš„å°±æ˜¯RGBé¢œè‰²ç³»ç»Ÿè®¾ç½®é¢œè‰²å±æ€§å€¼ã€‚</p><p>HSVé¢œè‰²ç³»ç»ŸåŒæ ·ä¹Ÿæ˜¯ç”±ä¸‰ä¸ªåˆ†é‡æ¥å†³å®šé¢œè‰²ï¼Œåˆ†åˆ«æ˜¯ï¼šè‰²ç›¸(Hue)ï¼Œæ˜¯é¢œè‰²çš„åŸºæœ¬å±æ€§ï¼Œå°±æ˜¯æˆ‘ä»¬å¹³å¸¸æ‰€è¯´çš„é¢œè‰²åç§°ï¼Œå¦‚çº¢è‰²ã€é»„è‰²ç­‰ï¼›é¥±å’Œåº¦(Saturation)ï¼Œæ˜¯æŒ‡é¢œè‰²çš„çº¯åº¦ï¼Œå…¶å€¼è¶Šé«˜åˆ™è¶Šçº¯ï¼›å€¼(Valueï¼Œä¹Ÿå°±æ˜¯å¼ºåº¦Intensityæˆ–è€…äº®åº¦Bright)ï¼Œå€¼ä¸º0é€šå¸¸è¡¨ç¤ºçš„æ˜¯é»‘è‰²ï¼Œå€¼ä¸º1è¡¨ç¤ºçš„æ˜¯æœ€äº®çš„é¢œè‰²ã€‚è¿™ä¸‰ä¸ªåˆ†é‡çš„å–å€¼èŒƒå›´ä¹Ÿæ˜¯0åˆ°1ã€‚ç±»vtkLookupTableæä¾›äº†HSVé¢œè‰²ç³»ç»Ÿè®¾ç½®çš„æ–¹æ³•ã€‚</p><table><thead><tr class="header"><th style="text-align: center;">é¢œè‰²</th><th style="text-align: center;">RGB</th><th style="text-align: center;">HSV</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">é»‘è‰²</td><td style="text-align: center;">0ï¼Œ0ï¼Œ0</td><td style="text-align: center;">*ï¼Œ*ï¼Œ0</td></tr><tr class="even"><td style="text-align: center;">ç™½è‰²</td><td style="text-align: center;">1ï¼Œ1ï¼Œ1</td><td style="text-align: center;">*ï¼Œ0ï¼Œ1</td></tr><tr class="odd"><td style="text-align: center;">çº¢è‰²</td><td style="text-align: center;">1ï¼Œ0ï¼Œ0</td><td style="text-align: center;">0ï¼Œ1ï¼Œ1</td></tr><tr class="even"><td style="text-align: center;">ç»¿è‰²</td><td style="text-align: center;">0ï¼Œ1ï¼Œ0</td><td style="text-align: center;">1/3ï¼Œ1ï¼Œ1</td></tr><tr class="odd"><td style="text-align: center;">è“è‰²</td><td style="text-align: center;">0ï¼Œ0ï¼Œ1</td><td style="text-align: center;">2/3ï¼Œ1ï¼Œ1</td></tr><tr class="even"><td style="text-align: center;">é»„è‰²</td><td style="text-align: center;">1ï¼Œ1ï¼Œ0</td><td style="text-align: center;">1/6ï¼Œ1ï¼Œ1</td></tr><tr class="odd"><td style="text-align: center;">è“ç»¿è‰²</td><td style="text-align: center;">0ï¼Œ1ï¼Œ1</td><td style="text-align: center;">1/2ï¼Œ1ï¼Œ1</td></tr><tr class="even"><td style="text-align: center;">å“çº¢è‰²</td><td style="text-align: center;">1ï¼Œ0ï¼Œ1</td><td style="text-align: center;">5/6ï¼Œ1ï¼Œ1</td></tr><tr class="odd"><td style="text-align: center;">å¤©è“è‰²</td><td style="text-align: center;">0.5ï¼Œ0.5ï¼Œ1</td><td style="text-align: center;">2/3ï¼Œ1/2ï¼Œ1</td></tr></tbody></table><p>ä¸é¢œè‰²è®¾ç½®ç›¸å…³çš„VTKç±»é™¤äº†vtkPropertyï¼ŒvtkLookupTableä¹‹å¤–ï¼Œè¿˜æœ‰vtkColorTransferFunctionã€‚vtkLookupTableå’ŒvtkColorTransferFunctionéƒ½æ´¾ç”Ÿè‡ªvtkScalarsToColorsã€‚</p><hr /><h4 id="åæ ‡ç³»ç»ŸåŠç©ºé—´å˜æ¢">åæ ‡ç³»ç»ŸåŠç©ºé—´å˜æ¢ğŸŒ±</h4><p>è®¡ç®—æœºå›¾å½¢å­¦é‡Œå¸¸ç”¨çš„åæ ‡ç³»ç»Ÿä¸»è¦æœ‰å››ç§ï¼Œåˆ†åˆ«æ˜¯ï¼šModelåæ ‡ç³»ç»Ÿã€Worldåæ ‡ç³»ç»Ÿã€Viewåæ ‡ç³»ç»Ÿå’ŒDisplayåæ ‡ç³»ç»Ÿï¼Œä»¥åŠä¸¤ç§è¡¨ç¤ºåæ ‡ç‚¹çš„æ–¹å¼ï¼šä»¥å±å¹•åƒç´ å€¼ä¸ºå•ä½å’Œå½’ä¸€åŒ–åæ ‡å€¼(å„åæ ‡è½´å–å€¼éƒ½ä¸º[-1,1])ã€‚</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212010959698.png" style="zoom:67%;" /></p><p>Modelåæ ‡ç³»ç»Ÿæ˜¯å®šä¹‰æ¨¡å‹æ—¶æ‰€é‡‡ç”¨çš„åæ ‡ç³»ç»Ÿï¼Œé€šå¸¸æ˜¯å±€éƒ¨çš„ç¬›å¡å°”åæ ‡ç³»ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬è¦å®šä¹‰ä¸€ä¸ªè¡¨ç¤ºçƒä½“çš„Actorï¼Œä¸€èˆ¬çš„åšæ³•æ˜¯å°†è¯¥çƒä½“å®šä¹‰åœ¨ä¸€ä¸ªæŸ±åæ ‡ç³»ç»Ÿé‡Œã€‚</p><p>Worldåæ ‡ç³»ç»Ÿæ˜¯æ”¾ç½®Actorçš„ä¸‰ç»´ç©ºé—´åæ ‡ç³»ï¼ŒActorå…¶ä¸­çš„ä¸€ä¸ªåŠŸèƒ½å°±æ˜¯è´Ÿè´£å°†æ¨¡å‹ä»Modelåæ ‡ç³»ç»Ÿå˜æ¢åˆ°Worldåæ ‡ç³»ç»Ÿã€‚æ¯ä¸€ä¸ªæ¨¡å‹å¯ä»¥å®šä¹‰æœ‰è‡ªå·±çš„Modelåæ ‡ç³»ç»Ÿï¼Œä½†Worldåæ ‡ç³»åªæœ‰ä¸€ä¸ªï¼Œæ¯ä¸€ä¸ªActorå¿…é¡»é€šè¿‡æ”¾ç¼©ã€æ—‹è½¬ã€å¹³ç§»ç­‰æ“ä½œå°†Modelåæ ‡ç³»å˜æ¢åˆ°Worldåæ ‡ç³»ã€‚Worldåæ ‡ç³»åŒæ—¶ä¹Ÿæ˜¯ç›¸æœºå’Œå…‰ç…§æ‰€åœ¨çš„åæ ‡ç³»ç»Ÿã€‚</p><p>Viewåæ ‡ç³»ç»Ÿè¡¨ç¤ºçš„æ˜¯ç›¸æœºæ‰€çœ‹è§çš„åæ ‡ç³»ç»Ÿã€‚Xã€Yã€Zè½´å–å€¼ä¸º[-1,1]ï¼ŒXã€Yå€¼è¡¨ç¤ºåƒå¹³é¢ä¸Šçš„ä½ç½®ï¼ŒZå€¼è¡¨ç¤ºåˆ°ç›¸æœºçš„è·ç¦»ã€‚ç›¸æœºè´Ÿè´£å°†Worldåæ ‡ç³»å˜æ¢åˆ°Viewåæ ‡ç³»ã€‚</p><p>Displayåæ ‡ç³»ç»Ÿè·ŸViewåæ ‡ç³»ç»Ÿç±»ä¼¼ï¼Œä½†æ˜¯å„åæ ‡è½´çš„å–å€¼ä¸æ˜¯[-1,1]ï¼Œè€Œæ˜¯ä½¿ç”¨å±å¹•åƒç´ å€¼ã€‚å±å¹•ä¸Šæ˜¾ç¤ºçš„ä¸åŒçª—å£çš„å¤§å°ä¼šå½±å“Viewåæ ‡ç³»çš„åæ ‡å€¼[-1,1]åˆ°Displayåæ ‡ç³»çš„æ˜ å°„ã€‚å¯ä»¥æŠŠä¸åŒçš„æ¸²æŸ“åœºæ™¯æ”¾åœ¨åŒä¸€ä¸ªçª—å£è¿›è¡Œæ˜¾ç¤ºï¼Œä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªçª—å£é‡Œï¼Œåˆ†ä¸ºå·¦å³ä¸¤ä¸ªæ¸²æŸ“åœºæ™¯ï¼Œè¿™å·¦å³çš„æ¸²æŸ“åœºæ™¯(vtkRenderer)å°±æ˜¯ä¸åŒçš„è§†å£(Viewport)ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vtkSmartPointer&lt;vtkCylinderSource&gt; cyilnder1 = vtkSmartPointer&lt;vtkCylinderSource&gt;::<span class="hljs-built_in">New</span>();<br>vtkSmartPointer&lt;vtkCylinderSource&gt; cyilnder2 = vtkSmartPointer&lt;vtkCylinderSource&gt;::<span class="hljs-built_in">New</span>();<br><br>cyilnder1-&gt;<span class="hljs-built_in">SetHeight</span>(<span class="hljs-number">3</span>);<br>cyilnder1-&gt;<span class="hljs-built_in">SetRadius</span>(<span class="hljs-number">1</span>);<br>cyilnder1-&gt;<span class="hljs-built_in">SetResolution</span>(<span class="hljs-number">3</span>);<br><br>cyilnder2-&gt;<span class="hljs-built_in">SetHeight</span>(<span class="hljs-number">3</span>);<br>cyilnder2-&gt;<span class="hljs-built_in">SetRadius</span>(<span class="hljs-number">1</span>);<br>cyilnder2-&gt;<span class="hljs-built_in">SetResolution</span>(<span class="hljs-number">8</span>);<br><br>vtkSmartPointer&lt;vtkPolyDataMapper&gt; cyilderMapper1 = vtkSmartPointer&lt;vtkPolyDataMapper&gt;::<span class="hljs-built_in">New</span>();<br>cyilderMapper1-&gt;<span class="hljs-built_in">SetInputConnection</span>(cyilnder1-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br>vtkSmartPointer&lt;vtkPolyDataMapper&gt; cyilderMapper2 = vtkSmartPointer&lt;vtkPolyDataMapper&gt;::<span class="hljs-built_in">New</span>();<br>cyilderMapper2-&gt;<span class="hljs-built_in">SetInputConnection</span>(cyilnder2-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br><br>vtkSmartPointer&lt;vtkActor&gt; cyilderActor1 = vtkSmartPointer&lt;vtkActor&gt;::<span class="hljs-built_in">New</span>();<br>cyilderActor1-&gt;<span class="hljs-built_in">SetMapper</span>(cyilderMapper1);<br>vtkSmartPointer&lt;vtkActor&gt; cyilderActor2 = vtkSmartPointer&lt;vtkActor&gt;::<span class="hljs-built_in">New</span>();<br>cyilderActor2-&gt;<span class="hljs-built_in">SetMapper</span>(cyilderMapper2);<br><br>vtkSmartPointer&lt;vtkRenderer&gt; renderer1 = vtkSmartPointer&lt;vtkRenderer&gt;::<span class="hljs-built_in">New</span>();<br>renderer1-&gt;<span class="hljs-built_in">AddActor</span>(cyilderActor1);<br>renderer1-&gt;<span class="hljs-built_in">SetBackground</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>vtkSmartPointer&lt;vtkRenderer&gt; renderer2 = vtkSmartPointer&lt;vtkRenderer&gt;::<span class="hljs-built_in">New</span>();<br>renderer2-&gt;<span class="hljs-built_in">AddActor</span>(cyilderActor2);<br>renderer2-&gt;<span class="hljs-built_in">SetBackground</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br><br>renderer1-&gt;<span class="hljs-built_in">SetViewport</span>(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">1.0</span>);<br>renderer1-&gt;<span class="hljs-built_in">SetViewport</span>(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>);<br><br>vtkSmartPointer&lt;vtkRenderWindow&gt; renWin = vtkSmartPointer&lt;vtkRenderWindow&gt;::<span class="hljs-built_in">New</span>();<br>renWin-&gt;<span class="hljs-built_in">AddRenderer</span>(renderer2);<br>renWin-&gt;<span class="hljs-built_in">AddRenderer</span>(renderer1);<br>renWin-&gt;<span class="hljs-built_in">SetSize</span>(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>);<br><br>vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; iren = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>iren-&gt;<span class="hljs-built_in">SetRenderWindow</span>(renWin);<br><br>vtkSmartPointer&lt;vtkInteractorStyleTrackballCamera&gt; style = vtkSmartPointer&lt;vtkInteractorStyleTrackballCamera&gt;::<span class="hljs-built_in">New</span>();<br>iren-&gt;<span class="hljs-built_in">SetInteractorStyle</span>(style);<br><br>iren-&gt;<span class="hljs-built_in">Initialize</span>();<br>iren-&gt;<span class="hljs-built_in">Start</span>();<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212011100314.png" style="zoom:80%;" /></p><hr /><p>æˆ‘ä»¬åœ¨ä¸‰ç»´ç©ºé—´é‡Œå®šä¹‰çš„ä¸‰ç»´æ¨¡å‹ï¼Œæœ€åæ˜¾ç¤ºçš„æ—¶å€™éƒ½æ˜¯æŠ•å½±åˆ°äºŒç»´å¹³é¢ï¼Œæ¯”å¦‚åœ¨å±å¹•ä¸Šæ˜¾ç¤ºï¼Œç”ŸæˆäºŒç»´å›¾åƒç­‰ç­‰ã€‚ä¸‰ç»´åˆ°äºŒç»´çš„æŠ•å½±åŒ…æ‹¬é€è§†æŠ•å½±(PerspectiveProjection)å’Œæ­£äº¤æŠ•å½±(OrthogonalProjectionï¼Œæ­£äº¤æŠ•å½±ä¹Ÿå«å¹³è¡ŒæŠ•å½±)ã€‚</p><p>ä¸ç®¡æ˜¯é€è§†æŠ•å½±è¿˜æ˜¯æ­£äº¤æŠ•å½±ï¼Œå˜æ¢çš„åŸºæœ¬å…ƒç´ éƒ½æ˜¯ä¸‰ç»´åæ ‡ç‚¹ï¼Œåœ¨è®¡ç®—æœºå›¾å½¢å­¦é‡Œï¼Œä¸‰ç»´åæ ‡ç‚¹é€šå¸¸ç”¨é½æ¬¡åæ ‡æ¥è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œä¸‰ç»´ç©ºé—´é‡Œæœ‰ä¸€ä¸ªåæ ‡ç‚¹(x,y,z)ï¼Œç”¨é½æ¬¡åæ ‡è¡¨ç¤ºä¸º(<spanclass="math inline">\(x_{h}\)</span>,<spanclass="math inline">\(y_h\)</span>,<spanclass="math inline">\(z_h\)</span>,<spanclass="math inline">\(w_h\)</span>)ï¼Œå…¶ä¸­ï¼Œ<span class="math inline">\(x= \frac{x_h}{w_h}\)</span>ã€<span class="math inline">\(y =\frac{y_h}{w_h}\)</span>ã€<span class="math inline">\(z =\frac{z_h}{w_h}\)</span></p><p>å¦‚æœ <span class="math inline">\(w_h\)</span> =0ï¼Œåˆ™è¡¨ç¤ºæ— ç©·è¿œçš„ç‚¹ã€‚</p><p>åˆ©ç”¨é½æ¬¡åæ ‡ï¼Œå¯ä»¥å°†ç©ºé—´å˜æ¢ç”¨4Ã—4çš„çŸ©é˜µæ¥è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œå¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾ç­‰ä»¿å°„å˜æ¢éƒ½å¯ä»¥ç”¨çŸ©é˜µç›¸ä¹˜çš„å½¢å¼è¡¨ç¤º</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212011113268.png" style="zoom:40%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212011113532.png" style="zoom:38%;" /></p><p>VTKé‡Œä¸ç©ºé—´å˜æ¢ç›¸å…³çš„ç±»æœ‰ï¼švtkTransform2Dï¼ŒvtkTransformï¼ŒvtkPerspectiveTransformï¼ŒvtkGeneralTransformï¼ŒvtkTransformFilterï¼ŒvtkMatrix4x4ç­‰ã€‚</p><hr /><h4 id="æ€»ç»“">æ€»ç»“ğŸª…</h4><p>é¦–å…ˆæˆ‘ä»¬ä»vtkCylinderSourceå­¦ä¼šäº†ä¸€ç»„VTKç±»ï¼švtkXXXSourceã€‚è¿™ä¸€ç»„ç±»æ´¾ç”Ÿè‡ªvtkPolyDataAlgorithmï¼Œå®ƒä»¬è¾“å‡ºçš„æ•°æ®ç±»å‹éƒ½æ˜¯vtkPolyDataï¼Œéƒ½äº›ç±»éƒ½æ˜¯VTKé¢„å®šä¹‰å¥½çš„å›¾å½¢æ¨¡å‹ã€‚</p><p>æ¥ç€ï¼Œæˆ‘ä»¬æŠŠvtkXXXSourceçš„è¾“å‡ºä½œä¸ºvtkPolyDataMapperçš„è¾“å…¥ï¼ŒMapperçš„ä½œç”¨æ˜¯å°†è¾“å…¥çš„æ•°æ®è½¬æ¢ä¸ºå‡ ä½•å›¾å…ƒ(ç‚¹ã€çº¿ã€å¤šè¾¹å½¢)è¿›è¡Œæ¸²æŸ“ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬å®ä¾‹åŒ–ä¸€ä¸ªActorå¯¹è±¡ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“ï¼ŒVTKæ¸²æŸ“åœºæ™¯ä¸­æ•°æ®çš„å¯è§†åŒ–è¡¨è¾¾æ˜¯é€šè¿‡vtkPropçš„å­ç±»è´Ÿè´£çš„ã€‚é€šè¿‡Actorçš„æ–¹æ³•SetMapper()å¯ä»¥è®¾ç½®å¯¹åº”çš„Mapperã€‚</p><p>ç´§æ¥ç€ï¼Œæˆ‘ä»¬åˆå®ä¾‹åŒ–äº†æ¸²æŸ“çª—å£ã€æ¸²æŸ“å™¨ã€äº¤äº’å™¨ã€äº¤äº’ç±»å‹ç­‰å¯¹è±¡ï¼Œå¹¶é€ä¸ªåœ°åŠ ä»¥ä»‹ç»ã€‚äºæ˜¯æˆ‘ä»¬æ˜ç™½äº†æ¸²æŸ“çª—å£å°±æ˜¯æˆ‘ä»¬çœ‹åˆ°çš„é‚£ä¸ªVTKçª—å£ï¼›æ¸²æŸ“å™¨Rendererå¯ä»¥é€šè¿‡æ¸²æŸ“çª—å£çš„æ–¹æ³•AddRenderer()åŠ å…¥çš„æ¸²æŸ“çª—å£é‡Œï¼›äº¤äº’å™¨åˆ™æ˜¯ç”¨æ–¹æ³•SetRenderWindow()ç»™å®ƒæŒ‡å®šäº¤äº’çš„çª—å£ï¼›äº¤äº’é£æ ¼ä¸äº¤äº’å™¨æ˜¯ç”¨æ–¹æ³•SetInteractorStyle()å…³è”åœ¨ä¸€èµ·ï¼›è‹¥å¹²ä¸ªActorå¯¹è±¡å¯ä»¥ç”¨æ–¹æ³•AddActor()åŠ å…¥åˆ°æ¸²æŸ“å™¨é‡Œæ¸²æŸ“ã€‚</p><p>ç„¶åæˆ‘ä»¬åˆçœ‹äº†æ¸²æŸ“åœºæ™¯é‡Œå…‰ç…§å’Œç›¸æœºç­‰å¯¹è±¡ï¼Œæ˜ç™½äº†æ¸²æŸ“åœºæ™¯é‡Œå¯ä»¥æœ‰å¤šä¸ªå…‰ç…§ï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªç›¸æœºï¼›ä»¥åŠäº†è§£äº†è®¾ç½®å…‰ç…§å’Œç›¸æœºçš„æ–¹æ³•ã€‚</p><p>ä»‹ç»vtkActoræ—¶ï¼Œæˆ‘ä»¬é€šè¿‡vtkPropertyå¯¹è±¡æ¥æ”¹å˜Actorçš„é¢œè‰²ï¼Œäºæ˜¯æˆ‘ä»¬é¡ºä¾¿ä»‹ç»äº†VTKæ‰€ç”¨åˆ°çš„é¢œè‰²æ¨¡å‹ï¼Œåˆ†åˆ«æ˜¯RGBé¢œè‰²æ¨¡å‹å’ŒHSVé¢œè‰²æ¨¡å‹ã€‚</p><p>æœ€åæˆ‘ä»¬åˆè®²äº†ä¼¼ä¹è·Ÿå‰é¢çš„å†…å®¹å¹¶ä¸æ­è¾¹çš„â€œåæ ‡ç³»ç»ŸåŠç©ºé—´å˜æ¢â€ï¼Œæ˜ç™½VTKé‡Œç”¨åˆ°Modelã€Worldã€Viewå’ŒDisplayç­‰åæ ‡ç³»ç»Ÿï¼Œå®ƒä»¬ä¹‹é—´å¯ä»¥å˜æ¢é€šè¿‡ç±»vtkCoordinateæ¥å®ç°ã€‚ç„¶åä»‹ç»äº†VTKé‡Œä½¿ç”¨é½æ¬¡åæ ‡åšç©ºé—´å˜æ¢çš„æ¦‚å¿µï¼Œåˆ—å‡ºäº†å¹³ç§»ã€ç¼©æ”¾å’Œæ—‹è½¬ç­‰å˜æ¢çŸ©é˜µã€‚å…¶å®è¿™éƒ¨åˆ†å†…å®¹è·Ÿå‰é¢ä»‹ç»çš„æ˜¯æ¯æ¯ç›¸å…³çš„ï¼Œæ¯”å¦‚ï¼Œæ¸²æŸ“åœºæ™¯é‡Œçš„Actoré€šè¿‡ç›¸æœºæŠ•å½±åˆ°åƒå¹³é¢æ—¶ï¼Œå°±ç”¨åˆ°äº†è¿™äº›å†…å®¹ã€‚vtkRendereré‡Œçš„æ–¹æ³•ViewToWorld()å’ŒWorldToView()ç­‰ï¼Œé‡Œé¢ä¹Ÿä¼šç”¨åˆ°ç©ºé—´å˜æ¢ã€‚</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212011116458.png" style="zoom: 80%;" /></p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>VTK</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶ï¼ˆå››ï¼‰</title>
    <link href="/post/352464c7.html"/>
    <url>/post/352464c7.html</url>
    
    <content type="html"><![CDATA[<p>å¯¹è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶è¯¾ç¨‹çš„ä¸»è¦å†…å®¹è¿›è¡Œæ€»ç»“</p><span id="more"></span><h1 id="è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶å››">è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶ï¼ˆå››ï¼‰</h1><h2 id="ç¬¬äº”ç« -è¡¨ç¤ºå±‚çš„è½¯ä»¶æ¶æ„æŠ€æœ¯">ç¬¬äº”ç«  è¡¨ç¤ºå±‚çš„è½¯ä»¶æ¶æ„æŠ€æœ¯ğŸ§Ÿâ€â™€ï¸</h2><h3 id="è¡¨ç¤ºå±‚çš„è®¾è®¡åŸºç¡€">è¡¨ç¤ºå±‚çš„è®¾è®¡åŸºç¡€ğŸ§¸</h3><p>è¡¨ç¤ºå±‚è®¾è®¡çš„åŸºæœ¬ç›®çš„å°±æ˜¯è¦åˆç†å¸ƒå±€å’Œè®¾è®¡ç‰ˆé¢ï¼Œé«˜æ•ˆåœ°ä¼ é€’è§†è§‰ä¿¡æ¯ï¼Œå……åˆ†å¸å¼•ç”¨æˆ·ã€‚</p><h4 id="è¡¨ç¤ºå±‚è®¾è®¡ä¸è§†è§‰ä¹ æƒ¯">è¡¨ç¤ºå±‚è®¾è®¡ä¸è§†è§‰ä¹ æƒ¯ğŸ‘¾</h4><p>è§„å¾‹1ï¼šäººçœ¼çš„è§†çº¿æ²¿ç€æ°´å¹³æ–¹å‘è¿åŠ¨æ¯”æ²¿ç€å‚ç›´æ–¹å‘è¿åŠ¨å¿«è€Œä¸”ä¸æ˜“ç–²åŠ³</p><p>è§„å¾‹2ï¼šè§†çº¿çš„å˜åŒ–ä¹ æƒ¯äºä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹å’Œé¡ºæ—¶é’ˆæ–¹å‘è¿åŠ¨</p><p>è§„å¾‹3ï¼šå½“è§†çº¿æ²¿ç€æ—¢ä¸æ°´å¹³ä¹Ÿä¸å‚ç›´çš„æ–œçº¿æ–¹å‘ç§»åŠ¨æ—¶ï¼Œåœ¨æ°´å¹³æ–¹å‘ä¸Šä¸‹çº¦45Â°çš„èŒƒå›´å†…ï¼Œè§†çº¿ä»å·¦åˆ°å³ç§»åŠ¨ï¼›åœ¨å‚ç›´æ–¹å‘å·¦å³çº¦45Â°èŒƒå›´å†…ï¼Œè§†çº¿ä»ä¸Šåˆ°ä¸‹ç§»åŠ¨</p><p>è§†è§‰ä¹ æƒ¯ï¼šæ»šåŠ¨å›¾ç‰‡æœ€å¥½ä»å³å‘å·¦ï¼Œçº¿çŠ¶å¸ƒå±€åº”æ°´å¹³æ–¹å‘å®½äº›ï¼Œå¯¼èˆªæ æœ€å¥½æ”¾åœ¨å·¦ä¾§æˆ–ä¸Šéƒ¨ï¼Œè¦é‡ç‚¹çªå‡ºçš„å†…å®¹æœ€å¥½æ”¾åœ¨å·¦ä¸Šéƒ¨ã€‚</p><p>ç‰ˆå¼è§„èŒƒï¼š</p><ol type="1"><li>å›ºå®šé¡µå®½ï¼Œä¸€èˆ¬ä¸é™å®šé•¿åº¦ï¼Œä½†ä¸å®œè¿‡é•¿ï¼Œä¸€èˆ¬åº”æ§åˆ¶åœ¨1-3å±ï¼Œæœ€å¤šä¸è¦è¶…è¿‡5å±ï¼Œå¤šå±ä¿¡æ¯å¯ä»¥é€šè¿‡è¶…é“¾æ¥çš„æ–¹æ³•è§£å†³</li><li>å¯¹äºæ–‡å­—ï¼Œä»¥ä¸‹æƒ…å†µä¼šäº§ç”Ÿç–²åŠ³ï¼š(1) å­—å·è¿‡å°ã€è¡Œé—´è·è¿‡å¯†ï¼Œä¸æ˜“è¾¨è®¤ (2)é«˜äº®åº¦æ–‡å­—ã€èƒŒæ™¯ææš—</li><li>æŒ¥ä¹‹ä¸å»çš„è·Ÿè¸ªåŠ¨æ•ˆï¼Œä¼šä»¤äººç”ŸåŒ</li></ol><h4 id="è¡¨ç¤ºå±‚çš„ä¸»ä»å…³ç³»">è¡¨ç¤ºå±‚çš„ä¸»ä»å…³ç³»ğŸ¤–</h4><p>é¡µé¢ä¸­çš„æ„æˆå…ƒç´ ä¸èƒ½åŒç­‰å¯¹å¾…ï¼Œå¿…é¡»ä»¥ç‚¹å¸¦é¢ï¼Œè®©ç„¦ç‚¹å…ˆæŠ“ä½æµè§ˆè€…ï¼Œå¼•å‘ç»§ç»­æµè§ˆçš„æ„¿æœ›ï¼Œç„¶åå†æ‰©å±•å¼€æ¥ã€‚</p><p>å¼ºåŒ–é¡µé¢çš„ä¸»ä»å…³ç³»å°±æ˜¯å°†ä¸»è¦å¯¹è±¡ä¸æ¬¡è¦å¯¹è±¡åŒºåˆ†å¼€æ¥ï¼Œé‡ç‚¹çªå‡ºã€‚é‡‡å–çš„æ–¹å¼æœ‰ï¼š</p><ol type="1"><li>ä¸»ä»å¯¹è±¡çš„å¤§å°å¯¹æ¯”</li><li>å¼±åŒ–ä¸»ä½“å¯¹è±¡å‘¨å›´çš„å†…å®¹</li><li>ä¸»ä»å¯¹è±¡çš„è‰²å½©å¯¹æ¯”</li><li>é‡å¤ä¸»é¢˜å¯¹è±¡</li><li>åŠ å¼ºä¸»ä»å¯¹è±¡åœ¨å½¢æ€ä¸Šçš„å¯¹æ¯”</li></ol><h4 id="è§†è§‰æµç¨‹çš„è®¾è®¡">è§†è§‰æµç¨‹çš„è®¾è®¡ğŸ‘¹</h4><p>è§†è§‰æµç¨‹ï¼šè§†çº¿éšé¡µé¢å„æ„æˆå…ƒç´ åœ¨ç©ºé—´ä¸Šæ²¿ä¸€å®šè½¨è¿¹è¿åŠ¨çš„è¿‡ç¨‹ã€‚æµè§ˆè€…çš„è§†è§‰æµç¨‹æ˜¯æœ‰ä¸€å®šè§„å¾‹çš„ã€‚</p><ul><li><p>å•å‘è§†è§‰æµç¨‹</p><p>è§†çº¿åœ¨é¡µé¢ä¸­éšæ„æˆè¦ç´ å½¢æˆçš„å•ä¸€æ–¹å‘é¡ºåºè¿åŠ¨ã€‚</p><p>è§„å¾‹ï¼šç”±å¤§åˆ°å°ï¼›æœ‰ä¸»åˆ°æ¬¡ï¼› ç”±å·¦åˆ°å³ï¼›ç”±ä¸Šåˆ°ä¸‹ã€‚</p><p>åˆ†ç±»ï¼š æ¨ªå‘è§†è§‰æµç¨‹ï¼›çºµå‘è§†è§‰æµç¨‹ï¼›æ–œå‘è§†è§‰æµç¨‹</p></li><li><p>æ›²çº¿è§†è§‰æµç¨‹</p><p>æ›²çº¿è§†è§‰æµç¨‹æ˜¯å„æ„æˆè¦ç´ æ²¿ç€æ›²çº¿è€Œè¿åŠ¨å˜åŒ–çš„è§†çº¿æµåŠ¨è¿‡ç¨‹ï¼Œå®ƒæ¯”å•å‘è§†è§‰æµç¨‹æ›´å…·èŠ‚å¥ã€éŸµå¾‹å’Œæ›²çº¿ç¾ã€‚</p></li><li><p>å¯¼å‘è§†è§‰æµç¨‹</p><p>å¯¼å‘è§†è§‰æµç¨‹æ˜¯é€šè¿‡è¯±å¯¼å…ƒç´ ï¼Œä¸»åŠ¨å¼•å¯¼æµè§ˆè€…çš„è§†çº¿æŒ‰ç…§ä¸€å®šçš„æ–¹å‘é¡ºåºè¿åŠ¨ï¼Œå°†é¡µé¢å„æ„æˆå…ƒç´ ä¾åºä¸²è¿èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæœ‰æœºçš„æ•´ä½“</p><p>ä¾æ®è¯±å¯¼å…ƒç´ çš„ä¸åŒå¯åˆ†ä¸ºï¼š çº¿å½¢å¯¼å‘ã€å½¢è±¡å¯¼å‘ã€æŒ‡ç¤ºå¯¼å‘</p></li><li><p>é‡å¿ƒè§†è§‰æµç¨‹</p><p>é‡å¿ƒæŒ‡é¡µé¢çš„è§†è§‰å¿ƒç†é‡å¿ƒå¹¶ä¸æ˜¯å‡ ä½•ä¸­å¿ƒ</p></li><li><p>åå¤è§†è§‰æµç¨‹</p><p>è§†çº¿æ²¿ç€é¡µé¢ä¸­ç›¸åŒæˆ–ç›¸ä¼¼çš„è§†è§‰è¦ç´ ä½œè§„å¾‹æ€§çš„ã€å¯Œäºç§©åºå’ŒèŠ‚å¥çš„é€æ¬¡è¿åŠ¨</p></li><li><p>æ•£ç‚¹è§†è§‰æµç¨‹</p><p>æ²¡æœ‰å›ºå®šçš„è§†çº¿æµåŠ¨è·¯çº¿ï¼Œé¡µé¢ä¸­å„æ„æˆè¦ç´ å‘ˆç°è‡ªç”±åˆ†æ•£çš„çŠ¶æ€ï¼Œä½“ç°è‡ªç”±æ€§ã€éšæ„æ€§ã€‚ä½†å¹¶éæ‚ä¹±æ— ç« ï¼Œæœ‰ç€ä¸€å®šçš„ç»“æ„æ€§å’Œç»Ÿä¸€æ€§</p></li></ul><h3 id="å‰ç«¯å¼€å‘æŠ€æœ¯å’Œç›¸å…³æ¶æ„">å‰ç«¯å¼€å‘æŠ€æœ¯å’Œç›¸å…³æ¶æ„ğŸª…</h3><h4id="é¢å‘å¼‚æ­¥å†…å®¹åŠ è½½çš„å‰ç«¯æ¶æ„æŠ€æœ¯">é¢å‘å¼‚æ­¥å†…å®¹åŠ è½½çš„å‰ç«¯æ¶æ„æŠ€æœ¯</h4><p>é¡µé¢åŠ è½½å­˜åœ¨å¾ˆå¤šé—®é¢˜ï¼šå¸¦å®½é™åˆ¶ï¼Œéœ€è¦åŠ è½½å†…å®¹å¤šã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612203947405.png" /></p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612204019118.png" /></p><p>AJAXï¼ˆAsynchronous JavaScript andXMLçš„ç¼©å†™ï¼‰æ˜¯ä¸€ç§å¼‚æ­¥è¯·æ±‚æ•°æ®çš„webå¼€å‘æŠ€æœ¯ï¼Œå¯¹äºæ”¹å–„ç”¨æˆ·çš„ä½“éªŒå’Œé¡µé¢æ€§èƒ½å¾ˆæœ‰å¸®åŠ©ã€‚ç®€å•åœ°è¯´ï¼Œåœ¨ä¸éœ€è¦é‡æ–°åˆ·æ–°é¡µé¢çš„æƒ…å†µä¸‹ï¼ŒAJAXé€šè¿‡å¼‚æ­¥è¯·æ±‚åŠ è½½åå°æ•°æ®ï¼Œå¹¶åœ¨ç½‘é¡µä¸Šå‘ˆç°å‡ºæ¥ã€‚å¸¸è§è¿ç”¨åœºæ™¯æœ‰è¡¨å•éªŒè¯æ˜¯å¦ç™»å…¥æˆåŠŸã€ç™¾åº¦æœç´¢ä¸‹æ‹‰æ¡†æç¤ºå’Œå¿«é€’å•å·æŸ¥è¯¢ç­‰ç­‰ã€‚</p><p>AJAXç›®çš„ï¼šæé«˜ç”¨æˆ·ä½“éªŒï¼Œè¾ƒå°‘ç½‘ç»œæ•°æ®çš„ä¼ è¾“é‡ã€‚</p><p>AJAXæ ¸å¿ƒï¼šæµè§ˆå™¨æä¾›çš„XMLHttpRequestï¼ˆXHRï¼‰å¯¹è±¡ï¼Œå®ƒæ‰®æ¼”çš„è§’è‰²ç›¸å½“äºç§˜ä¹¦ï¼Œä½¿å¾—æµè§ˆå™¨å¯ä»¥å‘å‡ºHTTPè¯·æ±‚ä¸æ¥æ”¶HTTPå“åº”ã€‚XMLHttpRequestå¯¹è±¡æä¾›äº†å¯¹ HTTP åè®®çš„å®Œå…¨çš„è®¿é—®ï¼ŒåŒ…æ‹¬åšå‡ºPOST å’Œ HEAD è¯·æ±‚ä»¥åŠæ™®é€šçš„GET è¯·æ±‚çš„èƒ½åŠ›ã€‚XMLHttpRequest å¯ä»¥åŒæ­¥æˆ–å¼‚æ­¥åœ°è¿”å› WebæœåŠ¡å™¨çš„å“åº”ï¼Œå¹¶ä¸”èƒ½å¤Ÿä»¥æ–‡æœ¬æˆ–è€…ä¸€ä¸ªDOM æ–‡æ¡£çš„å½¢å¼è¿”å›å†…å®¹ã€‚å°½ç®¡åä¸ºXMLHttpRequest ï¼Œå®ƒå¹¶ä¸é™äºå’Œ XMLæ–‡æ¡£ä¸€èµ·ä½¿ç”¨ï¼šå®ƒå¯ä»¥æ¥æ”¶ä»»ä½•å½¢å¼çš„æ–‡æœ¬æ–‡æ¡£ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612204522603.png" /></p><h4 id="é¢å‘è‡ªé€‚åº”çš„å‰ç«¯æ¶æ„æŠ€æœ¯">é¢å‘è‡ªé€‚åº”çš„å‰ç«¯æ¶æ„æŠ€æœ¯</h4><p>å¤šå±é€‚é…ä¼šå‡ºç°å¾ˆå¤šé—®é¢˜ã€‚</p><p>Bootstrap æ˜¯ä¸€ä¸ªç”¨äºå¿«é€Ÿå¼€å‘ Web åº”ç”¨ç¨‹åºå’Œç½‘ç«™çš„å‰ç«¯æ¡†æ¶ã€‚</p><p>Bootstrap ä¼˜ç‚¹ï¼š</p><ul><li>ç§»åŠ¨è®¾å¤‡ä¼˜å…ˆã€‚æ¡†æ¶åŒ…å«äº†è´¯ç©¿äºæ•´ä¸ªåº“çš„ç§»åŠ¨è®¾å¤‡ä¼˜å…ˆçš„æ ·å¼ã€‚</li><li>æµè§ˆå™¨æ”¯æŒã€‚æ‰€æœ‰çš„ä¸»æµæµè§ˆå™¨éƒ½æ”¯æŒã€‚</li><li>å®¹æ˜“ä¸Šæ‰‹ã€‚åªè¦ä½ å…·å¤‡HTMLã€CSSã€JSåŸºç¡€çŸ¥è¯†ï¼Œå°±å¯ä»¥å¼€å§‹å­¦ä¹ ã€‚</li><li>å“åº”å¼è®¾è®¡ã€‚Bootstrap çš„å“åº”å¼ CSSèƒ½å¤Ÿè‡ªé€‚åº”äºå°å¼æœºã€å¹³æ¿ç”µè„‘å’Œæ‰‹æœºã€‚</li></ul><p>Bootstrapæ¨¡æ¿æ³¨æ„äº‹é¡¹</p><ul><li>Bootstrapæ¨¡æ¿å¿…é¡»æ˜¯åŸºäºHTML5æ–‡ä»¶çš„ã€‚å› æ­¤DTDç±»å‹å®šä¹‰å¿…é¡»æ˜¯HTML5çš„ã€‚</li><li>Bootstrapæ–‡ä»¶å½“å­—ç¬¦é›†è®¾ç½®ï¼Œä¹Ÿè¦éµå¾ªHTML5çš„è§„èŒƒã€‚</li><li>è®¾ç½®IEæµè§ˆå™¨å…¼å®¹æ¨¡å¼(X-UA-Compatible)ã€‚</li><li>è®¾ç½®æ¨¡æ¿ï¼Œé€‚ç”¨äºæ‰€æœ‰å¹³å°ã€‚</li><li>å¼•å…¥bootstrapçš„CSSä¸»æ–‡ä»¶(bootstrap.min.css)ã€‚</li><li>å¼•å…¥jQueryæ’ä»¶çš„ä¸»æ–‡ä»¶(jQuery)ã€‚</li><li>å¼•å…¥bootstrapçš„JSä¸»æ–‡ä»¶(bootstrap.min.js)</li></ul><h3 id="å‰ç«¯ç»„ä»¶åŒ–">å‰ç«¯ç»„ä»¶åŒ–ğŸ²</h3><p>ç»„ä»¶ï¼šå¯¼èˆªã€æŒ‰é’®ã€è¡¨å•ã€Tabã€ç¿»é¡µã€è¡¨æ ¼ã€è¿›åº¦æ¡...</p><p>ä¸€ä¸ªç»„ä»¶å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„äº§å“ï¼ŒæŠŠæ¯ä¸ªç»„ä»¶å½“åšä¸€ä¸ªç‹¬ç«‹äº§å“æ¥è®¾è®¡è€ƒè™‘ç©ºçŠ¶æ€ã€æç«¯æƒ…å†µã€å°ºå¯¸å˜åŒ–å°½å¯èƒ½çµæ´»é€‚åº”å„ä½¿ç”¨åœºæ™¯ï¼Œç»Ÿä¸€ç»„ä»¶ä¸ç»„ä»¶ã€ç»„ä»¶ä¸æ•£ä»¶ä¹‹é—´çš„ç»„åˆæ–¹å¼ï¼Œä¹‹å‰æ‰€æœ‰çš„å†…å®¹ï¼Œæœ€ç»ˆæ±‡é›†æˆè®¾è®¡è§„èŒƒã€‚</p><p>è½»åº¦ç»„ä»¶åŒ–ï¼šåŒä¸€ä¸ªç»„ä»¶ä½¿ç”¨ç›¸åŒçš„htmlç»“æ„å’Œclassåï¼Œç”¨åŒä¸€æ®µcssä»£ç å®šä¹‰æ ·å¼ï¼Œç”¨åŒä¸€ä¸ªjså‡½æ•°å®šä¹‰äº¤äº’ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612205504665.png" /></p><p>é‡åº¦ç»„ä»¶åŒ–ï¼šæ¯ä¸ªç»„ä»¶çš„htmlç»“æ„ã€cssæ ·å¼ã€jsäº¤äº’éƒ½ç‹¬ç«‹å°è£…ç®¡ç†ï¼Œå®šä¹‰å¥½æ¡†æ¶å’ŒåŠ è½½æ–¹å¼ï¼Œå†…å®¹åœ¨åŠ è½½æ—¶ä»å¤–éƒ¨å¡«å……ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612205517560.png" /></p><p>ç”¨è¿™ç§æ€è·¯ç®¡ç†é¡¹ç›®ï¼Œä¹Ÿä¼šæ”¹å˜å¼€å‘çš„åä½œæ–¹å¼ã€‚å¤§å®¶ä¸å†æ˜¯æŒ‰é¡µé¢åˆ†å·¥ï¼Œè€Œæ˜¯æŒ‰ç»„ä»¶æ¥åˆ†å·¥ã€‚é¡µå¤´å’Œtabç”±ä¸€äººè´Ÿè´£ï¼Œåˆ—è¡¨å’Œé¡µè„šç”±å¦ä¸€ä¸ªäººè´Ÿè´£ï¼Œå¼±åŒ–äº†ç›¸äº’é—´çš„ä¾èµ–å…³ç³»ã€‚ç›´åˆ°å°†ç»„ä»¶æ‹¼è£…æˆé¡µé¢ï¼Œæ‰éœ€è¦å¤„ç†ç»„ä»¶ä¹‹é—´ç›¸äº’ä½œç”¨çš„éƒ¨åˆ†ï¼Œä½†è¿™æ—¶å€™å·¥ä½œé‡å·²ç»è¢«å¤§å¤§æ¶ˆåŒ–äº†ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612205552976.png" /></p><p>ç»„ä»¶åŒ–ä¸æ˜¯ä¸€ä»¶è½»æ¾çš„å·¥ä½œï¼Œåœ¨é¡¹ç›®åˆæœŸçš„å‡†å¤‡å·¥ä½œä¼šå¢åŠ ä¸€å®šå·¥ä½œé‡ï¼Œä½†éšæ—¶é—´æ¨ç§»ä¼šå‘æŒ¥å‡ºå·¨å¤§çš„ä¼˜åŠ¿ã€‚</p><h2 id="ç¬¬å…­ç« -è½¯ä»¶æ¶æ„è¯„å®¡ä¸æµ‹è¯•">ç¬¬å…­ç«  è½¯ä»¶æ¶æ„è¯„å®¡ä¸æµ‹è¯•ğŸ“±</h2><h3 id="è½¯ä»¶æ¶æ„è¯„å®¡æ–¹æ³•">è½¯ä»¶æ¶æ„è¯„å®¡æ–¹æ³•ğŸš›</h3><p>è¯„å®¡ï¼šä»¥æŸç§ç³»ç»ŸåŒ–çš„æ–¹æ³•å¯¹äº‹ç‰©è¿›è¡Œè¯„ä»·ï¼Œä»¥å‘ç°å…¶ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Œå¹¶åˆ¤æ–­å…¶æ˜¯å¦æ»¡è¶³æœŸæœ›çš„è¦æ±‚ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612210824503.png" /></p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612210543960.png" /></p><p>ï¼ˆSAï¼šç³»ç»Ÿåˆ†æï¼‰</p><p>å¸¸ç”¨æ¶æ„è¯„å®¡æ–¹å¼ï¼š</p><ul><li><p>åŸºäºè°ƒæŸ¥é—®å·çš„è¯„å®¡æ–¹å¼</p><p>è°ƒæŸ¥é—®å·ï¼š ä¸€ç³»åˆ—æœ‰å…³SAè¯„å®¡çš„ç›¸å…³é—®é¢˜ã€‚</p><p>è¯„ä¼°è¿‡ç¨‹ï¼šå¤šä¸ªè¯„ä¼°ä¸“å®¶è€ƒå¯Ÿç³»ç»Ÿï¼Œç„¶åå›ç­”é—®å·ä¸­çš„é—®é¢˜ï¼›å¯¹å¤šä¸ªè¯„ä¼°ç»“æœè¿›è¡Œç»¼åˆï¼Œå¾—åˆ°æœ€ç»ˆçš„ç»“æœã€‚ä¼˜ç‚¹ï¼šè‡ªç”±ã€çµæ´»ï¼Œå¯è¯„ä¼°å¤šç§è´¨é‡å±æ€§ï¼Œä¹Ÿå¯åœ¨SAè®¾è®¡çš„å¤šä¸ªé˜¶æ®µè¿›è¡Œã€‚ç¼ºç‚¹ï¼šç”±äºè¯„ä¼°çš„ç»“æœå¾ˆå¤§ç¨‹åº¦ä¸Šæ¥è‡ªè¯„ä¼°äººå‘˜çš„ä¸»è§‚æ¨æ–­ï¼Œå› æ­¤ä¸åŒçš„è¯„ä¼°äººå‘˜å¯èƒ½ä¼šäº§ç”Ÿä¸åŒç”šè‡³æˆªç„¶ç›¸åçš„ç»“æœï¼›è¯„ä¼°äººå‘˜å¯¹é¢†åŸŸçš„ç†Ÿæ‚‰ç¨‹åº¦ã€æ˜¯å¦å…·æœ‰ä¸°å¯Œçš„ç›¸å…³ç»éªŒä¹Ÿæˆä¸ºè¯„ä¼°ç»“æœæ˜¯å¦æ­£ç¡®çš„é‡è¦å› ç´ ã€‚</p></li><li><p>åŸºäºåœºæ™¯çš„è¯„å®¡æ–¹å¼</p><p>åˆ†æSAå¯¹åœºæ™¯çš„æ”¯æŒç¨‹åº¦ï¼Œä»è€Œåˆ¤æ–­è¯¥SAå¯¹è¿™ä¸€åœºæ™¯æ‰€ä»£è¡¨çš„è´¨é‡éœ€æ±‚çš„æ»¡è¶³ç¨‹åº¦ã€‚åœºæ™¯ï¼šç³»ç»Ÿåº”ç”¨çš„å…¸å‹åœºåˆã€‚</p><p>åŸºäºåœºæ™¯çš„æ–¹å¼ç”± SEI é¦–å…ˆæå‡ºï¼šä½“ç³»ç»“æ„æƒè¡¡åˆ†ææ–¹æ³•( ATAM)ã€è½¯ä»¶ä½“ç³»ç»“æ„åˆ†ææ–¹æ³•( SAAM )</p></li><li><p>åŸºäºåº¦é‡çš„è¯„å®¡æ–¹å¼</p><p>åœ¨åº¦é‡æ—¶ï¼Œå¯é‡‡ç”¨è‡ªåŠ¨åŒ–çš„å·¥å…·ï¼Œå¯¹è´¨é‡å±æ€§è¿›è¡Œè®¡ç®—ï¼Œå¾—åˆ°ç»“æœã€‚</p><p><span class="math inline">\(Coupling(MS) = \sum_{i=1}^{n} I(S_i) -I(S)\)</span></p><p>ä¸‰ä¸ªåŸºæœ¬æ´»åŠ¨ï¼šä»è½¯ä»¶ä½“ç³»ç»“æ„æ–‡æ¡£ä¸­è·å–åº¦é‡ä¿¡æ¯å¹¶è®¡ç®—å¾—åˆ°ç»“æœï¼›å»ºç«‹è´¨é‡å±æ€§å’Œåº¦é‡ç»“æœä¹‹é—´çš„æ˜ å°„åŸåˆ™ï¼Œå³ç¡®å®šæ€æ ·ä»åº¦é‡ç»“æœæ¨å‡ºç³»ç»Ÿå…·æœ‰ä»€ä¹ˆæ ·çš„è´¨é‡å±æ€§ï¼›æ ¹æ®æ˜ å°„åŸåˆ™åˆ†ææ¨å¯¼å‡ºç³»ç»Ÿçš„æŸäº›è´¨é‡å±æ€§ã€‚</p><p>ä¼˜ç‚¹ï¼šç»“æœæ¯”è¾ƒå®¢è§‚ã€ç²¾ç¡®ã€‚</p><p>ç¼ºç‚¹ï¼šå¾ˆå¤šè´¨é‡å±æ€§æ— æ³•ç»™å‡ºå…·ä½“çš„è®¡ç®—å…¬å¼ï¼›èƒ½ç»™å‡ºè®¡ç®—å…¬å¼çš„è´¨é‡å±æ€§ï¼Œå¾€å¾€æ˜¯é’ˆå¯¹æºä»£ç çº§åˆ«çš„è´¨é‡å±æ€§(å¦‚ä»£ç è¡Œæ•°ã€æ–¹æ³•è°ƒç”¨çš„æ¬¡æ•°ã€æ„ä»¶ä¸ªæ•°ç­‰)ï¼Œè€Œè¿™äº›å±æ€§å¯¹SAçš„è¯„ä»·å¾€å¾€ç¼ºä¹è¶³å¤Ÿçš„æ„ä¹‰ï¼›éœ€è¦åœ¨SAè®¾è®¡åŸºæœ¬å®Œæˆä»¥åæ‰èƒ½è¿›è¡Œï¼›éœ€è¦è¯„ä¼°äººå‘˜å¯¹å¾…è¯„ä¼°çš„ä½“ç³»ç»“æ„ååˆ†äº†è§£ã€‚</p></li></ul><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612211514989.png" /></p><p>ATAMï¼ˆä½“ç³»ç»“æ„æƒè¡¡åˆ†ææ–¹æ³•ï¼‰ï¼šæŒ‰ç…§è´¨é‡éœ€æ±‚ï¼Œè¯„ä»·ä½“ç³»ç»“æ„è®¾è®¡</p><p>ATAMæ˜¯ä¸€ç§åŸºäºåœºæ™¯çš„SAè¯„ä¼°æ–¹æ³•ã€‚</p><p>ATAMç›®æ ‡ï¼šå‘ç°é£é™©ï¼šå¯èƒ½åœ¨æœªæ¥äº§ç”Ÿè´¨é‡é—®é¢˜çš„æ–¹æ¡ˆã€å‘ç°éé£é™©ï¼šå¯ä»¥æé«˜è´¨é‡çš„å†³ç­–ã€å‘ç°å…³é”®ç‚¹ï¼šæ–¹æ¡ˆä¸­ä¸€ä¸ªå°å°çš„å˜åŒ–ï¼Œå°±å¯èƒ½è®©è´¨é‡å®Œå…¨å¤§å˜æ ·ã€å‘ç°æŠ˜ä¸­ï¼šå½±å“ä¸€ä¸ªä»¥ä¸Šè´¨é‡çš„å†³ç­–ã€‚</p><p>ATAMè¾“å…¥ï¼šåœºæ™¯ï¼Œéœ€è¦å…³æ³¨çš„è´¨é‡å±æ€§åŠå¯¹å…¶çš„æé—®ã€å¾…è¯„ä»·çš„SAçš„è®¾è®¡æ–¹æ¡ˆ</p><p>ATAMä¸­é—´ç»“æœï¼šæ•ˆç”¨æ ‘</p><p>ATAMè¾“å‡ºï¼šé£é™©ã€éé£é™©ã€å…³é”®ç‚¹ã€æŠ˜ä¸­ç‚¹ã€‚</p><p>è¾“å…¥1ï¼šåœºæ™¯</p><p>åœºæ™¯æ˜¯ä¸€ç§ç®€çŸ­çš„é™ˆè¿°ï¼Œç”¨æ¥æè¿°ç³»ç»Ÿçš„ç›¸å…³äººå‘˜ä¹‹é—´ä½¿ç”¨è¯¥è½¯ä»¶ç³»ç»Ÿçš„ä¸€ä¸ªäº¤äº’åœºåˆã€‚</p><p>åœºæ™¯ç±»å‹ï¼š</p><ul><li><p>ç”¨ä¾‹åœºæ™¯</p><p>è½¯ä»¶ç³»ç»Ÿçš„å¸¸è§„åº”ç”¨åœºåˆ</p><p>ä¾‹å­ï¼šè¿œç¨‹ç”¨æˆ·é€šè¿‡Webè¯·æ±‚æ•°æ®æŠ¥è¡¨ï¼Œé«˜å³°æ—¶åˆ»å¯ä»¥åœ¨5ç§’ä¹‹å†…å¾—åˆ°ç»“æœï¼Œå¦‚æœç¼“å­˜ç³»ç»Ÿå¤„ç†å¤±è´¥ï¼Œé‚£ä¹ˆå°†åœ¨1ç§’ä¹‹å†…è¢«åˆ‡æ¢åˆ°å¦ä¸€ä¸ªå¤„ç†å™¨ï¼Œå›¾å½¢ä»æ°´å¹³å¸ƒå±€åˆ‡æ¢åˆ°å‚ç›´å¸ƒå±€ï¼Œé‡ç”»è¦åœ¨1ç§’ä¹‹å†…å®Œæˆ</p></li><li><p>å˜åŒ–æ€§åœºæ™¯</p><p>è½¯ä»¶ç³»ç»Ÿå¯é¢„æ–™åˆ°çš„å˜åŒ–</p><p>ä½¿ç”¨å°‘äº1äººå‘¨çš„å·¥ä½œé‡å³å¯åœ¨ç³»ç»Ÿä¸­åŠ å…¥ä¸€ç§æ–°çš„æ¶ˆæ¯ç±»å‹ï¼Œä½¿ç”¨å°‘äº1äººå¹´çš„å·¥ä½œé‡å³å¯å°†ç³»ç»Ÿè¿ç§»åˆ°å…¶ä»–OSï¼Œå¯ä»¥å°†æ•°æ®è¡¨çš„å°ºå¯¸å¢åŠ ä¸€å€ï¼Œä½†å…¶å¹³å‡å­˜å–æ—¶é—´å´ä»ç„¶ç»´æŒ1ç§’</p></li><li><p>æ¢æµ‹æ€§åœºæ™¯</p><p>æç«¯çš„å˜åŒ–ï¼Œå¯¹ç³»ç»Ÿè¿›è¡Œå‹åŠ›æµ‹è¯•</p><p>å³ä½¿50%çš„æœåŠ¡å™¨åœæ­¢å·¥ä½œä¹Ÿä¸ä¼šå½±å“æ•´ä¸ªç³»ç»Ÿçš„å¯ç”¨æ€§ï¼Œå°†ç³»ç»Ÿçš„å¯ç”¨æ€§ä»98%æé«˜åˆ°99.999%ï¼Œæ¯å°æ—¶äº¤æ˜“æ•°æ®æˆ10å€é‡çš„å¢åŠ ï¼Œä½†ä¿æŒæœ€å·®çš„å“åº”æ—¶é—´åœ¨10ç§’ä¹‹å†…</p></li></ul><p>è¾“å…¥2ï¼šå¯¹è´¨é‡å±æ€§çš„æé—®</p><p>è´¨è¯¢ä½“ç³»ç»“æ„åœ¨ç‰¹å®šçš„è´¨é‡éœ€æ±‚ä¸Šå¦‚ä½•ä½œä¸ºï¼Œé€šè¿‡â€œå¤´è„‘é£æš´â€ï¼Œå°½å¯èƒ½æ±‡æ€»ä¸è´¨é‡å±æ€§ç›¸å…³çš„å„ç±»é—®é¢˜ã€‚</p><p>ä¸­é—´ç»“æœï¼šæ•ˆç”¨æ ‘</p><p>æ•ˆç”¨æ ‘ï¼šæä¾›äº†ä¸€ç§è‡ªé¡¶å‘ä¸‹çš„æœºåˆ¶æ¥å°†ç³»ç»Ÿçš„ä¸šåŠ¡é©±åŠ¨è¦ç´ ç¿»è¯‘ä¸ºå…·ä½“çš„è´¨é‡å±æ€§åŠå…¶åœºæ™¯</p><p>ç›®çš„ï¼šå¯¹åœºæ™¯çš„ä¼˜å…ˆçº§è¿›è¡Œæ’åº</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612212800914.png" /></p><p>è¾“å‡º1ï¼šé£é™©ä¸éé£é™©</p><p>é£é™©ï¼šSAè®¾è®¡ä¸­å­˜åœ¨æ½œåœ¨é—®é¢˜çš„å†³ç­–</p><p>ä¾‹å­ï¼š</p><ul><li>SAå†³ç­–ï¼šåœ¨ä¸‰å±‚C/Sæ ·å¼ä¸­ï¼Œç¬¬äºŒå±‚ä¸šåŠ¡é€»è¾‘çš„æ¨¡å—åˆ’åˆ†è§„åˆ™æ²¡æœ‰æ˜ç¡®çš„ç»™å‡ºï¼›</li><li>å¯èƒ½é€ æˆçš„åæœå’Œå½±å“ï¼šè¿™ä¼šå¯¼è‡´åŠŸèƒ½çš„æ··ä¹±ï¼Œå¹¶å¯èƒ½å¯¼è‡´ç¬¬ä¸‰å±‚çš„å¯ä¿®æ”¹æ€§è¾ƒå·®ï¼›</li><li>åˆ¤æ–­çš„ä¾æ®ï¼šå¦‚æœä¸å°†ä¸šåŠ¡é€»è¾‘æ¨¡å—åˆ’åˆ†è§„åˆ™æ¸…æ¥šçš„è¡¨è¿°å‡ºæ¥ï¼Œå°±å¯èƒ½ä¼šé—´æ¥å¯¼è‡´æ„ä»¶ä¹‹é—´çš„è€¦åˆåº¦å¢å¤§ã€‚</li></ul><p>éé£é™©ï¼šåœ¨ä¸€ä¸ªå¯ä¿¡çš„å‡è®¾ä¹‹ä¸‹è¢«è®¤ä¸ºæ˜¯â€œå¥½â€çš„å†³ç­–</p><p>ä¾‹å­ï¼š</p><ul><li>SAå‡è®¾ï¼šæ¶ˆæ¯çš„åˆ°è¾¾é€Ÿç‡ä¸º1æ¡/ç§’ï¼Œæ¶ˆæ¯å¤„ç†æ—¶é—´&lt;30 msï¼Œå¹¶å­˜åœ¨ä¸€ä¸ªè¾ƒé«˜ä¼˜å…ˆçº§çš„æ¶ˆæ¯å¤„ç†è¿›ç¨‹ï¼›</li><li>å¯èƒ½é€ æˆçš„å½±å“ï¼šâ€œæ¶ˆæ¯çš„æœ€é•¿å“åº”æ—¶é—´æœ€é•¿1ç§’é’Ÿâ€æ˜¯å¯è¡Œçš„ï¼›</li><li>åˆ¤æ–­çš„ä¾æ®ï¼šæ¶ˆæ¯çš„åˆ°è¾¾é€Ÿç‡æ˜¯é™å®šçš„ï¼Œé«˜ä¼˜å…ˆçº§å¤„ç†è¿›ç¨‹çš„â€œæŠ¢å â€æ•ˆæœæ˜¯å¯çŸ¥çš„ã€‚</li></ul><p>é£é™©å’Œéé£é™©éœ€è¦æè¿°çš„è¦ç´ ï¼šå·²åšå‡ºæˆ–æœªåšå‡ºçš„SAè®¾è®¡å†³ç­–ï¼Œè¯¥å†³ç­–å¯¹è´¨é‡å±æ€§çš„é€ æˆçš„åæœå’Œå½±å“ï¼Œé€ æˆè¯¥å½±å“çš„è®ºæ®ã€‚</p><p>è¾“å‡º2ï¼šå…³é”®ç‚¹</p><p>å…³é”®ç‚¹ï¼šSAä¸­å¯¹å®ç°ç‰¹å®šçš„è´¨é‡å±æ€§èµ·åˆ°å…³é”®ä½œç”¨çš„æ„ä»¶æˆ–æ„ä»¶é—´è¿æ¥å…³ç³»ã€‚å¦‚ï¼šåŠ å¯†ä½çš„å¤šå°‘å°†å¯¹ç½‘ç»œçš„æœºå¯†æ€§ç­‰çº§èµ·åˆ°å…³é”®ä½œç”¨ï¼›é€šè®¯åè®®å’Œæ–‡ä»¶æ ¼å¼çš„å°è£…ç¨‹åº¦å°†å†³å®šç€ç³»ç»Ÿç»´æŠ¤æ‰€éœ€çš„å·¥ä½œé‡çš„å¤§å°ï¼›æŠŠå®šæ—¶æ–¹æ³•ä»ä¸€ä¸ªç²¾ç¡®çš„æ¡†æ¶ç§»æ¤åˆ°ä¸€ä¸ªä¸ç²¾ç¡®çš„æ¡†æ¶ï¼Œä¼šæå¤§åœ°å½±å“å…¶ä»–æ¨¡å—çš„æ­£å¸¸å·¥ä½œã€‚</p><p>è¾“å‡º3ï¼šæŠ˜ä¸­ç‚¹</p><p>æŠ˜ä¸­ç‚¹ï¼šå½±å“åˆ°å¤šä¸ªè´¨é‡å±æ€§ï¼Œæ˜¯å¤šä¸ªè´¨é‡å±æ€§çš„å…³é”®ç‚¹ï¼Œè€Œä¸”æ˜¯çŸ›ç›¾çš„ã€‚å¦‚ï¼šæ”¹å˜åŠ å¯†çº§åˆ«ä¼šå½±å“åˆ°å®‰å…¨æ€§å’Œæ€§èƒ½ï¼›æé«˜åŠ å¯†çº§åˆ«ä¼šæ”¹å–„å®‰å…¨æ€§ï¼Œä½†éœ€è¦æ›´å¤šçš„å¤„ç†æ—¶é—´(æ€§èƒ½ä¸‹é™)ï¼›è€Œæ¶ˆæ¯çš„å¤„ç†æ—¶é—´ä¸èƒ½è¶…è¿‡æŸä¸€èŒƒå›´å› æ­¤ï¼Œâ€œåŠ å¯†çº§åˆ«â€å°±æ˜¯ä¸€ä¸ªæŠ˜ä¸­ç‚¹ã€‚</p><h3 id="è½¯ä»¶æ¶æ„æµ‹è¯•æ–¹æ³•">è½¯ä»¶æ¶æ„æµ‹è¯•æ–¹æ³•ğŸ’¨</h3><p>æ€§èƒ½æµ‹è¯•ç›®çš„ï¼šåœ¨æ­£å¸¸ã€å³°å€¼ä»¥åŠå¼‚å¸¸è´Ÿè½½æ¡ä»¶ä¸‹ï¼Œæµ‹è¯•ç³»ç»Ÿçš„å„é¡¹æ€§èƒ½æŒ‡æ ‡ï¼Œé€šè¿‡è‡ªåŠ¨åŒ–çš„æµ‹è¯•å·¥å…·æ¨¡æ‹Ÿè¿›è¡Œï¼ŒéªŒè¯è½¯ä»¶ç³»ç»Ÿæ˜¯å¦èƒ½å¤Ÿè¾¾åˆ°ç”¨æˆ·æå‡ºçš„æ€§èƒ½æŒ‡æ ‡ï¼ŒåŒæ—¶å‘ç°è½¯ä»¶ç³»ç»Ÿä¸­å­˜åœ¨çš„æ€§èƒ½ç“¶é¢ˆï¼Œä¼˜åŒ–è½¯ä»¶ï¼Œæœ€åèµ·åˆ°ä¼˜åŒ–ç³»ç»Ÿçš„ç›®çš„ã€‚</p><p>è´Ÿè½½æµ‹è¯•ï¼šä¸é™åˆ¶è½¯ä»¶çš„è¿è¡Œèµ„æºï¼Œæµ‹è¯•è½¯ä»¶çš„æ•°æ®ååé‡ä¸Šé™ï¼Œä»¥å‘ç°è®¾è®¡ä¸Šçš„é”™è¯¯æˆ–éªŒè¯ç³»ç»Ÿçš„è´Ÿè½½èƒ½åŠ›ï¼Œå°†ä½¿æµ‹è¯•å¯¹è±¡æ‰¿æ‹…ä¸åŒçš„å·¥ä½œé‡ï¼Œä»¥è¯„æµ‹å’Œè¯„ä¼°æµ‹è¯•å¯¹è±¡åœ¨ä¸åŒå·¥ä½œé‡æ¡ä»¶ä¸‹çš„æ€§èƒ½è¡Œä¸ºï¼Œä»¥åŠæŒç»­æ­£å¸¸è¿è¡Œçš„èƒ½åŠ›ï¼Œåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œé€æ¸å¢åŠ ç³»ç»Ÿè´Ÿæ‹…ï¼Œç›´åˆ°å‡ºç°ç³»ç»Ÿä¸èƒ½æ¥å—çš„æ€§èƒ½ç‚¹-ç³»ç»Ÿå´©æºƒã€‚</p><p>è´Ÿè½½æµ‹è¯•ç›®çš„ï¼šå‘ç°ç³»ç»Ÿçš„è´Ÿè½½æé™</p><p>å‹åŠ›æµ‹è¯•ï¼šæ¨¡æ‹Ÿå®é™…åº”ç”¨çš„è½¯ç¡¬ä»¶ç¯å¢ƒåŠç”¨æˆ·ä½¿ç”¨è¿‡ç¨‹çš„ç³»ç»Ÿè´Ÿè·ï¼Œé•¿æ—¶é—´æˆ–è¶…å¤§è´Ÿè·åœ°è¿è¡Œæµ‹è¯•è½¯ä»¶ï¼Œæ¥æµ‹è¯•è¢«æµ‹ç³»ç»Ÿçš„æ€§èƒ½ã€å¯é æ€§ã€ç¨³å®šæ€§ç­‰ã€‚åœ¨ä¸åŒçš„å¼ºè´Ÿè½½ä¸‹æµ‹è¯•ç³»ç»Ÿçš„è¿è¡ŒçŠ¶å†µã€‚</p><p>å‹åŠ›æµ‹è¯• VS è´Ÿè½½æµ‹è¯•ï¼š</p><ul><li>å®ç°æ–¹æ³•åŸºæœ¬ç›¸åŒ</li><li>æµ‹è¯•çš„ç›®çš„ä¸åŒï¼šè´Ÿè½½æµ‹è¯•æ˜¯é€šè¿‡æ”¹å˜ç³»ç»Ÿè´Ÿè½½æ–¹å¼ã€å¢åŠ è´Ÿè½½ç­‰æ¥å‘ç°ç³»ç»Ÿä¸­æ‰€å­˜åœ¨çš„æ€§èƒ½é—®é¢˜ã€‚è´Ÿè½½æµ‹è¯•æ˜¯ä¸€ç§æµ‹è¯•æ–¹æ³•ï¼Œå¯ä»¥ä¸ºæ€§èƒ½æµ‹è¯•ã€å‹åŠ›æµ‹è¯•æ‰€é‡‡ç”¨ã€‚</li><li>å‹åŠ›æµ‹è¯•é€šå¸¸æ˜¯åœ¨é«˜è´Ÿè½½æƒ…å†µä¸‹æ¥å¯¹ç³»ç»Ÿçš„ç¨³å®šæ€§è¿›è¡Œæµ‹è¯•ï¼Œæ›´æœ‰æ•ˆåœ°å‘ç°ç³»ç»Ÿç¨³å®šæ€§çš„éšæ‚£å’Œç³»ç»Ÿåœ¨è´Ÿè½½å³°å€¼çš„æ¡ä»¶ä¸‹åŠŸèƒ½éšæ‚£ç­‰ã€‚</li></ul><p>å®¹é‡æµ‹è¯•ï¼šç¡®å®šæµ‹è¯•å¯¹è±¡åœ¨ç»™å®šæ—¶é—´å†…èƒ½å¤ŸæŒç»­å¤„ç†çš„æœ€å¤§è´Ÿè½½æˆ–å·¥ä½œé‡</p><p>å®¹é‡æµ‹è¯•ä½œç”¨ï¼šè®©è½¯ä»¶å¼€å‘å•†æˆ–ç”¨æˆ·äº†è§£è¯¥è½¯ä»¶ç³»ç»Ÿçš„æ‰¿è½½èƒ½åŠ›æˆ–æä¾›æœåŠ¡çš„èƒ½åŠ›ï¼ŒçŸ¥é“äº†ç³»ç»Ÿçš„å®é™…å®¹é‡ï¼Œå¦‚æ˜¯ä¸èƒ½æ»¡è¶³è®¾è®¡è¦æ±‚ï¼Œå°±åº”è¯¥å¯»æ±‚æ–°çš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆï¼Œä»¥æé«˜ç³»ç»Ÿçš„å®¹é‡ã€‚æœ‰äº†å¯¹è½¯ä»¶è´Ÿè½½çš„å‡†ç¡®é¢„æµ‹ï¼Œä¸ä»…èƒ½å¯¹è½¯ä»¶ç³»ç»Ÿåœ¨å®é™…ä½¿ç”¨ä¸­çš„æ€§èƒ½çŠ¶å†µå……æ»¡ä¿¡å¿ƒï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å¸®åŠ©ç”¨æˆ·ç»æµåœ°è§„åˆ’åº”ç”¨ç³»ç»Ÿï¼Œä¼˜åŒ–ç³»ç»Ÿçš„éƒ¨ç½²ã€‚</p><p>ç½‘è·¯æ€§èƒ½æµ‹è¯•ï¼šæµ‹è¯•ç½‘ç»œå¸¦å®½ã€å»¶è¿Ÿã€è´Ÿè½½å’Œç«¯å£çš„å˜åŒ–å¯¹ç”¨æˆ·çš„å“åº”æ—¶é—´çš„å½±å“</p><p>ç½‘è·¯æ€§èƒ½æµ‹è¯•å®é™…åº”ç”¨ï¼šæµ‹è¯•ç”¨æˆ·æ•°ç›®ä¸ç½‘ç»œå¸¦å®½çš„å…³ç³»</p><p>ç½‘è·¯æ€§èƒ½æµ‹è¯•ä½œç”¨ï¼šç›‘æµ‹ç½‘ç»œç¯å¢ƒã€é¢„æµ‹</p><p>æ€§èƒ½æµ‹è¯•æ­¥éª¤ï¼š</p><ul><li>åˆ¶å®šç›®æ ‡å’Œåˆ†æç³»ç»Ÿé€‰æ‹©æµ‹è¯•åº¦é‡çš„æ–¹æ³•</li><li>é€‰æ‹©ç›¸å…³æŠ€æœ¯å’Œå·¥å…·</li><li>åˆ¶å®šè¯„ä¼°æ ‡å‡†</li><li>è®¾è®¡æµ‹è¯•ç”¨ä¾‹</li><li>è¿è¡Œæµ‹è¯•ç”¨ä¾‹</li><li>åˆ†ææµ‹è¯•ç»“æœ</li></ul><p>æ€§èƒ½æµ‹è¯•æŒ‡æ ‡ï¼šå“åº”æ—¶é—´ã€å†…å­˜ã€ç£ç›˜ã€å¤„ç†å™¨ã€ç½‘ç»œ</p><p>å‹åŠ›æµ‹è¯•</p><p>å‹åŠ›ï¼šåœ¨åŒä¸€æ—¶é—´å†…æˆ–æŸä¸€æ—¶é—´å†…ï¼Œå‘ç³»ç»Ÿå‘é€é¢„æœŸæ•°é‡çš„äº¤æ˜“è¯·æ±‚ã€‚å¹¶å‘äº¤æ˜“è¯·æ±‚ã€é€’å¢äº¤æ˜“è¯·æ±‚ã€å¹¶å‘é€’å¢äº¤æ˜“è¯·æ±‚</p><p>å‹åŠ›æµ‹è¯•ï¼šæµ‹è¯•ç³»ç»Ÿåœ¨ä¸åŒå‹åŠ›æƒ…å†µä¸‹çš„æ•ˆç‡çŠ¶å†µï¼Œä»¥åŠç³»ç»Ÿå¯ä»¥æ‰¿å—çš„å‹åŠ›æƒ…å†µ</p><p>å‹åŠ›æµ‹è¯•ç›®çš„ï¼šå‘ç°å½±å“ç³»ç»Ÿæ€§èƒ½çš„ç“¶é¢ˆï¼Œè¯„ä»·ç³»ç»Ÿæ€§èƒ½ï¼Œå¯¹ç³»ç»Ÿèµ„æºè¿›è¡Œä¼˜åŒ–ï¼Œæé«˜å“åº”æ—¶é—´ä¸ååé‡</p><p>å‹åŠ›æµ‹è¯•æµç¨‹å›¾ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612214438039.png" /></p><p>å‹åŠ›æµ‹è¯•è®¡åˆ’ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612214516154.png" /></p><p>å‹åŠ›æµ‹è¯•ç”¨ä¾‹ï¼šæ˜ç¡®æµ‹è¯•ç›®çš„ã€å‡†å¤‡æµ‹è¯•ç¯å¢ƒã€ç¡®å®šæµ‹è¯•æ•°æ®ã€ç¡®å®šæµ‹è¯•è¿è¡Œç¨‹åºï¼ˆè„šæœ¬ç­‰ï¼‰ã€æ˜ç¡®é¢„æœŸç»“æœ</p><p>æ¨¡æ‹Ÿå¤šç”¨æˆ·ï¼šæ–¹æ³•ï¼šé€šè¿‡å¤šè¿›ç¨‹è¿è¡Œç›¸åŒæˆ–ä¸åŒçš„æµ‹è¯•è„šæœ¬æ¥æ¨¡æ‹Ÿå¤šç”¨æˆ·æ‰§è¡Œç›¸åŒæˆ–ä¸åŒçš„ä»»åŠ¡ï¼Œé€šè¿‡å‘åŒ…ç¨‹åºå‘é€æ•°æ®åŒ…ã€‚æµ‹è¯•æ•°æ®å‚æ•°åŒ–ï¼šæ‰¾åˆ°éœ€è¦å‚æ•°åŒ–çš„åŸŸï¼Œåˆç†çš„è®¾ç½®è¾“å…¥æ•°æ®</p><p>è®¾ç½®å¹¶å‘ç‚¹ï¼šåŸå› ï¼šè¢«æµ‹äº‹åŠ¡ä¸èƒ½åŒæ—¶è¿è¡Œã€‚å®ç°åŸç†ï¼šç­‰å¾…ã€é‡Šæ”¾ã€å”¤é†’</p><p>æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼šè¿è¡Œæµ‹è¯•è„šæœ¬ï¼Œæ ¹æ®æƒ…å†µï¼Œè°ƒæ•´å¹¶å‘çš„è¿›ç¨‹æ•°ï¼Œç»“æœè‡ªåŠ¨è®°å½•</p><p>ç›‘æµ‹ç³»ç»Ÿèµ„æºï¼šç›‘æµ‹çš„å¯¹è±¡ï¼šç½‘ç»œé˜»å¡æƒ…å†µã€ä¸»æœºCPUä½¿ç”¨æƒ…å†µã€å†…å­˜ä½¿ç”¨æƒ…å†µã€ç¼“å­˜ä½¿ç”¨æƒ…å†µã€æ•°æ®åº“ç³»ç»Ÿçš„æ•°æ®é”ã€‚</p><p>åˆ†æç»“æœ</p><ul><li>åˆ†æå¯¹è±¡ï¼šæµ‹è¯•ä½¿ç”¨çš„æ—¶é—´ã€è¢«æµ‹äº‹åŠ¡çš„å“åº”æ—¶é—´ï¼ˆå¹¶å‘ï¼‰ã€è¿›ç¨‹æ•°ï¼ˆæˆåŠŸæ•°ã€å¤±è´¥æ•°ï¼‰ã€è¿›ç¨‹å¤±è´¥åŸå› ã€äº‹åŠ¡å“åº”æ—¶é—´éšç”¨æˆ·å¢åŠ çš„å˜åŒ–å›¾ã€èµ„æºé™åˆ¶<br /></li><li>åˆ†æå†…å®¹ï¼šæµ‹è¯•æ˜¯å¦æˆåŠŸï¼ˆå¤±è´¥åŸå› ï¼‰ã€å“åº”æ—¶é—´æ˜¯å¦æ»¡è¶³è¦æ±‚ã€äº‹åŠ¡å“åº”æ—¶é—´éšç”¨æˆ·å˜åŒ–å›¾æœ‰æ— å‰§çƒˆå˜åŒ–</li></ul><p>ä¼˜åŒ–è°ƒæ•´è®¾ç½®ï¼šCPUé—®é¢˜ã€å†…å­˜ä¸é«˜é€Ÿç¼“å­˜é—®é¢˜ã€ç£ç›˜ï¼ˆI/Oï¼‰èµ„æºé—®é¢˜ã€è°ƒæ•´é…ç½®å‚æ•°ã€ä¼˜åŒ–åº”ç”¨ç³»ç»Ÿç½‘ç»œè®¾ç½®</p><p>æµ‹è¯•æŠ¥å‘Šï¼šç»“æœæ•°æ®ã€å›¾å½¢è¯´æ˜</p><p>å‹åŠ›æµ‹è¯•å·¥å…·ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612215346504.png" /></p><p>ç³»ç»Ÿè°ƒä¼˜ï¼šç¡¬ä»¶å¹³å°ï¼šæœåŠ¡å™¨CPUã€å†…å­˜åŠç¡¬ç›˜ç­‰ï¼›ç½‘ç»œå¹³å°ï¼šè´Ÿè½½ã€å»¶è¿Ÿã€ä¼ è¾“æ•…éšœç­‰ï¼›è½¯ä»¶å¹³å°ï¼šæ•°æ®åº“ã€ä¸­é—´ä»¶ç­‰ï¼›åº”ç”¨çº§åˆ«ï¼šçº¿ç¨‹çº§åˆ«ã€ä¼šè¯çº§åˆ«ã€ä»£ç çº§åˆ«ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>è¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶ï¼ˆä¸‰ï¼‰</title>
    <link href="/post/82097da2.html"/>
    <url>/post/82097da2.html</url>
    
    <content type="html"><![CDATA[<p>å¯¹è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶è¯¾ç¨‹çš„ä¸»è¦å†…å®¹è¿›è¡Œæ€»ç»“</p><span id="more"></span><h1 id="è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶ä¸‰">è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶ï¼ˆä¸‰ï¼‰</h1><h2 id="ç¬¬å››ç« -æ•°æ®å±‚çš„è½¯ä»¶æ¶æ„æŠ€æœ¯">ç¬¬å››ç«  æ•°æ®å±‚çš„è½¯ä»¶æ¶æ„æŠ€æœ¯â›„</h2><h3 id="æ•°æ®é©±åŠ¨çš„è½¯ä»¶æ¶æ„æ¼”åŒ–">æ•°æ®é©±åŠ¨çš„è½¯ä»¶æ¶æ„æ¼”åŒ–â„ï¸</h3><h4 id="æ•°æ®ä¸è½¯ä»¶">æ•°æ®ä¸è½¯ä»¶ğŸ—¾</h4><p>ä¸€èˆ¬è€Œè¨€ï¼Œæ•°æ®æ˜¯æŒ‡å¯¹å®¢è§‚äº‹ä»¶è¿›è¡Œè®°å½•å¹¶å¯ä»¥é‰´åˆ«çš„ç¬¦å·ï¼Œæ˜¯å¯¹å®¢è§‚äº‹ç‰©çš„æ€§è´¨ã€çŠ¶æ€ä»¥åŠç›¸äº’å…³ç³»ç­‰è¿›è¡Œè®°è½½çš„ç‰©ç†ç¬¦å·æˆ–è¿™äº›ç‰©ç†ç¬¦å·çš„ç»„åˆã€‚å®ƒæ˜¯å¯è¯†åˆ«çš„ã€æŠ½è±¡çš„ç¬¦å·ã€‚è¡¨ç¤ºå½¢æ€ä¸Šï¼Œæ•°æ®å¯ä»¥æ˜¯ç‹­ä¹‰ä¸Šçš„æ•°å­—ï¼Œå¯ä»¥æ˜¯å…·æœ‰ä¸€å®šæ„ä¹‰çš„æ–‡å­—ã€å­—æ¯ã€æ•°å­—ç¬¦å·çš„ç»„åˆã€å›¾å½¢ã€å›¾åƒã€è§†é¢‘ã€éŸ³é¢‘ç­‰ï¼Œä¹Ÿå¯ä»¥æ˜¯å®¢è§‚äº‹ç‰©çš„å±æ€§ã€æ•°é‡ã€ä½ç½®åŠå…¶ç›¸äº’å…³ç³»çš„æŠ½è±¡è¡¨ç¤ºã€‚åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæ•°æ®æ˜¯æŒ‡æ‰€æœ‰èƒ½è¾“å…¥åˆ°è®¡ç®—æœºå¹¶è¢«è®¡ç®—æœºç¨‹åºå¤„ç†çš„ç¬¦å·çš„ä»‹è´¨çš„æ€»ç§°ï¼Œæ˜¯ç”¨äºè¾“å…¥ç”µå­è®¡ç®—æœºè¿›è¡Œå¤„ç†ï¼Œå…·æœ‰ä¸€å®šæ„ä¹‰çš„æ•°å­—ã€å­—æ¯ã€ç¬¦å·å’Œæ¨¡æ‹Ÿé‡ç­‰çš„é€šç§°ã€‚</p><p>æ•°æ®ä¸ä¿¡æ¯ï¼šä¿¡æ¯ä¸æ•°æ®æ—¢æœ‰è”ç³»ï¼Œåˆæœ‰åŒºåˆ«ã€‚æ•°æ®æ˜¯ä¿¡æ¯çš„è¡¨è¾¾ã€è½½ä½“ï¼Œä¿¡æ¯æ˜¯æ•°æ®çš„å†…æ¶µï¼Œæ˜¯å½¢ä¸è´¨çš„å…³ç³»ã€‚æ•°æ®æœ¬èº«æ²¡æœ‰æ„ä¹‰ï¼Œæ•°æ®åªæœ‰å¯¹å®ä½“è¡Œä¸ºäº§ç”Ÿå½±å“æ—¶æ‰æˆä¸ºä¿¡æ¯ã€‚</p><p>æ•°æ®ä¸è¯­ä¹‰ï¼šæ•°æ®çš„è¡¨ç°å½¢å¼è¿˜ä¸èƒ½å®Œå…¨è¡¨è¾¾å…¶å†…å®¹ï¼Œéœ€è¦ç»è¿‡è§£é‡Šï¼Œæ•°æ®å’Œå…³äºæ•°æ®çš„è§£é‡Šæ˜¯ä¸å¯åˆ†çš„ã€‚æ•°æ®çš„è§£é‡Šæ˜¯æŒ‡å¯¹æ•°æ®å«ä¹‰çš„è¯´æ˜ï¼Œæ•°æ®çš„å«ä¹‰ç§°ä¸ºæ•°æ®çš„è¯­ä¹‰ï¼Œæ•°æ®ä¸å…¶è¯­ä¹‰æ˜¯ä¸å¯åˆ†çš„ã€‚</p><p>æ•°æ®+è¯­ä¹‰+é€»è¾‘=ä¸šåŠ¡</p><p>ä»£ç +ä¸šåŠ¡=è½¯ä»¶åº”ç”¨ç³»ç»Ÿ</p><h4 id="æ•°æ®å¸¦æ¥çš„æ¶æ„å˜åŒ–">æ•°æ®å¸¦æ¥çš„æ¶æ„å˜åŒ–ğŸ¡</h4><p>æ•°æ®æ¶æ„æ¼”åŒ–ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612222205936.png" /></p><p>å•æœºMYSQLï¼šæ•°æ®é‡è¿‡å¤§ï¼Œå•æœºå­˜å‚¨ä¸ä¸‹ã€æ•°æ®é‡è¿‡å¤§ï¼Œå•æœºå†…å­˜å­˜ä¸ä¸‹æ•°æ®ç´¢å¼•ã€è®¿é—®é‡è¿‡å¤§ï¼Œåœ¨è¯»å†™æ··åˆçš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå®ä¾‹ä¸èƒ½æ‰¿å—</p><p>Memcached + MySQL +å‚ç›´åˆ†ç¦»ï¼šMemcached(ç¼“å­˜)è•´æ„è€Œç”Ÿï¼Œç®¡ç†ç¼“å­˜ã€‚ç¼“å­˜åŸåˆ™ï¼šé¢‘ç¹è¢«è®¿é—®çš„æ•°æ®å¯ä»¥è¢«æ”¾ç½®äºç¼“å­˜å½“ä¸­ï¼Œä»¥ä¾›é¢‘ç¹è®¿é—®ã€‚å‚ç›´åˆ†ç¦»æŒ‡æŒ‰ä¸šåŠ¡åˆ’åˆ†å°†ä¸åŒçš„æ•°æ®æ”¾åœ¨ä¸åŒçš„æ•°æ®åº“é‡Œã€‚</p><p>MySQLä¸»ä»è¯»å†™åˆ†ç¦»ï¼šä¸»ä»å¤åˆ¶ï¼šå®¹ç¾å¤‡ä»½ï¼Œç¼“å­˜å¤‡ä»½ï¼Œä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚è¯»å†™åˆ†ç¦»ï¼šå¢åˆ æ”¹æ˜¯å†™ï¼ŒæŸ¥ä¸ºè¯»ã€‚</p><p>åˆ†åº“åˆ†è¡¨ + æ°´å¹³æ‹†åˆ† + MySQLé›†ç¾¤</p><p>NoSQLï¼ˆNot Only SQLï¼‰ï¼šé«˜æ€§èƒ½ - å¯¹æ•°æ®åº“é«˜å¹¶å‘è¯»å†™çš„éœ€æ±‚ã€æµ·é‡å­˜å‚¨ -å¯¹æµ·é‡æ•°æ®çš„é«˜æ•ˆç‡å­˜å‚¨å’Œè®¿é—®çš„éœ€æ±‚ã€é«˜ä¼¸ç¼©æ€§ä¸é«˜å¯ç”¨æ€§ -å¯¹æ•°æ®åº“çš„é«˜å¯æ‰©å±•æ€§å’Œé«˜å¯ç”¨æ€§çš„éœ€æ±‚ã€‚</p><h3 id="æ•°æ®è¯»å†™ä¸ä¸»ä»åˆ†ç¦»">æ•°æ®è¯»å†™ä¸ä¸»ä»åˆ†ç¦»ğŸŒ¬ï¸</h3><h4 id="è¯»å†™åˆ†ç¦»">è¯»å†™åˆ†ç¦»ğŸ¦‘</h4><p>åŸºæœ¬åŸç†ï¼šå°†æ•°æ®åº“è¯»å†™æ“ä½œåˆ†æ•£åˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œæ•°æ®åº“æœåŠ¡å™¨æ­å»ºä¸»ä»é›†ç¾¤ï¼Œä¸€ä¸»ä¸€ä»ã€ä¸€ä¸»å¤šä»éƒ½å¯ä»¥ã€‚æ•°æ®åº“ä¸»æœºè´Ÿè´£è¯»å†™æ“ä½œï¼Œä»æœºåªè´Ÿè´£è¯»æ“ä½œã€‚æ•°æ®åº“ä¸»æœºé€šè¿‡å¤åˆ¶å°†æ•°æ®åŒæ­¥åˆ°ä»æœºï¼Œæ¯å°æ•°æ®åº“æœåŠ¡å™¨éƒ½å­˜å‚¨äº†æ‰€æœ‰çš„ä¸šåŠ¡æ•°æ®ã€‚ä¸šåŠ¡æœåŠ¡å™¨å°†å†™æ“ä½œå‘ç»™æ•°æ®åº“ä¸»æœºï¼Œå°†è¯»æ“ä½œå‘ç»™æ•°æ®åº“ä»æœºã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612234055701.png" /></p><p>ä¸»ä»å¤åˆ¶å»¶è¿Ÿé—®é¢˜ï¼šå¦‚æœä¸šåŠ¡æœåŠ¡å™¨å°†æ•°æ®å†™å…¥åˆ°æ•°æ®åº“ä¸»æœåŠ¡å™¨åç«‹åˆ»è¿›è¡Œè¯»å–ï¼Œæ­¤æ—¶è¯»æ“ä½œè®¿é—®çš„æ˜¯ä»æœºï¼Œä¸»æœºè¿˜æ²¡æœ‰å°†æ•°æ®å¤åˆ¶è¿‡æ¥ï¼Œåˆ°ä»æœºè¯»å–æ•°æ®æ˜¯è¯»ä¸åˆ°æœ€æ–°æ•°æ®çš„ï¼Œä¸šåŠ¡ä¸Šå°±å¯èƒ½å‡ºç°é—®é¢˜ã€‚</p><p>åº”å¯¹å¤åˆ¶å»¶è¿Ÿçš„æ–¹æ¡ˆï¼š</p><ul><li>å†™æ“ä½œåçš„è¯»æ“ä½œæŒ‡å®šå‘ç»™æ•°æ®åº“ä¸»æœåŠ¡å™¨</li><li>è¯»ä»æœºå¤±è´¥åå†è¯»ä¸€æ¬¡ä¸»æœº</li><li>å…³é”®ä¸šåŠ¡è¯»å†™æ“ä½œå…¨éƒ¨æŒ‡å‘ä¸»æœºï¼Œéå…³é”®ä¸šåŠ¡é‡‡ç”¨è¯»å†™åˆ†ç¦»</li></ul><p>åˆ†é…æœºåˆ¶ï¼š</p><ul><li><p>ç¨‹åºä»£ç å°è£…</p><p>å¯¹ä¸šåŠ¡æœåŠ¡å™¨è¿›è¡Œä»£ç å°è£…</p></li><li><p>ä¸­é—´ä»¶å°è£…</p><p>åœ¨ä¸šåŠ¡æœåŠ¡å™¨å’Œä¸»/ä»æœºç›´æ¥å¢åŠ ä¸­é—´ä»¶</p></li></ul><h4 id="ä¸»å¤‡ä¸ä¸»ä»å¤åˆ¶">ä¸»å¤‡ä¸ä¸»ä»å¤åˆ¶ğŸ™</h4><p>ä¸»å¤‡å¤åˆ¶åŸºæœ¬å®ç°é€»è¾‘ï¼š</p><ol type="1"><li>ä¸»æœºå­˜å‚¨æ•°æ®ï¼Œé€šè¿‡å¤åˆ¶é€šé“å°†æ•°æ®å¤åˆ¶åˆ°å¤‡æœºã€‚</li><li>æ­£å¸¸æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯æ— è®ºè¯»å†™æ“ä½œï¼Œéƒ½å‘é€ç»™ä¸»æœºï¼Œå¤‡æœºä¸å¯¹å¤–æä¾›ä»»ä½•è¯»å†™æœåŠ¡ã€‚</li><li>ä¸»æœºæ•…éšœæƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯ä¸ä¼šè‡ªåŠ¨å°†è¯·æ±‚å‘ç»™å¤‡æœºï¼Œæ­¤æ—¶æ•´ä¸ªç³»ç»Ÿå¤„äºä¸å¯ç”¨çŠ¶æ€ï¼Œä¸èƒ½è¯»å†™æ•°æ®ï¼Œä½†æ•°æ®å¹¶æ²¡æœ‰å…¨éƒ¨ä¸¢å¤±ï¼Œå› ä¸ºå¤‡æœºä¸Šæœ‰æ•°æ®ã€‚</li><li>å¦‚æœä¸»æœºèƒ½å¤Ÿæ¢å¤ï¼ˆäººå·¥æˆ–è‡ªåŠ¨ï¼‰ï¼Œå®¢æˆ·ç«¯ç»§ç»­è®¿é—®ä¸»æœºï¼Œä¸»æœºç»§ç»­å°†æ•°æ®å¤åˆ¶ç»™å¤‡æœºã€‚</li><li>å¦‚æœä¸»æœºä¸èƒ½æ¢å¤ï¼Œåˆ™éœ€è¦äººå·¥å‡çº§å¤‡æœºä¸ºä¸»æœºï¼Œå¢åŠ æ–°å¤‡æœºï¼Œåˆ‡æ¢è®¿é—®é“¾è·¯ã€‚<br /></li><li>ä¸»æœºä¸èƒ½æ¢å¤çš„æƒ…å†µä¸‹ï¼ŒæˆåŠŸå†™å…¥ä¸»æœºä½†è¿˜æ²¡æœ‰å¤åˆ¶åˆ°å¤‡æœºçš„æ•°æ®ä¼šä¸¢å¤±ï¼Œéœ€è¦äººå·¥è¿›è¡Œæ’æŸ¥å’Œæ¢å¤ï¼Œä¹Ÿè®¸æœ‰çš„æ•°æ®å°±æ°¸è¿œä¸¢å¤±äº†ï¼Œä¸šåŠ¡ä¸Šéœ€è¦è€ƒè™‘å¦‚ä½•åº”å¯¹æ­¤ç±»é£é™©ã€‚</li><li>å¦‚æœä¸»å¤‡é—´æ•°æ®å¤åˆ¶å»¶è¿Ÿï¼Œç”±äºå¤‡æœºå¹¶ä¸å¯¹å¤–æä¾›è¯»å†™æ“ä½œï¼Œå› æ­¤å¯¹ä¸šåŠ¡æ²¡æœ‰å½±å“ï¼Œä½†å¦‚æœå»¶è¿Ÿè¾ƒå¤šï¼Œæ°å¥½æ­¤æ—¶ä¸»æœºåˆå®•æœºäº†ï¼Œåˆ™å¯èƒ½ä¸¢å¤±è¾ƒå¤šæ•°æ®ï¼Œå› æ­¤å¯¹äºå¤åˆ¶å»¶è¿Ÿä¹Ÿä¸èƒ½æ‰ä»¥è½»å¿ƒã€‚ä¸€èˆ¬çš„åšæ³•æ˜¯åšå¤åˆ¶å»¶è¿Ÿçš„ç›‘æ§æªæ–½ï¼Œå½“å»¶è¿Ÿæ•°æ®é‡è¾ƒå¤§æ—¶åŠæ—¶é¢„è­¦ï¼Œç”±äººå·¥å¹²é¢„å¤„ç†ã€‚</li></ol><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612234938129.png" /></p><p>åœ¨æ­¤ç±»æ–¹æ¡ˆä¸­ï¼Œå¤‡æœºåªèµ·åˆ°å¤‡ä»½ä½œç”¨ã€‚</p><p>ä¼˜ç‚¹ï¼šå¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œä¸éœ€è¦æ„ŸçŸ¥å¤‡æœºçš„å­˜åœ¨ï¼Œå³ä½¿ç¾éš¾æ¢å¤åï¼ŒåŸæ¥çš„å¤‡æœºè¢«äººå·¥ä¿®æ”¹ä¸ºä¸»æœºåï¼Œå¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œåªæ˜¯è®¤ä¸ºä¸»æœºçš„åœ°å€æ¢äº†ï¼Œæ— éœ€çŸ¥é“æ˜¯åŸæ¥çš„å¤‡æœºå‡çº§ä¸ºä¸»æœºäº†ã€‚å¯¹äºä¸»æœºå’Œå¤‡æœºæ¥è¯´ï¼ŒåŒæ–¹åªéœ€è¦è¿›è¡Œæ•°æ®å¤åˆ¶å³å¯ï¼Œæ— é¡»è¿›è¡ŒçŠ¶æ€åˆ¤æ–­å’Œä¸»å¤‡å€’æ¢ç­‰å¤æ‚æ“ä½œã€‚</p><p>ç¼ºç‚¹ï¼šå¤‡æœºä»…æ˜¯å¤‡ä»½ï¼Œä¸æä¾›è¯»å†™æ“ä½œï¼Œç¡¬ä»¶æµªè´¹ã€‚æ•…éšœåéœ€äººå·¥å¹²é¢„ï¼Œæ— æ³•è‡ªåŠ¨æ¢å¤ã€‚</p><p>ä¸»ä»å¤åˆ¶åŸºæœ¬å®ç°é€»è¾‘ï¼š</p><ol type="1"><li>ä¸»æœºå­˜å‚¨æ•°æ®ï¼Œé€šè¿‡å¤åˆ¶é€šé“å°†æ•°æ®å¤åˆ¶åˆ°ä»æœºã€‚</li><li>æ­£å¸¸æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å†™æ“ä½œå‘é€ç»™ä¸»æœºï¼Œè¯»æ“ä½œå¯å‘é€ç»™ä¸»æœºä¹Ÿå¯ä»¥å‘é€ç»™ä»æœº(å¯ä»¥éšæœºè¯»ï¼Œè½®è¯¢è¯»ï¼Œåªè¯»ä¸»æœº)ã€‚</li><li>ä¸»æœºæ•…éšœæƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯æ— æ³•è¿›è¡Œå†™æ“ä½œï¼Œä½†å¯ä»¥å°†è¯»æ“ä½œå‘é€ç»™ä»æœºï¼Œä»æœºç»§ç»­å“åº”è¯»æ“ä½œï¼Œæ­¤æ—¶å’Œå†™æ“ä½œç›¸å…³çš„ä¸šåŠ¡ä¸å¯ç”¨ï¼Œä½†æ˜¯è¯»æ“ä½œç›¸å…³çš„ä¸å—å½±å“ã€‚</li><li>å¦‚æœä¸»æœºèƒ½å¤Ÿæ¢å¤ï¼ˆäººå·¥æˆ–è‡ªåŠ¨ï¼‰ï¼Œå®¢æˆ·ç«¯ç»§ç»­å°†å†™æ“ä½œè¯·æ±‚å‘é€ç»™ä¸»æœºï¼Œä¸»æœºç»§ç»­å°†æ•°æ®å¤åˆ¶ç»™ä»æœºã€‚</li><li>å¦‚æœä¸»æœºä¸èƒ½æ¢å¤ï¼Œåˆ™éœ€è¦äººå·¥å‡çº§ä»æœºä¸ºä¸»æœºï¼Œç„¶åè®©å®¢æˆ·ç«¯è®¿é—®æ–°ä¸»æœºï¼ŒåŒæ—¶ï¼Œä¸ºäº†ç»§ç»­ä¿æŒä¸»ä»ç»“æ„ï¼Œäººå·¥å¢åŠ æ–°æœºå™¨ä½œä¸ºä»æœºã€‚<br /></li><li>ä¸»æœºä¸èƒ½æ¢å¤çš„æƒ…å†µä¸‹ï¼ŒæˆåŠŸå†™å…¥äº†ä¸»æœºä½†æ˜¯è¿˜æ²¡æœ‰å¤åˆ¶åˆ°ä»æœºçš„æ•°æ®ä¼šä¸¢å¤±ï¼Œéœ€è¦äººå·¥è¿›è¡Œæ’æŸ¥å’Œæ¢å¤ï¼Œä¹Ÿè®¸æœ‰çš„æ•°æ®å°±æ°¸è¿œä¸¢å¤±äº†ï¼Œä¸šåŠ¡ä¸Šéœ€è¦è€ƒè™‘å¦‚ä½•åº”å¯¹æ­¤ç±»é£é™©ã€‚</li><li>å¦‚æœä¸»ä»é—´æ•°æ®å¤åˆ¶å»¶è¿Ÿï¼Œåˆ™ä¼šå‡ºç°ä¸»ä»è¯»å–æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚</li><li>å¦‚æœä¸»ä»é—´å»¶è¿Ÿè¾ƒå¤šï¼Œæ°å¥½æ­¤æ—¶ä¸»æœºåˆå®•æœºäº†ï¼Œåˆ™å¯èƒ½ä¸¢å¤±è¾ƒå¤šæ•°æ®ï¼Œå› æ­¤å¯¹äºå¤åˆ¶å»¶è¿Ÿä¹Ÿä¸èƒ½æ‰ä»¥è½»å¿ƒã€‚ä¸€èˆ¬çš„åšæ³•æ˜¯åšå¤åˆ¶å»¶è¿Ÿçš„ç›‘æ§æªæ–½ï¼Œå½“å»¶è¿Ÿæ•°æ®é‡è¾ƒå¤§æ—¶åŠæ—¶é¢„è­¦ï¼Œç”±äººå·¥å¹²é¢„å¤„ç†ã€‚</li></ol><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612235625718.png" /></p><p>ä¼˜ç¼ºç‚¹ï¼ˆç›¸å¯¹ä¸»å¤‡å¤åˆ¶è€Œè¨€ï¼‰ï¼šä¸»ä»å¤åˆ¶åœ¨ä¸»æœºæ•…éšœæ—¶ï¼Œè¯»æ“ä½œç›¸å…³çš„ä¸šåŠ¡ä¸å—å½±å“ã€‚ä¸»ä»å¤åˆ¶æ¶æ„çš„ä»æœºæä¾›è¯»æ“ä½œï¼Œå‘æŒ¥äº†ç¡¬ä»¶çš„æ€§èƒ½ã€‚ä¸»ä»å¤åˆ¶è¦æ¯”ä¸»å¤‡å¤åˆ¶å¤æ‚ï¼Œä¸»è¦ä½“ç°åœ¨å®¢æˆ·ç«¯éœ€è¦æ„ŸçŸ¥ä¸»ä»å…³ç³»ï¼Œå¹¶å°†ä¸åŒçš„æ“ä½œå‘ç»™ä¸åŒçš„æœºå™¨è¿›è¡Œå¤„ç†ã€‚</p><h4 id="ä¸»å¤‡å€’æ¢ä¸ä¸»ä»å€’æ¢">ä¸»å¤‡å€’æ¢ä¸ä¸»ä»å€’æ¢ğŸ¦</h4><p>ä¸»å¤‡å’Œä¸»ä»å¤åˆ¶çš„å…±æ€§é—®é¢˜ï¼šä¸»æœºæ•…éšœåï¼Œæ— æ³•è¿›è¡Œå†™æ“ä½œã€‚å¦‚æœä¸»æœºæ— æ³•æ¢å¤ï¼Œéœ€è¦äººå·¥æŒ‡å®šæ–°çš„ä¸»æœºã€‚</p><p>æ”¹è¿›å…³é”®ç‚¹ï¼šä¸»å¤‡é—´çŠ¶æ€åˆ¤æ–­ã€å€’æ¢å†³ç­–ã€æ•°æ®å†²çªã€‚</p><p>å¸¸è§æ¶æ„ï¼š</p><ul><li><p>äº’è¿å¼</p><p>ä¸»å¤‡æœºç›´æ¥å»ºç«‹çŠ¶æ€ä¼ é€’çš„æ¸ é“ï¼Œä¸ºäº†å……åˆ†åˆ©ç”¨ä¸»å¤‡è‡ªåŠ¨å€’æ¢æ–¹æ¡ˆè‡ªåŠ¨å†³å®šä¸»æœºçš„ä¼˜åŠ¿ï¼Œæ–¹æ¡ˆæœ‰ï¼šä¸»å¤‡æœºå…±äº«ä¸€ä¸ªå¯¹äºå®¢æˆ·ç«¯æ¥è¯´å”¯ä¸€çš„åœ°å€ï¼ˆå¦‚ï¼Œè™šæ‹ŸIPï¼‰ã€‚å®¢æˆ·ç«¯è®°å½•ä¸»å¤‡æœºå„è‡ªçš„IPï¼Œå¤‡æœºå…·æœ‰æ‹’ç»æœåŠ¡çš„èƒ½åŠ›ã€‚</p><p>ç¼ºç‚¹ï¼šçŠ¶æ€ä¼ é€’é€šé“æœ¬èº«æ•…éšœäº†ï¼Œåˆ™å¤‡æœºä¼šä¸»åŠ¨å‡çº§ä¸ºä¸»æœºï¼›è™½ç„¶å¯ä»¥é€šè¿‡å¤šé€šé“æ¥é™ä½é€šé“æ•…éšœçš„æœºç‡ï¼Œä½†æ˜¯é€šé“è¶Šå¤šï¼Œåç»­çš„çŠ¶æ€å†³ç­–è¶Šå¤æ‚ï¼Œç‰¹åˆ«æ˜¯å®¹æ˜“æ”¶åˆ°å¤šç§çŸ›ç›¾çš„ä¿¡æ¯ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613001039854.png" /></p></li><li><p>ä¸­ä»‹å¼</p><p>åœ¨ä¸»å¤‡æœºä¹‹é—´å¼•å…¥ç¬¬ä¸‰æ–¹ä¸­ä»‹ï¼Œä¸»å¤‡æœºä¹‹é—´ä¸ç›´æ¥è¿æ¥ï¼Œè€Œéƒ½å»è¿æ¥ä¸­ä»‹ï¼Œå¹¶ä¸”é€šè¿‡ä¸­ä»‹æ¥ä¼ é€’çŠ¶æ€ä¿¡æ¯ã€‚ç»“æ„å¤æ‚äº†ï¼Œä½†æ˜¯ä»çŠ¶æ€ä¼ é€’å’Œå†³ç­–ä¸Šæ›´åŠ ç®€å•ã€‚</p><p>çŠ¶æ€å†³ç­–çš„æ­¥éª¤ï¼š</p><ol type="1"><li>æ— è®ºä¸»æœºè¿˜æ˜¯å¤‡æœºï¼Œåˆå§‹çŠ¶æ€éƒ½æ˜¯å¤‡æœºï¼Œå¹¶ä¸”åªè¦ä¸ä¸­ä»‹æ–­å¼€è¿æ¥ï¼Œå°±å°†è‡ªå·±é™çº§ä¸ºå¤‡æœºï¼Œå› æ­¤å¯èƒ½å‡ºç°åŒå¤‡æœºçš„æƒ…å†µã€‚</li><li>ä¸»æœºä¸ä¸­ä»‹æ–­è¿åï¼Œä¸­ä»‹èƒ½å¤Ÿç«‹åˆ»å‘ŠçŸ¥å¤‡æœºï¼Œå¤‡æœºå°†ä¸»æœºå‡çº§ä¸ºä¸»æœºã€‚</li><li>å¦‚æœæ˜¯ç½‘ç»œä¸­æ–­å¯¼è‡´ä¸»æœºä¸ä¸­ä»‹æ–­è¿ï¼Œä¸»æœºè‡ªå·±ä¼šé™çº§ä¸ºå¤‡æœºï¼Œç½‘ç»œæ¢å¤åï¼Œæ—§çš„ä¸»æœºä»¥æ–°çš„å¤‡æœºèº«ä»½å‘ä¸­ä»‹ä¸ŠæŠ¥è‡ªå·±çš„çŠ¶æ€ã€‚</li><li>å¦‚æœæ˜¯æ‰ç”µé‡å¯æˆ–è€…è¿›ç¨‹é‡å¯ï¼Œæ—§çš„ä¸»æœºåˆå§‹çŠ¶æ€ä¸ºå¤‡æœºï¼Œä¸ä¸­ä»‹æ¢å¤è¿æ¥åï¼Œå‘ç°å·²ç»æœ‰ä¸»æœºäº†ï¼Œä¿æŒè‡ªå·±å¤‡æœºçŠ¶æ€ä¸å˜ã€‚</li><li>ä¸»å¤‡æœºä¸ä¸­ä»‹è¿æ¥éƒ½æ­£å¸¸çš„æƒ…å†µä¸‹ï¼ŒæŒ‰ç…§å®é™…çš„çŠ¶æ€å†³å®šæ˜¯å¦è¿›è¡Œå€’æ¢ï¼Œå¦‚ï¼Œå“åº”è¶…æ—¶ã€‚</li></ol><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613001344785.png" /></p></li><li><p>æ¨¡æ‹Ÿå¼</p><p>ä¸»å¤‡æœºä¹‹é—´å¹¶ä¸ä¼ é€’ä»»ä½•çŠ¶æ€æ•°æ®ï¼Œè€Œæ˜¯å¤‡æœºæ¨¡æ‹Ÿæˆä¸ºä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œå‘ä¸»æœºå‘èµ·æ¨¡æ‹Ÿçš„è¯»å†™æ“ä½œï¼Œæ ¹æ®è¯»å†™æ“ä½œçš„å“åº”æƒ…å†µæ¥åˆ¤æ–­ä¸»æœºçš„çŠ¶æ€ã€‚</p><p>æ¨¡æ‹Ÿå¼ç›¸æ¯”äº’è¿å¼çš„ä¼˜ç¼ºç‚¹ï¼šå®ç°æ›´åŠ ç®€å•ã€‚æ¨¡æ‹Ÿå¼è¯»å†™æ“ä½œè·å–çŠ¶æ€ä¿¡æ¯åªæœ‰å“åº”ä¿¡æ¯ï¼ˆå¦‚ï¼ŒHTTP404ï¼Œè¶…æ—¶ï¼Œå“åº”æ—¶é—´è¶…è¿‡3 sç­‰ï¼‰ï¼Œæ²¡æœ‰äº’è¿å¼é‚£ä¹ˆå¤šæ ·ï¼ŒåŸºäºæœ‰é™çš„çŠ¶æ€æ¥åšçŠ¶æ€å†³ç­–ï¼Œå¯èƒ½å‡ºç°åå·®ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613001642145.png" /></p></li></ul><h4 id="ä¸»ä¸»å¤åˆ¶">ä¸»ä¸»å¤åˆ¶ğŸ¦‰</h4><p>ä¸»ä¸»å¤åˆ¶ï¼šä¸¤å°æœºå™¨éƒ½æ˜¯ä¸»æœºï¼Œäº’ç›¸å°†æ•°æ®å¤åˆ¶ç»™å¯¹æ–¹ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä»»æ„æŒ‘é€‰å…¶ä¸­ä¸€å°è¿›è¡Œè¯»å†™æ“ä½œã€‚</p><ol type="1"><li>ä¸¤å°ä¸»æœºéƒ½å­˜å‚¨æ•°æ®ï¼Œé€šè¿‡å¤åˆ¶é€šé“å°†æ•°æ®å¤åˆ¶åˆ°å¦ä¸€å°ä¸»æœºã€‚</li><li>æ­£å¸¸æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å¯ä»¥å°†è¯»å†™æ“ä½œå‘é€ç»™ä»»æ„ä¸€å°ä¸»æœºã€‚</li><li>ä¸€å°ä¸»æœºæ•…éšœæƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯åªéœ€è¦å°†è¯»å†™æ“ä½œå‘é€ç»™ä¸»æœºBå³å¯ï¼Œåä¹‹äº¦ç„¶ã€‚</li><li>å¦‚æœæ•…éšœä¸»æœºèƒ½å¤Ÿæ¢å¤ï¼Œåˆ™å®¢æˆ·ç«¯ç»§ç»­è®¿é—®ä¸¤å°ä¸»æœºï¼Œä¸¤å°ä¸»æœºç»§ç»­ç›¸äº’å¤åˆ¶å¯¹æ–¹æ•°æ®ã€‚</li><li>å¦‚æœæ•…éšœä¸»æœºä¸èƒ½æ¢å¤ï¼Œåˆ™éœ€è¦äººå·¥æ“ä½œï¼Œå¢åŠ ä¸€å°æ–°çš„æœºå™¨ä¸ºä¸»æœºã€‚</li><li>åŸæœ‰æ•…éšœä¸»æœºä¸èƒ½æ¢å¤çš„æƒ…å†µä¸‹ï¼ŒæˆåŠŸå†™å…¥åŸæœ‰æ•…éšœä¸»æœºä½†æ²¡æœ‰å¤åˆ¶åˆ°æ­£å¸¸ä¸»æœºçš„æ•°æ®ä¼šä¸¢å¤±ã€‚</li><li>å¦‚æœä¸¤å°ä¸»æœºé—´å¤åˆ¶å»¶è¿Ÿï¼Œåˆ™å¯èƒ½å‡ºç°å®¢æˆ·ç«¯åˆšå†™å…¥çš„æ•°æ®ï¼Œåœ¨å¦ä¸€å°ä¸»æœºä¸Šè¯»å–ä¸åˆ°ã€‚</li></ol><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613001859335.png" /></p><p>ä¼˜ç¼ºç‚¹ï¼šä¸¤å°ä¸»æœºï¼Œæ— å€’æ¢æ¦‚å¿µã€‚å®¢æˆ·ç«¯æ— é¡»åŒºåˆ†ä¸»å¤‡æœºèº«ä»½ã€‚å¿…é¡»ä¿è¯æ•°æ®èƒ½å¤ŸåŒå‘å¤åˆ¶ï¼Œç„¶è€Œå¾ˆå¤šæ•°æ®æ— æ³•åŒå‘å¤åˆ¶ï¼Œå¦‚ä¸¤ä¸ªåº“æ–°æ’å…¥æ•°æ®çš„IDå‡ä¸º100ï¼Œæˆ–è€…ä¸¤äººå¯¹æŸäº§å“ï¼ˆ100ä»¶ï¼‰è¿›è¡Œè´­ä¹°ï¼Œç”²ä»Aä¹°äº†1ä»¶ï¼Œä¹™ä»Bä¹°äº†2ä»¶ï¼Œå¦‚æœå¤åˆ¶Bto Aï¼Œåˆ™ä¸¤ä¸ªæ•°æ®åº“éƒ½æ˜¯98ã€‚å®é™…åº”è¯¥æ˜¯97ã€‚</p><h4 id="æ•°æ®é›†ç¾¤">æ•°æ®é›†ç¾¤ğŸª†</h4><p>æ•°æ®åº“é›†ä¸­é›†ç¾¤ï¼šä¸€ä¸»å¤šå¤‡/ä»ã€‚æ•°æ®éƒ½åªèƒ½å¾€ä¸»æœºå†™ï¼Œè€Œè¯»æ“ä½œå¯ä»¥å‚è€ƒä¸»å¤‡ï¼Œä¸»ä»çš„æ¶æ„è¿›è¡Œçµæ´»å˜åŒ–ã€‚å¤æ‚åº¦é«˜ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613002318599.png" /></p><p>æ•°æ®åˆ†æ•£é›†ç¾¤ï¼šå¤šä¸ªæœåŠ¡å™¨ç»„æˆä¸€ä¸ªé›†ç¾¤ï¼Œæ¯å°æœåŠ¡å™¨éƒ½ä¼šè´Ÿè´£å­˜å‚¨ä¸€éƒ¨åˆ†æ•°æ®ï¼ŒåŒæ—¶ï¼Œä¸ºäº†æå‡ç¡¬ä»¶åˆ©ç”¨ç‡ï¼Œæ¯å°æœåŠ¡å™¨åˆä¼šå¤‡ä»½ä¸€éƒ¨åˆ†æ•°æ®ã€‚æ•°æ®åˆ†æ•£é›†ç¾¤çš„å¤æ‚åº¦åœ¨äºå¦‚ä½•å°†æ•°æ®åˆ†é…åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šã€‚æ•°æ®åˆ†æ•£é›†ç¾¤ä¸­ï¼Œå¿…é¡»è¦æœ‰ä¸€ä¸ªè§’è‰²æ¥è´Ÿè´£æ‰§è¡Œæ•°æ®åˆ†é…ç®—æ³•ï¼Œå¯ä»¥æ˜¯ç‹¬ç«‹æœåŠ¡å™¨ï¼Œå¦‚HDFSæ¶æ„ï¼Œä¹Ÿå¯ä»¥æ˜¯é›†ç¾¤é€‰ä¸¾å‡ºçš„æœåŠ¡å™¨ï¼Œä¹Ÿç§°ä¹‹ä¸ºâ€œä¸»æœºâ€ï¼Œä½†èŒè´£å®Œå…¨ä¸åŒï¼Œå¦‚Elasticsearchã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613002526499.png" /></p><p>é›†ä¸­ VS åˆ†æ•£ï¼š</p><ul><li><p>å†™æ•°æ®è§’è‰²</p><p>æ•°æ®é›†ä¸­é›†ç¾¤æ¶æ„ä¸­ï¼Œå®¢æˆ·ç«¯åªèƒ½å°†æ•°æ®å†™åˆ°ä¸»æœºã€‚æ•°æ®åˆ†æ•£é›†ç¾¤æ¶æ„ä¸­ï¼Œå®¢æˆ·ç«¯å¯ä»¥å‘ä»»æ„æœåŠ¡å™¨ä¸­è¯»å†™æ•°æ®ã€‚</p></li><li><p>åº”ç”¨åœºæ™¯</p><p>æ•°æ®é›†ä¸­é›†ç¾¤é€‚åˆæ•°æ®é‡ä¸å¤§ï¼Œé›†ç¾¤æœºå™¨æ•°é‡ä¸å¤šçš„åœºæ™¯ï¼Œå¦‚ ZooKeeperé›†ç¾¤ï¼Œä¸€èˆ¬ä¸ªä½æ•°æœºå™¨ã€‚æ•°æ®åˆ†æ•£é›†ç¾¤ï¼Œç”±äºå…¶è‰¯å¥½çš„å¯ä¼¸ç¼©æ€§ï¼Œé€‚åˆä¸šåŠ¡æ•°æ®é‡å·¨å¤§ã€é›†ç¾¤æœºå™¨æ•°é‡åºå¤§çš„ä¸šåŠ¡åœºæ™¯ï¼Œå¦‚Hadoop é›†ç¾¤ï¼Œå¯è¾¾ä¸Šåƒå°æœåŠ¡å™¨ã€‚</p></li></ul><h3 id="æ•°æ®åˆ†åº“åˆ†è¡¨">æ•°æ®åˆ†åº“åˆ†è¡¨ğŸŒ</h3><h4 id="åˆ†åº“åˆ†è¡¨çš„åŸºæœ¬æ¦‚å¿µ">åˆ†åº“åˆ†è¡¨çš„åŸºæœ¬æ¦‚å¿µğŸ€„</h4><p>åˆ†åº“åˆ†è¡¨çš„æœ¬è´¨æ˜¯æ•°æ®æ‹†åˆ†ï¼Œæ˜¯å¯¹æ•°æ®è¿›è¡Œåˆ†è€Œæ²»ä¹‹çš„é€šç”¨æ¦‚å¿µã€‚ä¸ºäº†åˆ†æ•£æ•°æ®åº“çš„å‹åŠ›ï¼Œé‡‡ç”¨åˆ†åº“åˆ†è¡¨å°†ä¸€ä¸ªè¡¨ç»“æ„åˆ†ä¸ºå¤šä¸ªè¡¨ï¼Œæˆ–è€…å°†ä¸€ä¸ªè¡¨çš„æ•°æ®åˆ†ç‰‡åæ”¾å…¥å¤šä¸ªè¡¨ï¼Œè¿™äº›è¡¨å¯ä»¥æ”¾åœ¨åŒä¸€ä¸ªåº“é‡Œï¼Œä¹Ÿå¯ä»¥æ”¾åˆ°ä¸åŒçš„åº“é‡Œï¼Œç”šè‡³å¯ä»¥æ”¾åœ¨ä¸åŒçš„æ•°æ®åº“å®ä¾‹ä¸Šã€‚</p><p>å‚ç›´æ‹†åˆ†ï¼šæ ¹æ®ä¸šåŠ¡çš„ç»´åº¦ï¼Œå°†åŸæœ¬çš„ä¸€ä¸ªåº“ï¼ˆè¡¨ï¼‰æ‹†åˆ†ä¸ºå¤šä¸ªåº“ï¼ˆè¡¨ï¼‰ï¼Œæ¯ä¸ªåº“ï¼ˆè¡¨ï¼‰ä¸åŸæœ‰çš„ç»“æ„ä¸åŒã€‚</p><p>æ°´å¹³æ‹†åˆ†ï¼šæ ¹æ®åˆ†ç‰‡ç®—æ³•ï¼Œå°†ä¸€ä¸ªåº“ï¼ˆè¡¨ï¼‰æ‹†åˆ†ä¸ºå¤šä¸ªåº“ï¼ˆè¡¨ï¼‰ï¼Œæ¯ä¸ªåº“ï¼ˆè¡¨ï¼‰ä¾æ—§ä¿ç•™åŸæœ‰çš„ç»“æ„ã€‚</p><p>å•åº“å•è¡¨ â†’ å•åº“å¤šè¡¨ â†’ å¤šåº“å¤šè¡¨</p><p>åˆ†åº“åˆ†è¡¨çš„æ—¶æœºï¼šå¦‚æœåœ¨æ•°æ®åº“ä¸­è¡¨çš„æ•°é‡è¾¾åˆ°äº†ä¸€å®šé‡çº§ï¼Œåˆ™éœ€è¦è¿›è¡Œåˆ†è¡¨ï¼Œåˆ†è§£å•è¡¨çš„å¤§æ•°æ®é‡å¯¹ç´¢å¼•æŸ¥è¯¢å¸¦æ¥çš„å‹åŠ›ï¼Œå¹¶æ–¹ä¾¿å¯¹ç´¢å¼•å’Œè¡¨ç»“æ„çš„å˜æ›´ã€‚å¦‚æœæ•°æ®åº“çš„ååé‡è¾¾åˆ°äº†ç“¶é¢ˆï¼Œå°±éœ€è¦å¢åŠ æ•°æ®åº“å®ä¾‹ï¼Œåˆ©ç”¨å¤šä¸ªæ•°æ®åº“å®ä¾‹æ¥åˆ†è§£å¤§é‡çš„æ•°æ®åº“è¯·æ±‚å¸¦æ¥çš„ç³»ç»Ÿå‹åŠ›ã€‚å¦‚æœå¸Œæœ›åœ¨æ‰©å®¹æ—¶å¯¹åº”ç”¨å±‚çš„é…ç½®æ”¹å˜æœ€å°‘ï¼Œå°±éœ€è¦åœ¨æ¯ä¸ªæ•°æ®åº“å®ä¾‹ä¸­é¢„ç•™è¶³å¤Ÿçš„æ•°æ®åº“æ•°é‡ã€‚</p><h4 id="åˆ†åº“åˆ†è¡¨çš„è§£å†³æ–¹æ¡ˆ">åˆ†åº“åˆ†è¡¨çš„è§£å†³æ–¹æ¡ˆğŸƒ</h4><h5 id="å®¢æˆ·ç«¯åˆ†ç‰‡">å®¢æˆ·ç«¯åˆ†ç‰‡â›º</h5><p>å®¢æˆ·ç«¯åˆ†ç‰‡å°±æ˜¯ä½¿ç”¨åˆ†åº“åˆ†è¡¨çš„æ•°æ®åº“çš„åº”ç”¨å±‚ç›´æ¥æ“ä½œåˆ†ç‰‡é€»è¾‘ï¼Œåˆ†ç‰‡è§„åˆ™éœ€è¦åœ¨åŒä¸€ä¸ªåº”ç”¨çš„å¤šä¸ªèŠ‚ç‚¹é—´è¿›è¡ŒåŒæ­¥ï¼Œæ¯ä¸ªåº”ç”¨å±‚éƒ½åµŒå…¥ä¸€ä¸ªæ“ä½œåˆ‡ç‰‡çš„é€»è¾‘å®ç°ï¼Œä¸€èˆ¬é€šè¿‡ä¾èµ–Jar åŒ…æ¥å®ç°ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613003827491.png" /></p><p>å…·ä½“å®ç°æ–¹å¼åˆ†ä¸ºä¸‰ç§ï¼š</p><ul><li><p>åœ¨åº”ç”¨å±‚ç›´æ¥å®ç°</p><p>ç›´æ¥åœ¨åº”ç”¨å±‚è¯»å–åˆ†ç‰‡è§„åˆ™ï¼Œç„¶åè§£æåˆ†ç‰‡è§„åˆ™ï¼Œæ®æ­¤å®ç°åˆ‡åˆ†çš„è·¯ç”±é€»è¾‘ï¼Œä»åº”ç”¨å±‚ç›´æ¥å†³å®šæ¯æ¬¡æ“ä½œåº”è¯¥ä½¿ç”¨å“ªä¸ªæ•°æ®åº“å®ä¾‹ã€åº“ã€è¡¨ç­‰ã€‚</p><p>éœ€è¦ä¾µå…¥ä¸šåŠ¡ï¼Œä½†å®ç°ç®€å•ï¼Œé€‚åˆå¿«é€Ÿä¸Šçº¿ï¼Œåˆ‡åˆ†é€»è¾‘ç”±å¼€å‘è€…è‡ªè¡Œå®šä¹‰ï¼Œå®¹æ˜“è°ƒè¯•ç»´æŠ¤ã€‚ä½†æ±‚å¼€å‘è€…æ—¢è¦å®ç°ä¸šåŠ¡é€»è¾‘ï¼Œè¿˜éœ€è¦å®ç°æ¡†æ¶éœ€æ±‚ã€‚è¯¥å®ç°æ–¹å¼ä¼šè®©æ•°æ®åº“ä¿æŒçš„è¿æ¥æ¯”è¾ƒå¤šï¼Œå¯¹æ•´ä½“åº”ç”¨æœåŠ¡å™¨æ± çš„ç»´æŠ¤å°†é€ æˆå‹åŠ›ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613004119130.png" /></p></li><li><p>é€šè¿‡å®šåˆ¶ JDBC åè®®å®ç°</p><p>å¯è®©å¼€å‘è€…é›†ä¸­ç²¾åŠ›å®ç°ä¸šåŠ¡é€»è¾‘ï¼Œæ— é¡»å…³å¿ƒåˆ†åº“åˆ†è¡¨çš„å®ç°ã€‚</p><p>é€šè¿‡å®šåˆ¶JDBCåè®®æ¥å®ç°ï¼Œä¹Ÿå°±æ˜¯é’ˆå¯¹ä¸šåŠ¡é€»è¾‘å±‚æä¾›ä¸JDBCä¸€è‡´çš„æ¥å£ï¼Œåˆ†åº“åˆ†è¡¨åœ¨JDBCçš„å†…éƒ¨å®ç°ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613004228218.png" /></p></li><li><p>é€šè¿‡å®šåˆ¶ ORM æ¡†æ¶å®ç°</p><p>åˆ†ç‰‡è§„åˆ™å®ç°åˆ°ORMæ¡†æ¶ä¸­æˆ–è€…é€šè¿‡ORMæ¡†æ¶æ”¯æŒçš„æ‰©å±•æœºåˆ¶æ¥å®Œæˆåˆ†åº“åˆ†è¡¨çš„é€»è¾‘ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613004332626.png" /></p></li></ul><h5 id="ä»£ç†åˆ†ç‰‡">ä»£ç†åˆ†ç‰‡ğŸŒ</h5><p>ä»£ç†åˆ†ç‰‡å°±æ˜¯åœ¨åº”ç”¨å±‚å’Œæ•°æ®åº“å±‚ä¹‹é—´å¢åŠ ä¸€ä¸ªä»£ç†å±‚ï¼ŒæŠŠåˆ†ç‰‡çš„è·¯ç”±è§„åˆ™é…ç½®åœ¨ä»£ç†å±‚ï¼Œä»£ç†å±‚å¯¹å¤–æä¾›ä¸JDBCå…¼å®¹çš„æ¥å£ç»™åº”ç”¨å±‚ã€‚</p><p>åº”ç”¨å±‚çš„å¼€å‘äººå‘˜ä¸ç”¨å…³å¿ƒåˆ†ç‰‡è§„åˆ™ï¼Œåªéœ€å…³å¿ƒä¸šåŠ¡é€»è¾‘çš„å®ç°ï¼Œå¾…ä¸šåŠ¡é€»è¾‘å®ç°ä¹‹åï¼Œåœ¨ä»£ç†å±‚é…ç½®è·¯ç”±è§„åˆ™å³å¯ã€‚</p><p>ä»£ç†å±‚çš„å¼•å…¥å¢åŠ äº†ä¸€å±‚ç½‘ç»œä¼ è¾“ï¼Œå¯¹æ€§èƒ½ä¼šé€ æˆå½±å“ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613004511675.png" /></p><h5 id="æ”¯æŒäº‹åŠ¡çš„åˆ†å¸ƒå¼æ•°æ®åº“">æ”¯æŒäº‹åŠ¡çš„åˆ†å¸ƒå¼æ•°æ®åº“ğŸ”¥</h5><p>ç°åœ¨æœ‰å¾ˆå¤šäº§å“å¦‚OceanBaseã€TiDBç­‰å¯¹å¤–æä¾›å¯ä¼¸ç¼©çš„ä½“ç³»æ¶æ„ï¼Œå¹¶æä¾›ä¸€å®šçš„åˆ†å¸ƒå¼äº‹åŠ¡æ”¯æŒï¼Œå°†å¯ä¼¸ç¼©çš„ç‰¹ç‚¹å’Œåˆ†å¸ƒå¼äº‹åŠ¡çš„å®ç°åŒ…è£…åˆ°åˆ†å¸ƒå¼æ•°æ®åº“å†…éƒ¨ï¼Œå¯¹ä½¿ç”¨è€…é€æ˜ï¼Œä½¿ç”¨è€…ä¸éœ€è¦ç›´æ¥æ§åˆ¶è¿™äº›ç‰¹æ€§ã€‚</p><p>TiDBå¯¹å¤–æä¾›JDBCçš„æ¥å£ï¼Œè®©åº”ç”¨å±‚åƒä½¿ç”¨MySQLç­‰ä¼ ç»Ÿæ•°æ®åº“ä¸€æ ·ï¼Œæ— éœ€å…³æ³¨ä¼¸ç¼©ã€åˆ†ç‰‡ã€äº‹åŠ¡ç®¡ç†ç­‰ä»»åŠ¡ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613004603611.png" /></p><h4 id="åˆ†åº“åˆ†è¡¨çš„æ¶æ„è®¾è®¡">åˆ†åº“åˆ†è¡¨çš„æ¶æ„è®¾è®¡ğŸ“»</h4><p>å‚ç›´åˆ‡åˆ†æ˜¯æŒ‡æŒ‰ç…§ä¸šåŠ¡å°†è¡¨è¿›è¡Œåˆ†ç±»æˆ–åˆ†æ‹†ï¼Œå°†å…¶åˆ†å¸ƒåˆ°ä¸åŒæ•°æ®åº“ä¸Šã€‚ä¸åŒä¸šåŠ¡æ¨¡å—çš„æ•°æ®å¯ä»¥åˆ†æ•£åˆ°ä¸åŒæ•°æ®åº“æœåŠ¡å™¨ã€‚ä¹Ÿå¯ä»¥å†·çƒ­åˆ†ç¦»ï¼Œæ ¹æ®æ•°æ®çš„æ´»è·ƒåº¦å°†æ•°æ®è¿›è¡Œæ‹†åˆ†ã€‚å†·æ•°æ®ï¼šå˜åŒ–æ›´æ–°é¢‘ç‡ä½ï¼ŒæŸ¥è¯¢æ¬¡æ•°å¤šçš„æ•°æ®ã€‚çƒ­æ•°æ®ï¼šå˜åŒ–æ›´æ–°é¢‘ç‡é«˜ï¼Œæ´»è·ƒçš„æ•°æ®ã€‚ä¹Ÿå¯ä»¥äººä¸ºå°†ä¸€ä¸ªè¡¨ä¸­çš„å†…å®¹åˆ’åˆ†ä¸ºå¤šä¸ªè¡¨ï¼Œä¾‹å¦‚å°†æŸ¥è¯¢è¾ƒå¤šï¼Œå˜åŒ–ä¸å¤šçš„å­—æ®µæ‹†åˆ†æˆä¸€å¼ è¡¨æ”¾åœ¨æŸ¥è¯¢æ€§èƒ½é«˜çš„æœåŠ¡å™¨ï¼Œè€Œå°†é¢‘ç¹æ›´æ–°çš„å­—æ®µæ‹†åˆ†å¹¶éƒ¨ç½²åˆ°æ›´æ–°æ€§èƒ½é«˜çš„æœåŠ¡å™¨ã€‚</p><p>ä¾‹å­ï¼šåœ¨å¾®åšç³»ç»Ÿçš„è®¾è®¡ä¸­ï¼Œä¸€ä¸ªå¾®åšå¯¹è±¡åŒ…æ‹¬æ–‡ç« æ ‡é¢˜ã€ä½œè€…ã€åˆ†ç±»ã€åˆ›å»ºæ—¶é—´ç­‰å±æ€§å­—æ®µï¼Œè¿™äº›å­—æ®µå±äºå˜åŒ–é¢‘ç‡ä½çš„å†·æ•°æ®ï¼Œè€Œæ¯ç¯‡å¾®åšçš„æµè§ˆæ•°ã€å›å¤æ•°ã€ç‚¹èµæ•°ç­‰ç±»ä¼¼çš„ç»Ÿè®¡ä¿¡æ¯å±äºå˜åŒ–é¢‘ç‡é«˜çš„çƒ­æ•°æ®ã€‚å› æ­¤ï¼Œä¸€ç¯‡åšå®¢çš„æ•°æ®å¯ä»¥æŒ‰ç…§å†·çƒ­å·®å¼‚ï¼Œæ‹†åˆ†æˆä¸¤å¼ è¡¨ã€‚å†·æ•°æ®å­˜æ”¾çš„æ•°æ®åº“å¯ä»¥ä½¿ç”¨MyISAMå¼•æ“ï¼Œèƒ½æ›´å¥½åœ°è¿›è¡Œæ•°æ®æŸ¥è¯¢ï¼›çƒ­æ•°æ®å­˜æ”¾çš„æ•°æ®åº“å¯ä»¥ä½¿ç”¨InnoDBå­˜å‚¨å¼•æ“ï¼Œæ›´æ–°æ€§èƒ½å¥½ã€‚è¯»å¤šå†™å°‘çš„å†·æ•°æ®åº“å¯ä»¥éƒ¨ç½²åˆ°ç¼“å­˜æ•°æ®åº“ä¸Šã€‚</p><p>ä¼˜ç‚¹ï¼šæ‹†åˆ†åä¸šåŠ¡æ¸…æ™°ï¼Œæ‹†åˆ†è§„åˆ™æ˜ç¡®ï¼Œç³»ç»Ÿä¹‹é—´è¿›è¡Œæ•´åˆæˆ–æ‰©å±•å¾ˆå®¹æ˜“ï¼ŒæŒ‰ç…§æˆæœ¬ã€åº”ç”¨çš„ç­‰çº§æˆ–ç±»å‹ç­‰å°†è¡¨æ”¾åˆ°ä¸åŒçš„æœºå™¨ä¸Šï¼Œä¾¿äºç®¡ç†ï¼Œä¾¿äºå®ç°åŠ¨é™åˆ†ç¦»ã€å†·çƒ­åˆ†ç¦»çš„æ•°æ®åº“è¡¨çš„è®¾è®¡æ¨¡å¼ï¼Œæ•°æ®ç»´æŠ¤ç®€å•</p><p>ç¼ºç‚¹ï¼šéƒ¨åˆ†ä¸šåŠ¡è¡¨æ— æ³•å…³è”ï¼ˆJoinï¼‰ï¼Œåªèƒ½é€šè¿‡æ¥å£æ–¹å¼è§£å†³ï¼Œæé«˜äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œå—æ¯ç§ä¸šåŠ¡çš„ä¸åŒé™åˆ¶ï¼Œå­˜åœ¨å•åº“æ€§èƒ½ç“¶é¢ˆï¼Œä¸æ˜“è¿›è¡Œæ•°æ®æ‰©å±•å’Œæå‡æ€§èƒ½ï¼Œäº‹åŠ¡å¤„ç†å¤æ‚ã€‚</p><p>æ°´å¹³åˆ‡åˆ†ä¸æ˜¯å°†è¡¨è¿›è¡Œåˆ†ç±»ï¼Œè€Œæ˜¯å°†å…¶æŒ‰ç…§æŸä¸ªå­—æ®µçš„æŸç§è§„åˆ™åˆ†æ•£åˆ°å¤šä¸ªåº“ä¸­ï¼Œåœ¨æ¯ä¸ªè¡¨ä¸­åŒ…å«ä¸€éƒ¨åˆ†æ•°æ®ï¼Œæ‰€æœ‰è¡¨åŠ èµ·æ¥æ˜¯å…¨é‡æ•°æ®ã€‚ç®€è¨€ä¹‹ï¼Œå°†æ•°æ®æŒ‰ä¸€å®šè§„å¾‹ï¼ŒæŒ‰è¡Œåˆ‡åˆ†ï¼Œå¹¶åˆ†é…åˆ°ä¸åŒçš„åº“è¡¨é‡Œï¼Œè¡¨ç»“æ„å®Œå…¨ä¸€æ ·ã€‚</p><p>ä¾‹ï¼šåœ¨åšå®¢ç³»ç»Ÿä¸­ï¼Œå½“åŒæ—¶æœ‰100ä¸‡ä¸ªç”¨æˆ·åœ¨æµè§ˆæ—¶ï¼Œå¦‚æœæ˜¯å•è¡¨ï¼Œåˆ™å•è¡¨ä¼šè¿›è¡Œ100ä¸‡æ¬¡è¯·æ±‚ï¼›å‡å¦‚å°†å…¶åˆ†ä¸º100ä¸ªè¡¨ï¼Œå¹¶ä¸”åˆ†å¸ƒåœ¨10ä¸ªæ•°æ®åº“ä¸­ï¼Œæ¯ä¸ªè¡¨è¿›è¡Œ1ä¸‡æ¬¡è¯·æ±‚ï¼Œåˆ™æ¯ä¸ªæ•°æ®åº“ä¼šæ‰¿å—10ä¸‡æ¬¡è¯·æ±‚ã€‚å½“ç„¶è¿˜å¯ä»¥åˆ†é…åˆ°ä¸åŒæœåŠ¡å™¨çš„æœåŠ¡å®ä¾‹ä¸­ï¼Œåˆ†çš„è¡¨è¶Šå¤šï¼Œæ¯ä¸ªå•è¡¨çš„å‹åŠ›è¶Šå°ã€‚</p><p>ä¼˜ç‚¹ï¼šå•åº“å•è¡¨çš„æ•°æ®ä¿æŒåœ¨ä¸€å®šçš„é‡çº§ï¼Œæœ‰åŠ©äºæ€§èƒ½çš„æé«˜ã€‚åˆ‡åˆ†çš„è¡¨çš„ç»“æ„ç›¸åŒï¼Œåº”ç”¨å±‚æ”¹é€ è¾ƒå°‘ï¼Œåªéœ€è¦å¢åŠ è·¯ç”±è§„åˆ™å³å¯ã€‚æé«˜äº†ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œè´Ÿè½½èƒ½åŠ›</p><p>ç¼ºç‚¹ï¼šåˆ‡åˆ†åï¼Œæ•°æ®æ˜¯åˆ†æ•£çš„ï¼Œå¾ˆéš¾åˆ©ç”¨æ•°æ®åº“çš„Joinæ“ä½œï¼Œè·¨åº“Joinæ€§èƒ½å·®ã€‚æ‹†åˆ†è§„åˆ™éš¾ä»¥æŠ½è±¡ã€‚åˆ†ç‰‡äº‹åŠ¡çš„ä¸€è‡´æ€§éš¾ä»¥è§£å†³ã€‚æ•°æ®æ‰©å®¹çš„éš¾åº¦å’Œç»´æŠ¤é‡æå¤§</p><p>å‚ç›´ï¼Œæ°´å¹³åˆ‡åˆ†å…±åŒç‚¹ï¼šå­˜åœ¨åˆ†å¸ƒå¼äº‹åŠ¡çš„é—®é¢˜ï¼›å­˜åœ¨è·¨èŠ‚ç‚¹Joinçš„é—®é¢˜ï¼›å­˜åœ¨è·¨èŠ‚ç‚¹åˆå¹¶æ’åºã€åˆ†é¡µçš„é—®é¢˜ï¼›å­˜åœ¨å¤šæ•°æ®æºç®¡ç†çš„é—®é¢˜ï¼›å‚ç›´åˆ‡åˆ†æ›´åå‘äºä¸šåŠ¡æ‹†åˆ†çš„è¿‡ç¨‹ï¼Œæ°´å¹³åˆ‡åˆ†æ›´åå‘äºæŠ€æœ¯æ€§èƒ½æŒ‡æ ‡ã€‚</p><p>æ°´å¹³åˆ‡åˆ†çš„è·¯ç”±è¿‡ç¨‹ï¼šåˆ†åº“åˆ†è¡¨åï¼Œæ•°æ®å°†åˆ†å¸ƒåˆ°ä¸åŒçš„åˆ†ç‰‡è¡¨ä¸­ï¼Œé€šè¿‡åˆ†åº“åˆ†è¡¨è§„åˆ™æŸ¥æ‰¾åˆ°å¯¹åº”çš„è¡¨å’Œåº“çš„è¿‡ç¨‹å«åšè·¯ç”±ã€‚è®¾è®¡è¡¨æ—¶éœ€è¦ç¡®å®šå¯¹è¡¨æŒ‰ç…§ä»€ä¹ˆæ ·çš„è§„åˆ™è¿›è¡Œåˆ†åº“åˆ†è¡¨ã€‚ä¾‹å¦‚ï¼Œå½“ç”Ÿæˆæ–°ç”¨æˆ·æ—¶ï¼Œç¨‹åºå¾—ç¡®å®šå°†æ­¤ç”¨æˆ·çš„ä¿¡æ¯æ·»åŠ åˆ°å“ªä¸ªè¡¨ä¸­ã€‚åŒæ ·ï¼Œåœ¨ç™»å½•æ—¶æˆ‘ä»¬éœ€è¦é€šè¿‡ç”¨æˆ·çš„è´¦å·æ‰¾åˆ°æ•°æ®åº“ä¸­å¯¹åº”çš„è®°å½•ã€‚</p><p>æ°´å¹³åˆ‡åˆ†çš„åˆ†ç‰‡ç»´åº¦ï¼š</p><ul><li><p>æŒ‰å“ˆå¸Œåˆ‡ç‰‡</p><p>å¯¹æ•°æ®çš„æŸä¸ªå­—æ®µæ±‚å“ˆå¸Œï¼Œå†é™¤ä»¥åˆ†ç‰‡æ€»æ•°åå–æ¨¡ï¼Œå–æ¨¡åç›¸åŒçš„æ•°æ®ä¸€ä¸ªåˆ†ç‰‡ï¼Œè¿™æ ·å°†æ•°æ®åˆ†æˆå¤šä¸ªåˆ†ç‰‡å¥½å¤„ï¼šæ•°æ®åˆ‡ç‰‡æ¯”è¾ƒå‡åŒ€ï¼Œå¯¹æ•°æ®å‹åŠ›åˆ†æ•£çš„æ•ˆæœè¾ƒå¥½ç¼ºç‚¹ï¼šæ•°æ®åˆ†æ•£åï¼Œå¯¹äºæŸ¥è¯¢éœ€æ±‚éœ€è¦è¿›è¡Œèšåˆå¤„ç†</p></li><li><p>æŒ‰ç…§æ—¶é—´åˆ‡ç‰‡ æŒ‰ç…§æ—¶é—´çš„èŒƒå›´å°†æ•°æ®åˆ†å¸ƒåˆ°ä¸åŒçš„åˆ†ç‰‡</p></li></ul><p>åˆ†ç‰‡åçš„äº‹åŠ¡å¤„ç†æœºåˆ¶</p><p>CAPç†è®ºï¼šä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸èƒ½åŒæ—¶æ»¡è¶³â€œä¸€è‡´æ€§(C)ã€å¯ç”¨æ€§(A)å’Œåˆ†åŒºå®¹é”™æ€§(P)â€éœ€æ±‚ï¼Œæœ€å¤šåªèƒ½åŒæ—¶æ»¡è¶³ä¸¤ä¸ªã€‚</p><ul><li>C:Consistency(ä¸€è‡´æ€§)ï¼šä»»ä½•ä¸€ä¸ªè¯»æ“ä½œæ€»æ˜¯èƒ½è¯»å–åˆ°ä¹‹å‰å®Œæˆçš„å†™æ“ä½œç»“æœï¼Œä¹Ÿå°±æ˜¯åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œå¤šç‚¹çš„æ•°æ®æ˜¯ä¸€è‡´çš„ï¼›</li><li>A:Availability(å¯ç”¨æ€§)ï¼šæ¯ä¸€ä¸ªæ“ä½œæ€»æ˜¯èƒ½å¤Ÿåœ¨ç¡®å®šçš„æ—¶é—´å†…è¿”å›ï¼Œä¹Ÿå°±æ˜¯ç³»ç»Ÿéšæ—¶éƒ½æ˜¯å¯ç”¨çš„ï¼›</li><li>P: Tolerance of NetworkPartition(åˆ†åŒºå®¹å¿æ€§)ï¼šåœ¨å‡ºç°ç½‘ç»œåˆ†åŒºçš„æƒ…å†µä¸‹ï¼Œåˆ†ç¦»çš„ç³»ç»Ÿä¹Ÿèƒ½æ­£å¸¸è¿è¡Œã€‚</li></ul><p>å¯¹äºåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿè€Œè¨€ï¼Œåˆ†åŒºå®¹é”™æ€§(P)æ˜¯åŸºæœ¬éœ€æ±‚ï¼Œåªæœ‰CPå’ŒAPä¸¤ç§æ¨¡å¼çš„é€‰æ‹©ã€‚</p><ul><li>CPæ¨¡å¼ï¼šä¿è¯åˆ†å¸ƒåœ¨ç½‘ç»œä¸Šä¸åŒèŠ‚ç‚¹æ•°æ®ä¸€è‡´æ€§ï¼Œä½†å¯¹å¯ç”¨æ€§æ”¯æŒä¸è¶³ã€‚</li><li>APæ¨¡å¼ï¼šä»¥å®ç°â€œæœ€ç»ˆä¸€è‡´æ€§(EventualConsistency)â€æ¥ç¡®ä¿å¯ç”¨æ€§å’Œåˆ†åŒºå®¹å¿æ€§ï¼Œä½†å¼±åŒ–äº†æ•°æ®ä¸€è‡´æ€§è¦æ±‚ã€‚</li></ul><p>CAPå…³æ³¨çš„åŠ›åº¦æ˜¯æ•°æ®ï¼Œè€Œä¸æ˜¯æ•´ä¸ªç³»ç»Ÿã€‚æ¯ä¸ªç³»ç»Ÿéƒ½ä¼šå¤„ç†ä¸åŒç±»å‹çš„æ•°æ®ï¼Œæœ‰çš„æ•°æ®å¯ä»¥éµå®ˆCPï¼Œæœ‰çš„å¯ä»¥éµå®ˆAP</p><p>CAPæ˜¯å¿½ç•¥ç½‘ç»œå»¶è¿Ÿçš„ï¼ˆç†è®ºä¸­çš„Cå¹¶ä¸å¯èƒ½å®Œç¾çš„å®ç°ï¼Œå› ä¸ºç½‘ç»œå»¶è¿Ÿï¼‰ï¼Œæ­£å¸¸è¿è¡Œæƒ…å†µä¸‹ï¼Œä¸å­˜åœ¨CPå’ŒAPçš„é€‰æ‹©ï¼Œå¯ä»¥åŒæ—¶æ»¡è¶³CAï¼Œæ”¾å¼ƒå¹¶ä¸ç­‰äºä»€ä¹ˆéƒ½ä¸åšï¼Œéœ€è¦ä¸ºåˆ†åŒºæ¢å¤ååšå‡†å¤‡</p><p>ä¸¤é˜¶æ®µæäº¤åè®®ï¼šå‚ä¸è€…å°†æ“ä½œæˆè´¥é€šçŸ¥åè°ƒè€…ï¼Œå†ç”±åè°ƒè€…æ ¹æ®æ‰€æœ‰å‚ä¸è€…çš„åé¦ˆæƒ…æŠ¥å†³å®šå„å‚ä¸è€…æ˜¯å¦è¦æäº¤æ“ä½œè¿˜æ˜¯ä¸­æ­¢æ“ä½œã€‚</p><ol type="1"><li><p>è¯·æ±‚é˜¶æ®µ(è¡¨å†³)ï¼šäº‹åŠ¡åè°ƒè€…é€šçŸ¥æ¯ä¸ªå‚ä¸è€…å‡†å¤‡æäº¤æˆ–å–æ¶ˆäº‹åŠ¡ï¼Œç„¶åè¿›å…¥è¡¨å†³è¿‡ç¨‹ï¼Œå‚ä¸è€…è¦ä¹ˆåœ¨æœ¬åœ°æ‰§è¡Œäº‹åŠ¡ï¼Œå†™æœ¬åœ°çš„redoå’Œundoæ—¥å¿—ï¼Œä½†ä¸æäº¤ã€‚è¯·æ±‚é˜¶æ®µï¼Œå‚ä¸è€…å°†å‘ŠçŸ¥åè°ƒè€…è‡ªå·±çš„å†³ç­–:åŒæ„(äº‹åŠ¡å‚ä¸è€…æœ¬åœ°ä½œä¸šæ‰§è¡ŒæˆåŠŸ)æˆ–å–æ¶ˆï¼ˆæœ¬åœ°ä½œä¸šæ‰§è¡Œæ•…éšœï¼‰</p></li><li><p>æäº¤é˜¶æ®µ(æ‰§è¡Œ)ï¼šåœ¨è¯¥é˜¶æ®µï¼Œå†™è°ƒæ•´å°†åŸºäºç¬¬ä¸€ä¸ªé˜¶æ®µçš„æŠ•ç¥¨ç»“æœè¿›è¡Œå†³ç­–:æäº¤æˆ–å–æ¶ˆã€‚å½“ä¸”ä»…å½“æ‰€æœ‰çš„å‚ä¸è€…åŒæ„æäº¤äº‹åŠ¡ï¼Œåè°ƒè€…æ‰é€šçŸ¥æ‰€æœ‰çš„å‚ä¸è€…æäº¤äº‹åŠ¡ï¼Œå¦åˆ™åè°ƒè€…å°†é€šçŸ¥æ‰€æœ‰çš„å‚ä¸è€…å–æ¶ˆäº‹åŠ¡ï¼Œå‚ä¸è€…åœ¨æ¥æ”¶åˆ°åè°ƒè€…å‘æ¥çš„æ¶ˆæ¯åå°†æ‰§è¡Œå“åº”çš„æ“ä½œã€‚</p></li></ol><p>ç¼ºç‚¹ï¼šåŒæ­¥é˜»å¡é—®é¢˜ã€å•ç‚¹æ•…éšœã€æ•°æ®ä¸ä¸€è‡´</p><p>ä¸‰é˜¶æ®µæäº¤åè®®ï¼šé’ˆå¯¹â€œå•ç‚¹æ•…éšœâ€é—®é¢˜ï¼Œåœ¨ç¬¬ä¸€ã€äºŒé˜¶æ®µé—´åŠ å…¥â€œå‡†å¤‡é˜¶æ®µâ€ï¼Œå½“åè°ƒè€…æ•…éšœåï¼Œå‚ä¸è€…å¯ä»¥é€šè¿‡è¶…æ—¶æäº¤æ¥é¿å…ä¸€è‡´é˜»å¡ã€‚</p><ol type="1"><li>canCommité˜¶æ®µ</li></ol><p>3PCçš„canCommité˜¶æ®µå…¶å®å’Œ2PCçš„å‡†å¤‡é˜¶æ®µå¾ˆåƒã€‚åè°ƒè€…å‘å‚ä¸è€…å‘é€commitè¯·æ±‚ï¼Œå‚ä¸è€…å¦‚æœå¯ä»¥æäº¤å°±è¿”å›yeså“åº”ï¼Œå¦åˆ™è¿”å›noå“åº”</p><ol start="2" type="1"><li>preCommité˜¶æ®µ</li></ol><p>åè°ƒè€…æ ¹æ®å‚ä¸è€…canCommité˜¶æ®µçš„å“åº”æ¥å†³å®šæ˜¯å¦å¯ä»¥ç»§ç»­äº‹åŠ¡çš„preCommitæ“ä½œ</p><ul><li>åè°ƒè€…ä»æ‰€æœ‰å‚ä¸è€…å¾—åˆ°çš„åé¦ˆéƒ½æ˜¯yes:é‚£ä¹ˆè¿›è¡Œäº‹åŠ¡çš„é¢„æ‰§è¡Œï¼Œåè°ƒè€…å‘æ‰€æœ‰å‚ä¸è€…å‘é€preCommitè¯·æ±‚ï¼Œå¹¶è¿›å…¥preparedé˜¶æ®µã€‚å‚ä¸è€…æ¥æ”¶åˆ°preCommitè¯·æ±‚åä¼šæ‰§è¡Œäº‹åŠ¡æ“ä½œï¼Œå¹¶å°†undoå’Œredoä¿¡æ¯è®°å½•åˆ°äº‹åŠ¡æ—¥å¿—ä¸­ã€‚å¦‚æœä¸€ä¸ªå‚ä¸è€…æˆåŠŸåœ°æ‰§è¡Œäº†äº‹åŠ¡æ“ä½œï¼Œåˆ™è¿”å›ACKå“åº”ï¼ŒåŒæ—¶å¼€å§‹ç­‰å¾…æœ€ç»ˆæŒ‡ä»¤</li><li>åè°ƒè€…ä»æ‰€æœ‰å‚ä¸è€…å¾—åˆ°çš„åé¦ˆæœ‰ä¸€ä¸ªæ˜¯Noæˆ–æ˜¯ç­‰å¾…è¶…æ—¶ä¹‹ååè°ƒè€…éƒ½æ²¡æ”¶åˆ°å“åº”:é‚£ä¹ˆå°±è¦ä¸­æ–­äº‹åŠ¡ï¼Œåè°ƒè€…å‘æ‰€æœ‰çš„å‚ä¸è€…å‘é€abortè¯·æ±‚ã€‚å‚ä¸è€…åœ¨æ”¶åˆ°æ¥è‡ªåè°ƒè€…çš„abortè¯·æ±‚ï¼Œæˆ–è¶…æ—¶åä»æœªæ”¶åˆ°åè°ƒè€…è¯·æ±‚ï¼Œæ‰§è¡Œäº‹åŠ¡ä¸­æ–­ã€‚</li></ul><ol start="3" type="1"><li>doCommité˜¶æ®µåè°ƒè€…æ ¹æ®å‚ä¸è€…preCommité˜¶æ®µçš„å“åº”æ¥å†³å®šæ˜¯å¦å¯ä»¥ç»§ç»­äº‹åŠ¡çš„doCommitæ“ä½œ</li></ol><ul><li>åè°ƒè€…ä»å‚ä¸è€…å¾—åˆ°äº†ACKçš„åé¦ˆ:åè°ƒè€…æ¥æ”¶åˆ°å‚ä¸è€…å‘é€çš„ACKå“åº”ï¼Œé‚£ä¹ˆå®ƒå°†ä»é¢„æäº¤çŠ¶æ€è¿›å…¥åˆ°æäº¤çŠ¶æ€ï¼Œå¹¶å‘æ‰€æœ‰å‚ä¸è€…å‘é€doCommitè¯·æ±‚ã€‚å‚ä¸è€…æ¥æ”¶åˆ°doCommitè¯·æ±‚åï¼Œæ‰§è¡Œæ­£å¼çš„äº‹åŠ¡æäº¤ï¼Œå¹¶åœ¨å®Œæˆäº‹åŠ¡æäº¤ä¹‹åé‡Šæ”¾æ‰€æœ‰äº‹åŠ¡èµ„æºï¼Œå¹¶å‘åè°ƒè€…å‘é€haveCommittedçš„ACKå“åº”ã€‚é‚£ä¹ˆåè°ƒè€…æ”¶åˆ°è¿™ä¸ªACKå“åº”ä¹‹åï¼Œå®Œæˆä»»åŠ¡ã€‚</li><li>åè°ƒè€…ä»å‚ä¸è€…æ²¡æœ‰å¾—åˆ°ACKçš„åé¦ˆ,ä¹Ÿå¯èƒ½æ˜¯æ¥æ”¶è€…å‘é€çš„ä¸æ˜¯ACKå“åº”ï¼Œä¹Ÿå¯èƒ½æ˜¯å“åº”è¶…æ—¶ï¼šæ‰§è¡Œäº‹åŠ¡ä¸­æ–­ã€‚</li></ul><p>æœ€å¤§åŠªåŠ›ä¿è¯æ¨¡å¼é€‚ç”¨äºå¯¹ä¸€è‡´æ€§è¦æ±‚å¹¶ä¸ååˆ†ä¸¥æ ¼ï¼Œä½†æ˜¯å¯¹æ€§èƒ½è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ã€‚å…·ä½“å®ç°æ–¹æ³•ï¼šåœ¨æ›´æ–°å¤šä¸ªèµ„æºæ—¶ï¼Œå°†å¤šä¸ªèµ„æºçš„æäº¤å°½é‡å»¶ååˆ°æœ€åä¸€åˆ»å¤„ç†ï¼Œå¦‚æœä¸šåŠ¡æµç¨‹å‡ºç°é—®é¢˜ï¼Œåˆ™æ‰€æœ‰èµ„æºæ›´æ–°éƒ½å›æ»šï¼Œä¿æŒäº‹åŠ¡ä¸€è‡´ã€‚</p><p>äº‹åŠ¡è¡¥å¿æœºåˆ¶ï¼šåœ¨æ•°æ®åº“åˆ†åº“åˆ†è¡¨åï¼Œå¦‚æœæ¶‰åŠçš„å¤šä¸ªæ›´æ–°æ“ä½œåœ¨æŸä¸€ä¸ªæ•°æ®åº“èŒƒå›´å†…å®Œæˆï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ•°æ®åº“å†…çš„æœ¬åœ°äº‹åŠ¡ä¿è¯ä¸€è‡´æ€§ã€‚å¯¹äºè·¨åº“çš„å¤šä¸ªæ“ä½œï¼Œå¯é€šè¿‡è¡¥å¿å’Œé‡è¯•ï¼Œä½¿å…¶åœ¨ä¸€å®šæ—¶é—´çª—å£å†…å®Œæˆæ“ä½œã€‚è¿™æ ·æ—¢ä¿è¯äº†äº‹åŠ¡çš„æœ€ç»ˆä¸€è‡´æ€§ï¼Œåˆçªç ´äº†äº‹åŠ¡é‡åˆ°é—®é¢˜å°±å›æ»šçš„ä¼ ç»Ÿæ€æƒ³ã€‚å¦‚æœé‡‡ç”¨äº‹åŠ¡è¡¥å¿æœºåˆ¶ï¼Œåˆ™åœ¨é‡åˆ°é—®é¢˜æ—¶ï¼Œéœ€è¦è®°å½•é‡åˆ°é—®é¢˜çš„ç¯å¢ƒã€ä¿¡æ¯ã€æ­¥éª¤ã€çŠ¶æ€ç­‰ï¼Œåç»­é€šè¿‡é‡è¯•æœºåˆ¶ä½¿å…¶è¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§ã€‚</p><p>äº‹åŠ¡è·¯ç”±ï¼šæ— è®ºä½¿ç”¨å“ªç§åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†æ–¹æ³•ï¼Œéƒ½éœ€è¦å¯¹åˆ†åº“åˆ†è¡¨çš„å¤šä¸ªæ•°æ®æºè·¯ç”±äº‹åŠ¡ã€‚å¦‚æœæ›´æ–°æ“ä½œåœ¨ä¸€ä¸ªæ•°æ®åº“å®ä¾‹å†…å‘ç”Ÿï¼Œä¾¿å¯ä»¥ä½¿ç”¨æ•°æ®æºçš„äº‹åŠ¡æ¥å¤„ç†ã€‚å¯¹äºè·¨æ•°æ®æºçš„äº‹åŠ¡ï¼Œå¯é€šè¿‡åœ¨åº”ç”¨å±‚ä½¿ç”¨æœ€å¤§åŠªåŠ›ä¿è¯æ¨¡å¼å’Œäº‹åŠ¡è¡¥å¿æœºåˆ¶æ¥è¾¾æˆäº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚</p><ul><li><p>è‡ªåŠ¨æäº¤äº‹åŠ¡è·¯ç”±</p><p>è‡ªåŠ¨æäº¤äº‹åŠ¡è·¯ç”±é€šè¿‡ä¾èµ–JDBCæ•°æ®æºçš„è‡ªåŠ¨æäº¤äº‹åŠ¡ç‰¹æ€§ï¼Œå¯¹ä»»ä½•æ•°æ®åº“è¿›è¡Œæ›´æ–°æ“ä½œåä¼šè‡ªåŠ¨æäº¤äº‹åŠ¡ï¼Œä¸éœ€è¦å¼€å‘äººå‘˜æ‰‹åŠ¨æ“ä½œäº‹åŠ¡ï¼Œä¹Ÿä¸éœ€è¦é…ç½®äº‹åŠ¡ï¼Œä½†åªèƒ½æ»¡è¶³ç®€å•çš„ä¸šåŠ¡é€»è¾‘éœ€æ±‚ã€‚åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼ŒJDBCåœ¨è¿æ¥åˆ›å»ºåé»˜è®¤è®¾ç½®è‡ªåŠ¨æäº¤ä¸ºtrueï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨è·å–è¿æ¥åæ‰‹å·¥ä¿®æ”¹è¿™ä¸ªå±æ€§ã€‚</p></li><li><p>å¯ç¼–ç¨‹äº‹åŠ¡è·¯ç”±</p><p>é€šå¸¸é‡‡ç”¨Springçš„å£°æ˜å¼çš„äº‹åŠ¡æ¥ç®¡ç†æ•°æ®åº“äº‹åŠ¡ï¼Œåœ¨åˆ†åº“åˆ†è¡¨æ—¶ï¼Œäº‹åŠ¡å¤„ç†æ˜¯ä¸ªé—®é¢˜ï¼Œåœ¨ä¸€ä¸ªéœ€è¦å¼€å¯äº‹åŠ¡çš„æ–¹æ³•ä¸­ï¼Œéœ€è¦åŠ¨æ€åœ°ç¡®å®šå¼€å¯å“ªä¸ªæ•°æ®åº“å®ä¾‹çš„äº‹åŠ¡ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æ¯ä¸ªå¼€å¯äº‹åŠ¡çš„æ–¹æ³•è°ƒç”¨å‰å°±å¿…é¡»ç¡®å®šå¼€å¯å“ªä¸ªæ•°æ®æºçš„äº‹åŠ¡ã€‚</p></li><li><p>å£°æ˜å¼äº‹åŠ¡è·¯ç”±</p><p>åœ¨å®ç°çš„æ–¹æ³•ä¸Šç›´æ¥å£°æ˜äº‹åŠ¡çš„å¤„ç†æ³¨è§£ï¼Œæ³¨è§£åŒ…å«ä½¿ç”¨å“ªä¸ªæ•°æ®åº“åˆ†ç‰‡çš„äº‹åŠ¡ç®¡ç†å™¨çš„ä¿¡æ¯ã€‚</p></li></ul><p>åˆ†åº“åˆ†è¡¨å¼•èµ·çš„é—®é¢˜</p><ul><li><p>æ‰©å®¹ä¸è¿ç§»</p><p>æ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€åŠ¨é™æ•°æ®åˆ†ç¦»é—®é¢˜</p></li><li><p>æŸ¥è¯¢é—®é¢˜</p><p>åœ¨åˆ†åº“åˆ†è¡¨ä»¥åï¼Œå¦‚æœæŸ¥è¯¢çš„æ ‡å‡†æ˜¯åˆ†ç‰‡çš„ä¸»é”®ï¼Œåˆ™å¯ä»¥é€šè¿‡åˆ†ç‰‡è§„åˆ™å†æ¬¡è·¯ç”±å¹¶æŸ¥è¯¢ï¼Œä½†æ˜¯å¯¹äºå…¶ä»–ä¸»é”®çš„æŸ¥è¯¢ã€èŒƒå›´æŸ¥è¯¢ã€å…³è”æŸ¥è¯¢ã€æŸ¥è¯¢ç»“æœæ’åºç­‰ï¼Œå¹¶ä¸æ˜¯æŒ‰ç…§åˆ†åº“åˆ†è¡¨ç»´åº¦æ¥æŸ¥è¯¢çš„ã€‚</p></li><li><p>åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜</p><p>å¤šåº“å¤šè¡¨åˆ†å¸ƒå¼æ‰€å¼•å‘çš„ä¸€è‡´æ€§é—®é¢˜</p></li><li><p>åŒç»„æ•°æ®è·¨åº“é—®é¢˜</p><p>è¦å°½é‡æŠŠåŒä¸€ç»„æ•°æ®æ”¾åˆ°åŒä¸€å°æ•°æ®åº“æœåŠ¡å™¨ä¸Šï¼Œä¸ä½†åœ¨æŸäº›åœºæ™¯ä¸‹å¯ä»¥åˆ©ç”¨æœ¬åœ°äº‹åŠ¡çš„å¼ºä¸€è‡´æ€§ï¼Œè¿˜å¯ä»¥ä½¿è¿™ç»„æ•°æ®å®ç°è‡ªæ²»ã€‚</p></li></ul><h4 id="åˆ†åº“åˆ†è¡¨çš„ä¸­é—´ä»¶ç®€ä»‹">åˆ†åº“åˆ†è¡¨çš„ä¸­é—´ä»¶ç®€ä»‹ğŸ¹</h4><p>MyCat</p><p>MyCatæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ•°æ®åº“ä¸­é—´ä»¶ï¼Œä¸ä»…ä»…å¯ä»¥ç”¨ä½œè¯»å†™åˆ†ç¦»ã€ä»¥åŠåˆ†è¡¨åˆ†åº“ã€å®¹ç¾å¤‡ä»½ï¼Œè€Œä¸”å¯ä»¥ç”¨äºå¤šç§Ÿæˆ·åº”ç”¨å¼€å‘ã€äº‘å¹³å°åŸºç¡€è®¾æ–½ã€‚MyCatåé¢è¿æ¥çš„MyCat Serverï¼Œå°±å¥½è±¡æ˜¯MySQLçš„å­˜å‚¨å¼•æ“ï¼Œå¦‚InnoDBï¼ŒMyISAMç­‰ï¼Œå› æ­¤ï¼ŒMyCatæœ¬èº«å¹¶ä¸å­˜å‚¨æ•°æ®ï¼Œæ•°æ®æ˜¯åœ¨åç«¯çš„MySQLä¸Šå­˜å‚¨çš„ï¼Œå› æ­¤æ•°æ®å¯é æ€§ä»¥åŠäº‹åŠ¡ç­‰éƒ½æ˜¯MySQLä¿è¯çš„ã€‚</p><p>MyCatæ‹¦æˆªäº†ç”¨æˆ·å‘é€è¿‡æ¥çš„SQLè¯­å¥ï¼Œé¦–å…ˆå¯¹SQLè¯­å¥åšä¸€äº›ç‰¹å®šçš„åˆ†æï¼šå¦‚åˆ†ç‰‡åˆ†æã€è·¯ç”±åˆ†æã€è¯»å†™åˆ†ç¦»åˆ†æã€ç¼“å­˜åˆ†æç­‰ï¼Œç„¶åå°†æ­¤SQL å‘å¾€åç«¯çš„çœŸå®æ•°æ®åº“ï¼Œå¹¶å°†è¿”å›çš„ç»“æœåšé€‚å½“çš„å¤„ç†ï¼Œæœ€ç»ˆå†è¿”å›ç»™ç”¨æˆ·ã€‚ å½“ MyCatæ”¶åˆ°ä¸€ä¸ªSQLæ—¶ï¼Œä¼šå…ˆè§£æè¿™ä¸ªSQLï¼ŒæŸ¥æ‰¾æ¶‰åŠåˆ°çš„è¡¨ï¼Œç„¶åçœ‹æ­¤è¡¨çš„å®šä¹‰ï¼Œå¦‚æœæœ‰åˆ†ç‰‡è§„åˆ™ï¼Œåˆ™è·å–åˆ°SQLé‡Œåˆ†ç‰‡å­—æ®µçš„å€¼ï¼Œå¹¶åŒ¹é…åˆ†ç‰‡å‡½æ•°ï¼Œå¾—åˆ°è¯¥SQLå¯¹åº”çš„åˆ†ç‰‡åˆ—è¡¨ï¼Œç„¶åå°†SQLå‘å¾€è¿™äº›åˆ†ç‰‡å»æ‰§è¡Œï¼Œæœ€åæ”¶é›†å’Œå¤„ç†æ‰€æœ‰åˆ†ç‰‡è¿”å›çš„ç»“æœæ•°æ®ï¼Œå¹¶è¾“å‡ºåˆ°å®¢æˆ·ç«¯ã€‚</p><p>Sharding JDBC</p><p>Sharding-JDBCæ˜¯å½“å½“åº”ç”¨æ¡†æ¶ddframeä¸­ï¼Œä»å…³ç³»å‹æ•°æ®åº“æ¨¡å—dd-rdbä¸­åˆ†ç¦»å‡ºæ¥çš„æ•°æ®åº“æ°´å¹³åˆ†ç‰‡æ¡†æ¶ï¼Œå®ç°é€æ˜åŒ–æ•°æ®åº“åˆ†åº“åˆ†è¡¨è®¿é—®ã€‚Sharding-JDBCç›´æ¥å°è£…JDBCAPIï¼Œå¯ä»¥ç†è§£ä¸ºå¢å¼ºç‰ˆçš„JDBCé©±åŠ¨ï¼Œæ—§ä»£ç è¿ç§»æˆæœ¬å‡ ä¹ä¸ºé›¶ã€‚</p><h3 id="æ•°æ®ç¼“å­˜">æ•°æ®ç¼“å­˜â›ˆï¸</h3><h4 id="æ•°æ®ç¼“å­˜çš„åŸºæœ¬ç†è®º">æ•°æ®ç¼“å­˜çš„åŸºæœ¬ç†è®ºğŸª—</h4><p>ç¼“å­˜çš„æ¦‚å¿µï¼šç”¨äºå­˜å‚¨æ•°æ®çš„ç¡¬ä»¶æˆ–è½¯ä»¶ç»„ä»¶ï¼Œä»¥ä½¿å¾—åç»­æ›´å¿«è®¿é—®å“åº”çš„æ•°æ®ã€‚ç¼“å­˜ä¸­çš„æ•°æ®å¯èƒ½æ˜¯æå‰è®¡ç®—å¥½çš„ç»“æœã€æ•°æ®çš„å‰¯æœ¬ç­‰ã€‚</p><p>ç¼“å­˜çš„ä½œç”¨ï¼šä¸»è¦è§£å†³é«˜å¹¶å‘ï¼Œçƒ­ç‚¹æ•°æ®è®¿é—®çš„æ€§èƒ½é—®é¢˜ã€‚æä¾›é«˜æ€§èƒ½çš„æ•°æ®å¿«é€Ÿè®¿é—®ã€‚</p><p>ç¼“å­˜çš„åŸç†ï¼šå°†æ•°æ®å†™å…¥åˆ°è¯»å–é€Ÿåº¦æ›´å¿«çš„å­˜å‚¨ã€å°†æ•°æ®ç¼“å­˜åˆ°ç¦»åº”ç”¨æœ€è¿‘çš„ä½ç½®ã€å°†æ•°æ®ç¼“å­˜åˆ°ç¦»ç”¨æˆ·æœ€è¿‘çš„ä½ç½®ã€‚</p><p>è™½ç„¶ä»ç¡¬ä»¶ä»‹è´¨ä¸Šæ¥çœ‹ï¼Œæ— éå°±æ˜¯å†…å­˜å’Œç¡¬ç›˜ä¸¤ç§ï¼Œä½†ä»æŠ€æœ¯ä¸Šï¼Œå¯ä»¥åˆ†æˆå†…å­˜ã€ç¡¬ç›˜æ–‡ä»¶ã€æ•°æ®åº“ã€‚</p><p>æ•°æ®ç¼“å­˜çš„åŸºæœ¬æ¶æ„ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613144219176.png" /></p><ul><li><p>æœ¬åœ°ç¼“å­˜</p><p>æœ¬åœ°ç¼“å­˜æŒ‡çš„æ˜¯åœ¨åº”ç”¨ä¸­çš„ç¼“å­˜ç»„ä»¶ï¼Œå…¶æœ€å¤§çš„ä¼˜ç‚¹æ˜¯åº”ç”¨å’Œcacheæ˜¯åœ¨åŒä¸€ä¸ªè¿›ç¨‹å†…éƒ¨ï¼Œè¯·æ±‚ç¼“å­˜éå¸¸å¿«é€Ÿï¼Œæ²¡æœ‰è¿‡å¤šçš„ç½‘ç»œå¼€é”€ç­‰ï¼Œåœ¨å•åº”ç”¨ä¸éœ€è¦é›†ç¾¤æ”¯æŒæˆ–è€…é›†ç¾¤æƒ…å†µä¸‹å„èŠ‚ç‚¹æ— éœ€äº’ç›¸é€šçŸ¥çš„åœºæ™¯ä¸‹ä½¿ç”¨æœ¬åœ°ç¼“å­˜è¾ƒåˆé€‚ã€‚</p><p>æœ¬åœ°ç¼“å­˜çš„ç¼ºç‚¹ï¼šå› ä¸ºç¼“å­˜è·Ÿåº”ç”¨ç¨‹åºè€¦åˆï¼Œå¤šä¸ªåº”ç”¨ç¨‹åºæ— æ³•ç›´æ¥çš„å…±äº«ç¼“å­˜ï¼Œå„åº”ç”¨æˆ–é›†ç¾¤çš„å„èŠ‚ç‚¹éƒ½éœ€è¦ç»´æŠ¤è‡ªå·±çš„å•ç‹¬ç¼“å­˜ï¼Œå¯¹å†…å­˜æ˜¯ä¸€ç§æµªè´¹ã€‚</p><p>åº”ç”¨åœºæ™¯ï¼šç¼“å­˜å­—å…¸ç­‰å¸¸ç”¨æ•°æ®ã€‚</p><p>å®ç°æ–¹æ³•ï¼šåº”ç”¨ç¼–ç ï¼›ä¸­é—´ä»¶ï¼Œå¦‚Ehcacheã€ Guava Cacheç­‰</p></li><li><p>åˆ†å¸ƒå¼ç¼“å­˜</p><p>åˆ†å¸ƒå¼ç¼“å­˜æŒ‡çš„æ˜¯ä¸åº”ç”¨åˆ†ç¦»çš„ç¼“å­˜ç»„ä»¶æˆ–æœåŠ¡ï¼Œå…¶æœ€å¤§çš„ä¼˜ç‚¹æ˜¯è‡ªèº«å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åº”ç”¨ï¼Œä¸æœ¬åœ°åº”ç”¨éš”ç¦»ï¼Œå¤šä¸ªåº”ç”¨å¯ç›´æ¥çš„å…±äº«ç¼“å­˜</p><p>åº”ç”¨åœºæ™¯ï¼šç¼“å­˜ç»è¿‡å¤æ‚è¿ç®—å¾—å‡ºçš„æ•°æ®ã€ç¼“å­˜å­˜å‚¨ç³»ç»Ÿä¸­é¢‘ç¹è®¿é—®çš„çƒ­ç‚¹æ•°æ®ï¼Œå‡è½»å­˜å‚¨ç³»ç»Ÿå‹åŠ›</p><p>å¸¸ç”¨çš„åˆ†å¸ƒå¼ç¼“å­˜ä¸­é—´ä»¶ï¼šMemcachedã€Redis</p></li><li><p>åå‘ä»£ç†ç¼“å­˜</p><p>åå‘ä»£ç†ä½äºåº”ç”¨æœåŠ¡å™¨æœºæˆ¿ï¼Œå¤„ç†æ‰€æœ‰å¯¹WEBæœåŠ¡å™¨çš„è¯·æ±‚ã€‚å¦‚æœç”¨æˆ·è¯·æ±‚çš„é¡µé¢åœ¨ä»£ç†æœåŠ¡å™¨ä¸Šæœ‰ç¼“å†²çš„è¯ï¼Œä»£ç†æœåŠ¡å™¨ç›´æ¥å°†ç¼“å†²å†…å®¹å‘é€ç»™ç”¨æˆ·ã€‚å¦‚æœæ²¡æœ‰ç¼“å†²åˆ™å…ˆå‘WEBæœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œå–å›æ•°æ®ï¼Œæœ¬åœ°ç¼“å­˜åå†å‘é€ç»™ç”¨æˆ·ã€‚é€šè¿‡é™ä½å‘WEBæœåŠ¡å™¨çš„è¯·æ±‚æ•°ï¼Œä»è€Œé™ä½äº†WEBæœåŠ¡å™¨çš„è´Ÿè½½ã€‚</p><p>åº”ç”¨åœºæ™¯ï¼šä¸€èˆ¬åªç¼“å­˜ä½“ç§¯è¾ƒå°çš„é™æ€æ–‡ä»¶èµ„æºï¼Œå¦‚cssã€jsã€å›¾ç‰‡</p><p>å¸¸ç”¨çš„å¼€æºå®ç°ï¼šVarnishã€Nginxã€Squid</p></li><li><p>CDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰ç¼“å­˜</p><p>é€šè¿‡åœ¨ç°æœ‰äº’è”ç½‘ä¸­å¢åŠ ä¸€å±‚æ–°çš„ç½‘ç»œæ¶æ„ï¼ˆCDNSï¼‰ï¼Œå°†ç½‘ç«™å†…å®¹å‘å¸ƒåˆ°æœ€æ¥è¿‘ç”¨æˆ·çš„ç½‘ç»œâ€œè¾¹ç¼˜â€ï¼Œä½¿ç”¨æˆ·å¯ä»¥å°±è¿‘å–å¾—æ‰€éœ€çš„å†…å®¹ã€‚</p><p>CDNç›®æ ‡ï¼šè§£å†³ç”±äºç½‘ç»œå¸¦å®½å°ã€ç”¨æˆ·è®¿é—®é‡å¤§ã€ç½‘ç‚¹åˆ†å¸ƒä¸å‡ç­‰åŸå› æ‰€é€ æˆçš„ç”¨æˆ·è®¿é—®ç½‘ç«™å“åº”é€Ÿåº¦æ…¢çš„é—®é¢˜ã€‚</p><p>CDNï¼šå°†ä¸€ä¸ªæœåŠ¡å™¨çš„å†…å®¹å¹³å‡åˆ†å¸ƒåˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šï¼›æ™ºèƒ½è¯†åˆ«æœåŠ¡å™¨ï¼Œè®©ç”¨æˆ·è·å–ç¦»ç”¨æˆ·æœ€è¿‘çš„æœåŠ¡å™¨ï¼Œæé«˜è®¿é—®é€Ÿåº¦ã€‚</p></li></ul><p>å‘½ä¸­ç‡ï¼šå‘½ä¸­ç‡=è¿”å›æ­£ç¡®ç»“æœæ•°/è¯·æ±‚ç¼“å­˜æ¬¡æ•°ï¼›å‘½ä¸­ç‡é—®é¢˜æ˜¯ç¼“å­˜ä¸­çš„ä¸€ä¸ªéå¸¸é‡è¦çš„é—®é¢˜ï¼Œå®ƒæ˜¯è¡¡é‡ç¼“å­˜æœ‰æ•ˆæ€§çš„é‡è¦æŒ‡æ ‡ã€‚å‘½ä¸­ç‡è¶Šé«˜ï¼Œè¡¨æ˜ç¼“å­˜çš„ä½¿ç”¨ç‡è¶Šé«˜ã€‚</p><p>æœ€å¤§å…ƒç´ ï¼ˆæˆ–æœ€å¤§ç©ºé—´ï¼‰ï¼šç¼“å­˜ä¸­å¯ä»¥å­˜æ”¾çš„æœ€å¤§å…ƒç´ çš„æ•°é‡ï¼Œä¸€æ—¦ç¼“å­˜ä¸­å…ƒç´ æ•°é‡è¶…è¿‡è¿™ä¸ªå€¼ï¼ˆæˆ–è€…ç¼“å­˜æ•°æ®æ‰€å ç©ºé—´è¶…è¿‡å…¶æœ€å¤§æ”¯æŒç©ºé—´ï¼‰ï¼Œé‚£ä¹ˆå°†ä¼šè§¦å‘ç¼“å­˜å¯åŠ¨æ¸…ç©ºç­–ç•¥ï¼›æ ¹æ®ä¸åŒçš„åœºæ™¯åˆç†çš„è®¾ç½®æœ€å¤§å…ƒç´ å€¼å¾€å¾€å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šæé«˜ç¼“å­˜çš„å‘½ä¸­ç‡ï¼Œä»è€Œæ›´æœ‰æ•ˆçš„ä½¿ç”¨ç¼“å­˜ã€‚</p><p>åŸºæœ¬æ“ä½œï¼š</p><ul><li><p>å‘½ä¸­ä¸éªŒè¯</p><p>HTTPå†éªŒè¯ï¼šåŸå§‹æœåŠ¡å™¨çš„å†…å®¹å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œç¼“å­˜è¦ä¸æ—¶å¯¹å…¶è¿›è¡Œæ£€æµ‹ï¼Œçœ‹çœ‹å®ƒä»¬ä¿å­˜çš„å‰¯æœ¬æ˜¯å¦ä»æ˜¯æœåŠ¡å™¨ä¸Šæœ€æ–°çš„å‰¯æœ¬ï¼Œè¿›è¡Œâ€œæ–°é²œåº¦æ£€æµ‹â€ã€‚</p><p>ç¼“å­˜å¯ä»¥åœ¨ä»»æ„æ—¶åˆ»ï¼Œä»¥ä»»æ„çš„é¢‘ç‡å¯¹å‰¯æœ¬è¿›è¡Œå†éªŒè¯ã€‚ä½†ç”±äºç¼“å­˜ä¸­é€šå¸¸ä¼šåŒ…å«æ•°ç™¾ä¸‡çš„æ–‡æ¡£ï¼Œè€Œä¸”ç½‘ç»œå¸¦å®½æ˜¯å¾ˆçè´µçš„ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†ç¼“å­˜åªæœ‰åœ¨å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼Œå¹¶ä¸”å‰¯æœ¬æ—§å¾—è¶³ä»¥éœ€è¦æ£€æµ‹çš„æ—¶å€™ï¼Œæ‰ä¼šå¯¹å‰¯æœ¬è¿›è¡Œå†éªŒè¯ã€‚</p><p>ä¸ºäº†æœ‰æ•ˆåœ°è¿›è¡Œå†éªŒè¯ï¼ŒHTTPå®šä¹‰äº†ä¸€äº›ç‰¹æ®Šçš„è¯·æ±‚ï¼Œä¸ç”¨ä»æœåŠ¡å™¨ä¸Šè·å–æ•´ä¸ªå¯¹è±¡ï¼Œå°±å¯ä»¥å¿«é€Ÿæ£€æµ‹å‡ºå†…å®¹æ˜¯å¦æ˜¯æœ€æ–°çš„ã€‚</p><p>HTTP ä¸ºæˆ‘ä»¬æä¾›äº†å‡ ä¸ªç”¨æ¥å¯¹å·²ç¼“å­˜å¯¹è±¡è¿›è¡Œå†éªŒè¯çš„å·¥å…·ï¼Œä½†æœ€å¸¸ç”¨çš„æ˜¯If-Modified-Since é¦–éƒ¨ã€‚å°†è¿™ä¸ªé¦–éƒ¨æ·»åŠ åˆ° GETè¯·æ±‚ä¸­å»ï¼Œå°±å¯ä»¥å‘Šè¯‰æœåŠ¡å™¨ï¼Œåªæœ‰åœ¨ç¼“å­˜äº†å¯¹è±¡çš„å‰¯æœ¬ä¹‹åï¼Œåˆå¯¹å…¶è¿›è¡Œäº†ä¿®æ”¹çš„æƒ…å†µä¸‹ï¼Œæ‰å‘é€æ­¤å¯¹è±¡ã€‚</p><p>æœåŠ¡å™¨æ”¶åˆ° GET If-Modified-Since è¯·æ±‚æ—¶çš„ 3 ç§æƒ…å†µ:</p><ol type="1"><li>å†éªŒè¯å‘½ä¸­(revalidate hit)æˆ–ç¼“æ…¢å‘½ä¸­(slowhit)ï¼šå¦‚æœæœåŠ¡å™¨å¯¹è±¡æœªè¢«ä¿®æ”¹ï¼ŒæœåŠ¡å™¨ä¼šå‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªå°çš„ HTTP 304 NotModifiedå“åº”ã€‚åªè¦ç¼“å­˜çŸ¥é“å‰¯æœ¬ä»ç„¶æœ‰æ•ˆï¼Œå°±ä¼šå†æ¬¡å°†å‰¯æœ¬æ ‡è¯†ä¸ºæš‚æ—¶æ–°é²œçš„ï¼Œå¹¶å°†å‰¯æœ¬æä¾›ç»™å®¢æˆ·ç«¯ã€‚</li><li>å†éªŒè¯æœªå‘½ä¸­ï¼šå¦‚æœæœåŠ¡å™¨å¯¹è±¡ä¸å·²ç¼“å­˜å‰¯æœ¬ä¸åŒï¼ŒæœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€ä¸€æ¡æ™®é€šçš„ã€å¸¦æœ‰å®Œæ•´å†…å®¹çš„HTTP 200 OK å“åº”ã€‚</li><li>å¯¹è±¡è¢«åˆ é™¤ï¼šå¦‚æœæœåŠ¡å™¨å¯¹è±¡å·²ç»è¢«åˆ é™¤äº†ï¼ŒæœåŠ¡å™¨å°±å›é€ä¸€ä¸ª 404 NotFound å“åº”ï¼Œç¼“å­˜ä¹Ÿä¼šå°†å…¶å‰¯æœ¬åˆ é™¤ã€‚</li></ol></li><li><p>æ¸…æ´—</p><p>ç¼“å­˜æ¸…ç©ºç­–ç•¥ï¼šåœ¨ç¼“å­˜çš„å­˜å‚¨ç©ºé—´æœ‰é™åˆ¶ï¼Œå½“ç¼“å­˜ç©ºé—´è¢«ç”¨æ»¡æ—¶ï¼Œæ—¢è¦ä¿è¯ç¨³å®šæœåŠ¡ï¼Œåˆè¦æœ‰æ•ˆæå‡å‘½ä¸­ç‡ã€‚å¸¸è§çš„ä¸€èˆ¬ç­–ç•¥æœ‰ï¼šFIFOã€LFUã€LRUã€‚è®¾è®¡é€‚åˆè‡ªèº«æ•°æ®ç‰¹å¾çš„æ¸…ç©ºç­–ç•¥èƒ½æœ‰æ•ˆæå‡å‘½ä¸­ç‡ã€‚</p></li><li><p>æ›´æ–°</p><p>Cache aside</p><ul><li>å¤±æ•ˆï¼šåº”ç”¨ç¨‹åºå…ˆä»cacheå–æ•°æ®ï¼Œæ²¡æœ‰å¾—åˆ°ï¼Œåˆ™ä»æ•°æ®åº“ä¸­å–æ•°æ®ï¼ŒæˆåŠŸåï¼Œæ”¾åˆ°ç¼“å­˜ä¸­ã€‚</li><li>å‘½ä¸­ï¼šåº”ç”¨ç¨‹åºä»cacheä¸­å–æ•°æ®ï¼Œå–åˆ°åè¿”å›ã€‚</li><li>æ›´æ–°ï¼šå…ˆæŠŠæ•°æ®å­˜åˆ°æ•°æ®åº“ä¸­ï¼ŒæˆåŠŸåï¼Œå†è®©ç¼“å­˜å¤±æ•ˆã€‚</li></ul><p>Read/Write Through Pattern</p><ul><li>Read Throughæ˜¯åœ¨æŸ¥è¯¢æ“ä½œä¸­æ›´æ–°ç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ç¼“å­˜å¤±æ•ˆçš„æ—¶å€™ï¼ˆè¿‡æœŸæˆ–LRUæ¢å‡ºï¼‰ï¼ŒCacheAsideæ˜¯ç”±è°ƒç”¨æ–¹è´Ÿè´£æŠŠæ•°æ®åŠ è½½å…¥ç¼“å­˜ï¼Œè€ŒReadThroughåˆ™ç”¨ç¼“å­˜æœåŠ¡è‡ªå·±æ¥åŠ è½½ï¼Œä»è€Œå¯¹åº”ç”¨æ–¹æ˜¯é€æ˜çš„ã€‚</li><li>Write Throughåœ¨æ›´æ–°æ•°æ®æ—¶å‘ç”Ÿã€‚å½“æœ‰æ•°æ®æ›´æ–°çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰å‘½ä¸­ç¼“å­˜ï¼Œç›´æ¥æ›´æ–°æ•°æ®åº“ï¼Œç„¶åè¿”å›ã€‚å¦‚æœå‘½ä¸­äº†ç¼“å­˜åˆ™æ›´æ–°ç¼“å­˜ï¼Œç„¶åå†ç”±Cacheè‡ªå·±æ›´æ–°æ•°æ®åº“ï¼ˆè¿™æ˜¯ä¸€ä¸ªåŒæ­¥æ“ä½œï¼‰ã€‚</li></ul><p>Write Behind Caching Pattern</p><ul><li>ä¿—ç§°writebackï¼Œåœ¨æ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œåªæ›´æ–°ç¼“å­˜ï¼Œä¸æ›´æ–°æ•°æ®åº“ï¼Œè€Œæˆ‘ä»¬çš„ç¼“å­˜ä¼šå¼‚æ­¥åœ°æ‰¹é‡æ›´æ–°æ•°æ®åº“ã€‚è¿™ä¸ªè®¾è®¡çš„å¥½å¤„å°±æ˜¯è®©æ•°æ®çš„I/Oæ“ä½œé£å¿«æ— æ¯”ï¼Œå› ä¸ºå¼‚æ­¥ï¼ˆæ¯”å¦‚æ¶ˆæ¯é˜Ÿåˆ—ï¼‰ï¼Œwritebackè¿˜å¯ä»¥åˆå¹¶å¯¹åŒä¸€ä¸ªæ•°æ®çš„å¤šæ¬¡æ“ä½œï¼Œæ‰€ä»¥æ€§èƒ½çš„æé«˜æ˜¯ç›¸å½“å¯è§‚çš„ã€‚</li><li>ä½†æ˜¯è¿™ä¸ªè®¾è®¡çš„æœ€å¤§è‡´å‘½é—®é¢˜åœ¨äºæ•°æ®çš„éå¼ºä¸€è‡´æ€§ï¼Œæå¯èƒ½é€ æˆæ•°æ®çš„ä¸¢å¤±ã€‚å‡å¦‚ä½¿ç”¨redisä½œä¸ºç¼“å­˜æ•°æ®åº“ï¼Œæœ€è‡´å‘½çš„é—®é¢˜åœ¨äºrediså¹¶ä¸èƒ½ä¿è¯ç»å¯¹ä¸ä¸¢å¤±æ•°æ®ï¼Œä¹Ÿå°±æ˜¯redisçš„æŒä¹…åŒ–èƒ½åŠ›ï¼ˆä¸¤ç§æŒä¹…åŒ–éƒ½æ— æ³•ä¿è¯æ•°æ®ç»å¯¹ä¸¢å¤±ï¼‰ä¸è¶³ï¼Œredisä¸€æ—¦æŒ‚äº†ï¼Œå¯èƒ½é€ æˆæ•°æ®ä¸¢å¤±ä¸”æ— æ³•æ¢å¤ã€‚</li></ul></li></ul><h4 id="æœ¬åœ°ç¼“å­˜">æœ¬åœ°ç¼“å­˜â›°ï¸</h4><p>JVMå¯ä»¥ä½¿ç”¨çš„å†…å­˜åˆ†å¤–2ç§ï¼šå †å†…å†…å­˜ï¼ˆon-heapï¼‰å’Œå †å¤–å†…å­˜ï¼ˆoff-heapï¼‰</p><p>å †Heapæ˜¯å†…å­˜ä¸­åŠ¨æ€åˆ†é…å¯¹è±¡å­˜åœ¨çš„åœ°æ–¹ã€‚å¦‚æœä½¿ç”¨newä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå°±è¢«åˆ†é…åœ¨å †å†…å­˜ä¸Šã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒJavaä¸­åˆ†é…çš„éç©ºå¯¹è±¡éƒ½æ˜¯ç”±JVMçš„åƒåœ¾æ”¶é›†å™¨ç®¡ç†çš„ï¼Œä¹Ÿç§°ä¸ºå †å†…å†…å­˜ã€‚è™šæ‹Ÿæœºä¼šå®šæœŸå¯¹åƒåœ¾å†…å­˜è¿›è¡Œå›æ”¶ï¼Œåœ¨æŸäº›ç‰¹å®šçš„æ—¶é—´ç‚¹ï¼Œå®ƒä¼šè¿›è¡Œä¸€æ¬¡å½»åº•çš„å›æ”¶ã€‚å½»åº•å›æ”¶æ—¶ï¼Œåƒåœ¾æ”¶é›†å™¨ä¼šå¯¹æ‰€æœ‰åˆ†é…çš„å †å†…å†…å­˜è¿›è¡Œå®Œæ•´çš„æ‰«æï¼Œè¿™æ„å‘³ç€ä¸€æ¬¡åƒåœ¾æ”¶é›†å¯¹Javaåº”ç”¨é€ æˆçš„å½±å“ï¼Œè·Ÿå †çš„å¤§å°æ˜¯æˆæ­£æ¯”çš„ã€‚è¿‡å¤§çš„å †ä¼šå½±å“Javaåº”ç”¨çš„æ€§èƒ½ã€‚</p><p>å †å¤–å†…å­˜æ„å‘³ç€æŠŠå†…å­˜å¯¹è±¡åˆ†é…åœ¨JVMçš„å †ä»¥å¤–çš„å†…å­˜ï¼Œè¿™äº›å†…å­˜ç›´æ¥å—æ“ä½œç³»ç»Ÿç®¡ç†ï¼ˆè€Œä¸æ˜¯è™šæ‹Ÿæœºï¼‰ã€‚è¿™æ ·åšçš„ç»“æœå°±æ˜¯èƒ½ä¿æŒä¸€ä¸ªè¾ƒå°çš„å †ï¼Œä»¥å‡å°‘åƒåœ¾æ”¶é›†å¯¹åº”ç”¨çš„å½±å“ã€‚ä½¿ç”¨å †å¤–å†…å­˜èƒ½å¤Ÿé™ä½JVMåƒåœ¾å›æ”¶å¯¼è‡´çš„æš‚åœã€‚</p><p>æœ¬åœ°ç¼“å­˜å®ç°æ–¹æ³•ï¼š</p><ul><li><p>ç¼–ç¨‹ç›´æ¥å®ç°ç¼“å­˜</p><p>é™æ€å˜é‡å®ç°ï¼šé€šè¿‡é™æ€å˜é‡ä¸€æ¬¡è·å–åˆ°ç¼“å­˜å†…å­˜ä¸­ï¼Œå‡å°‘é¢‘ç¹çš„I/Oè¯»å–ï¼Œé™æ€å˜é‡å®ç°ç±»é—´å¯å…±äº«ï¼Œè¿›ç¨‹å†…å¯å…±äº«ï¼Œç¼“å­˜çš„å®æ—¶æ€§ç¨å·®ã€‚ä¸ºäº†è§£å†³æœ¬åœ°ç¼“å­˜æ•°æ®çš„å®æ—¶æ€§é—®é¢˜ï¼Œç›®å‰å¤§é‡ä½¿ç”¨çš„æ˜¯ç»“åˆZooKeeperçš„è‡ªåŠ¨å‘ç°æœºåˆ¶ï¼Œå®æ—¶å˜æ›´æœ¬åœ°é™æ€å˜é‡ç¼“å­˜ã€‚</p><p>ä¼˜ç‚¹æ˜¯èƒ½ç›´æ¥åœ¨heapåŒºå†…è¯»å†™ï¼Œæœ€å¿«ä¹Ÿæœ€æ–¹ä¾¿ï¼›ç¼ºç‚¹åŒæ ·æ˜¯å—heapåŒºåŸŸå½±å“ï¼Œç¼“å­˜çš„æ•°æ®é‡éå¸¸æœ‰é™ï¼ŒåŒæ—¶ç¼“å­˜æ—¶é—´å—GCå½±å“ã€‚ä¸»è¦æ»¡è¶³å•æœºåœºæ™¯ä¸‹çš„å°æ•°æ®é‡ç¼“å­˜éœ€æ±‚ï¼ŒåŒæ—¶å¯¹ç¼“å­˜æ•°æ®çš„å˜æ›´æ— éœ€å¤ªæ•æ„Ÿæ„ŸçŸ¥ï¼Œå¦‚ä¸Šä¸€èˆ¬é…ç½®ç®¡ç†ã€åŸºç¡€é™æ€æ•°æ®ç­‰åœºæ™¯ã€‚</p></li><li><p>ä¸­é—´ä»¶ Ehcache</p><p>Ehcacheçš„æ ¸å¿ƒå®šä¹‰ä¸»è¦åŒ…æ‹¬ï¼š</p><ul><li>cache managerï¼šç¼“å­˜ç®¡ç†å™¨ï¼Œå…è®¸å¤šå®ä¾‹</li><li>cacheï¼šç¼“å­˜ç®¡ç†å™¨å†…å¯ä»¥æ”¾ç½®è‹¥å¹²cacheï¼Œå­˜æ”¾æ•°æ®çš„å®è´¨ï¼Œæ‰€æœ‰cacheéƒ½å®ç°äº†Ehcacheæ¥å£ï¼Œè¿™æ˜¯ä¸€ä¸ªçœŸæ­£ä½¿ç”¨çš„ç¼“å­˜å®ä¾‹ï¼›é€šè¿‡ç¼“å­˜ç®¡ç†å™¨çš„æ¨¡å¼ï¼Œå¯ä»¥åœ¨å•ä¸ªåº”ç”¨ä¸­è½»æ¾éš”ç¦»å¤šä¸ªç¼“å­˜å®ä¾‹ï¼Œç‹¬ç«‹æœåŠ¡äºä¸åŒä¸šåŠ¡åœºæ™¯éœ€æ±‚ï¼Œç¼“å­˜æ•°æ®ç‰©ç†éš”ç¦»ï¼ŒåŒæ—¶éœ€è¦æ—¶åˆå¯å…±äº«ä½¿ç”¨</li><li>elementï¼šå•æ¡ç¼“å­˜æ•°æ®çš„ç»„æˆå•ä½ã€‚</li><li>system ofrecordï¼ˆSORï¼‰ï¼šå¯ä»¥å–åˆ°çœŸå®æ•°æ®çš„ç»„ä»¶ï¼Œå¯ä»¥æ˜¯çœŸæ­£çš„ä¸šåŠ¡é€»è¾‘ã€å¤–éƒ¨æ¥å£è°ƒç”¨ã€å­˜æ”¾çœŸå®æ•°æ®çš„æ•°æ®åº“ç­‰ï¼Œç¼“å­˜å°±æ˜¯ä»SORä¸­è¯»å–æˆ–è€…å†™å…¥åˆ°SORä¸­å»çš„ã€‚</li></ul></li></ul><h4 id="åˆ†å¸ƒå¼ç¼“å­˜">åˆ†å¸ƒå¼ç¼“å­˜ğŸ—»</h4><p>åˆ†å¸ƒå¼ç¼“å­˜çš„è¿ç§»ï¼š</p><ul><li><p>å¹³æ»‘è¿ç§»</p><p>æœ€å¼€å§‹æ˜¯è¿™æ ·çš„ï¼Œä½¿ç”¨äº†å…·æœ‰ä¸¤ä¸ªåˆ†ç‰‡çš„ç¼“å­˜é›†ç¾¤ï¼Œé€šè¿‡å…³é”®å­—å“ˆå¸Œçš„æ–¹å¼è¿›è¡Œè·¯ç”±ï¼Œå› ä¸ºä¸¤ä¸ªåˆ†ç‰‡å·²ç»ä¸èƒ½æ»¡è¶³ç¼“å­˜å®¹é‡çš„éœ€æ±‚ï¼Œæ‰€ä»¥ç°åœ¨éœ€è¦æ‰©å®¹åˆ°4ä¸ªåˆ†ç‰‡ï¼Œè¾¾åˆ°åŸæ¥ä¸¤å€çš„ç¼“å­˜æ€»å¤§å°ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è¿ç§»ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/d72l1kh1mk.jpeg" /></p><p>ç¬¬ä¸€æ­¥ï¼šåŒå†™ï¼ŒæŒ‰ç…§æ–°è§„åˆ™å’Œæ—§è§„åˆ™åŒæ—¶å¾€æ–°ç¼“å­˜å’Œæ—§ç¼“å­˜ä¸­å†™æ•°æ®</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613163917290.png" /></p><p>è¿™ä¸ªæ­¥éª¤æœ‰ä¼˜åŒ–çš„ç©ºé—´ï¼Œå› ä¸ºæ˜¯åœ¨æˆå€æ‰©å®¹çš„åœºæ™¯ä¸‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦å‡†å¤‡4ä¸ªå…¨æ–°çš„åˆ†ç‰‡ã€‚æ–°è§„åˆ™ä¸­å‰ä¸¤ä¸ªåˆ†ç‰‡çš„æ•°æ®ï¼Œå…¶å®æ˜¯æ—§è§„åˆ™ä¸­ä¸¤ä¸ªåˆ†ç‰‡æ•°æ®çš„å­é›†ï¼Œå¹¶ä¸”è§„åˆ™ä¸€è‡´ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é‡ç”¨å‰ä¸¤ä¸ªåˆ†ç‰‡ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€å…±éœ€è¦ä¸¤ä¸ªæ–°çš„åˆ†ç‰‡ï¼Œç”¨æ¥å¤„ç†å…³é”®å­—å“ˆå¸Œå–ä½™åä¸º2å’Œ3çš„æƒ…å†µï¼›ä½¿ç”¨æ—§çš„ç¼“å­˜åˆ†ç‰‡æ¥å¤„ç†å…³é”®å­—å“ˆå¸Œå–ä½™å0å’Œ1çš„æƒ…å†µå³å¯ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613164106338.png" /></p><p>ç¬¬äºŒæ­¥ï¼šè¿ç§»å†å²æ•°æ®ï¼ŒæŠŠæ—§ç¼“å­˜é›†ç¾¤ä¸­çš„å†å²æ•°æ®è¯»å–å‡ºæ¥ï¼ŒæŒ‰ç…§æ–°çš„è§„åˆ™å†™åˆ°æ–°çš„ç¼“å­˜é›†ç¾¤ä¸­</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613164222395.png" /></p><p>ç¬¬ä¸‰æ­¥ï¼Œåˆ‡è¯»ï¼ŒæŠŠåº”ç”¨å±‚æ‰€æœ‰çš„è¯»æ“ä½œè·¯ç”±åˆ°æ–°çš„ç¼“å­˜é›†ç¾¤ä¸Š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613164314432.png" /></p><p>ç¬¬å››æ­¥ï¼Œä¸‹çº¿åŒå†™ï¼ŒæŠŠå†™å…¥æ—§çš„é›†ç¾¤çš„é€»è¾‘ä¸‹çº¿</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613164348681.png" /></p></li><li><p>ä¸€è‡´æ€§å“ˆå¸Œ</p><p>ä¸€è‡´æ€§å“ˆå¸Œå°†æ•´ä¸ªå“ˆå¸Œå€¼ç©ºé—´ç»„ç»‡æˆä¸€ä¸ªè™šæ‹Ÿçš„åœ†ç¯ï¼ˆå“ˆå¸Œç¯ï¼‰ï¼Œå¦‚å‡è®¾æŸå“ˆå¸Œå‡½æ•°Hçš„å€¼ç©ºé—´ä¸º$0 $ ~ <spanclass="math inline">\(2^{32}-1\)</span>ï¼ˆå³å“ˆå¸Œå€¼æ˜¯ä¸€ä¸ª32ä½æ— ç¬¦å·æ•´å½¢ï¼‰ï¼Œæ•´ä¸ªç©ºé—´æŒ‰é¡ºæ—¶é’ˆæ–¹å‘ç»„ç»‡ã€‚0å’Œ<spanclass="math inline">\(2^{32}-1\)</span>åœ¨é›¶ç‚¹é’Ÿæ–¹å‘é‡åˆ</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613164731708.png" /></p><p>å°†å„ä¸ªæœåŠ¡å™¨ä½¿ç”¨Hashè¿›è¡Œä¸€ä¸ªå“ˆå¸Œï¼Œå…·ä½“å¯ä»¥é€‰æ‹©æœåŠ¡å™¨çš„ IPæˆ–ä¸»æœºåä½œä¸ºå…³é”®å­—è¿›è¡Œå“ˆå¸Œï¼Œè¿™æ ·æ¯å°æœºå™¨å°±èƒ½ç¡®å®šå…¶åœ¨å“ˆå¸Œç¯ä¸Šçš„ä½ç½®</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613164811228.png" /></p><p>å°†æ•°æ®keyä½¿ç”¨ç›¸åŒçš„å‡½æ•°Hashè®¡ç®—å‡ºå“ˆå¸Œå€¼ï¼Œå¹¶ç¡®å®šæ­¤æ•°æ®åœ¨ç¯ä¸Šçš„ä½ç½®ï¼Œä»æ­¤ä½ç½®æ²¿ç¯é¡ºæ—¶é’ˆâ€œè¡Œèµ°â€ï¼Œç¬¬ä¸€å°é‡åˆ°çš„æœåŠ¡å™¨å°±æ˜¯å…¶åº”è¯¥å®šä½åˆ°çš„æœåŠ¡å™¨</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613164847983.png" /></p><p>åˆ†æä¸€è‡´æ€§å“ˆå¸Œç®—æ³•çš„å®¹é”™æ€§å’Œå¯æ‰©å±•æ€§ï¼š</p><p>ç°å‡è®¾NodeCä¸å¹¸å®•æœºï¼Œå¯ä»¥çœ‹åˆ°æ­¤æ—¶å¯¹è±¡Aã€Bã€Dä¸ä¼šå—åˆ°å½±å“ï¼Œåªæœ‰Cå¯¹è±¡è¢«é‡å®šä½åˆ°NodeDã€‚ä¸€èˆ¬çš„ï¼Œåœ¨ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ä¸­ï¼Œå¦‚æœä¸€å°æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œåˆ™å—å½±å“çš„æ•°æ®ä»…ä»…æ˜¯æ­¤æœåŠ¡å™¨åˆ°å…¶ç¯ç©ºé—´ä¸­å‰ä¸€å°æœåŠ¡å™¨ï¼ˆå³æ²¿ç€é€†æ—¶é’ˆæ–¹å‘è¡Œèµ°é‡åˆ°çš„ç¬¬ä¸€å°æœåŠ¡å™¨ï¼‰ä¹‹é—´æ•°æ®ï¼Œå…¶å®ƒä¸ä¼šå—åˆ°å½±å“ã€‚</p><p>å¦‚æœåœ¨ç³»ç»Ÿä¸­å¢åŠ ä¸€å°æœåŠ¡å™¨Node Xï¼Œæ­¤æ—¶å¯¹è±¡ObjectAã€Bã€Dä¸å—å½±å“ï¼Œåªæœ‰å¯¹è±¡Céœ€è¦é‡å®šä½åˆ°æ–°çš„Node Xã€‚ä¸€èˆ¬çš„ï¼Œåœ¨ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ä¸­ï¼Œå¦‚æœå¢åŠ ä¸€å°æœåŠ¡å™¨ï¼Œåˆ™å—å½±å“çš„æ•°æ®ä»…ä»…æ˜¯æ–°æœåŠ¡å™¨åˆ°å…¶ç¯ç©ºé—´ä¸­å‰ä¸€å°æœåŠ¡å™¨ï¼ˆå³æ²¿ç€é€†æ—¶é’ˆæ–¹å‘è¡Œèµ°é‡åˆ°çš„ç¬¬ä¸€å°æœåŠ¡å™¨ï¼‰ä¹‹é—´æ•°æ®ï¼Œå…¶å®ƒæ•°æ®ä¹Ÿä¸ä¼šå—åˆ°å½±å“ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613164945689.png" /></p><p>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•åœ¨æœåŠ¡èŠ‚ç‚¹å¤ªå°‘æ—¶ï¼Œå®¹æ˜“å› ä¸ºèŠ‚ç‚¹åˆ†å¸ƒä¸å‡åŒ€è€Œé€ æˆæ•°æ®å€¾æ–œé—®é¢˜ã€‚æ­¤æ—¶å¿…ç„¶é€ æˆå¤§é‡æ•°æ®é›†ä¸­åˆ°ä¸€ä¸ªèŠ‚ç‚¹ä¸Šã€‚ä¸ºäº†è§£å†³è¿™ç§æ•°æ®å€¾æ–œé—®é¢˜ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¼•å…¥äº†è™šæ‹ŸèŠ‚ç‚¹æœºåˆ¶ï¼Œå³å¯¹æ¯ä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹è®¡ç®—å¤šä¸ªå“ˆå¸Œï¼Œæ¯ä¸ªè®¡ç®—ç»“æœä½ç½®éƒ½æ”¾ç½®ä¸€ä¸ªæ­¤æœåŠ¡èŠ‚ç‚¹ï¼Œç§°ä¸ºè™šæ‹ŸèŠ‚ç‚¹ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613165216915.png" /></p></li><li><p>åœæœºè¿ç§»</p><ol type="1"><li>åœæœºåº”ç”¨ï¼Œå…ˆå°†åº”ç”¨åœæ­¢æœåŠ¡</li><li>è¿ç§»å†å²æ•°æ®ï¼ŒæŒ‰ç…§æ–°çš„è§„åˆ™æŠŠå†å²æ•°æ®è¿ç§»åˆ°æ–°çš„ç¼“å­˜æ•°æ®é›†ç¾¤ä¸­</li><li>æ›´æ”¹åº”ç”¨çš„æ•°æ®æºé…ç½®ï¼ŒæŒ‡å‘æ–°çš„ç¼“å­˜é›†ç¾¤</li><li>é‡æ–°å¯åŠ¨åº”ç”¨</li></ol><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613164438158.png" /></p><p>è¯¥æ–¹å¼ç®€å•ï¼Œé«˜æ•ˆï¼Œèƒ½å¤Ÿæœ‰æ•ˆé¿å…æ•°æ®çš„ä¸ä¸€è‡´ï¼Œä½†éœ€è¦ç”±ä¸šåŠ¡æ–¹è¯„ä¼°å½±å“ï¼Œä¸€èˆ¬åœ¨æ™šä¸Šè®¿é—®é‡è¾ƒå°ï¼Œæˆ–è€…éæ ¸å¿ƒæœåŠ¡çš„åœºæ™¯ä¸‹æ¯”è¾ƒé€‚ç”¨</p></li></ul><p>Redis</p><p>Redisæ˜¯ä¸€ä¸ªè¿œç¨‹å†…å­˜æ•°æ®åº“ï¼ˆéå…³ç³»å‹æ•°æ®åº“ï¼‰ï¼Œæ€§èƒ½å¼ºåŠ²ï¼Œå…·æœ‰å¤åˆ¶ç‰¹æ€§ä»¥åŠè§£å†³é—®é¢˜è€Œç”Ÿçš„ç‹¬ä¸€æ— äºŒçš„æ•°æ®æ¨¡å‹ã€‚å®ƒå¯ä»¥å­˜å‚¨é”®å€¼å¯¹ä¸5ç§ä¸åŒç±»å‹çš„å€¼ä¹‹é—´çš„æ˜ å°„ï¼Œå¯ä»¥å°†å­˜å‚¨åœ¨å†…å­˜çš„é”®å€¼å¯¹æ•°æ®æŒä¹…åŒ–åˆ°ç¡¬ç›˜ï¼Œå¯ä»¥ä½¿ç”¨å¤åˆ¶ç‰¹æ€§æ¥æ‰©å±•è¯»æ€§èƒ½</p><p>Rediså†…éƒ¨ä½¿ç”¨ä¸€ä¸ª redisObjectå¯¹è±¡æ¥æ ‡è¯†æ‰€æœ‰çš„keyå’Œvalueæ•°æ®ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š</p><ul><li>typeä»£è¡¨ä¸€ä¸ªvalueå¯¹è±¡å…·ä½“æ˜¯ä½•ç§æ•°æ®ç±»å‹</li><li>encodingæ˜¯ä¸åŒæ•°æ®ç±»å‹åœ¨Rediså†…éƒ¨çš„å­˜å‚¨æ–¹å¼ï¼Œæ¯”å¦‚ â€”â€”type=stringä»£è¡¨valueå­˜å‚¨çš„æ˜¯ä¸€ä¸ªæ™®é€šå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå¯¹åº”çš„encodingå¯ä»¥æ˜¯rawæˆ–æ˜¯intï¼Œå¦‚æœæ˜¯intåˆ™ä»£è¡¨Rediså†…éƒ¨æ˜¯æŒ‰æ•°å€¼ç±»å‹å­˜å‚¨å’Œè¡¨ç¤ºè¿™ä¸ªå­—ç¬¦ä¸²</li></ul><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613165409620.png" /></p><p>Redisæ•°æ®æ·˜æ±°ç­–ç•¥ï¼š</p><ul><li>Volatile-lruï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°Volatile-ttlï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰å°†è¦è¿‡æœŸçš„æ•°æ®æ·˜æ±°</li><li>Volatile-randomï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°</li><li>Allkeys-lruï¼šä»æ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°</li><li>Allkeys-randomï¼šä»æ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°</li><li>No-envictionï¼ˆé©±é€ï¼‰ï¼šç¦æ­¢é©±é€æ•°æ®</li></ul><p>æ•°æ®æ·˜æ±°å†…éƒ¨å®ç°ï¼š</p><ul><li>æ¶ˆææ–¹æ³•ï¼šåœ¨ä¸»é”®è¢«è®¿é—®æ—¶å¦‚æœå‘ç°å®ƒå·²ç»å¤±æ•ˆï¼Œé‚£ä¹ˆå°±åˆ é™¤å®ƒï¼Œè§¦å‘æ—¶æœºï¼šåœ¨å®ç°GETï¼ŒMGETï¼ŒHGETï¼ŒLRANGEç­‰æ‰€æœ‰æ¶‰åŠåˆ°è¯»å–æ•°æ®çš„å‘½ä»¤æ—¶éƒ½ä¼šè°ƒç”¨</li><li>ç§¯ææ–¹æ³•ï¼šå‘¨æœŸæ€§åœ°ä»è®¾ç½®äº†å¤±æ•ˆæ—¶é—´çš„ä¸»é”®ä¸­é€‰æ‹©ä¸€éƒ¨åˆ†å¤±æ•ˆçš„ä¸»é”®åˆ é™¤ï¼Œè§¦å‘æ—¶æœºï¼šRedisçš„æ—¶é—´äº‹ä»¶ï¼Œå³æ¯éš”ä¸€æ®µæ—¶é—´å°±ä¸­æ–­ä¸€ä¸‹å®Œæˆä¸€äº›æŒ‡å®šæ“ä½œ</li></ul><p>RedisæŒä¹…åŒ–æ–¹æ³•ï¼š</p><ul><li>RDBï¼ˆRedisDataBaseï¼‰ï¼šé»˜è®¤çš„æŒä¹…åŒ–æ–¹æ¡ˆï¼Œæ•°æ®åº“çš„å¿«ç…§ï¼ˆsnapshotï¼‰ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼å®šæ—¶ä¿å­˜åˆ°ç£ç›˜ä¸­</li><li>AOFï¼ˆAppend OnlyFileï¼‰ï¼šä»¥åè®®æ–‡æœ¬çš„æ–¹å¼ï¼Œå°†æ‰€æœ‰å¯¹æ•°æ®åº“è¿›è¡Œè¿‡å†™å…¥çš„å‘½ä»¤ï¼ˆåŠå…¶å‚æ•°ï¼‰è®°å½•åˆ°AOFæ–‡ä»¶ï¼Œä»¥æ­¤è¾¾åˆ°è®°å½•æ•°æ®åº“çŠ¶æ€çš„ç›®çš„</li></ul><h4 id="ç¼“å­˜é—®é¢˜è®¨è®º">ç¼“å­˜é—®é¢˜è®¨è®ºâ™¨ï¸</h4><h5 id="æ•°æ®ä¸€è‡´æ€§">æ•°æ®ä¸€è‡´æ€§âš—ï¸</h5><p>å› ä¸ºç¼“å­˜å±äºæŒä¹…åŒ–æ•°æ®çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œæ‰€ä»¥ä¸å¯é¿å…çš„ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´é—®é¢˜ï¼Œå¦‚è„è¯»æˆ–è¯»ä¸åˆ°æ•°æ®çš„æƒ…å†µ</p><p>æ•°æ®ä¸ä¸€è‡´ï¼Œä¸€èˆ¬æ˜¯å› ä¸ºç½‘ç»œä¸ç¨³å®šæˆ–èŠ‚ç‚¹æ•…éšœå¯¼è‡´é—®é¢˜å‡ºç°çš„å¸¸è§3ä¸ªåœºæ™¯ä»¥åŠè§£å†³æ–¹æ¡ˆï¼š</p><ul><li>å…ˆå†™ç¼“å­˜ï¼Œå†å†™æ•°æ®åº“ï¼šã€æè¿°ã€‘ç¼“å­˜å†™æˆåŠŸï¼Œä½†å†™æ•°æ®åº“å¤±è´¥æˆ–å“åº”å»¶è¿Ÿï¼Œåˆ™ä¸‹æ¬¡è¯»å–ï¼ˆå¹¶å‘è¯»ï¼‰ç¼“å­˜æ—¶ï¼Œå°±å‡ºç°è„è¯»ï¼›ã€è§£å†³ã€‘è¿™ä¸ªå†™ç¼“å­˜çš„æ–¹å¼ï¼Œæœ¬èº«å°±æ˜¯é”™è¯¯çš„ï¼Œéœ€è¦æ”¹ä¸ºå…ˆå†™æŒä¹…åŒ–ä»‹è´¨ï¼Œå†å†™ç¼“å­˜çš„æ–¹å¼</li><li>å…ˆå†™æ•°æ®åº“ï¼Œå†å†™ç¼“å­˜ï¼šã€æè¿°ã€‘å†™æ•°æ®åº“æˆåŠŸï¼Œä½†å†™ç¼“å­˜å¤±è´¥ï¼Œåˆ™ä¸‹æ¬¡è¯»å–ï¼ˆå¹¶å‘è¯»ï¼‰ç¼“å­˜æ—¶ï¼Œåˆ™è¯»ä¸åˆ°æ•°æ®ï¼›ã€è§£å†³1ã€‘æ ¹æ®å†™å…¥ç¼“å­˜çš„å“åº”æ¥è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœç¼“å­˜å†™å…¥å¤±è´¥ï¼Œåˆ™å›æ»šæ•°æ®åº“æ“ä½œã€‚è¯¥æ–¹æ³•å¢åŠ äº†ç¨‹åºçš„å¤æ‚åº¦ï¼›ã€è§£å†³2ã€‘ç¼“å­˜ä½¿ç”¨æ—¶ï¼Œå‡å¦‚è¯»ç¼“å­˜å¤±è´¥ï¼Œå…ˆè¯»æ•°æ®åº“ï¼Œå†å›å†™ç¼“å­˜</li><li>ç¼“å­˜å¼‚æ­¥åˆ·æ–°ï¼šã€æè¿°ã€‘æŒ‡æ•°æ®åº“æ“ä½œå’Œå†™ç¼“å­˜ä¸åœ¨ä¸€ä¸ªæ“ä½œæ­¥éª¤ä¸­ï¼Œæ¯”å¦‚åœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸‹ï¼Œæ— æ³•åšåˆ°åŒæ—¶å†™ç¼“å­˜æˆ–éœ€è¦å¼‚æ­¥åˆ·æ–°ï¼›ã€è§£å†³ã€‘æ ¹æ®æ—¥å¿—ä¸­ç”¨æˆ·åˆ·æ–°æ•°æ®çš„æ—¶é—´é—´éš”ï¼Œä»¥åŠé’ˆå¯¹æ•°æ®å¯èƒ½äº§ç”Ÿä¸ä¸€è‡´çš„æ—¶é—´ï¼Œè¿›è¡ŒåŒæ­¥æ“ä½œ</li></ul><h5 id="ç¼“å­˜ç©¿é€">ç¼“å­˜ç©¿é€ğŸª”</h5><p>ç¼“å­˜ç©¿é€æŒ‡çš„æ˜¯ä½¿ç”¨ä¸å­˜åœ¨çš„keyè¿›è¡Œå¤§é‡çš„é«˜å¹¶å‘æŸ¥è¯¢ï¼Œè¿™å¯¼è‡´ç¼“å­˜æ— æ³•å‘½ä¸­ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½è¦ç©¿é€åˆ°åç«¯æ•°æ®åº“ç³»ç»Ÿè¿›è¡ŒæŸ¥è¯¢ï¼Œä½¿å¾—æ•°æ®åº“å‹åŠ›è¿‡å¤§ï¼Œç”šè‡³å¯¼è‡´æ•°æ®åº“æœåŠ¡å´©æºƒã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼šé€šå¸¸å°†ç©ºå€¼ç¼“å­˜èµ·æ¥ï¼Œå†æ¬¡æ¥æ”¶åˆ°åŒæ ·çš„æŸ¥è¯¢è¯·æ±‚æ—¶ï¼Œè‹¥å‘½ä¸­ç¼“å­˜å¹¶å€¼ä¸ºç©ºï¼Œå°±ä¼šç›´æ¥è¿”å›ï¼Œä¸ä¼šé€ä¼ åˆ°æ•°æ®åº“ï¼Œé¿å…ç¼“å­˜ç©¿é€ã€‚å¯¹æ¶æ„çš„æŸ¥è¯¢æ”»å‡»ï¼Œå¯ä»¥å¯¹æŸ¥è¯¢æ¡ä»¶è®¾ç½®è§„åˆ™ï¼Œä¸ç¬¦åˆæ¡ä»¶äº§ç”Ÿè§„åˆ™çš„ç›´æ¥æ‹’ç»</p><h5 id="ç¼“å­˜å¹¶å‘">ç¼“å­˜å¹¶å‘ğŸ¦œ</h5><p>ç¼“å­˜å¹¶å‘çš„é—®é¢˜é€šå¸¸å‘ç”Ÿåœ¨é«˜å¹¶å‘çš„åœºæ™¯ä¸‹ï¼Œå½“ä¸€ä¸ªç¼“å­˜keyè¿‡æœŸæ—¶ï¼Œå› ä¸ºè®¿é—®è¿™ä¸ªç¼“å­˜keyçš„è¯·æ±‚é‡è¾ƒå¤§ï¼Œå¤šä¸ªè¯·æ±‚åŒæ—¶å‘ç°ç¼“å­˜è¿‡æœŸï¼Œå› æ­¤å¤šä¸ªè¯·æ±‚ä¼šåŒæ—¶è®¿é—®æ•°æ®åº“æ¥æŸ¥è¯¢æœ€æ–°æ•°æ®ï¼Œå¹¶ä¸”å›å†™ç¼“å­˜ï¼Œè¿™æ ·ä¼šé€ æˆåº”ç”¨å’Œæ•°æ®åº“çš„è´Ÿè½½å¢åŠ ï¼Œæ€§èƒ½é™ä½ï¼Œç”±äºå¹¶å‘è¾ƒé«˜ï¼Œç”šè‡³ä¼šå¯¼è‡´æ•°æ®åº“å´©æºƒã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>åˆ†å¸ƒå¼é”ï¼šä½¿ç”¨åˆ†å¸ƒå¼é”ï¼Œä¿è¯å¯¹äºæ¯ä¸ªkeyåŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»æŸ¥è¯¢åç«¯æœåŠ¡ï¼Œå…¶ä»–çº¿ç¨‹æ²¡æœ‰è·å¾—åˆ†å¸ƒå¼é”çš„æƒé™ï¼Œå› æ­¤åªéœ€è¦ç­‰å¾…å³å¯ã€‚è¯¥æ–¹å¼å°†é«˜å¹¶å‘çš„å‹åŠ›è½¬ç§»åˆ°äº†åˆ†å¸ƒå¼é”ï¼Œå› æ­¤å¯¹åˆ†å¸ƒå¼é”çš„è€ƒéªŒå¾ˆå¤§ã€‚</li><li>æœ¬åœ°é”ï¼šä¸åˆ†å¸ƒå¼é”ç±»ä¼¼ï¼Œé€šè¿‡æœ¬åœ°é”çš„æ–¹å¼æ¥é™åˆ¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»æ•°æ®åº“ä¸­æŸ¥è¯¢æ•°æ®ï¼Œè€Œå…¶ä»–çº¿ç¨‹åªéœ€ç­‰å¾…ï¼Œç­‰å‰é¢çš„çº¿ç¨‹æŸ¥è¯¢åˆ°æ•°æ®åå†è®¿é—®ç¼“å­˜ã€‚ä½†æ˜¯ï¼Œè¿™ç§æ–¹æ³•åªèƒ½é™åˆ¶ä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªçº¿ç¨‹å–æ•°æ®åº“ä¸­æŸ¥è¯¢ï¼Œå¦‚æœä¸€ä¸ªæœåŠ¡æœ‰å¤šä¸ªèŠ‚ç‚¹ï¼Œåˆ™ä¼šæœ‰å¤šä¸ªæ•°æ®åº“æŸ¥è¯¢æ“ä½œï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨èŠ‚ç‚¹æ•°é‡è¾ƒå¤šçš„æƒ…å†µä¸‹å¹¶æ²¡æœ‰å®Œå…¨è§£å†³ç¼“å­˜å¹¶å‘çš„é—®é¢˜ã€‚<br /></li><li>è½¯è¿‡æœŸï¼šè½¯è¿‡æœŸæŒ‡å¯¹ç¼“å­˜ä¸­çš„æ•°æ®è®¾ç½®å¤±æ•ˆæ—¶é—´ï¼Œå°±æ˜¯ä¸ä½¿ç”¨ç¼“å­˜æœåŠ¡æä¾›çš„è¿‡æœŸæ—¶é—´ï¼Œè€Œæ˜¯ä¸šåŠ¡å±‚åœ¨æ•°æ®ä¸­å­˜å‚¨è¿‡æœŸæ—¶é—´ä¿¡æ¯ï¼Œç”±ä¸šåŠ¡ç¨‹åºåˆ¤æ–­æ˜¯å¦è¿‡æœŸå¹¶æ›´æ–°ï¼Œåœ¨å‘ç°äº†æ•°æ®å³å°†è¿‡æœŸæ—¶ï¼Œå°†ç¼“å­˜çš„æ—¶æ•ˆå»¶é•¿ï¼Œç¨‹åºå¯ä»¥æ´¾é£ä¸€ä¸ªçº¿ç¨‹å»æ•°æ®åº“ä¸­è·å–æœ€æ–°çš„æ•°æ®ï¼Œå…¶ä»–çº¿ç¨‹ä¼šå…ˆç»§ç»­ä½¿ç”¨æ—§æ•°æ®å¹¶ç­‰å¾…ï¼Œç›´è‡³æ´¾é£çº¿ç¨‹è·å–æœ€æ–°æ•°æ®åå†æ›´æ–°ç¼“å­˜ã€‚ä¹Ÿå¯ä»¥é€šè¿‡å¼‚æ­¥æ›´æ–°æœåŠ¡æ¥æ›´æ–°è®¾ç½®è½¯è¿‡æœŸçš„ç¼“å­˜ï¼Œè¿™æ ·åº”ç”¨å±‚å°±ä¸ç”¨å…³å¿ƒç¼“å­˜å¹¶å‘çš„é—®é¢˜</li></ul><h5 id="ç¼“å­˜é›ªå´©">ç¼“å­˜é›ªå´©ğŸŒ…</h5><p>ç¼“å­˜é›ªå´©æŒ‡ç¼“å­˜æœåŠ¡å™¨é‡å¯æˆ–è€…å¤§é‡ç¼“å­˜é›†ä¸­åœ¨æŸä¸€ä¸ªæ—¶é—´æ®µå†…å¤±æ•ˆï¼Œä¸šåŠ¡ç³»ç»Ÿéœ€è¦é‡æ–°ç”Ÿæˆç¼“å­˜ï¼Œç»™åç«¯æ•°æ®åº“é€ æˆç¬æ—¶çš„è´Ÿè½½å‡é«˜çš„å‹åŠ›ï¼Œç”šè‡³å¯¼è‡´æ•°æ®åº“å´©æºƒã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>æ›´æ–°é”æœºåˆ¶ï¼šå¯¹ç¼“å­˜æ›´æ–°æ“ä½œè¿›è¡ŒåŠ é”ä¿æŠ¤ï¼Œä¿è¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è¿›è¡Œç¼“å­˜æ›´æ–°</li><li>å¤±æ•ˆæ—¶é—´åˆ†ç‰‡æœºåˆ¶ï¼šå¯¹ä¸åŒçš„æ•°æ®ä½¿ç”¨ä¸åŒçš„å¤±æ•ˆæ—¶é—´ï¼Œç”šè‡³å¯¹ç›¸åŒçš„æ•°æ®ã€ä¸åŒçš„è¯·æ±‚ä½¿ç”¨ä¸åŒçš„å¤±æ•ˆæ—¶é—´ã€‚ä¾‹å¦‚ï¼Œå½“å¯¹ç¼“å­˜çš„useræ•°æ®ä¸­çš„æ¯ä¸ªç”¨æˆ·çš„æ•°æ®è®¾ç½®ä¸åŒçš„ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªåŸºç¡€æ—¶é—´ï¼Œå¦‚10ç§’ï¼Œç„¶ååŠ ä¸Šä¸€ä¸ªä¸¤ç§’ä»¥å†…çš„éšæœºæ•°ï¼Œåˆ™è¿‡æœŸæ—¶é—´ä¸º10ï½12ç§’ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…é›ªå´©ã€‚</li><li>åå°æ›´æ–°æœºåˆ¶ï¼šç”±åå°çº¿ç¨‹æ¥æ›´æ–°ç¼“å­˜ï¼Œå¹¶ä¸æ˜¯ä¸šåŠ¡çº¿ç¨‹æ¥æ›´æ–°ç¼“å­˜<br /></li><li>ç¼“å­˜é›†ç¾¤ï¼šå¯ä»¥åšç¼“å­˜çš„ä¸»ä»ä¸ç¼“å­˜æ°´å¹³åˆ†ç‰‡</li></ul><h5 id="ç¼“å­˜é«˜å¯ç”¨">ç¼“å­˜é«˜å¯ç”¨âš“</h5><p>ç¼“å­˜æ˜¯å¦é«˜å¯ç”¨ï¼Œéœ€è¦æ ¹æ®å®é™…çš„åœºæ™¯è€Œå®šï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰ä¸šåŠ¡éƒ½è¦æ±‚ç¼“å­˜é«˜å¯ç”¨ï¼Œéœ€è¦ç»“åˆå…·ä½“ä¸šåŠ¡ï¼Œå…·ä½“æƒ…å†µè¿›è¡Œæ–¹æ¡ˆè®¾è®¡ï¼Œä¾‹å¦‚ä¸´ç•Œç‚¹æ˜¯å¦å¯¹åç«¯çš„æ•°æ®åº“é€ æˆå½±å“ã€‚</p><p>ä¸»è¦è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>åˆ†å¸ƒå¼ï¼šå®ç°æ•°æ®çš„æµ·é‡ç¼“å­˜</li><li>å¤åˆ¶ï¼šå®ç°ç¼“å­˜æ•°æ®èŠ‚ç‚¹çš„é«˜å¯ç”¨</li></ul><h5 id="ç¼“å­˜çƒ­ç‚¹">ç¼“å­˜çƒ­ç‚¹â›©ï¸</h5><p>ä¸€äº›ç‰¹åˆ«çƒ­ç‚¹çš„æ•°æ®ï¼Œé«˜å¹¶å‘è®¿é—®åŒä¸€ä»½ç¼“å­˜æ•°æ®ï¼Œå¯¼è‡´ç¼“å­˜æœåŠ¡å™¨å‹åŠ›è¿‡å¤§ã€‚</p><p>è§£å†³ï¼šå¤åˆ¶å¤šä»½ç¼“å­˜å‰¯æœ¬ï¼ŒæŠŠè¯·æ±‚åˆ†æ•£åˆ°å¤šä¸ªç¼“å­˜æœåŠ¡å™¨ä¸Šï¼Œå‡è½»ç¼“å­˜çƒ­ç‚¹å¯¼è‡´çš„å•å°ç¼“å­˜æœåŠ¡å™¨å‹åŠ›</p><h3 id="éå…³ç³»å‹æ•°æ®åº“">éå…³ç³»å‹æ•°æ®åº“ğŸ§¯</h3><h4 id="nosqlæ¦‚è¿°">NoSQLæ¦‚è¿°ğŸ¦ª</h4><p>NoSQLä¸­ä½¿ç”¨æœ€å¤šçš„æ˜¯Key-valueå­˜å‚¨å‹ï¼Œå…¶ä»–çš„è¿˜åŒ…å«æ–‡æ¡£å‹ã€åˆ—å­˜å‚¨å‹ã€å›¾å‹æ•°æ®åº“ã€XMLæ•°æ®åº“ç­‰</p><p>NoSQLæ•°æ®åº“å…±æœ‰åŸåˆ™ï¼š</p><ul><li>å‡è®¾å¤±æ•ˆæ˜¯å¿…ç„¶å‘ç”Ÿçš„ï¼šNoSQLå®ç°éƒ½å»ºç«‹åœ¨ç¡¬ç›˜ã€æœºå™¨å’Œç½‘ç»œéƒ½ä¼šå¤±æ•ˆè¿™äº›å‡è®¾ä¹‹ä¸Šï¼Œæˆ‘ä»¬ä¸èƒ½å½»åº•é˜»æ­¢è¿™äº›å¤±æ•ˆï¼Œå› æ­¤éœ€è¦è®©ç³»ç»Ÿèƒ½å¤Ÿåœ¨å³ä½¿éå¸¸æç«¯çš„æ¡ä»¶ä¸‹ä¹Ÿèƒ½åº”ä»˜è¿™äº›å¤±æ•ˆ</li><li>å¯¹æ•°æ®è¿›è¡Œåˆ†åŒºï¼šæœ€å°åŒ–å¤±æ•ˆå¸¦æ¥çš„å½±å“ï¼Œä¹Ÿå°†è¯»å†™æ“ä½œçš„è´Ÿè½½åˆ†å¸ƒåˆ°äº†ä¸åŒçš„æœºå™¨ä¸Š</li><li>ä¿å­˜åŒä¸€æ•°æ®çš„å¤šä¸ªå‰¯æœ¬ï¼šå¤§éƒ¨åˆ†NoSQLå®ç°éƒ½åŸºäºæ•°æ®å‰¯æœ¬çš„çƒ­å¤‡ä»½æ¥ä¿è¯è¿ç»­çš„é«˜å¯ç”¨æ€§ã€‚ä¸€äº›å®ç°æä¾›äº†APIï¼Œå¯ä»¥æ§åˆ¶å‰¯æœ¬çš„å¤åˆ¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å­˜å‚¨ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¯ä»¥åœ¨å¯¹è±¡çº§æŒ‡å®šå¸Œæœ›ä¿å­˜çš„å‰¯æœ¬æ•°</li><li>æŸ¥è¯¢æ”¯æŒï¼šåœ¨è¿™ä¸ªæ–¹é¢ï¼Œä¸åŒçš„å®ç°æœ‰æœ¬è´¨çš„åŒºåˆ«ã€‚ä¸åŒçš„å®ç°çš„ä¸€ä¸ªå…±æ€§åœ¨äºå“ˆå¸Œè¡¨ä¸­çš„Key-valueåŒ¹é…</li></ul><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613172939164.png" /></p><p>NoSQLä¼˜ç¼ºç‚¹ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613173415032.png" /></p><p>NoSQLåˆ†ç±»ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613173733599.png" /></p><p>æŒ‰CAPåˆ†ç±»ï¼š</p><p>CPï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613173809971.png" /></p><p>APï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613173826925.png" /></p><h4 id="nosqlåœ¨ç³»ç»Ÿæ¶æ„ä¸­çš„åº”ç”¨">NoSQLåœ¨ç³»ç»Ÿæ¶æ„ä¸­çš„åº”ç”¨ğŸš</h4><ul><li><p>ä»¥NoSQLä¸ºè¾…</p><p>NoSQLä½œä¸ºé•œåƒï¼šä¸æ”¹å˜åŸæœ‰çš„ä»¥MySQLä½œä¸ºå­˜å‚¨çš„æ¶æ„ï¼Œä½¿ç”¨NoSQLä½œä¸ºè¾…åŠ©é•œåƒå­˜å‚¨ï¼Œç”¨NoSQLçš„ä¼˜åŠ¿è¾…åŠ©æå‡æ€§èƒ½ã€‚åœ¨åŸæœ‰åŸºäºMySQLæ•°æ®åº“çš„æ¶æ„ä¸Šå¢åŠ äº†ä¸€å±‚è¾…åŠ©çš„NoSQLå­˜å‚¨ã€‚åœ¨å†™å…¥MySQLæ•°æ®åº“åï¼ŒåŒæ—¶å†™å…¥åˆ°NoSQLæ•°æ®åº“ï¼Œè®©MySQLå’ŒNoSQLæ‹¥æœ‰ç›¸åŒçš„é•œåƒæ•°æ®ã€‚åœ¨æŸäº›å¯ä»¥æ ¹æ®ä¸»é”®æŸ¥è¯¢çš„åœ°æ–¹ï¼Œä½¿ç”¨é«˜æ•ˆçš„NoSQLæ•°æ®åº“æŸ¥è¯¢ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613183034974.png" /></p><p>åŒæ­¥æ¨¡å¼ï¼šé€šè¿‡MySQLæŠŠæ•°æ®åŒæ­¥åˆ°NoSQLä¸­ï¼Œæ˜¯ä¸€ç§å¯¹å†™å…¥é€æ˜ï¼Œä½†æ˜¯å…·æœ‰æ›´é«˜æŠ€æœ¯éš¾åº¦çš„ä¸€ç§æ¨¡å¼ã€‚é€‚ç”¨äºç°æœ‰çš„æ¯”è¾ƒå¤æ‚çš„è€ç³»ç»Ÿï¼Œé€šè¿‡ä¿®æ”¹ä»£ç ä¸æ˜“å®ç°ï¼Œå¯èƒ½å¼•èµ·æ–°çš„é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿé€‚ç”¨äºéœ€è¦æŠŠæ•°æ®åŒæ­¥åˆ°å¤šç§ç±»å‹çš„å­˜å‚¨ä¸­ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613183452808.png" /></p><p>MySQLä¸NoSQLç»„åˆï¼šMySQLä¸­åªå­˜å‚¨éœ€è¦æŸ¥è¯¢çš„å°å­—æ®µï¼ŒNoSQLå­˜å‚¨æ‰€æœ‰æ•°æ®ã€‚æŠŠéœ€è¦æŸ¥è¯¢çš„å­—æ®µï¼Œä¸€èˆ¬éƒ½æ˜¯æ•°å­—ï¼Œæ—¶é—´ç­‰ç±»å‹çš„å°å­—æ®µå­˜å‚¨äºMySQLä¸­ï¼Œæ ¹æ®æŸ¥è¯¢å»ºç«‹ç›¸åº”çš„ç´¢å¼•ã€‚å…¶ä»–ä¸éœ€è¦çš„å­—æ®µï¼ŒåŒ…æ‹¬å¤§æ–‡æœ¬å­—æ®µéƒ½å­˜å‚¨åœ¨NoSQLä¸­ã€‚åœ¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œå…ˆä»MySQLä¸­æŸ¥è¯¢å‡ºæ•°æ®çš„ä¸»é”®ï¼Œç„¶åä»NoSQLä¸­ç›´æ¥å–å‡ºå¯¹åº”çš„æ•°æ®å³å¯</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613183557041.png" /></p></li><li><p>ä»¥NoSQLä¸ºä¸»</p><p>çº¯NoSQLï¼šåœ¨ä¸€äº›æ•°æ®ç»“æ„ã€æŸ¥è¯¢å…³ç³»éå¸¸ç®€å•çš„ç³»ç»Ÿä¸­ï¼Œå¯ä»¥åªä½¿ç”¨NoSQLå³å¯ä»¥è§£å†³å­˜å‚¨é—®é¢˜ã€‚åœ¨ä¸€äº›æ•°æ®åº“ç»“æ„ç»å¸¸å˜åŒ–ï¼Œæ•°æ®ç»“æ„ä¸å®šçš„ç³»ç»Ÿä¸­ï¼Œå°±éå¸¸é€‚åˆä½¿ç”¨NoSQLæ¥å­˜å‚¨</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613183703378.png" /></p><p>ä»¥NoSQLä¸ºæ•°æ®æºï¼šæ•°æ®ç›´æ¥å†™å…¥NoSQLï¼Œå†é€šè¿‡NoSQLåŒæ­¥åè®®å¤åˆ¶åˆ°å…¶ä»–å­˜å‚¨ã€‚æ ¹æ®åº”ç”¨çš„é€»è¾‘æ¥å†³å®šå»ç›¸åº”çš„å­˜å‚¨è·å–æ•°æ®ã€‚åº”ç”¨ç¨‹åºåªè´Ÿè´£æŠŠæ•°æ®ç›´æ¥å†™å…¥åˆ°NoSQLæ•°æ®åº“ï¼Œç„¶åé€šè¿‡NoSQLçš„å¤åˆ¶åè®®ï¼ŒæŠŠNoSQLçš„æ¯æ¬¡å†™å…¥ï¼Œæ›´æ–°ï¼Œåˆ é™¤æ“ä½œéƒ½å¤åˆ¶åˆ°MySQLæ•°æ®åº“ä¸­ã€‚åŒæ—¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¤åˆ¶åè®®æŠŠæ•°æ®åŒæ­¥å¤åˆ¶åˆ°å…¨æ–‡æ£€ç´¢å®ç°å¼ºå¤§çš„æ£€ç´¢åŠŸèƒ½ã€‚è¿™ç§æ¶æ„éœ€è¦è€ƒè™‘æ•°æ®å¤åˆ¶ç›´æ¥å­˜å–NoSQL NoSQLçš„å»¶è¿Ÿé—®é¢˜ï¼Œä¸ä¸»ä»ä¸­çš„å¤åˆ¶å»¶è¿Ÿé—®é¢˜ä¸€æ ·ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220613183829078.png" /></p></li><li><p>ä»¥NoSQLä¸ºç¼“å­˜</p><p>ç”±äºNoSQLæ•°æ®åº“å¤©ç”Ÿå…·æœ‰é«˜æ€§èƒ½ã€æ˜“æ‰©å±•çš„ç‰¹ç‚¹ï¼Œæ‰€ä»¥å¸¸å¸¸ç»“åˆå…³ç³»æ•°æ®åº“ï¼Œå­˜å‚¨ä¸€äº›é«˜æ€§èƒ½çš„ã€æµ·é‡çš„æ•°æ®ã€‚ä»å¦å¤–ä¸€ä¸ªè§’åº¦çœ‹ï¼Œæ ¹æ®NoSQLçš„é«˜æ€§èƒ½ç‰¹ç‚¹ï¼Œå®ƒåŒæ ·é€‚åˆç”¨äºç¼“å­˜æ•°æ®ã€‚ç”¨NoSQLç¼“å­˜æ•°æ®å¯ä»¥åˆ†ä¸ºå†…å­˜æ¨¡å¼å’Œç£ç›˜æŒä¹…åŒ–æ¨¡å¼ã€‚</p><ul><li><p>å†…å­˜æ¨¡å¼</p><p>Memcachedæä¾›äº†ç›¸å½“é«˜çš„è¯»å†™æ€§èƒ½ï¼Œåœ¨äº’è”ç½‘å‘å±•è¿‡ç¨‹ä¸­ï¼Œä¸€ç›´æ˜¯ç¼“å­˜æœåŠ¡å™¨çš„é¦–é€‰ï¼ŒNoSQLæ•°æ®åº“Redisåˆä¸ºæˆ‘ä»¬æä¾›äº†åŠŸèƒ½æ›´åŠ å¼ºå¤§çš„å†…å­˜å­˜å‚¨åŠŸèƒ½ã€‚è·ŸMemcachedæ¯”ï¼ŒRedisçš„ä¸€ä¸ªkeyå¯ä»¥å­˜å‚¨å¤šç§æ•°æ®ç»“æ„Stringsã€Hashesã€Listsã€Setsã€Sortedsetsã€‚Redisä¸ä½†åŠŸèƒ½å¼ºå¤§ï¼Œè€Œä¸”å®ƒçš„æ€§èƒ½å®Œå…¨è¶…è¶Šäº†Memcached</p></li><li><p>ç£ç›˜æŒä¹…åŒ–æ¨¡å¼</p><p>è™½ç„¶åŸºäºå†…å­˜çš„ç¼“å­˜æœåŠ¡å™¨å…·æœ‰é«˜æ€§èƒ½ï¼Œä½å»¶è¿Ÿçš„ç‰¹ç‚¹ï¼Œä½†æ˜¯å†…å­˜æˆæœ¬é«˜ï¼Œå†…å­˜æ•°æ®æ˜“å¤±å´ä¸å®¹å¿½è§†ã€‚å¤§éƒ¨åˆ†äº’è”ç½‘åº”ç”¨çš„ç‰¹ç‚¹éƒ½æ˜¯æ•°æ®è®¿é—®æœ‰çƒ­ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰ä¸€éƒ¨åˆ†æ•°æ®æ˜¯è¢«é¢‘ç¹ä½¿ç”¨çš„ã€‚å…¶å®NoSQLæ•°æ®åº“å†…éƒ¨ä¹Ÿæ˜¯é€šè¿‡å†…å­˜ç¼“å­˜æ¥æé«˜æ€§èƒ½çš„ï¼Œé€šè¿‡ä¸€äº›æ¯”è¾ƒå¥½çš„ç®—æ³•ã€‚ä½¿ç”¨NoSQLæ¥åšç¼“å­˜ï¼Œç”±äºå…¶ä¸å—å†…å­˜å¤§å°çš„é™åˆ¶ï¼Œå¯ä»¥æŠŠä¸€äº›ä¸å¸¸è®¿é—®ã€ä¸æ€ä¹ˆæ›´æ–°çš„æ•°æ®ä¹Ÿç¼“å­˜èµ·æ¥</p></li></ul></li></ul><h4 id="å¸¸ç”¨çš„nosqlæ•°æ®åº“">å¸¸ç”¨çš„NoSQLæ•°æ®åº“ğŸ¥™</h4><p>Hbaseï¼š Handoop Databseï¼ŒåŸºäºKey-Valueå’Œåˆ—æ—æ•°æ®åº“çš„NoSQL</p><p>Dynamoï¼šå…·æœ‰é«˜å¯ç”¨æ€§å’Œé«˜æ‰©å±•æ€§çš„åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨ç³»ç»Ÿï¼ˆAmazonï¼‰</p><p>Apache Cassandraï¼š Facebookçš„å¼€æºåˆ†å¸ƒå¼Key-Valueå­˜å‚¨ç³»ç»Ÿ</p><p>Redis(Remote Dictionary Server): ä¸€ç§Key-Valueå­˜å‚¨ç³»ç»Ÿ</p><p>MongoDBï¼šåˆ†å¸ƒå¼æ–‡æ¡£å­˜å‚¨æ•°æ®åº“</p>]]></content>
    
    
    <categories>
      
      <category>è¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶ï¼ˆäºŒï¼‰</title>
    <link href="/post/cf17def0.html"/>
    <url>/post/cf17def0.html</url>
    
    <content type="html"><![CDATA[<p>å¯¹è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶è¯¾ç¨‹çš„ä¸»è¦å†…å®¹è¿›è¡Œæ€»ç»“</p><span id="more"></span><h1 id="è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶äºŒ">è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶ï¼ˆäºŒï¼‰</h1><h2 id="ç¬¬3ç« -è®¡ç®—å±‚çš„è½¯ä»¶æ¶æ„æŠ€æœ¯">ç¬¬3ç«  è®¡ç®—å±‚çš„è½¯ä»¶æ¶æ„æŠ€æœ¯ğŸ•¯ï¸</h2><h3 id="è½¯ä»¶è®¡ç®—å±‚çš„æŒ‘æˆ˜">è½¯ä»¶è®¡ç®—å±‚çš„æŒ‘æˆ˜ğŸ’¢</h3><p>ä»»åŠ¡è¶Šæ¥è¶Šå¤æ‚ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220529141905721.png" /></p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220529141928887.png" /></p><p>è®¡ç®—æ¨¡å¼å˜é©ï¼š</p><ul><li>å•æœºè®¡ç®—æ¨¡å¼â†’äº’è”ç½‘è®¡ç®—æ¨¡å¼</li><li>å•æœºè®¡ç®—æ¨¡å¼â†’ä¸²è¡Œ<br /></li><li>å•æœºè®¡ç®—æ¨¡å¼â†’å¤šæ ¸ã€ä¼—æ ¸è®¡ç®—</li></ul><p>æ€§èƒ½åº¦é‡</p><ul><li><p>CPUé€Ÿåº¦ï¼ˆMIPSï¼‰</p></li><li><p>ç½‘ç»œå¸¦å®½ï¼ˆMbpsï¼‰</p></li><li><p>ååé‡ï¼ˆTPSã€QPSï¼‰</p><p>æŒ‡ç³»ç»Ÿåœ¨å•ä½æ—¶é—´å†…å¤„ç†è¯·æ±‚çš„æ•°é‡ã€‚</p><ul><li><p>TPSï¼šå®¢æˆ·æœºåœ¨å‘é€è¯·æ±‚æ—¶å¼€å§‹è®¡æ—¶ï¼Œæ”¶åˆ°æœåŠ¡å™¨å“åº”åç»“æŸè®¡æ—¶ï¼Œä»¥æ­¤æ¥è®¡ç®—ä½¿ç”¨çš„æ—¶é—´å’Œå®Œæˆçš„äº‹åŠ¡ä¸ªæ•°ã€‚åŒ…æ‹¬äº†ï¼š</p><ol type="1"><li>ç”¨æˆ·è¯·æ±‚æœåŠ¡å™¨</li><li>æœåŠ¡å™¨è‡ªå·±çš„å†…éƒ¨å¤„ç†</li><li>æœåŠ¡å™¨è¿”å›ç»™ç”¨æˆ·</li></ol><p>è¿™ä¸‰ä¸ªè¿‡ç¨‹ï¼Œæ¯ç§’èƒ½å¤Ÿå®ŒæˆNä¸ªè¿™ä¸‰ä¸ªè¿‡ç¨‹ï¼ŒTPSä¹Ÿå°±æ˜¯N</p></li><li><p>QPSï¼šæ¯ç§’èƒ½å¤„ç†æŸ¥è¯¢æ•°ç›®ã€‚æ˜¯ä¸€å°æœåŠ¡å™¨æ¯ç§’èƒ½å¤Ÿç›¸åº”çš„æŸ¥è¯¢æ¬¡æ•°ï¼Œæ˜¯å¯¹ä¸€ä¸ªç‰¹å®šçš„æŸ¥è¯¢æœåŠ¡å™¨åœ¨è§„å®šæ—¶é—´å†…æ‰€å¤„ç†æµé‡å¤šå°‘çš„è¡¡é‡æ ‡å‡†ã€‚</p><p>QPSåŸºæœ¬ç±»ä¼¼äºTPSï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯ï¼Œå¯¹äºä¸€ä¸ªé¡µé¢çš„ä¸€æ¬¡è®¿é—®ï¼Œå½¢æˆä¸€ä¸ªTPSï¼›ä½†ä¸€æ¬¡é¡µé¢è¯·æ±‚ï¼Œå¯èƒ½äº§ç”Ÿå¤šæ¬¡å¯¹æœåŠ¡å™¨çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨å¯¹è¿™äº›è¯·æ±‚ï¼Œå°±å¯è®¡å…¥â€œQPSâ€ä¹‹ä¸­ã€‚</p></li></ul></li><li><p>RTå“åº”æ—¶é—´ï¼ˆsï¼‰</p><p>æŒ‡ç³»ç»Ÿå¯¹è¯·æ±‚ä½œå‡ºå“åº”çš„æ—¶é—´ã€‚</p></li><li><p>ç½‘ç»œå»¶æ—¶ï¼ˆsï¼‰</p></li><li><p>å¹¶å‘ç”¨æˆ·æ•°</p><p>æŒ‡ç³»ç»Ÿå¯ä»¥åŒæ—¶æ‰¿è½½çš„æ­£å¸¸ä½¿ç”¨ç³»ç»ŸåŠŸèƒ½çš„ç”¨æˆ·çš„æ•°é‡ã€‚</p></li><li><p>æ‰©å±•æ€§</p><p>é€‚åº”ä¸æ–­å¢é•¿çš„å¤„ç†ä»»åŠ¡çš„èƒ½åŠ›ã€‚</p><ul><li>å‚ç›´æ‰©å±•ï¼šæé«˜ç¡¬ä»¶é…ç½®<br /></li><li>æ°´å¹³æ‰©å±•ï¼šå¢åŠ æ–°çš„è®¡ç®—æœºåˆ†å¸ƒå¼è®¡ç®—</li></ul></li><li><p>é«˜å¯ç”¨æ€§ï¼šç³»ç»Ÿåœ¨å‡ ä¹ä»»ä½•æ—¶åˆ»éƒ½å¯è¢«æ­£å¸¸è®¿é—®ï¼Œé€šå¸¸é‡åŒ–ä¸ºä¸€å¹´ä¸­æ­£å¸¸è¿è¡Œçš„æ—¶é—´æ¯”</p><ul><li>ç³»ç»Ÿå¯ç”¨æ€§ï¼šå¹³å‡æ•…éšœæ—¶é—´MTTFã€å¹³å‡ä¿®å¤æ—¶é—´MTTRã€ç³»ç»Ÿå¯ç”¨æ€§=MTTF/(MTTF+MTTR)</li></ul></li></ul><h3 id="å•æœºæ€§èƒ½ä»ä½•è€Œæ¥">å•æœºæ€§èƒ½ä»ä½•è€Œæ¥ğŸ‘…</h3><ul><li><p>ç®—æ³• &amp; æ•°æ®ç»“æ„ä¼˜åŒ–</p><p>å‘ç°ç“¶é¢ˆï¼šå‹æµ‹å·¥å…·ã€æŠ½è±¡æ¨¡å‹ï¼›çº¿ç¨‹ã€å†…å­˜å‚æ•°è°ƒæ•´ï¼›Javaç‰¹æ€§ä¼˜åŒ–ï¼›å‡å°‘å¹¶å‘å†²çªï¼›å‡å°‘åºåˆ—åŒ–ï¼›å‡å°‘å­—ç¬¦åˆ°å­—èŠ‚çš„è½¬æ¢ï¼›ä½¿ç”¨é•¿è¿æ¥</p></li><li><p>é€šä¿¡æ¨¡å¼ä¼˜åŒ–</p><p>å•æœåŠ¡å™¨é«˜æ€§èƒ½çš„å…³é”®ä¹‹ä¸€å°±æ˜¯æœåŠ¡å™¨é‡‡å–çš„ç½‘ç»œé€šä¿¡æ¨¡å‹ï¼Œå¦‚ä¸‹ä¸¤ä¸ªå…³é”®è®¾è®¡ç‚¹ï¼š</p><ul><li>æœåŠ¡å™¨å¦‚ä½•ç®¡ç†è¿æ¥ã€‚</li><li>æœåŠ¡å™¨å¦‚ä½•å¤„ç†è¯·æ±‚ã€‚</li></ul><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li><p>PPC</p><p>æ¯æ¬¡æœ‰æ–°çš„è¿æ¥å°±æ–°å»ºä¸€ä¸ªè¿›ç¨‹å»ä¸“é—¨å¤„ç†è¿™ä¸ªè¿æ¥çš„è¯·æ±‚ï¼Œè¿™æ˜¯ä¼ ç»Ÿçš„ UNIXç½‘ç»œæœåŠ¡å™¨æ‰€é‡‡ç”¨çš„æ¨¡å‹ã€‚</p><p>ä¼˜ç‚¹ï¼šPPC æ¨¡å¼å®ç°ç®€å•ï¼Œæ¯”è¾ƒé€‚åˆæœåŠ¡å™¨çš„è¿æ¥æ•°æ²¡é‚£ä¹ˆå¤šçš„æƒ…å†µ</p><p>ç¼ºç‚¹ï¼š</p><ul><li>forkã€åˆ›å»ºè¿›ç¨‹ã€‘ä»£ä»·é«˜</li><li>çˆ¶å­è¿›ç¨‹é€šä¿¡å¤æ‚</li><li>æ”¯æŒçš„å¹¶å‘è¿æ¥æ•°é‡æœ‰é™</li></ul></li><li><p>prefork</p><p>å½“è¿æ¥è¿›æ¥æ—¶æ‰ fork æ–°è¿›ç¨‹æ¥å¤„ç†è¿æ¥è¯·æ±‚ï¼Œç”±äº forkè¿›ç¨‹ä»£ä»·é«˜ï¼Œç”¨æˆ·è®¿é—®æ—¶å¯èƒ½æ„Ÿè§‰æ¯”è¾ƒæ…¢ï¼Œpreforkæ¨¡å¼çš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>preforkå°±æ˜¯æå‰åˆ›å»ºè¿›ç¨‹ï¼Œç³»ç»Ÿåœ¨å¯åŠ¨çš„æ—¶å€™å°±é¢„å…ˆåˆ›å»ºå¥½è¿›ç¨‹ï¼Œç„¶åæ‰å¼€å§‹æ¥å—ç”¨æˆ·çš„è¯·æ±‚ã€‚</p><p>ä¼˜ç‚¹ï¼šå½“æœ‰æ–°çš„è¿æ¥è¿›æ¥çš„æ—¶å€™ï¼Œå°±å¯ä»¥çœå» forkè¿›ç¨‹çš„æ“ä½œï¼Œè®©ç”¨æˆ·è®¿é—®æ›´å¿«ã€ä½“éªŒæ›´å¥½</p><p>ç¼ºç‚¹ï¼šçˆ¶å­è¿›ç¨‹é€šä¿¡å¤æ‚ã€æ”¯æŒçš„å¹¶å‘è¿æ¥æ•°é‡æœ‰é™</p></li><li><p>TPC</p><p>æ¯æ¬¡æœ‰æ–°çš„è¿æ¥å°±æ–°å»ºä¸€ä¸ªçº¿ç¨‹å»ä¸“é—¨å¤„ç†è¿™ä¸ªè¿æ¥çš„è¯·æ±‚ã€‚</p><p>ä¼˜ç‚¹ï¼šè§£å†³äº† fork ä»£ä»·é«˜å’Œè¿›ç¨‹é€šä¿¡å¤æ‚çš„é—®é¢˜</p><p>ç¼ºç‚¹ï¼š</p><ol type="1"><li>åˆ›å»ºçº¿ç¨‹è™½ç„¶æ¯”åˆ›å»ºè¿›ç¨‹ä»£ä»·ä½ï¼Œä½†å¹¶ä¸æ˜¯æ²¡æœ‰ä»£ä»·ï¼Œé«˜å¹¶å‘æ—¶ï¼ˆä¾‹å¦‚æ¯ç§’ä¸Šä¸‡è¿æ¥ï¼‰è¿˜æ˜¯æœ‰æ€§èƒ½é—®é¢˜ã€‚</li><li>æ— é¡»è¿›ç¨‹é—´é€šä¿¡ï¼Œä½†æ˜¯çº¿ç¨‹é—´çš„äº’æ–¥å’Œå…±äº«åˆå¼•å…¥äº†å¤æ‚åº¦ï¼Œå¯èƒ½ä¸€ä¸å°å¿ƒå°±å¯¼è‡´äº†æ­»é”é—®é¢˜ã€‚</li><li>å¤šçº¿ç¨‹ä¼šå‡ºç°äº’ç›¸å½±å“çš„æƒ…å†µï¼ŒæŸä¸ªçº¿ç¨‹å‡ºç°å¼‚å¸¸æ—¶ï¼Œå¯èƒ½å¯¼è‡´æ•´ä¸ªè¿›ç¨‹é€€å‡ºï¼ˆä¾‹å¦‚å†…å­˜è¶Šç•Œï¼‰ã€‚</li><li>TPC è¿˜æ˜¯å­˜åœ¨ CPU çº¿ç¨‹è°ƒåº¦å’Œåˆ‡æ¢ä»£ä»·çš„é—®é¢˜ã€‚</li></ol><p>TPC æ–¹æ¡ˆæœ¬è´¨ä¸Šå’Œ PPCæ–¹æ¡ˆåŸºæœ¬ç±»ä¼¼ï¼Œåœ¨å¹¶å‘å‡ ç™¾è¿æ¥çš„åœºæ™¯ä¸‹ï¼Œåè€Œæ›´å¤šåœ°æ˜¯é‡‡ç”¨ PPC çš„æ–¹æ¡ˆï¼Œå› ä¸ºPPC æ–¹æ¡ˆä¸ä¼šæœ‰æ­»é”çš„é£é™©ï¼Œä¹Ÿä¸ä¼šå¤šè¿›ç¨‹äº’ç›¸å½±å“ï¼Œç¨³å®šæ€§æ›´é«˜ã€‚</p></li><li><p>preread</p><p>é¢„å…ˆåˆ›å»ºçº¿ç¨‹ï¼Œç„¶åæ‰å¼€å§‹æ¥å—ç”¨æˆ·çš„è¯·æ±‚ï¼Œå½“æœ‰æ–°çš„è¿æ¥è¿›æ¥çš„æ—¶å€™ï¼Œå°±å¯ä»¥çœå»åˆ›å»ºçº¿ç¨‹çš„æ“ä½œï¼Œè®©ç”¨æˆ·æ„Ÿè§‰æ›´å¿«ã€ä½“éªŒæ›´å¥½ã€‚</p><p>å¸¸è§å®ç°æ–¹å¼ï¼š</p><ul><li>ä¸»è¿›ç¨‹ acceptï¼Œç„¶åå°†è¿æ¥äº¤ç»™æŸä¸ªçº¿ç¨‹å¤„ç†ã€‚<br /></li><li>å­çº¿ç¨‹éƒ½å°è¯•å» acceptï¼Œæœ€ç»ˆåªæœ‰ä¸€ä¸ªçº¿ç¨‹ accept æˆåŠŸ</li></ul></li><li><p>ä»¥ä¸Š4ç§è§£å†³æ–¹æ¡ˆåœ¨é«˜å¹¶å‘æ—¶è¿˜æ˜¯å­˜åœ¨é—®é¢˜ï¼ŒPPCå’ŒTPCå®ç°ç®€å•ï¼Œä½†æ˜¯éƒ½æ— æ³•æ”¯æ’‘é«˜å¹¶å‘çš„åœºæ™¯ï¼Œäºæ˜¯æœ‰äº†ä¸‹é¢åº”å¯¹é«˜å¹¶å‘åœºæ™¯çš„å•æœåŠ¡å™¨é«˜æ€§èƒ½æ¶æ„æ¨¡å¼ï¼š</p></li><li><p>Reactorï¼ˆDispatcherï¼‰</p><p>Reactor æ˜¯éé˜»å¡åŒæ­¥ç½‘ç»œæ¨¡å‹ï¼Œå› ä¸ºçœŸæ­£çš„ read å’Œ sendæ“ä½œéƒ½éœ€è¦ç”¨æˆ·è¿›ç¨‹åŒæ­¥æ“ä½œã€‚è¿™é‡Œçš„â€œåŒæ­¥â€æŒ‡ç”¨æˆ·è¿›ç¨‹åœ¨æ‰§è¡Œread å’Œ sendè¿™ç±» I/O æ“ä½œçš„æ—¶å€™æ˜¯åŒæ­¥çš„ã€‚</p><p>PPCæ¯ä¸ªè¿æ¥éƒ½è¦åˆ›å»ºè¿›ç¨‹å¹¶ä¸”è¿æ¥ç»“æŸåè¿›ç¨‹å°±é”€æ¯ï¼ˆæµªè´¹ï¼‰â†’èµ„æºå¤ç”¨ï¼Œå³ä¸å†å•ç‹¬ä¸ºæ¯ä¸ªè¿æ¥åˆ›å»ºè¿›ç¨‹ï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªè¿›ç¨‹æ± ï¼Œå°†è¿æ¥åˆ†é…ç»™è¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥å¤„ç†å¤šä¸ªè¿æ¥çš„ä¸šåŠ¡ã€‚</p><p>æ¥äº†ä¸€ä¸ªäº‹ä»¶æˆ‘å°±æœ‰ç›¸åº”çš„ååº”ã€‚</p><p>æ ¹æ®äº‹ä»¶ç±»å‹æ¥è°ƒç”¨ç›¸åº”çš„ä»£ç è¿›è¡Œå¤„ç†ã€‚</p><p>æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼š</p><ul><li>Reactorï¼Œè´Ÿè´£ç›‘å¬å’Œåˆ†é…äº‹ä»¶ã€‚</li><li>å¤„ç†èµ„æºæ± ï¼ˆè¿›ç¨‹æ± æˆ–çº¿ç¨‹æ± ï¼‰ï¼Œè´Ÿè´£å¤„ç†äº‹ä»¶ã€‚</li></ul><p>å¯å˜æ€§ï¼š</p><ul><li>Reactor çš„æ•°é‡å¯ä»¥å˜åŒ–ï¼šå¯ä»¥æ˜¯ä¸€ä¸ªReactorï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªReactorã€‚</li><li>èµ„æºæ± çš„æ•°é‡å¯ä»¥å˜åŒ–ï¼šä»¥è¿›ç¨‹ä¸ºä¾‹ï¼Œå¯ä»¥æ˜¯å•ä¸ªè¿›ç¨‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªè¿›ç¨‹ï¼ˆçº¿ç¨‹ç±»ä¼¼ï¼‰ã€‚</li></ul><p>å®ç°æ–¹æ¡ˆï¼š</p><ul><li><p>å• Reactor å•è¿›ç¨‹ / çº¿ç¨‹</p><p>Reactor å¯¹è±¡é€šè¿‡ select ç›‘æ§è¿æ¥äº‹ä»¶ï¼Œæ”¶åˆ°äº‹ä»¶åé€šè¿‡dispatchè¿›è¡Œåˆ†å‘ã€‚</p><p>å¦‚æœæ˜¯è¿æ¥å»ºç«‹çš„äº‹ä»¶ï¼Œç”± Acceptor å¤„ç†ï¼Œé€šè¿‡acceptæ¥å—è¿æ¥ï¼Œå¹¶åˆ›å»ºä¸€ä¸ª Handler æ¥å¤„ç†è¿æ¥åç»­çš„å„ç§äº‹ä»¶ã€‚</p><p>å¦‚æœä¸æ˜¯è¿æ¥å»ºç«‹äº‹ä»¶ï¼Œåˆ™ Reactor ä¼šè°ƒç”¨è¿æ¥å¯¹åº”çš„ Handlerï¼ˆç¬¬ 2æ­¥ä¸­åˆ›å»ºçš„ Handlerï¼‰æ¥è¿›è¡Œå“åº”ã€‚</p><p>Handler ä¼šå®Œæˆ readâ†’ä¸šåŠ¡å¤„ç†â†’send çš„å®Œæ•´ä¸šåŠ¡æµç¨‹ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220529152243030.png" /></p><p>ä¼˜ç‚¹ï¼šç®€å•ï¼Œå…¨éƒ¨éƒ½åœ¨åŒä¸€ä¸ªè¿›ç¨‹å†…å®Œæˆ</p><p>ç¼ºç‚¹ï¼šæ— æ³•å‘æŒ¥å¤šæ ¸ CPU çš„æ€§èƒ½</p><p>Redisä½¿ç”¨è¿™ç§æ¨¡å¼ï¼ˆå•Reactorå•è¿›ç¨‹ï¼‰ï¼</p></li><li><p>å• Reactor å¤šçº¿ç¨‹</p><p>ä¸»çº¿ç¨‹ä¸­ï¼ŒReactor å¯¹è±¡é€šè¿‡ select ç›‘æ§è¿æ¥äº‹ä»¶ï¼Œæ”¶åˆ°äº‹ä»¶åé€šè¿‡dispatch è¿›è¡Œåˆ†å‘ã€‚</p><p>å¦‚æœæ˜¯è¿æ¥å»ºç«‹çš„äº‹ä»¶ï¼Œåˆ™ç”± Acceptor å¤„ç†ï¼ŒAcceptor é€šè¿‡acceptæ¥å—è¿æ¥ï¼Œå¹¶åˆ›å»ºä¸€ä¸ª Handler æ¥å¤„ç†è¿æ¥åç»­çš„å„ç§äº‹ä»¶ã€‚</p><p>å¦‚æœä¸æ˜¯è¿æ¥å»ºç«‹äº‹ä»¶ï¼Œåˆ™ Reactor ä¼šè°ƒç”¨è¿æ¥å¯¹åº”çš„ Handlerï¼ˆç¬¬ 2æ­¥ä¸­åˆ›å»ºçš„ Handlerï¼‰æ¥è¿›è¡Œå“åº”ã€‚</p><p>Handler åªè´Ÿè´£å“åº”äº‹ä»¶ï¼Œä¸è¿›è¡Œä¸šåŠ¡å¤„ç†ï¼›Handler é€šè¿‡readè¯»å–åˆ°æ•°æ®åï¼Œä¼šå‘ç»™Processor è¿›è¡Œä¸šåŠ¡å¤„ç†ã€‚</p><p>Processorä¼šåœ¨ç‹¬ç«‹çš„å­çº¿ç¨‹ä¸­å®ŒæˆçœŸæ­£çš„ä¸šåŠ¡å¤„ç†ï¼Œç„¶åå°†å“åº”ç»“æœå‘ç»™ä¸»è¿›ç¨‹çš„Handlerå¤„ç†ï¼›Handler æ”¶åˆ°å“åº”åé€šè¿‡ sendå°†å“åº”ç»“æœè¿”å›ç»™ clientã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220529152707288.png" /></p><p>ä¼˜ç‚¹ï¼šèƒ½å¤Ÿå……åˆ†åˆ©ç”¨å¤šæ ¸å¤š CPU çš„å¤„ç†èƒ½åŠ›</p><p>ç¼ºç‚¹ï¼šå¤šçº¿ç¨‹æ•°æ®å…±äº«å’Œè®¿é—®æ¯”è¾ƒå¤æ‚ã€Reactoræ‰¿æ‹…æ‰€æœ‰äº‹ä»¶çš„ç›‘å¬å’Œå“åº”ï¼Œåªåœ¨ä¸»çº¿ç¨‹ä¸­è¿è¡Œï¼Œç¬é—´é«˜å¹¶å‘æ—¶ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚</p></li><li><p>å¤š Reactor å¤šè¿›ç¨‹ / çº¿ç¨‹</p><p>çˆ¶è¿›ç¨‹ä¸­ mainReactor å¯¹è±¡é€šè¿‡ select ç›‘æ§è¿æ¥å»ºç«‹äº‹ä»¶ï¼Œæ”¶åˆ°äº‹ä»¶åé€šè¿‡Acceptor æ¥æ”¶ï¼Œå°†æ–°çš„è¿æ¥åˆ†é…ç»™æŸä¸ªå­è¿›ç¨‹ã€‚ å­è¿›ç¨‹çš„ subReactor å°†mainReactor åˆ†é…çš„è¿æ¥åŠ å…¥è¿æ¥é˜Ÿåˆ—è¿›è¡Œç›‘å¬ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªHandlerç”¨äºå¤„ç†è¿æ¥çš„å„ç§äº‹ä»¶ã€‚ å½“æœ‰æ–°çš„äº‹ä»¶å‘ç”Ÿæ—¶ï¼ŒsubReactorä¼šè°ƒç”¨è¿æ¥å¯¹åº”çš„Handlerï¼ˆå³ç¬¬ 2 æ­¥ä¸­åˆ›å»ºçš„ Handlerï¼‰æ¥è¿›è¡Œå“åº”ã€‚ Handlerå®Œæˆ readâ†’ä¸šåŠ¡å¤„ç†â†’send çš„å®Œæ•´ä¸šåŠ¡æµç¨‹ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220529153337173.png" /></p><p>ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼ˆçˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹çš„èŒè´£éå¸¸æ˜ç¡®ï¼Œçˆ¶è¿›ç¨‹åªè´Ÿè´£æ¥æ”¶æ–°è¿æ¥ï¼Œå­è¿›ç¨‹è´Ÿè´£å®Œæˆåç»­çš„ä¸šåŠ¡å¤„ç†ã€‚çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹çš„äº¤äº’å¾ˆç®€å•ï¼Œçˆ¶è¿›ç¨‹åªéœ€è¦æŠŠæ–°è¿æ¥ä¼ ç»™å­è¿›ç¨‹ï¼Œå­è¿›ç¨‹æ— é¡»è¿”å›æ•°æ®ã€‚å­è¿›ç¨‹ä¹‹é—´æ˜¯äº’ç›¸ç‹¬ç«‹çš„ï¼Œæ— é¡»åŒæ­¥å…±äº«ä¹‹ç±»çš„å¤„ç†ï¼‰</p><p>Nginx é‡‡ç”¨çš„æ˜¯å¤š Reactor å¤šè¿›ç¨‹ï¼</p><p>Memcache å’Œ Netty é‡‡ç”¨çš„æ˜¯å¤š Reactor å¤šçº¿ç¨‹ï¼</p></li></ul></li><li><p>Proactor</p><p>å¦‚æœæŠŠ I/O æ“ä½œæ”¹ä¸ºå¼‚æ­¥å°±èƒ½å¤Ÿè¿›ä¸€æ­¥æå‡æ€§èƒ½ï¼Œè¿™å°±æ˜¯å¼‚æ­¥ç½‘ç»œæ¨¡å‹Proactorã€‚</p><p>æ¥äº†äº‹ä»¶æˆ‘æ¥å¤„ç†ï¼Œå¤„ç†å®Œäº†æˆ‘é€šçŸ¥ä½ ã€‚</p><p>Proactor Initiator è´Ÿè´£åˆ›å»º Proactor å’Œ Handlerï¼Œå¹¶å°†Proactor å’ŒHandler éƒ½é€šè¿‡ Asynchronous Operation Processor æ³¨å†Œåˆ°å†…æ ¸ã€‚</p><p>Asynchronous Operation Processor è´Ÿè´£å¤„ç†æ³¨å†Œè¯·æ±‚ï¼Œå¹¶å®ŒæˆI/Oæ“ä½œã€‚</p><p>Asynchronous Operation Processor å®Œæˆ I/O æ“ä½œåé€šçŸ¥Proactorã€‚</p><p>Proactor æ ¹æ®ä¸åŒäº‹ä»¶ç±»å‹å›è°ƒä¸åŒçš„ Handler è¿›è¡Œä¸šåŠ¡å¤„ç†ã€‚</p><p>Handler å®Œæˆä¸šåŠ¡å¤„ç†ï¼ŒHandler ä¹Ÿå¯ä»¥æ³¨å†Œæ–°çš„ Handler åˆ°å†…æ ¸è¿›ç¨‹ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220529154529393.png" /></p><p>ç†è®ºä¸Š Proactor æ¯” Reactoræ•ˆç‡è¦é«˜ä¸€äº›ï¼Œä½†å®é™…ä¸¤è€…éƒ½æœ‰ä½¿ç”¨ï¼Œå› ä¸ºè¦å®ç°çœŸæ­£çš„å¼‚æ­¥I/Oï¼Œæ“ä½œç³»ç»Ÿéœ€è¦åšå¤§é‡çš„å·¥ä½œã€‚Windowsä¸€èˆ¬ç”¨Proactorï¼Œè€ŒLinuxä¸€èˆ¬ç”¨Reactorã€‚</p></li></ul></li></ul><h3 id="åˆ†å¸ƒå¼è®¡ç®—æ¶æ„">åˆ†å¸ƒå¼è®¡ç®—æ¶æ„ğŸ¾</h3><h4 id="åˆ†å¸ƒå¼ç¼–ç¨‹æ¨¡å‹">åˆ†å¸ƒå¼ç¼–ç¨‹æ¨¡å‹ğŸ¥</h4><p>MapReduceï¼šåº”ç”¨ç¨‹åºç¼–å†™äººå‘˜åªéœ€è¦å°†ç²¾åŠ›æ”¾åœ¨åº”ç”¨ç¨‹åºæœ¬èº«ï¼Œè€Œå…³äºé›†ç¾¤çš„å¯é æ€§ã€å¯æ‰©å±•æ€§ç­‰é—®é¢˜åˆ™äº¤ç”±å¹³å°æ¥å¤„ç†ã€‚</p><p>MapReduceæ˜¯â¼€ç§é’ˆå¯¹è¶…â¼¤è§„æ¨¡æ•°æ®é›†çš„ç¼–ç¨‹æ¨¡å‹å’Œç³»ç»Ÿã€‚â½¤MapReduceå¼€å‘å‡ºçš„ç¨‹åºå¯åœ¨â¼¤é‡å•†â½¤è®¡ç®—æœºé›†ç¾¤ä¸Šå¹¶â¾æ‰§â¾ã€å¤„ç†è®¡ç®—æœºçš„å¤±æ•ˆä»¥åŠè°ƒåº¦è®¡ç®—æœºé—´çš„é€šä¿¡ã€‚</p><p>MapReduceçš„åŸºæœ¬æ€æƒ³ï¼š</p><ul><li>ç”¨æˆ·å†™çš„ä¸¤ä¸ªç¨‹åºï¼šMapå’ŒReduce<br /></li><li>ä¸€ä¸ªåœ¨è®¡ç®—æœºé›†ç¾¤ä¸Šæ‰§è¡Œå¤šä¸ªç¨‹åºå®ä¾‹çš„æ¡†æ¶</li></ul><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220530125518431.png" style="zoom:50%;" /></p><p>å…·æœ‰ç›¸åŒkeyçš„æ‰€æœ‰å€¼éƒ½å‘é€åˆ°ç›¸åŒçš„reducerã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220530125818532.png" /></p><p><span class="math inline">\(map(k_1,v_1) â†’ [(k_2,v_2)]\)</span></p><p><span class="math inline">\(reduce(k_2,[v_2]) â†’[(k_3,v_3)]\)</span></p><p>ä¸ºå¹¶è¡Œreduceæ“ä½œåˆ’åˆ†å¯†é’¥ç©ºé—´</p><p><span class="math inline">\(partition(k_2, number\ of\ partitions) â†’partition\ for\ k_2\)</span></p><p>ç”¨äºä¼˜åŒ–ä»¥å‡å°‘ç½‘ç»œæµé‡</p><p><span class="math inline">\(combine (k2, [v2]) â†’[(kâ€™,vâ€™)]\)</span></p><p>Hadoopä¸­MapReduceçš„å®ç°ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220530130951559.png" /></p><ol type="1"><li>â¾¸å…ˆæäº¤â¼€ä¸ª jobï¼Œä¿¡æ¯å‘ç»™Job Tracker</li><li>Job Tracker æ˜¯æ¡†æ¶çš„ä¸­â¼¼ï¼Œå®šæ—¶ä¸é›†ç¾¤ä¸­æœºå™¨é€šä¿¡ï¼Œç®¡ç†å“ªäº›ç¨‹åºè·‘åœ¨å“ªäº›æœºå™¨ä¸Šï¼Œç®¡ç†æ‰€æœ‰ job å¤±è´¥ã€é‡å¯ç­‰æ“ä½œ</li><li>Task Tracker æ˜¯ MapReduceé›†ç¾¤ä¸­æ¯å°æœºå™¨éƒ½æœ‰çš„éƒ¨åˆ†ï¼Œå®ƒä¸»è¦ç›‘è§†â¾ƒâ¼°æ‰€åœ¨æœºå™¨çš„èµ„æºæƒ…å†µï¼ŒåŒæ—¶ç›‘è§†å½“å‰æœºå™¨çš„tasks è¿â¾çŠ¶å†µ</li><li>Task Tracker éœ€è¦æŠŠè¿™äº›ä¿¡æ¯é€šè¿‡ heartbeat å‘é€ç»™ Job Tracker</li><li>Job Tracker ä¼šæœé›†è¿™äº›ä¿¡æ¯ä»¥ç»™æ–°æäº¤çš„ job åˆ†é…è¿â¾åœ¨å“ªäº›æœºå™¨ä¸Š</li></ol><p>ä¸»è¦å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p><ol type="1"><li>JobTracker æ˜¯ MapReduce çš„é›†ä¸­å¤„ç†ç‚¹ï¼Œå­˜åœ¨å•ç‚¹æ•…éšœ</li><li>JobTracker å®Œæˆäº†å¤ªå¤šçš„ä»»åŠ¡ï¼Œé€ æˆäº†è¿‡å¤šçš„èµ„æºæ¶ˆè€—</li><li>å½“ MapReduce job â¾®å¸¸å¤šæ—¶ï¼Œä¼šé€ æˆå¾ˆâ¼¤çš„å†…å­˜å¼€é”€ï¼šä¸šç•Œæ€»ç»“ Hadoopçš„MapReduceåªèƒ½â½€æŒ 4000 èŠ‚ç‚¹ä¸»æœºçš„ä¸Šé™</li><li>åœ¨ TaskTracker ç«¯ï¼Œä»¥ map/reduce taskçš„æ•°â½¬ä½œä¸ºèµ„æºçš„è¡¨â½°è¿‡äºç®€å•ï¼Œæ²¡æœ‰è€ƒè™‘åˆ° CPU/å†…å­˜çš„å â½¤æƒ…å†µï¼Œå¦‚æœä¸¤ä¸ªâ¼¤å†…å­˜æ¶ˆè€—çš„ taskè¢«è°ƒåº¦åˆ°äº†â¼€å—ï¼Œå¾ˆå®¹æ˜“å‡ºç°æº¢å‡º</li><li>åœ¨ TaskTracker ç«¯ï¼ŒæŠŠèµ„æºå¼ºåˆ¶åˆ’åˆ†ä¸º map task slot å’Œ reduce taskslot, å¦‚æœå½“ç³»ç»Ÿä¸­åªæœ‰ map task æˆ–è€…åªæœ‰ reduce taskçš„æ—¶å€™ï¼Œä¼šé€ æˆèµ„æºçš„æµªè´¹</li></ol><p>YARNï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220530131729512.png" /></p><p>ResourceManagerï¼ˆRMï¼‰ï¼šYARNåˆ†å±‚ç»“æ„çš„æœ¬è´¨æ˜¯ResourceManagerã€‚è¿™ä¸ªå®ä½“æ§åˆ¶æ•´ä¸ªé›†ç¾¤å¹¶ç®¡ç†åº”ç”¨ç¨‹åºå‘åŸºç¡€è®¡ç®—èµ„æºçš„åˆ†é…ã€‚ResourceManagerå°†å„ä¸ªèµ„æºéƒ¨åˆ†ï¼ˆè®¡ç®—ã€å†…å­˜ã€å¸¦å®½ç­‰ï¼‰ç²¾å¿ƒå®‰æ’ç»™åŸºç¡€NodeManagerï¼ˆYARNçš„æ¯èŠ‚ç‚¹ä»£ç†ï¼‰ã€‚ResourceManagerè¿˜ä¸ ApplicationMasterä¸€èµ·åˆ†é…èµ„æºï¼Œä¸NodeManagerä¸€èµ·å¯åŠ¨å’Œç›‘è§†å®ƒä»¬çš„åŸºç¡€åº”ç”¨ç¨‹åºã€‚åœ¨æ­¤ä¸Šä¸‹æ–‡ä¸­ï¼ŒApplicationMasteræ‰¿æ‹…äº†ä»¥å‰çš„ TaskTracker çš„ä¸€äº›è§’è‰²ï¼ŒResourceManager æ‰¿æ‹…äº† JobTrackerçš„è§’è‰²ã€‚</p><p>NodeManagerï¼ˆNMï¼‰ï¼šNodeManagerç®¡ç†ä¸€ä¸ªYARNé›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ã€‚NodeManageræä¾›é’ˆå¯¹é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„æœåŠ¡ï¼Œä»ç›‘ç£å¯¹ä¸€ä¸ªå®¹å™¨çš„ç»ˆç”Ÿç®¡ç†åˆ°ç›‘è§†èµ„æºå’Œè·Ÿè¸ªèŠ‚ç‚¹å¥åº·ã€‚MRv1é€šè¿‡æ’æ§½ç®¡ç†Mapå’ŒReduceä»»åŠ¡çš„æ‰§è¡Œï¼Œè€ŒNodeManagerç®¡ç†æŠ½è±¡å®¹å™¨ï¼ˆcontainerï¼‰ï¼Œè¿™äº›å®¹å™¨ä»£è¡¨ç€å¯ä¾›ä¸€ä¸ªç‰¹å®šåº”ç”¨ç¨‹åºä½¿ç”¨çš„é’ˆå¯¹æ¯ä¸ªèŠ‚ç‚¹çš„èµ„æºã€‚YARNç»§ç»­ä½¿ç”¨HDFSå±‚ã€‚å®ƒçš„ä¸»è¦NameNodeç”¨äºå…ƒæ•°æ®æœåŠ¡ï¼Œè€ŒDataNodeç”¨äºåˆ†æ•£åœ¨ä¸€ä¸ªé›†ç¾¤ä¸­çš„å¤åˆ¶å­˜å‚¨æœåŠ¡ã€‚NodeManageræ˜¯é©»ç•™åœ¨ä¸€ä¸ªYARNé›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„ä»£ç†ã€‚</p><p>ApplicationMasterï¼ˆAMï¼‰ï¼šApplicationMasterç®¡ç†ä¸€ä¸ªåœ¨YARNå†…è¿è¡Œçš„åº”ç”¨ç¨‹åºçš„æ¯ä¸ªå®ä¾‹ã€‚ApplicationMasterè´Ÿè´£åè°ƒæ¥è‡ª ResourceManager çš„èµ„æºï¼Œå¹¶é€šè¿‡ NodeManagerç›‘è§†å®¹å™¨çš„æ‰§è¡Œå’Œèµ„æºä½¿ç”¨ï¼ˆCPUã€å†…å­˜ç­‰çš„èµ„æºåˆ†é…ï¼‰ã€‚è¯·æ³¨æ„ï¼Œå°½ç®¡ç›®å‰çš„èµ„æºæ›´åŠ ä¼ ç»Ÿï¼ˆCPUæ ¸å¿ƒã€å†…å­˜ï¼‰ï¼Œä½†æœªæ¥ä¼šå¸¦æ¥åŸºäºæ‰‹å¤´ä»»åŠ¡çš„æ–°èµ„æºç±»å‹ï¼ˆæ¯”å¦‚å›¾å½¢å¤„ç†å•å…ƒæˆ–ä¸“ç”¨å¤„ç†è®¾å¤‡ï¼‰ã€‚ä»YARN è§’åº¦è®²ï¼ŒApplicationMaster æ˜¯ç”¨æˆ·ä»£ç ï¼Œå› æ­¤å­˜åœ¨æ½œåœ¨çš„å®‰å…¨é—®é¢˜ã€‚YARNå‡è®¾ApplicationMasterå­˜åœ¨é”™è¯¯æˆ–è€…ç”šè‡³æ˜¯æ¶æ„çš„ï¼Œå› æ­¤å°†å®ƒä»¬å½“ä½œæ— ç‰¹æƒçš„ä»£ç å¯¹å¾…ã€‚</p><p>Containerï¼šå¯¹ä»»åŠ¡è¿è¡Œç¯å¢ƒè¿›è¡ŒæŠ½è±¡ï¼Œå°è£…CPUã€å†…å­˜ç­‰å¤šç»´åº¦çš„èµ„æºä»¥åŠç¯å¢ƒå˜é‡ã€å¯åŠ¨å‘½ä»¤ç­‰ä»»åŠ¡è¿è¡Œç›¸å…³çš„ä¿¡æ¯ã€‚æ¯”å¦‚å†…å­˜ã€CPUã€ç£ç›˜ã€ç½‘ç»œç­‰ï¼Œå½“AMå‘RMç”³è¯·èµ„æºæ—¶ï¼ŒRMä¸ºAMè¿”å›çš„èµ„æºä¾¿æ˜¯ç”¨Containerè¡¨ç¤ºçš„ã€‚YARNä¼šä¸ºæ¯ä¸ªä»»åŠ¡åˆ†é…ä¸€ä¸ªContainerï¼Œä¸”è¯¥ä»»åŠ¡åªèƒ½ä½¿ç”¨è¯¥Containerä¸­æè¿°çš„èµ„æºã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220530132540912.png" /></p><p>ä¼˜ç‚¹ï¼š</p><ol type="1"><li>è¿™ä¸ªè®¾è®¡â¼¤â¼¤å‡â¼©äº†JobTrackerï¼ˆä¹Ÿå°±æ˜¯ç°åœ¨çš„ResourceManagerï¼‰çš„èµ„æºæ¶ˆè€—ï¼Œå¹¶ä¸”è®©ç›‘æµ‹æ¯â¼€ä¸ªJobâ¼¦ä»»åŠ¡(tasks)çŠ¶æ€çš„ç¨‹åºåˆ†å¸ƒå¼åŒ–äº†ï¼Œæ›´å®‰å…¨ã€æ›´ä¼˜ç¾ã€‚å¦å¤–ï¼Œåœ¨æ–°ç‰ˆä¸­ï¼ŒApplicationMasteræ˜¯â¼€ä¸ªå¯å˜æ›´çš„éƒ¨åˆ†ï¼Œâ½¤æˆ·å¯ä»¥å¯¹ä¸åŒçš„ç¼–ç¨‹æ¨¡å‹å†™â¾ƒâ¼°çš„ApplicationMasterï¼Œè®©æ›´å¤šç±»å‹çš„ç¼–ç¨‹æ¨¡å‹èƒ½å¤Ÿè·‘åœ¨Hadoopé›†ç¾¤ä¸­ã€‚</li><li>èƒ½å¤Ÿâ½€æŒä¸åŒçš„ç¼–ç¨‹æ¨¡å‹</li><li>å¯¹äºèµ„æºçš„è¡¨â½°ä»¥å†…å­˜ä¸ºå•ä½(åœ¨â½¬å‰ç‰ˆæœ¬çš„Yarnä¸­ï¼Œæ²¡æœ‰è€ƒè™‘CPUçš„å â½¤)ï¼Œâ½ä¹‹å‰ä»¥å‰©ä½™slotæ•°â½¬æ›´åˆç†</li><li>æ—¢ç„¶èµ„æºè¡¨â½°æˆå†…å­˜é‡ï¼Œé‚£å°±æ²¡æœ‰äº†ä¹‹å‰çš„map slot/reduceslotåˆ†å¼€é€ æˆé›†ç¾¤èµ„æºé—²ç½®çš„å°´å°¬æƒ…å†µäº†</li></ol><p>MapReduce ç»å†è¿‡ç¨‹ï¼šInput â†’ Splitting â†’ Mapping â†’ Shuffling â†’Reducing â†’ Output ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220605101114438.png" /></p><h4 id="æ¶ˆæ¯ä¸­é—´ä»¶">æ¶ˆæ¯ä¸­é—´ä»¶ğŸ­</h4><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹åœ¨ä¸åŒçš„æœºå™¨ä¸Šè¿è¡Œï¼Œé€šè¿‡æ¶ˆæ¯ä¼ é€’äº¤æ¢ä¿¡æ¯ï¼ŒæˆåŠŸçš„åˆ†å¸ƒå¼ç³»ç»Ÿä¾èµ–äºéšè—æˆ–ç®€åŒ–æ¶ˆæ¯ä¼ é€’çš„é€šä¿¡æ¨¡å‹ã€‚ç¨‹é—´é€šä¿¡æ˜¯æ‰€æœ‰åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ ¸å¿ƒã€‚</p><p>ä¸­é—´ä»¶åˆ†ç±»ï¼š</p><ul><li>è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ RPC</li><li>é¢å‘å¯¹è±¡ä¸­é—´ä»¶ OOM</li><li>é¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶ MOM</li><li>äºäº‹ä»¶çš„ä¸­é—´ä»¶</li><li>äº‹åŠ¡å¤„ç†ç›‘è§†å™¨ï¼ˆTPMï¼‰</li><li>å¯¹è±¡è¯·æ±‚ä»£ç†ï¼ˆORBï¼‰</li></ul><p>MOMæ˜¯ä¸€ç§ç‰¹æ®Šå½¢å¼çš„ä¸­é—´ä»¶ï¼Œå®ƒèƒ½å¤Ÿä¿ƒè¿›å¼‚æ­¥æ¶ˆæ¯ä»ä¸€ä¸ªç»„ä»¶åˆ°å¦ä¸€ä¸ªç»„ä»¶çš„ä¼ è¾“ã€‚</p><p>ä½¿ç”¨æ¶ˆæ¯è¿›è¡Œé€šä¿¡ï¼Œæ¶ˆæ¯å­˜å‚¨åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œæ¶ˆæ¯æœåŠ¡å™¨å°†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è§£è€¦ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220605133357212.png" /></p><p>é€šä¿¡æ¨¡å¼åˆ†ç±»</p><ul><li><p>åŸºäºå¯»å€ç±»å‹çš„åˆ†ç±»ï¼šç›´æ¥å¯»å€/é—´æ¥å¯»å€</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220605135113016.png" /></p></li><li><p>åŸºäºé˜»å¡ç±»å‹çš„åˆ†ç±»ï¼šåŒæ­¥/å¼‚æ­¥</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220605135559976.png" /></p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220605135612390.png" /></p></li><li><p>åŸºäºç¼“å†²ç±»å‹çš„åˆ†ç±»ï¼šæœ‰ç¼“å­˜/æ— ç¼“å­˜</p><p>æœ‰ç¼“å­˜ï¼šæŒç»­ï¼Œæ¶ˆæ¯å¯ä»¥è¢«ç¼“å†²ã€‚</p><p>æ— ç¼“å­˜ï¼šæš‚æ—¶ï¼Œæ¶ˆæ¯ç«‹å³äº¤ä»˜ï¼ŒæœåŠ¡å™¨å¿…é¡»åœ¨é€šä¿¡å¼€å§‹æ—¶è¿è¡Œï¼Œç›´æ¥è¿æ¥åˆ°æ‰€éœ€çš„æœåŠ¡å™¨ã€‚</p></li><li><p>åŸºäºå†…å®¹ç±»å‹çš„åˆ†ç±»ï¼šäº‹ä»¶ï¼Œå‘½ä»¤ï¼Œæ•°æ®ï¼Œæµ</p></li><li><p>åŸºäºç¡®è®¤ç±»å‹çš„åˆ†ç±»ï¼šä¸ç¡®è®¤/ç¡®è®¤/ä¸‰æ¬¡æ¡æ‰‹</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220605150917526.png" /></p></li><li><p>åŸºäºæ¥æ”¶æœºæ•°ç›®çš„åˆ†ç±»ï¼šç‚¹å¯¹ç‚¹ï¼ˆæ— æ’­ï¼‰/å¤šæ’­/ä»»æ„æ’­/ä½ç½®è¾…åŠ©å¤šæ’­/å¹¿æ’­</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220605151352134.png" /></p></li><li><p>åŸºäºé€šä¿¡æ–¹å‘çš„åˆ†ç±»ï¼šå•å·¥/åŠåŒå·¥/å…¨åŒå·¥</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220605151654247.png" /></p></li><li><p>åŸºäºå‘èµ·äººçš„åˆ†ç±»</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220605151931283.png" /></p></li></ul><p>MOMä¸­é˜Ÿåˆ—ï¼ˆQueueï¼‰ï¼š</p><ul><li><p>ä½œä¸ºå‘é€æ–¹å’Œæ¥æ”¶æ–¹ä¹‹é—´çš„ä¸­ä»‹ï¼Œæ˜¯æ¶ˆæ¯çš„ç›®çš„åœ°ã€å…è®¸è¿›ç¨‹ç‹¬ç«‹æ‰§è¡Œå’Œå¤±è´¥ã€å¯ä»¥å±è”½è¿›ç¨‹æ•…éšœå’Œé€šä¿¡æ•…éšœã€‚</p></li><li><p>æ—¶é—´è§£è€¦</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220605152317924.png" /></p></li><li><p>åœ°ç‚¹è§£è€¦</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220605152345510.png" /></p></li></ul><p>æ¶ˆæ¯ä¼˜å…ˆçº§ï¼š</p><ul><li><p>æœ€é«˜ä¼˜å…ˆçº§ä¼˜å…ˆ</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220605152612680.png" /></p></li><li><p>åŠ æƒå…¬å¹³è°ƒåº¦</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220605152623310.png" /></p></li></ul><p>MOMæ€æƒ³ï¼š</p><ul><li>åŸºæœ¬æ€æƒ³ï¼šåº”ç”¨ç¨‹åºé€šè¿‡åœ¨ç‰¹å®šé˜Ÿåˆ—ä¸­æ’å…¥æ¶ˆæ¯è¿›è¡Œé€šä¿¡ã€‚</li><li>åœ¨æœ€ç»ˆä¼ é€’åˆ°ç›®æ ‡ä¹‹å‰ï¼Œé€šè¿‡ä¸€ç³»åˆ—é€šä¿¡æœåŠ¡å™¨è½¬å‘çš„æ¶ˆæ¯ã€‚</li><li>å‘é€æ¶ˆæ¯æ—¶ï¼Œæ¥æ”¶å™¨å¯èƒ½å·²å…³é—­ã€‚</li><li>å½“æ¥æ”¶æ–¹æ¥æ”¶åˆ°æ¶ˆæ¯æ—¶ï¼Œå‘é€æ–¹æ— éœ€æ‰§è¡Œã€‚</li><li>å‘ä»¶äººå¯ä»¥ä¿è¯å…¶é‚®ä»¶æœ€ç»ˆä¼šæ’å…¥æ”¶ä»¶äººçš„é˜Ÿåˆ—ï¼Œä½†ä¸ä¿è¯ä½•æ—¶æ’å…¥ ã€‚</li></ul><p>MOMä¸­å¯ä»¥æ·»åŠ å¾ˆå¤šæ¨¡å—ã€‚</p><p>MOMä¸­é˜Ÿåˆ—ç®¡ç†å™¨ï¼ˆQueue Managerï¼‰ï¼š</p><ul><li><p>æ˜¯ä¸€ç§ä¸“é—¨çš„æ•°æ®åº“</p></li><li><p>é€šè¿‡APIå‘åº”ç”¨ç¨‹åºæä¾›é˜Ÿåˆ—åŠŸèƒ½</p></li><li><p>æä¾›ç®¡ç†æ‰‹æ®µ</p><ul><li>åˆ›å»º/åˆ é™¤é˜Ÿåˆ—</li><li>å…è®¸å¯åŠ¨å’Œåœæ­¢é˜Ÿåˆ—</li><li>æ›´æ”¹ç°æœ‰é˜Ÿåˆ—çš„å±æ€§</li><li>å…è®¸ç›‘è§†æ€§èƒ½ã€æ•…éšœå’Œæ¢å¤</li></ul></li><li><p>é€šå¸¸ç»™é˜Ÿåˆ—ç®¡ç†å™¨é…ç½®å°†æ¶ˆæ¯è½¬å‘ç»™å…¶ä»–é˜Ÿåˆ—ç®¡ç†å™¨çš„åŠŸèƒ½</p></li><li><p>é€šå¸¸ç§°ä¸ºæ¶ˆæ¯ä»£ç†ï¼ˆMessage Brokerï¼‰</p><ul><li><p>æ¶ˆæ¯è½¬æ¢</p><p>é‡æ–°æ ¼å¼åŒ–æ•°æ®/ä¿¡æ¯ã€ç¿»è¯‘ã€äº†è§£æºå’Œç›®æ ‡çš„ç»“æ„/æ ¼å¼</p></li><li><p>æ™ºèƒ½è·¯ç”±</p><p>æµé‡æ§åˆ¶ã€æ¶ˆæ¯å­—å…¸</p></li><li><p>è§„åˆ™å¼•æ“</p></li><li><p>å­˜å‚¨åº“</p></li><li><p>è¿‡æ»¤</p></li><li><p>è®¿é—®æ§åˆ¶</p></li></ul></li></ul><p>MOMæ€§è´¨ï¼š</p><ul><li><p>å¼‚æ­¥äº¤äº’</p><p>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åªæ˜¯æ¾æ•£è€¦åˆçš„ã€æ¶ˆæ¯æ˜¯å·²æ’é˜Ÿçš„ã€æœ‰åˆ©äºåº”ç”¨ç¨‹åºé›†æˆ</p></li><li><p>æ”¯æŒå¯é çš„äº¤ä»˜æœåŠ¡</p><p>å°†é˜Ÿåˆ—ä¿ç•™åœ¨æŒä¹…æ€§å­˜å‚¨ä¸­</p></li><li><p>ä¸­é—´æ¶ˆæ¯æœåŠ¡å™¨å¤„ç†æ¶ˆæ¯</p><p>å¯ä»¥è¿›è¡Œç­›é€‰ã€è½¬æ¢ã€è®°å½•ç­‰æ“ä½œã€æ¶ˆæ¯æœåŠ¡å™¨å½¢æˆç½‘ç»œ</p></li><li><p>æ•°æ®åº“é›†æˆå¾ˆæ–¹ä¾¿</p></li></ul><p>MOMæ¶ˆæ¯ä¼ é€’æ¨¡å¼ï¼š</p><ul><li><p>ä¸€å¯¹ä¸€</p><p>ä¸€ä¸ªå‘é€æ–¹ï¼Œä¸€ä¸ªæ¥æ”¶æ–¹ã€ç‚¹å¯¹ç‚¹</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220605154529988.png" /></p></li><li><p>ä¸€å¯¹å¤š</p><p>ä¸€ä¸ªå‘é€æ–¹ï¼Œå¤šä¸ªæ¥æ”¶æ–¹</p></li><li><p>å¤šå¯¹ä¸€</p><p>å¤šä¸ªå‘é€æ–¹ï¼Œä¸€ä¸ªæ¥æ”¶æ–¹</p></li><li><p>å¤šå¯¹å¤š</p><p>å¤šä¸ªå‘é€æ–¹ï¼Œå¤šä¸ªæ¥æ”¶æ–¹ã€å‘å¸ƒå’Œè®¢é˜…</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220605154542479.png" /></p><p>æ¶ˆæ¯ä»£ç†ï¼ˆé˜Ÿåˆ—ç®¡ç†å™¨ï¼‰çš„ä¸€ä¸ªé‡è¦å’Œå¸¸è§ç”¨é€”æ˜¯å¸®åŠ©å½¢æˆå‘å¸ƒ/è®¢é˜…æ¨¡å‹ï¼Œåœ¨è¿™æ ·çš„æ¨¡å‹ä¸­ï¼Œä»£ç†ä¸ä»…è´Ÿè´£è½¬æ¢æ¶ˆæ¯ï¼Œè¿˜è´Ÿè´£æ ¹æ®æ­£åœ¨äº¤æ¢çš„æ¶ˆæ¯åŒ¹é…åº”ç”¨ç¨‹åºã€åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡å°†Topic X ä¸Šçš„æ¶ˆæ¯å‘é€ç»™ä»£ç†æ¥å‘å¸ƒè¯¥æ¶ˆæ¯ã€å¯¹ä¸»é¢˜ Xä¸Šçš„æ¶ˆæ¯æ„Ÿå…´è¶£çš„åº”ç”¨ç¨‹åºå¯ä»¥è®¢é˜…è¿™äº›æ¶ˆæ¯ï¼Œç„¶åä»ä»£ç†æ¥æ”¶è¿™äº›æ¶ˆæ¯ã€‚</p></li></ul><p>MOMä¾‹å­</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220605154926153.png" /></p><h4 id="è´Ÿè½½å‡è¡¡æœºåˆ¶">è´Ÿè½½å‡è¡¡æœºåˆ¶ğŸ¦§</h4><p>å•æœåŠ¡å™¨æ— è®ºå¦‚ä½•ä¼˜åŒ–ï¼Œæ€»ä¼šæœ‰ä¸Šé™ï¼Œå½“æ— æ³•æ»¡è¶³ä¸šåŠ¡éœ€æ±‚æ—¶ï¼Œå°±éœ€è¦è®¾è®¡é«˜æ€§èƒ½é›†ç¾¤æ¥æå‡ç³»ç»Ÿæ•´ä½“çš„å¤„ç†æ€§èƒ½ã€‚</p><p>é«˜æ€§èƒ½é›†ç¾¤éœ€è¦å¢åŠ ä¸€ä¸ªä»»åŠ¡åˆ†é…å™¨ï¼ˆè´Ÿè½½å‡è¡¡å™¨ï¼‰ä»¥åŠä¸ºä»»åŠ¡é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ä»»åŠ¡åˆ†é…ç®—æ³•ã€‚</p><p>è´Ÿè½½å‡è¡¡å™¨ï¼š</p><ul><li><p>DNS è´Ÿè½½å‡è¡¡</p><p>ä¸€èˆ¬ç”¨æ¥å®ç°åœ°ç†çº§åˆ«çš„å‡è¡¡ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220605103200015.png" /></p><p>ä¼˜ç‚¹ï¼šç®€å•ã€æˆæœ¬ä½ï¼›å°±è¿‘è®¿é—®ï¼Œæå‡è®¿é—®é€Ÿåº¦ã€‚</p><p>ç¼ºç‚¹ï¼šæ›´æ–°ä¸åŠæ—¶ï¼›æ‰©å±•æ€§å·®ï¼›åˆ†é…ç­–ç•¥è¾ƒç®€å•ã€‚</p></li><li><p>ç¡¬ä»¶è´Ÿè½½å‡è¡¡</p><p>é€šè¿‡å•ç‹¬çš„ç¡¬ä»¶è®¾å¤‡æ¥å®ç°è´Ÿè½½å‡è¡¡åŠŸèƒ½ï¼Œè¿™ç±»è®¾å¤‡å’Œè·¯ç”±å™¨ã€äº¤æ¢æœºç±»ä¼¼ã€‚ç›®å‰ä¸šç•Œå…¸å‹çš„ç¡¬ä»¶è´Ÿè½½å‡è¡¡è®¾å¤‡æœ‰ä¸¤æ¬¾ï¼šF5å’Œ A10 ã€‚</p><p>ä¼˜ç‚¹ï¼šåŠŸèƒ½å¼ºå¤§ï¼›æ€§èƒ½å¼ºå¤§ï¼›ç¨³å®šæ€§é«˜ï¼›æ”¯æŒå®‰å…¨é˜²æŠ¤ã€‚</p><p>ç¼ºç‚¹ï¼šä»·æ ¼æ˜‚è´µï¼›æ‰©å±•èƒ½åŠ›å·®ã€‚</p></li><li><p>è½¯ä»¶è´Ÿè½½å‡è¡¡</p><p>é€šè¿‡è´Ÿè½½å‡è¡¡è½¯ä»¶æ¥å®ç°è´Ÿè½½å‡è¡¡åŠŸèƒ½ï¼Œå¸¸è§æœ‰Nginxï¼ˆ7å±‚è´Ÿè½½å‡è¡¡ï¼‰ã€LVSï¼ˆLinux å†…æ ¸çš„ 4 å±‚è´Ÿè½½å‡è¡¡ï¼‰ã€‚4 å±‚å’Œ 7å±‚çš„åŒºåˆ«å°±åœ¨äºåè®®å’Œçµæ´»æ€§ï¼šNginx æ”¯æŒ HTTPã€E-mail åè®®ï¼›è€Œ LVS æ˜¯ 4å±‚è´Ÿè½½å‡è¡¡ï¼Œå’Œåè®®æ— å…³ï¼Œå‡ ä¹æ‰€æœ‰åº”ç”¨éƒ½å¯ä»¥åšï¼Œä¾‹å¦‚ï¼ŒèŠå¤©ã€æ•°æ®åº“ç­‰ã€‚</p><p>è½¯ä»¶å’Œç¡¬ä»¶è´Ÿè½½å‡è¡¡æ–¹æ³•çš„æœ€ä¸»è¦åŒºåˆ«å°±åœ¨äºæ€§èƒ½ï¼Œç¡¬ä»¶è´Ÿè½½å‡è¡¡æ€§èƒ½è¿œè¿œé«˜äºè½¯ä»¶è´Ÿè½½å‡è¡¡æ€§èƒ½ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220605103716195.png" /></p><p>ä¼˜ç‚¹ï¼šç®€å•ï¼›ä¾¿å®œï¼›çµæ´»ã€‚</p><p>ç¼ºç‚¹ï¼šæ€§èƒ½ä¸€èˆ¬ï¼›åŠŸèƒ½æ²¡æœ‰ç¡¬ä»¶è´Ÿè½½å‡è¡¡é‚£ä¹ˆå¼ºå¤§ï¼›ä¸€èˆ¬ä¸å…·å¤‡é˜²ç«å¢™å’Œé˜²DDoS æ”»å‡»ç­‰å®‰å…¨åŠŸèƒ½ã€‚</p></li></ul><p>è´Ÿè½½å‡è¡¡å…¸å‹æ¶æ„ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220605103908259.png" /></p><p>åœ°ç†çº§åˆ«è´Ÿè½½å‡è¡¡ï¼šå½“ç”¨æˆ·è®¿é—®æ—¶ï¼ŒDNSä¼šæ ¹æ®ç”¨æˆ·çš„åœ°ç†ä½ç½®æ¥å†³å®šè¿”å›å“ªä¸ªæœºæˆ¿çš„ IP ï¼›é›†ç¾¤çº§åˆ«è´Ÿè½½å‡è¡¡ï¼šF5æ”¶åˆ°è¯·æ±‚åï¼Œè¿›è¡Œé›†ç¾¤çº§åˆ«çš„è´Ÿè½½å‡è¡¡ï¼›æœºå™¨çº§åˆ«çš„è´Ÿè½½å‡è¡¡ï¼šNginxæ”¶åˆ°ç”¨æˆ·è¯·æ±‚åï¼Œå°†ç”¨æˆ·è¯·æ±‚å‘é€ç»™é›†ç¾¤é‡Œé¢çš„æŸå°æœåŠ¡å™¨ã€‚</p><p>è´Ÿè½½å‡è¡¡ç®—æ³•ï¼š</p><ul><li><p>ä»»åŠ¡æ•°å¹³åˆ†ç±»</p><p>è´Ÿè½½å‡è¡¡ç³»ç»Ÿå°†æ”¶åˆ°çš„ä»»åŠ¡å¹³å‡åˆ†é…ç»™æœåŠ¡å™¨è¿›è¡Œå¤„ç†ï¼Œè¿™é‡Œçš„â€œå¹³å‡â€å¯ä»¥æ˜¯ç»å¯¹æ•°é‡çš„å¹³å‡ï¼Œä¹Ÿå¯ä»¥æ˜¯æ¯”ä¾‹æˆ–è€…æƒé‡ä¸Šçš„å¹³å‡ã€‚</p><ul><li>è½®è¯¢ï¼šè´Ÿè½½å‡è¡¡ç³»ç»Ÿæ”¶åˆ°è¯·æ±‚åï¼ŒæŒ‰ç…§é¡ºåºè½®æµåˆ†é…åˆ°æœåŠ¡å™¨ä¸Šã€‚ä¸å…³æ³¨æœåŠ¡å™¨æœ¬èº«çš„çŠ¶æ€ï¼Œå¦‚æœæœåŠ¡å™¨å‡ºäº†bugï¼Œå®ƒæ˜¯ä¸å…³å¿ƒçš„ï¼Œä¼šç»§ç»­å‘é€è¯·æ±‚ç»™è¯¥æœåŠ¡å™¨ï¼›å¦‚æœé›†ç¾¤ä¸­æ–°æ—§æœºå™¨æ€§èƒ½ä¸åŒï¼Œå®ƒåˆ†é…çš„ä¹Ÿä¸€æ ·çš„ã€‚<br /></li><li>åŠ æƒè½®è¯¢ï¼šè´Ÿè½½å‡è¡¡ç³»ç»Ÿæ ¹æ®æœåŠ¡å™¨æƒé‡è¿›è¡Œä»»åŠ¡åˆ†é…ï¼Œæƒé‡ä¸€èˆ¬æ˜¯æ ¹æ®ç¡¬ä»¶é…ç½®è¿›è¡Œé™æ€é…ç½®çš„ã€‚ä¸»è¦ç›®çš„å°±æ˜¯ä¸ºäº†è§£å†³ä¸åŒ<strong>æœåŠ¡å™¨å¤„ç†èƒ½åŠ›æœ‰å·®å¼‚</strong>çš„é—®é¢˜ï¼Œè§£å†³äº†è½®è¯¢ç®—æ³•ä¸­æ— æ³•æ ¹æ®<strong>æœåŠ¡å™¨çš„é…ç½®å·®å¼‚</strong>è¿›è¡Œä»»åŠ¡åˆ†é…çš„é—®é¢˜ï¼Œä½†æ˜¯æ— æ³•æ ¹æ®<strong>æœåŠ¡å™¨çš„çŠ¶æ€å·®å¼‚</strong>è¿›è¡Œä»»åŠ¡åˆ†é…ã€‚</li></ul></li><li><p>è´Ÿè½½å‡è¡¡ç±»</p><p>è´Ÿè½½å‡è¡¡ç³»ç»Ÿæ ¹æ®æœåŠ¡å™¨çš„è´Ÿè½½æ¥è¿›è¡Œåˆ†é…ï¼Œç”¨è¿æ¥æ•°ã€I/Oä½¿ç”¨ç‡ã€ç½‘å¡ååé‡ç­‰æ¥è¡¡é‡ç³»ç»Ÿçš„å‹åŠ›ã€‚</p><ul><li><p>è´Ÿè½½æœ€ä½ä¼˜å…ˆï¼šå°†ä»»åŠ¡åˆ†é…ç»™å½“å‰è´Ÿè½½æœ€ä½çš„æœåŠ¡å™¨ã€‚</p><p>LVSï¼Œå¯ä»¥ä»¥â€œè¿æ¥æ•°â€æ¥åˆ¤æ–­æœåŠ¡å™¨çš„çŠ¶æ€ï¼ŒæœåŠ¡å™¨è¿æ¥æ•°è¶Šå¤§ï¼Œè¡¨æ˜æœåŠ¡å™¨å‹åŠ›è¶Šå¤§ã€‚</p><p>Nginxï¼Œå¯ä»¥ä»¥â€œHTTPè¯·æ±‚æ•°â€æ¥åˆ¤æ–­æœåŠ¡å™¨çŠ¶æ€ï¼ˆNginxå†…ç½®çš„è´Ÿè½½å‡è¡¡ç®—æ³•ä¸æ”¯æŒè¿™ç§æ–¹å¼ï¼Œéœ€è¦è¿›è¡Œæ‰©å±•ï¼‰ã€‚</p><p>å¦‚æœæ˜¯ CPU å¯†é›†å‹ï¼Œå¯ä»¥ä»¥â€œCPU è´Ÿè½½â€æ¥è¡¡é‡ç³»ç»Ÿå‹åŠ›ã€‚</p><p>å¦‚æœæ˜¯ I/O å¯†é›†å‹ï¼Œå¯ä»¥ä»¥â€œI/O è´Ÿè½½â€æ¥è¡¡é‡ç³»ç»Ÿå‹åŠ›ã€‚</p><p>è§£å†³è½®è¯¢ç®—æ³•ä¸­æ— æ³•æ„ŸçŸ¥æœåŠ¡å™¨çŠ¶æ€çš„é—®é¢˜ï¼Œä½†æ˜¯å¤æ‚åº¦å¢åŠ å¾ˆå¤šï¼Œå®é™…åº”ç”¨åœºæ™¯åè€Œä¸å¦‚è½®è¯¢ã€‚</p></li></ul></li><li><p>æ€§èƒ½æœ€ä¼˜ç±»</p><p>è´Ÿè½½å‡è¡¡ç³»ç»Ÿæ ¹æ®æœåŠ¡å™¨çš„å“åº”æ—¶é—´æ¥è¿›è¡Œä»»åŠ¡åˆ†é…ï¼Œä¼˜å…ˆå°†æ–°ä»»åŠ¡åˆ†é…ç»™å“åº”æœ€å¿«çš„æœåŠ¡å™¨ã€‚</p><ul><li><p>æ€§èƒ½æœ€ä¼˜ç±»</p><p>ç«™åœ¨å®¢æˆ·ç«¯çš„è§’åº¦æ¥è¿›è¡Œåˆ†é…çš„ï¼Œä¼˜å…ˆå°†ä»»åŠ¡åˆ†é…ç»™å¤„ç†é€Ÿåº¦æœ€å¿«çš„æœåŠ¡å™¨ï¼Œé€šè¿‡è¿™ç§æ–¹å¼è¾¾åˆ°æœ€å¿«å“åº”å®¢æˆ·ç«¯çš„ç›®çš„ã€‚</p><p>è´Ÿè½½æœ€ä½ä¼˜å…ˆç±»ç®—æ³•æ˜¯ç«™åœ¨æœåŠ¡å™¨çš„è§’åº¦æ¥è¿›è¡Œåˆ†é…çš„ã€‚</p><p>æ€§èƒ½æœ€ä¼˜ä¼˜å…ˆç±»ç®—æ³•æœ¬è´¨ä¸Šä¹Ÿæ˜¯æ„ŸçŸ¥äº†æœåŠ¡å™¨çš„çŠ¶æ€ï¼Œåªæ˜¯é€šè¿‡å“åº”æ—¶é—´è¿™ä¸ªå¤–éƒ¨æ ‡å‡†æ¥è¡¡é‡æœåŠ¡å™¨çŠ¶æ€è€Œå·²ã€‚å¤æ‚åº¦å¾ˆé«˜ï¼Œä¸»è¦ä½“ç°åœ¨ï¼šè´Ÿè½½å‡è¡¡ç³»ç»Ÿéœ€è¦æ”¶é›†å’Œåˆ†ææ¯ä¸ªæœåŠ¡å™¨æ¯ä¸ªä»»åŠ¡çš„å“åº”æ—¶é—´ï¼Œåœ¨å¤§é‡ä»»åŠ¡å¤„ç†çš„åœºæ™¯ä¸‹ï¼Œè¿™ç§æ”¶é›†å’Œç»Ÿè®¡æœ¬èº«ä¹Ÿä¼šæ¶ˆè€—è¾ƒå¤šçš„æ€§èƒ½ã€‚å·¥ä¸šä¸Šä½¿ç”¨é‡‡æ ·ï¼Œå¹¶è°ƒä¼˜é‡‡æ ·ç‡</p></li></ul></li><li><p>Hash ç±»</p><p>è´Ÿè½½å‡è¡¡ç³»ç»Ÿæ ¹æ®ä»»åŠ¡ä¸­çš„æŸäº›å…³é”®ä¿¡æ¯è¿›è¡Œ Hash è¿ç®—ï¼Œå°†ç›¸åŒ Hashå€¼çš„è¯·æ±‚åˆ†é…åˆ°åŒä¸€å°æœåŠ¡å™¨ä¸Šã€‚å¸¸è§çš„æœ‰æºåœ°å€ Hashã€ç›®æ ‡åœ°å€Hashã€session id hashã€ç”¨æˆ· id hash ç­‰ã€‚</p><ul><li><p>Hash ç±»</p><p>æ ¹æ®ä»»åŠ¡ä¸­çš„æŸäº›å…³é”®ä¿¡æ¯è¿›è¡Œ Hash è¿ç®—ï¼Œå°†ç›¸åŒ Hashå€¼çš„è¯·æ±‚åˆ†é…åˆ°åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œè¿™æ ·åšçš„ç›®çš„ä¸»è¦æ˜¯ä¸ºäº†æ»¡è¶³ç‰¹å®šçš„ä¸šåŠ¡éœ€æ±‚ã€‚</p><ul><li><p>æºåœ°å€Hash</p><p>å°†æ¥æºäºåŒä¸€ä¸ªæº IPåœ°å€çš„ä»»åŠ¡åˆ†é…ç»™åŒä¸€ä¸ªæœåŠ¡å™¨è¿›è¡Œå¤„ç†ï¼Œé€‚åˆäºå­˜åœ¨äº‹åŠ¡ã€ä¼šè¯çš„ä¸šåŠ¡ã€‚</p><p>ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬é€šè¿‡æµè§ˆå™¨ç™»å½•ç½‘ä¸Šé“¶è¡Œæ—¶ï¼Œä¼šç”Ÿæˆä¸€ä¸ªä¼šè¯ä¿¡æ¯ï¼Œè¿™ä¸ªä¼šè¯æ˜¯ä¸´æ—¶çš„ï¼Œå…³é—­æµè§ˆå™¨åå°±å¤±æ•ˆã€‚ç½‘ä¸Šé“¶è¡Œåå°æ— é¡»æŒä¹…åŒ–ä¼šè¯ä¿¡æ¯ï¼Œåªéœ€è¦åœ¨æŸå°æœåŠ¡å™¨ä¸Šä¸´æ—¶ä¿å­˜è¿™ä¸ªä¼šè¯å°±å¯ä»¥äº†ï¼Œä½†éœ€è¦ä¿è¯ç”¨æˆ·åœ¨ä¼šè¯å­˜åœ¨æœŸé—´ï¼Œæ¯æ¬¡éƒ½èƒ½è®¿é—®åˆ°åŒä¸€ä¸ªæœåŠ¡å™¨ï¼Œè¿™ç§ä¸šåŠ¡åœºæ™¯å°±å¯ä»¥ç”¨æºåœ°å€Hashæ¥å®ç°ã€‚</p></li><li><p>ID hash</p><p>å°†æŸä¸ª ID æ ‡è¯†çš„ä¸šåŠ¡åˆ†é…åˆ°åŒä¸€ä¸ªæœåŠ¡å™¨ä¸­è¿›è¡Œå¤„ç†ï¼Œè¿™é‡Œçš„ IDä¸€èˆ¬æ˜¯ä¸´æ—¶æ€§æ•°æ®çš„ IDï¼ˆå¦‚ session idï¼‰ã€‚</p><p>ä¸Šè¿°çš„ç½‘ä¸Šé“¶è¡Œç™»å½•çš„ä¾‹å­ï¼Œç”¨session id hashåŒæ ·å¯ä»¥å®ç°åŒä¸€ä¸ªä¼šè¯æœŸé—´ï¼Œç”¨æˆ·æ¯æ¬¡éƒ½æ˜¯è®¿é—®åˆ°åŒä¸€å°æœåŠ¡å™¨çš„ç›®çš„ã€‚</p></li></ul></li></ul></li></ul><h4 id="å†—ä½™é«˜å¯ç”¨è®¡ç®—">å†—ä½™é«˜å¯ç”¨è®¡ç®—ğŸ–</h4><p>è®¡ç®—é«˜å¯ç”¨çš„æœ¬è´¨æ˜¯é€šè¿‡å†—ä½™æ¥è§„é¿éƒ¨åˆ†æ•…éšœçš„é£é™©ã€‚å¤æ‚åº¦ä¸»è¦ä½“ç°åœ¨ä»»åŠ¡ç®¡ç†æ–¹é¢ï¼Œå³å½“ä»»åŠ¡åœ¨æŸå°æœåŠ¡å™¨ä¸Šæ‰§è¡Œå¤±è´¥åï¼Œå¦‚ä½•å°†ä»»åŠ¡é‡æ–°åˆ†é…åˆ°æ–°çš„æœåŠ¡å™¨è¿›è¡Œæ‰§è¡Œã€‚</p><p>Qï¼šå“ªäº›æœåŠ¡å™¨å¯ä»¥æ¥æ‰‹æ‰§è¡Œä»»åŠ¡</p><p>Aï¼š</p><ul><li>æ¯ä¸ªæœåŠ¡å™¨éƒ½å¯ä»¥æ‰§è¡Œä»»åŠ¡ï¼ˆå¸¸è§çš„è®¿é—®ç½‘ç«™çš„æŸä¸ªé¡µé¢ï¼‰</li><li>åªæœ‰ç‰¹å®šæœåŠ¡å™¨ï¼ˆé€šå¸¸å«â€œä¸»æœºâ€ï¼‰å¯ä»¥æ‰§è¡Œä»»åŠ¡ï¼ˆZooKeeper çš„ Leaderæ‰èƒ½å¤„ç†å†™æ“ä½œè¯·æ±‚ï¼‰</li></ul><p>Qï¼šä»»åŠ¡å¦‚ä½•é‡æ–°æ‰§è¡Œ</p><p>Aï¼šå¯¹äºå·²ç»åˆ†é…çš„ä»»åŠ¡å³ä½¿æ‰§è¡Œå¤±è´¥ä¹Ÿä¸åšä»»ä½•å¤„ç†ï¼Œç³»ç»Ÿåªéœ€è¦ä¿è¯æ–°çš„ä»»åŠ¡èƒ½å¤Ÿåˆ†é…åˆ°å…¶ä»–éæ•…éšœæœåŠ¡å™¨ä¸Šæ‰§è¡Œå³å¯ã€‚è®¾è®¡ä»»åŠ¡ç®¡ç†å™¨æ¥ç®¡ç†éœ€è¦æ‰§è¡Œçš„è®¡ç®—ä»»åŠ¡ï¼ŒæœåŠ¡å™¨æ‰§è¡Œå®Œä»»åŠ¡åï¼Œéœ€è¦å‘ä»»åŠ¡ç®¡ç†å™¨åé¦ˆä»»åŠ¡æ‰§è¡Œç»“æœï¼Œä»»åŠ¡ç®¡ç†å™¨æ ¹æ®ä»»åŠ¡æ‰§è¡Œç»“æœæ¥å†³å®šæ˜¯å¦éœ€è¦å°†ä»»åŠ¡é‡æ–°åˆ†é…åˆ°å¦å¤–çš„æœåŠ¡å™¨ä¸Šæ‰§è¡Œã€‚</p><p>â€œä»»åŠ¡åˆ†é…å™¨â€æ˜¯ä¸€ä¸ªé€»è¾‘çš„æ¦‚å¿µï¼Œå¹¶ä¸ä¸€å®šè¦æ±‚ç³»ç»Ÿå­˜åœ¨ä¸€ä¸ªç‹¬ç«‹çš„ä»»åŠ¡åˆ†é…å™¨å—ã€‚</p><ol type="1"><li>Nginx å°†é¡µé¢è¯·æ±‚å‘é€ç»™ Web æœåŠ¡å™¨ï¼Œè€Œ CSS / JSç­‰é™æ€æ–‡ä»¶ç›´æ¥è¯»å–æœ¬åœ°ç¼“å­˜ã€‚è¿™é‡Œçš„ Nginxè§’è‰²æ˜¯åå‘ä»£ç†ç³»ç»Ÿï¼Œä½†æ˜¯æ‰¿æ‹…äº†ä»»åŠ¡åˆ†é…å™¨çš„èŒè´£ï¼Œè€Œä¸éœ€è¦ Nginxåšåå‘ä»£ç†ï¼Œåé¢å†æ¥ä¸€ä¸ªä»»åŠ¡åˆ†é…å™¨ã€‚</li><li>å¯¹äºä¸€äº›åå°æ‰¹é‡è¿ç®—çš„ä»»åŠ¡ï¼Œå¯ä»¥è®¾è®¡ä¸€ä¸ªç‹¬ç«‹çš„ä»»åŠ¡åˆ†é…ç³»ç»Ÿæ¥ç®¡ç†è¿™äº›æ‰¹å¤„ç†ä»»åŠ¡çš„æ‰§è¡Œå’Œåˆ†é…ã€‚</li><li>ZooKeeper ä¸­çš„ Follower èŠ‚ç‚¹ï¼Œå½“æ¥æ”¶åˆ°å†™è¯·æ±‚æ—¶ä¼šå°†è¯·æ±‚è½¬å‘ç»™ LeaderèŠ‚ç‚¹å¤„ç†ï¼Œå½“æ¥æ”¶åˆ°è¯»è¯·æ±‚æ—¶å°±è‡ªå·±å¤„ç†ï¼Œè¿™é‡Œçš„ Followerå°±ç›¸å½“äºä¸€ä¸ªé€»è¾‘ä¸Šçš„ä»»åŠ¡åˆ†é…å™¨ã€‚</li></ol><p>ä¸»å¤‡</p><p>ä¸»æœºæ‰§è¡Œæ‰€æœ‰è®¡ç®—ä»»åŠ¡ã€‚ä¾‹å¦‚ï¼Œè¯»å†™æ•°æ®ã€æ‰§è¡Œæ“ä½œç­‰ã€‚å½“ä¸»æœºæ•…éšœï¼ˆä¾‹å¦‚ï¼Œä¸»æœºå®•æœºï¼‰æ—¶ï¼Œä»»åŠ¡åˆ†é…å™¨ä¸ä¼šè‡ªåŠ¨å°†è®¡ç®—ä»»åŠ¡å‘é€ç»™å¤‡æœºï¼Œæ­¤æ—¶ç³»ç»Ÿå¤„äºä¸å¯ç”¨çŠ¶æ€ã€‚</p><p>å¦‚æœä¸»æœºèƒ½å¤Ÿæ¢å¤ï¼Œä»»åŠ¡åˆ†é…å™¨ç»§ç»­å°†ä»»åŠ¡å‘é€ç»™ä¸»æœºã€‚</p><p>å¦‚æœä¸»æœºä¸èƒ½å¤Ÿæ¢å¤ï¼ˆä¾‹å¦‚ï¼Œæœºå™¨ç¡¬ç›˜æŸåï¼ŒçŸ­æ—¶é—´å†…æ— æ³•æ¢å¤ï¼‰ï¼š</p><ol type="1"><li>äººå·¥æ“ä½œï¼Œå¤‡æœºå‡ä¸ºä¸»æœºï¼›</li><li>ä»»åŠ¡åˆ†é…å™¨å°†ä»»åŠ¡å‘é€ç»™æ–°çš„ä¸»æœºï¼›</li><li>äººå·¥å¢åŠ æ–°çš„æœºå™¨ä½œä¸ºå¤‡æœºã€‚</li></ol><p>æ ¹æ®å¤‡æœºçŠ¶æ€çš„ä¸åŒï¼Œä¸»å¤‡æ¶æ„åˆå¯ä»¥ç»†åˆ†ä¸ºå†·å¤‡æ¶æ„å’Œæ¸©å¤‡æ¶æ„ï¼š</p><ul><li>å†·å¤‡ï¼šå¤‡æœºä¸Šçš„ç¨‹åºåŒ…å’Œé…ç½®æ–‡ä»¶éƒ½å‡†å¤‡å¥½ï¼Œä½†å¤‡æœºä¸Šçš„ä¸šåŠ¡ç³»ç»Ÿæ²¡æœ‰å¯åŠ¨ï¼ˆæ³¨æ„ï¼šå¤‡æœºçš„æœåŠ¡å™¨æ˜¯å¯åŠ¨çš„ï¼‰ï¼Œä¸»æœºæ•…éšœåï¼Œéœ€è¦äººå·¥æ‰‹å·¥å°†å¤‡æœºçš„ä¸šåŠ¡ç³»ç»Ÿå¯åŠ¨ï¼Œå¹¶å°†ä»»åŠ¡åˆ†é…å™¨çš„ä»»åŠ¡è¯·æ±‚åˆ‡æ¢å‘é€ç»™å¤‡æœºã€‚</li><li>æ¸©å¤‡ï¼šå¤‡æœºä¸Šçš„ä¸šåŠ¡ç³»ç»Ÿå·²ç»å¯åŠ¨ï¼Œåªæ˜¯ä¸å¯¹å¤–æä¾›æœåŠ¡ï¼Œä¸»æœºæ•…éšœåï¼Œäººå·¥åªéœ€è¦å°†ä»»åŠ¡åˆ†é…å™¨çš„ä»»åŠ¡è¯·æ±‚åˆ‡æ¢å‘é€åˆ°å¤‡æœºå³å¯ã€‚</li><li>å†·å¤‡å¯ä»¥èŠ‚çœä¸€å®šçš„èƒ½æºï¼Œä½†æ¸©å¤‡èƒ½å¤Ÿå¤§å¤§å‡å°‘æ‰‹å·¥æ“ä½œæ—¶é—´ï¼Œå› æ­¤ä¸€èˆ¬æƒ…å†µä¸‹æ¨èç”¨æ¸©å¤‡çš„æ–¹å¼ã€‚</li></ul><p>ä¼˜ç‚¹ï¼šç®€å•ï¼Œä¸»å¤‡æœºä¹‹é—´ä¸éœ€è¦è¿›è¡Œäº¤äº’ï¼ŒçŠ¶æ€åˆ¤æ–­å’Œåˆ‡æ¢æ“ä½œç”±äººå·¥æ‰§è¡Œï¼Œç³»ç»Ÿå®ç°å¾ˆç®€å•</p><p>ç¼ºç‚¹ï¼šéœ€è¦â€œäººå·¥æ“ä½œâ€</p><p>ä¸»å¤‡æ¶æ„ä¹Ÿæ¯”è¾ƒé€‚åˆå†…éƒ¨ç®¡ç†ç³»ç»Ÿã€åå°ç®¡ç†ç³»ç»Ÿè¿™ç±»ä½¿ç”¨äººæ•°ä¸å¤šã€ä½¿ç”¨é¢‘ç‡ä¸é«˜çš„ä¸šåŠ¡ï¼Œä¸å¤ªé€‚åˆåœ¨çº¿çš„ä¸šåŠ¡ã€‚</p><p>ä¸»ä»</p><p>ä¸»ä»æ¶æ„ä¸­çš„ä»æœºä¹Ÿè¦æ‰§è¡Œä»»åŠ¡çš„ä»»åŠ¡åˆ†é…å™¨éœ€è¦å°†ä»»åŠ¡è¿›è¡Œåˆ†ç±»ï¼Œç¡®å®šå“ªäº›ä»»åŠ¡å¯ä»¥å‘é€ç»™ä¸»æœºæ‰§è¡Œï¼Œå“ªäº›ä»»åŠ¡å¯ä»¥å‘é€ç»™å¤‡æœºæ‰§è¡Œã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸»æœºæ‰§è¡Œéƒ¨åˆ†è®¡ç®—ä»»åŠ¡ï¼ˆå¦‚å›¾ä¸­çš„â€œè®¡ç®—ä»»åŠ¡Aâ€ï¼‰ï¼Œå¤‡æœºæ‰§è¡Œéƒ¨åˆ†è®¡ç®—ä»»åŠ¡ï¼ˆå¦‚å›¾ä¸­çš„â€œè®¡ç®—ä»»åŠ¡Bâ€ï¼‰ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220610142409967.png" /></p><p>æ•…éšœåº”å¯¹ï¼šä»»åŠ¡åˆ†é…å™¨ä¸ä¼šè‡ªåŠ¨å°†åŸæœ¬å‘é€ç»™ä¸»æœºçš„ä»»åŠ¡å‘é€ç»™ä»æœºï¼Œè€Œæ˜¯ç»§ç»­å‘é€ç»™ä¸»æœºï¼Œä¸ç®¡è¿™äº›ä»»åŠ¡æ‰§è¡Œæ˜¯å¦æˆåŠŸã€‚å¦‚æœä¸»æœºèƒ½å¤Ÿæ¢å¤ï¼ˆä¸ç®¡æ˜¯äººå·¥æ¢å¤è¿˜æ˜¯è‡ªåŠ¨æ¢å¤ï¼‰ï¼Œä»»åŠ¡åˆ†é…å™¨ç»§ç»­æŒ‰ç…§åŸæœ‰çš„è®¾è®¡ç­–ç•¥åˆ†é…ä»»åŠ¡ï¼Œå³è®¡ç®—ä»»åŠ¡A å‘é€ç»™ä¸»æœºï¼Œè®¡ç®—ä»»åŠ¡ B å‘é€ç»™ä»æœºã€‚å¦‚æœä¸»æœºä¸èƒ½å¤Ÿæ¢å¤ï¼ˆä¾‹å¦‚ï¼Œæœºå™¨ç¡¬ç›˜æŸåï¼ŒçŸ­æ—¶é—´å†…æ— æ³•æ¢å¤ï¼‰ï¼Œåˆ™éœ€è¦äººå·¥æ“ä½œï¼Œå°†åŸæ¥çš„ä»æœºå‡çº§ä¸ºä¸»æœºï¼Œå¢åŠ æ–°çš„æœºå™¨ä½œä¸ºä»æœºï¼Œä»»åŠ¡åˆ†é…å™¨ç»§ç»­æŒ‰ç…§åŸæœ‰çš„è®¾è®¡ç­–ç•¥åˆ†é…ä»»åŠ¡ã€‚</p><p>ä¼˜ç‚¹ï¼šä¸»ä»æ¶æ„çš„ä»æœºä¹Ÿæ‰§è¡Œä»»åŠ¡ï¼Œå‘æŒ¥äº†ä»æœºçš„ç¡¬ä»¶æ€§èƒ½ã€‚ç¼ºç‚¹ï¼šä¸»ä»æ¶æ„éœ€è¦å°†ä»»åŠ¡åˆ†ç±»ï¼Œä»»åŠ¡åˆ†é…å™¨ä¼šå¤æ‚ä¸€äº›ã€‚</p><p>é›†ç¾¤æ–¹æ¡ˆ</p><p>ä¸»å¤‡æ¶æ„å’Œä¸»ä»æ¶æ„æ¶æ„ç®€å•ï¼šé€šè¿‡å†—ä½™ä¸€å°æœåŠ¡å™¨æ¥æå‡å¯ç”¨æ€§ã€‚ä½†æ˜¯äººå·¥æ“ä½œæ•ˆç‡ä½ã€å®¹æ˜“å‡ºé”™ã€ä¸èƒ½åŠæ—¶å¤„ç†æ•…éšœã€‚æ‰€ä»¥å¼•å‡ºé«˜å¯ç”¨é›†ç¾¤æ–¹æ¡ˆï¼Œå¯ç”¨æ€§è¦æ±‚æ›´åŠ ä¸¥æ ¼çš„åœºæ™¯ä¸­ï¼Œè‡ªåŠ¨å®Œæˆåˆ‡æ¢æ“ä½œã€‚</p><p>æ ¹æ®é›†ç¾¤ä¸­æœåŠ¡å™¨èŠ‚ç‚¹è§’è‰²çš„ä¸åŒï¼Œåˆ†ä¸ºä¸¤ç±»ï¼šå¯¹ç§°é›†ç¾¤å’Œéå¯¹ç§°é›†ç¾¤</p><p>å¯¹ç§°é›†ç¾¤ï¼ˆè´Ÿè½½å‡è¡¡é›†ç¾¤ï¼‰ï¼šé›†ç¾¤ä¸­æ¯ä¸ªæœåŠ¡å™¨è§’è‰²ä¸€æ ·ï¼Œéƒ½å¯ä»¥æ‰§è¡Œæ‰€æœ‰ä»»åŠ¡</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220610143645319.png" /></p><p>è´Ÿè½½å‡è¡¡é›†ç¾¤è¯¦ç»†è®¾è®¡ï¼šæ­£å¸¸æƒ…å†µä¸‹ï¼Œä»»åŠ¡åˆ†é…å™¨é‡‡å–æŸç§ç­–ç•¥ï¼ˆéšæœºã€è½®è¯¢ç­‰ï¼‰å°†è®¡ç®—ä»»åŠ¡åˆ†é…ç»™é›†ç¾¤ä¸­çš„ä¸åŒæœåŠ¡å™¨ã€‚</p><p>å½“é›†ç¾¤ä¸­çš„æŸå°æœåŠ¡å™¨æ•…éšœåï¼Œä»»åŠ¡åˆ†é…å™¨ä¸å†å°†ä»»åŠ¡åˆ†é…ç»™å®ƒï¼Œè€Œæ˜¯å°†ä»»åŠ¡åˆ†é…ç»™å…¶ä»–æœåŠ¡å™¨æ‰§è¡Œã€‚</p><p>å½“æ•…éšœæœåŠ¡å™¨æ¢å¤ï¼Œä»»åŠ¡åˆ†é…å™¨é‡æ–°å°†ä»»åŠ¡åˆ†é…ç»™å®ƒæ‰§è¡Œã€‚</p><p>è´Ÿè½½å‡è¡¡é›†ç¾¤çš„è®¾è®¡å…³é”®ç‚¹åœ¨äºä¸¤ç‚¹ï¼š1. ä»»åŠ¡åˆ†é…å™¨éœ€è¦é€‰å–åˆ†é…ç­–ç•¥ã€‚2.ä»»åŠ¡åˆ†é…å™¨éœ€è¦æ£€æµ‹æœåŠ¡å™¨çŠ¶æ€ã€‚</p><p>ä»»åŠ¡åˆ†é…ç­–ç•¥æ¯”è¾ƒç®€å•ï¼šè½®è¯¢å’ŒéšæœºåŸºæœ¬å¤Ÿç”¨ã€‚</p><p>çŠ¶æ€æ£€æµ‹ç¨å¾®å¤æ‚ï¼šæ—¢è¦æ£€æµ‹æœåŠ¡å™¨çš„çŠ¶æ€ï¼Œä¾‹å¦‚æœåŠ¡å™¨æ˜¯å¦å®•æœºã€ç½‘ç»œæ˜¯å¦æ­£å¸¸ç­‰ï¼›åŒæ—¶è¿˜è¦æ£€æµ‹ä»»åŠ¡çš„æ‰§è¡ŒçŠ¶æ€ï¼Œä¾‹å¦‚ä»»åŠ¡æ˜¯å¦å¡æ­»ã€æ˜¯å¦æ‰§è¡Œæ—¶é—´è¿‡é•¿ç­‰ã€‚å¸¸ç”¨çš„åšæ³•æ˜¯ä»»åŠ¡åˆ†é…å™¨å’ŒæœåŠ¡å™¨ä¹‹é—´é€šè¿‡å¿ƒè·³æ¥ä¼ é€’ä¿¡æ¯ï¼ŒåŒ…æ‹¬æœåŠ¡å™¨ä¿¡æ¯å’Œä»»åŠ¡ä¿¡æ¯ï¼Œç„¶åæ ¹æ®å®é™…æƒ…å†µæ¥ç¡®å®šçŠ¶æ€åˆ¤æ–­æ¡ä»¶ã€‚</p><p>éå¯¹ç§°é›†ç¾¤ï¼šé›†ç¾¤ä¸­çš„æœåŠ¡å™¨åˆ†ä¸ºå¤šä¸ªä¸åŒçš„è§’è‰²ï¼Œä¸åŒçš„è§’è‰²æ‰§è¡Œä¸åŒçš„ä»»åŠ¡ï¼ˆeg.æœ€å¸¸è§çš„ Master-Slave è§’è‰²ï¼Œéƒ¨åˆ†ä»»åŠ¡æ˜¯ Master æœåŠ¡å™¨æ‰èƒ½æ‰§è¡Œï¼Œéƒ¨åˆ†ä»»åŠ¡æ˜¯Slave æœåŠ¡å™¨æ‰èƒ½æ‰§è¡Œï¼‰</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220610144559281.png" /></p><p>éå¯¹ç§°é›†ç¾¤æ¶æ„è¯¦ç»†è®¾è®¡ï¼šé›†ç¾¤ä¼šé€šè¿‡æŸç§æ–¹å¼æ¥åŒºåˆ†ä¸åŒæœåŠ¡å™¨çš„è§’è‰²ï¼Œä¾‹å¦‚ï¼Œé€šè¿‡ZAB ç®—æ³•é€‰ä¸¾ï¼Œæˆ–è€…ç®€å•åœ°å–å½“å‰å­˜æ´»æœåŠ¡å™¨ä¸­èŠ‚ç‚¹ ID æœ€å°çš„æœåŠ¡å™¨ä½œä¸ºMaster æœåŠ¡å™¨ï¼›ä»»åŠ¡åˆ†é…å™¨å°†ä¸åŒä»»åŠ¡å‘é€ç»™ä¸åŒæœåŠ¡å™¨ï¼Œä¾‹å¦‚ï¼Œè®¡ç®—ä»»åŠ¡ Aå‘é€ç»™ Master æœåŠ¡å™¨ï¼ŒB å‘é€ç»™ Slave æœåŠ¡å™¨ã€‚</p><p>å½“æŒ‡å®šç±»å‹çš„æœåŠ¡å™¨æ•…éšœæ—¶ï¼Œéœ€è¦é‡æ–°åˆ†é…è§’è‰²ï¼šMasteræœåŠ¡å™¨æ•…éšœåï¼Œéœ€è¦æŒ‡å®šä¸€ä¸ª Slave æœåŠ¡å™¨ä¸º Master æœåŠ¡å™¨ï¼›å¦‚æœ SlaveæœåŠ¡å™¨æ•…éšœï¼Œä¸éœ€è¦é‡æ–°åˆ†é…è§’è‰²ï¼Œåªéœ€è¦å°†å…¶å‰”é™¤å³å¯ã€‚</p><p>éå¯¹ç§°é›†ç¾¤ç›¸æ¯”è´Ÿè½½å‡è¡¡é›†ç¾¤ï¼Œè®¾è®¡å¤æ‚åº¦ä¸»è¦ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼š1.ä»»åŠ¡åˆ†é…ç­–ç•¥æ›´åŠ å¤æ‚ï¼šéœ€è¦å°†ä»»åŠ¡åˆ’åˆ†ä¸ºä¸åŒç±»å‹å¹¶åˆ†é…ç»™ä¸åŒè§’è‰²çš„é›†ç¾¤èŠ‚ç‚¹ã€‚2.è§’è‰²åˆ†é…ç­–ç•¥å®ç°æ¯”è¾ƒå¤æ‚ï¼Œä¾‹å¦‚ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨ ZABã€Raftè¿™ç±»å¤æ‚çš„ç®—æ³•æ¥å®ç°Leader çš„é€‰ä¸¾ã€‚</p><p>å¼‚æ­¥å¤šæ´»ï¼šä¸€äº›æç«¯åœºæ™¯ä¸‹ï¼Œæœ‰å¯èƒ½æ‰€æœ‰æœåŠ¡å™¨éƒ½å‡ºç°æ•…éšœã€‚å¦‚æœä¸šåŠ¡æœŸæœ›è¾¾åˆ°å³ä½¿åœ¨ç¾éš¾æ€§æ•…éšœçš„æƒ…å†µä¸‹ï¼Œä¸šåŠ¡ä¹Ÿä¸å—å½±å“ï¼Œæˆ–è€…åœ¨å‡ åˆ†é’Ÿå†…å°±èƒ½å¤Ÿå¾ˆå¿«æ¢å¤ï¼Œé‚£ä¹ˆå°±éœ€è¦è®¾è®¡å¼‚åœ°å¤šæ´»æ¶æ„ã€‚</p><ul><li>å¼‚åœ°ï¼šåœ°ç†ä½ç½®ä¸Šä¸åŒçš„åœ°æ–¹ï¼Œç±»ä¼¼äºâ€œä¸è¦æŠŠé¸¡è›‹éƒ½æ”¾åœ¨åŒä¸€ç¯®å­é‡Œâ€ã€‚</li><li>å¤šæ´»ï¼šä¸åŒåœ°ç†ä½ç½®ä¸Šçš„ç³»ç»Ÿéƒ½èƒ½å¤Ÿæä¾›ä¸šåŠ¡æœåŠ¡ã€‚ï¼ˆæ´»ï¼šæ´»åŠ¨ï¼Œæ´»è·ƒï¼‰</li></ul><p>åˆ¤æ–­å¼‚åœ°å¤šæ´»ï¼š</p><ol type="1"><li>æ­£å¸¸æƒ…å†µä¸‹ï¼Œç”¨æˆ·æ— è®ºè®¿é—®å“ªä¸€ä¸ªåœ°ç‚¹çš„ä¸šåŠ¡ç³»ç»Ÿï¼Œéƒ½èƒ½å¤Ÿå¾—åˆ°æ­£ç¡®çš„ä¸šåŠ¡æœåŠ¡ã€‚</li><li>æŸä¸ªåœ°æ–¹ä¸šåŠ¡å¼‚å¸¸çš„æ—¶å€™ï¼Œç”¨æˆ·è®¿é—®å…¶ä»–åœ°æ–¹æ­£å¸¸çš„ä¸šåŠ¡ç³»ç»Ÿï¼Œèƒ½å¤Ÿå¾—åˆ°æ­£ç¡®çš„ä¸šåŠ¡æœåŠ¡ã€‚</li></ol><p>åˆ†ç±»ï¼š</p><ul><li>åŒåŸå¼‚åŒºï¼šæœºæˆ¿ç«ç¾ã€æœºæˆ¿åœç”µã€æœºæˆ¿ç©ºè°ƒæ•…éšœè¿™ç±»é—®é¢˜å¯ä»¥å¾ˆå¥½åœ°è§£å†³ï¼›æ”¯ä»˜å®ç­‰é‡‘èç›¸å…³çš„ç³»ç»Ÿï¼Œåªèƒ½é‡‡ç”¨åŒåŸå¼‚åŒºè¿™ç§æ¶æ„</li><li>è·¨åŸå¼‚åœ°ï¼šè§£å†³ç±»ä¼¼æ–°å¥¥å°”è‰¯æ°´ç¾è¿™ç§é—®é¢˜ï¼Œé€‚ç”¨äºå¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚ä¸é‚£ä¹ˆé«˜çš„æƒ…å½¢ã€‚</li><li>è·¨å›½å¼‚åœ°ï¼šè§£å†³ç±»ä¼¼ç¾åŠ å¤§åœç”µï¼Œæ›´å¤šé€‚ç”¨äºåªè¯»ç±»ä¸šåŠ¡æˆ–ä¸ºä¸åŒåœ°åŒºç”¨æˆ·æä¾›æœåŠ¡ã€‚</li></ul><h4 id="åˆ†å¸ƒå¼è®¡ç®—æ¶æ„æ¡ˆä¾‹">åˆ†å¸ƒå¼è®¡ç®—æ¶æ„æ¡ˆä¾‹ğŸ¯</h4><p>é›†ç¾¤ï¼šè§£å†³<strong>å¯ä¼¸ç¼©æ€§é—®é¢˜</strong>çš„æœ‰æ•ˆæ–¹æ³•ã€‚å®ƒå…è®¸ä¸€ç»„æœåŠ¡å™¨å…±äº«ç¹é‡çš„ä»»åŠ¡ï¼Œå¹¶åœ¨é€»è¾‘ä¸Šä½œä¸ºå•ä¸ªæœåŠ¡å™¨è¿è¡Œã€‚å¹¶ä¸”é€šè¿‡åœ¨é›†ç¾¤ä¸­æä¾›å†—ä½™æœåŠ¡å™¨æ¥å®ç°<strong>é«˜å¯ç”¨æ€§</strong>çš„è§£å†³æ–¹æ¡ˆï¼Œä»¥é˜²ä¸€å°æœåŠ¡å™¨æ— æ³•æä¾›æœåŠ¡ã€‚</p><p>è´Ÿè½½å‡è¡¡åŠŸèƒ½ï¼š</p><ul><li><p>è¯·æ±‚åˆ†é…</p><p>å®¢æˆ·è¯·æ±‚æŒ‰ä¸€å®šç­–ç•¥åˆ†å‘ç»™é›†ç¾¤ä¸­çš„æŸä¸ªèŠ‚ç‚¹ï¼Œæµè¡Œçš„ç®—æ³•åŒ…æ‹¬å¾ªç¯ã€éšæœºå’ŒåŸºäºæƒé‡åˆ†é…ã€é™æ€åˆ†é…ã€‘ï¼Œä¸€äº›å¤æ‚çš„è´Ÿè½½å¹³è¡¡å™¨å®ç°äº†ç‰¹æ®Šçš„ç®—æ³•ï¼Œåœ¨å°†è¯·æ±‚åˆ†é…ç»™æœåŠ¡å™¨ä¹‹å‰ï¼Œè¯¥ç®—æ³•å°†æ£€æµ‹æ¯ä¸ªæœåŠ¡å™¨çš„å·¥ä½œè´Ÿè½½ã€åŠ¨æ€åˆ†é…ã€‘</p></li><li><p>ä¼šè¯ç²˜è¿</p><p>åœ¨è¿›è¡Œè´Ÿè½½å¹³è¡¡æ—¶ï¼Œæœ€å¥½å°†è¯·æ±‚è°ƒåº¦åˆ°ä¸ä¸Šæ¬¡æŸä¸ªæµè§ˆå™¨ä¼šè¯ç›¸åŒçš„æœåŠ¡å™¨å®ä¾‹ã€‚å¦åˆ™ï¼Œåº”ç”¨ç¨‹åºå¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œï¼ˆå°†å±äºåŒä¸€ä¸ªsessionçš„è¯·æ±‚åˆ†é…ç»™ä¸Šæ¬¡è¯·æ±‚çš„æœåŠ¡å™¨å®ä¾‹ï¼Œå¦åˆ™ï¼Œåº”ç”¨ç¨‹åºå¯èƒ½ä¸èƒ½æ­£ç¡®å·¥ä½œï¼‰ï¼›HTTPä¸ºæ— çŠ¶æ€çš„åè®®ï¼Œåœ¨WEBåº”ç”¨æœåŠ¡å™¨ç«¯é€šè¿‡sessionä¿å­˜çŠ¶æ€æ•°æ®ï¼ˆHTTPä¸ºæ— çŠ¶æ€çš„åè®®ï¼Œåœ¨WEBåº”ç”¨æœåŠ¡å™¨ç«¯é€šsessionä¿å­˜çŠ¶æ€æ•°æ®ï¼‰ã€‚</p></li><li><p>å¥åº·æ£€æŸ¥ &amp; å¤±æ•ˆè½¬ç§»</p><p>å¥åº·æ£€æŸ¥ï¼šHTTPä¸ºæ— çŠ¶æ€çš„åè®®ï¼Œåœ¨WEBåº”ç”¨æœåŠ¡å™¨ç«¯é€šè¿‡sessionä¿å­˜çŠ¶æ€æ•°æ®ã€‚</p><p>å¤±æ•ˆè½¬ç§»ï¼šé›†ç¾¤ä¸­æŸèŠ‚ç‚¹å¤±æ•ˆï¼Œè¯¥èŠ‚ç‚¹ä¸Šå¤„ç†çš„è¯·æ±‚èƒ½å¤Ÿè¢«å…¶ä»–èŠ‚ç‚¹æ­£ç¡®åœ°æ¥æ‰‹å¤„ç†ã€‚</p></li></ul><p>å•ç‚¹æ•…éšœï¼ˆSPOFï¼‰ï¼šèƒ½å¤Ÿå¯¼è‡´æ•´ä¸ªç³»ç»Ÿåœæ­¢è¿è¡Œçš„æ¨¡å—ï¼Œå¯é€šè¿‡å†—ä½™æ¶ˆé™¤å•ç‚¹æ•…éšœã€‚</p><p>ä¼˜åŒ– â†’ æ£€æŸ¥å½“å‰æ¶æ„ï¼š</p><ul><li>æ‰¾å‡ºæ‰©å±•æ€§èƒ½ç“¶é¢ˆ</li><li>æ‰¾å‡ºå•ä¸€æ•…éšœç‚¹</li><li>æ‰¾å‡ºå®•æœºå½±å“åŒºåŸŸ</li></ul><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>æ°´å¹³æ‰©å±•</li><li>å‚ç›´æ‰©å±•</li><li>æ°´å¹³åˆ‡åˆ†</li><li>å‚ç›´åˆ‡åˆ†</li></ul><p>æ­¥éª¤1ï¼š</p><p>å‡è®¾éƒ¨ç½²åœ¨å•ä¸ªæœåŠ¡å™¨ä¸Šçš„ç³»ç»Ÿéœ€è¦æ‰©å±•ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611143100289.png" /></p><p>æ­¥éª¤2ï¼š</p><p>å‚ç›´æ‰©å±•ï¼šå¢åŠ CPUå’ŒRAMã€‚</p><p>ä¼˜ç‚¹ï¼šæ˜“äºå®æ–½</p><p>ç¼ºç‚¹ï¼šæœ‰æé™ï¼›ç¡¬ä»¶ä¸èƒ½çº¿æ€§æ‰©å±•ï¼›å¢åŠ åœæœºå½±å“ï¼› æˆæœ¬å‘ˆæŒ‡æ•°å¢é•¿ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611144944045.png" /></p><p>æ­¥éª¤3ï¼š</p><p>å‚ç›´åˆ‡åˆ†ï¼šåœ¨å•ç‹¬çš„èŠ‚ç‚¹ä¸Šéƒ¨ç½²æ¯ä¸ªæœåŠ¡ã€‚</p><p>ä¼˜ç‚¹ï¼šæé«˜æ¯ä¸ªåº”ç”¨ç¨‹åºçš„å¯ç”¨æ€§ï¼›åŸºäºä»»åŠ¡çš„ä¸“é—¨åŒ–ã€ä¼˜åŒ–å’Œè°ƒä¼˜æ˜¯å¯èƒ½çš„ï¼›æ˜“äºå®æ–½ï¼›æ— éœ€æ›´æ”¹åº”ç”¨ç¨‹åºã€‚</p><p>ç¼ºç‚¹ï¼šéœ€è¦åœæœºæ—¶é—´ï¼›å¯èƒ½ä¸ä¼šæé«˜æ€»ä½“å¯ç”¨æ€§ï¼›æœ‰é™çš„å¯æ‰©å±•æ€§ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611145857566.png" /></p><p>æ­¥éª¤4ï¼š</p><p>æ°´å¹³æ‰©å±•ï¼ˆAPP Serverï¼‰ï¼šé›†ç¾¤ï¼Œé€šè¿‡è´Ÿè½½å¹³è¡¡å¢åŠ APPServerçš„èŠ‚ç‚¹æ•°ã€‚</p><p>å…·ä½“å®ç°ï¼šç¡¬ä»¶è´Ÿè½½å¹³è¡¡å™¨é€Ÿåº¦æ›´å¿«ï¼›è½¯ä»¶è´Ÿè½½å¹³è¡¡å™¨æ›´åŠ å¯å®šåˆ¶ï¼›å¯¹äºHTTPæœåŠ¡å™¨ï¼Œè´Ÿè½½å¹³è¡¡é€šå¸¸ä¸HTTPåŠ é€Ÿå™¨ç›¸ç»“åˆï¼›ç”¨äºæ•…éšœåˆ‡æ¢çš„ä¼šè¯ç®¡ç†ç­–ç•¥(ä¼šè¯ç®¡ç†ç­–ç•¥)</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611150151939.png" /></p><p>è´Ÿè½½å‡è¡¡å™¨â€”â€”ä¼šè¯ç®¡ç†ç­–ç•¥ï¼š</p><ul><li><p>ä¸­å¤®ä¼šè¯å­˜å‚¨ï¼ˆsessionå…±äº«å­˜å‚¨é›†ç¾¤ï¼‰</p><p>å¼•å…¥å•ç‚¹æ•…éšœï¼ˆSPOFï¼‰ï¼Œæ˜¯ä¸€ä¸ªé™„åŠ å˜é‡ï¼Œä¼šè¯è¯»å†™ç£ç›˜/IOä½¿å¾—æ€§èƒ½ç•¥å¾®ä¸‹é™</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611150940339.png" /></p></li><li><p>é›†ç¾¤ä¼šè¯ç®¡ç†</p><p>æ˜“äºè®¾ç½®ï¼Œæ— SPOFï¼Œä¼šè¯è¯»å–æ˜¯å³æ—¶çš„ï¼Œä¼šè¯å†™å…¥ç”Ÿæˆç½‘ç»œI/Oï¼Œéšç€èŠ‚ç‚¹æ•°é‡çš„å¢åŠ ï¼Œç½‘ç»œ I/Oå‘ˆæŒ‡æ•°å¢é•¿ï¼Œåœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œè¯·æ±‚å¯èƒ½ä¼šè·å–è¿‡æ—¶çš„ä¼šè¯æ•°æ®ï¼Œç”¨æˆ·è¯·æ±‚åˆ°è¾¾åç»­èŠ‚ç‚¹çš„é€Ÿåº¦æ¯”å†…éƒ¨èŠ‚ç‚¹æ¶ˆæ¯å¿«ï¼ŒèŠ‚ç‚¹å†…é€šä¿¡å¤±è´¥ï¼ŒAKAæ— å…±äº«ç¾¤é›†ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611152343191.png" /></p></li></ul><p>æ¨èä½¿ç”¨æ–¹æ³•ï¼š</p><p>ä½¿ç”¨é›†ç¾¤ä¼šè¯ç®¡ç†çš„æƒ…å†µï¼šåº”ç”¨æœåŠ¡å™¨æ•°é‡è¾ƒå°‘ï¼Œä¼šè¯å†™å…¥è¾ƒå°‘ã€‚å…¶ä½™æƒ…å†µä¸€èˆ¬ä½¿ç”¨ä¸­å¤®ä¼šè¯å­˜å‚¨ã€‚ä»…åœ¨å¿…è¦æ—¶ä½¿ç”¨ä¼šè¯ç²˜è¿ã€‚</p><p>è´Ÿè½½å‡è¡¡å™¨â€”â€”æ¶ˆé™¤ SPOF</p><p>åœ¨ä¸»åŠ¨-ä¸»åŠ¨æˆ–ä¸»åŠ¨-è¢«åŠ¨æ¨¡å¼é›†ç¾¤ä¸­è®¾ç½® LB ï¼Œå› ä¸º LB å¯èƒ½æ˜¯ SPOF ã€‚é€šè¿‡LB é›†ç¾¤è§£å†³ LB è‡ªèº«å•ç‚¹æ•…éšœé—®é¢˜ã€‚</p><p>ä¸»åŠ¨-ä¸»åŠ¨é›†ç¾¤å‡è®¾æ¯ä¸€ä¸ªLBéƒ½èƒ½å¤Ÿç‹¬ç«‹åœ°æ‰¿å—å¦ä¸€ä¸ªLBçš„è´Ÿè½½ã€‚</p><p>å¦‚æœå¸Œæœ›é›¶åœæœºæ—¶é—´ï¼Œé‚£ä¹ˆåªæœ‰å½“å¤šä¸ª LBï¼ˆ3åˆ°4ä¸ªä»¥ä¸Šï¼‰ä»¥èŠèŠ±é“¾è¿æ¥ä¸ºActive-Activeå½¢æˆ LB é›†ç¾¤æ—¶ï¼ŒActive-Activeæ‰çœŸæ­£å…·æœ‰æˆæœ¬æ•ˆç›Šã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611204329394.png" /></p><p>æ­¥éª¤5</p><p>æ°´å¹³åˆ‡åˆ†ï¼ˆç¡¬ä»¶ï¼‰</p><p>åˆ©ç”¨SANå­˜å‚¨æ•°æ®åº“ã€‚</p><p>ä¼˜ç‚¹ï¼šå…è®¸ â€œæ”¾å¤§â€ æ•°æ®åº“æœåŠ¡å™¨ï¼Œæé«˜æ•°æ®åº“æœåŠ¡å™¨çš„æ€§èƒ½ã€‚</p><p>ç¼ºç‚¹ï¼šå¢åŠ æˆæœ¬ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611204636478.png" /></p><p>æ­¥éª¤6ï¼š</p><p>æ°´å¹³æ‰©å±•ï¼ˆæ•°æ®åº“ï¼‰</p><p>å»ºç«‹æ•°æ®åº“é›†ç¾¤ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611204810568.png" /></p><ul><li><p>éå…±äº«é›†ç¾¤</p><p>æ‰€æœ‰çš„æ•°æ®åº“å®ä¾‹éƒ½ç›¸åŒï¼Œæ•°æ®åº“æœåŠ¡å™¨èŠ‚ç‚¹ä¹‹é—´ä¸å…±äº«ä»»ä½•å†…å®¹ï¼Œé€šè¿‡æ•°æ®åº“å¤åˆ¶å®ç°ï¼Œå®é™…çš„DBæ–‡ä»¶å¯èƒ½å­˜å‚¨åœ¨ä¸­å¤®SANä¸Šã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611205226450.png" /></p><p>å¤åˆ¶æ³¨æ„äº‹å®œï¼š</p><ul><li><p>ä¸€ä¸»å¤šå­æ¨¡å¼ï¼ˆMaster-Slaveï¼‰</p><p>å†™å…¥è¢«å‘é€åˆ°å•ä¸ªä¸»èŠ‚ç‚¹ï¼Œè¯¥ä¸»èŠ‚ç‚¹å°†æ•°æ®å¤åˆ¶åˆ°å¤šä¸ªä»èŠ‚ç‚¹ï¼Œå¤åˆ¶å¯èƒ½çº§è”ï¼Œç®€å•è®¾ç½®ï¼Œæ— éœ€å†²çªç®¡ç†ã€‚</p></li><li><p>å¤šä¸»å¤šå­æ¨¡å¼ï¼ˆMulti-Masterï¼‰</p><p>å†™å…¥å¯ä»¥å‘é€åˆ°å¤šä¸ªä¸»æœºä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œè¿™äº›ä¸»æœºå°†å†™å…¥å¤åˆ¶åˆ°å…¶ä»–ä¸»æœºå’Œä»æœºã€‚å¦‚æœåœ¨å¤šä¸ªä½ç½®åŒæ—¶ä¿®æ”¹ç›¸åŒçš„æ•°æ®ï¼Œåˆ™å†²çªç®¡ç†æ‰€éœ€çš„æ­»é”å¯èƒ½å­˜åœ¨</p></li><li><p>å¼‚æ­¥å¤åˆ¶</p><p>ä¸ç­‰å¾…å¤åˆ¶å®Œæˆç›´æ¥å“åº”å®¢æˆ·ï¼Œéœ€è¦ä¿®æ”¹ç¨‹åºï¼Œå¹¶å¯¹slaveèŠ‚ç‚¹è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚</p></li><li><p>åŒæ­¥å¤åˆ¶</p><p>ä¸»æœåŠ¡å™¨æ›´æ–°å…¶è‡ªå·±çš„æ•°æ®åº“ï¼Œå¹¶åœ¨å°†å“åº”è¿”å›ç»™å®¢æˆ·ç«¯ä¹‹å‰ç¡®è®¤æ‰€æœ‰ä»å±æœåŠ¡å™¨å·²æ›´æ–°å…¶æ•°æ®åº“ã€‚ä»æœºå§‹ç»ˆä¸ä¸»æœºå…·æœ‰ç›¸åŒçš„æ•°æ®ã€‚éœ€è¦ä¿®æ”¹åº”ç”¨ç¨‹åºæ‰èƒ½å°†å†™æ“ä½œå‘é€åˆ°ä¸»æœºå¹¶å¹³è¡¡æ‰€æœ‰è¯»å–æ“ä½œã€‚</p></li><li><p>DBMSçº§å¤åˆ¶</p></li><li><p>åº”ç”¨ç¨‹åºçº§å¤åˆ¶</p><p>å¯¹ DBMS é€æ˜ï¼Œæ€§èƒ½ä¸ä½³ä¸”ä¸å¯é ã€‚</p></li></ul></li><li><p>å®æ—¶åº”ç”¨é›†ç¾¤ï¼ˆå…±äº«å­˜å‚¨é›†ç¾¤ï¼‰</p><p>æ‰€æœ‰çš„æ•°æ®åº“æœåŠ¡å™¨åœ¨SANä¸­å…±äº«ä¸€ä¸ªå­˜å‚¨åŒºåŸŸã€‚æ‰€æœ‰DBæœåŠ¡å™¨è£…è½½ç›¸åŒçš„å—è®¾å¤‡ï¼Œ</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611210216435.png" /></p></li></ul><p>æ¨èï¼šæ•°æ®åº“æœ¬èº«æ”¯æŒä¸»ä»å¤åˆ¶æ¨¡å¼ï¼Œ</p><p>ç¼–å†™ DAOå±‚ä»¥ç¡®ä¿ï¼šå†™å…¥å‘é€åˆ°å•ä¸ªæ•°æ®åº“ã€è¯»å–æ˜¯è´Ÿè½½å¹³è¡¡çš„ã€å…³é”®è¯»å–è¢«å‘é€åˆ°ä¸»æœºã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611210405731.png" /></p><p>æ­¥éª¤6ä¼˜ç‚¹ï¼šéšç€WebæœåŠ¡å™¨çš„å¢é•¿ï¼Œå¯ä»¥æ·»åŠ æ•°æ®åº“èŠ‚ç‚¹ã€DBæœåŠ¡å™¨ä¸å†æ˜¯SPOF</p><p>ç¼ºç‚¹ï¼šæœ‰æé™ï¼ˆslaveèŠ‚ç‚¹å¤åˆ¶ä»£ä»·é«˜ï¼‰ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611210512838.png" /></p><p>æ­¥éª¤7ï¼šå‚ç›´åˆ‡åˆ†/æ°´å¹³åˆ‡åˆ†æ•°æ®åº“</p><p>é€šè¿‡åˆ’åˆ†æ•°æ®æ¥å¢åŠ DBé›†ç¾¤çš„æ•°é‡ã€‚æŒ‰åˆ—åˆ‡åˆ†ï¼ˆå‚ç›´åˆ‡åˆ†ï¼‰ã€æŒ‰è¡Œåˆ‡åˆ†ï¼ˆæ°´å¹³åˆ‡åˆ†ï¼‰ã€‚</p><p>å‚ç›´åˆ†è¡¨ï¼šæ¯ä¸ªæ•°æ®åº“èŠ‚ç‚¹ä¸­çš„è¡¨éƒ½ä¸ä¸€æ ·ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611211208158.png" /></p><p>æ°´å¹³åˆ†è¡¨ï¼šåˆ†æ•°æ®ï¼Œæ¯ä¸ªæ•°æ®åº“æ‹¥æœ‰ç›¸åŒçš„è¡¨ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611211253988.png" /></p><p>æ­¥éª¤7ä¼˜ç‚¹ï¼šåº”ç”¨å’Œæ•°æ®éƒ½å¯ä»¥æ‰©å±•ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611211457270.png" /></p><p>æ­¥éª¤8ï¼šæ°´å¹³åˆ‡åˆ†é›†åˆ</p><p>å°†æ¯ä¸ªéƒ¨ç½²è§†ä¸ºæœåŠ¡äºç”¨æˆ·é›†åˆçš„å•ä¸ªé›†åˆã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611212715376.png" /></p><p>åˆ›å»ºé›†åˆï¼šåˆ›å»ºé›†åˆèƒŒåçš„ç›®æ ‡æ˜¯æ›´æ˜“äºç®¡ç†ï¼Œæ¯ä¸ªéƒ¨ç½²é›†é¢å‘ä¸åŒç”¨æˆ·ç¾¤ã€æ¯ä¸ªéƒ¨ç½²é›†åœ¨ä½“ç³»ç»“æ„ä¸Šæ˜¯ä¸€æ ·çš„ã€æ¯ä¸ªéƒ¨ç½²é›†éƒ½æœ‰å®Œæ•´çš„åº”ç”¨åŠæ•°æ®ç»“æ„ã€æ¯ä¸ªéƒ¨ç½²é›†éƒ¨ç½²äºå•ç‹¬çš„æ•°æ®ä¸­å¿ƒã€ç”¨æˆ·å¯èƒ½æŒ‰ç½‘ç»œå»¶è¿Ÿè¢«åˆ†é…åˆ°è¾ƒè¿‘çš„éƒ¨ç½²é›†ä¸Šã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611212741588.png" /></p><p>ä¼˜ç‚¹ï¼šæ— é™çš„å¯æ‰©å±•æ€§ã€‚</p><p>ç¼ºç‚¹ï¼šæ•°æ®é›†æˆã€æ•°æ®è½¬ç§»ã€æ•°æ®å¤åˆ¶ã€‚</p><p>æ­¥éª¤9ï¼šç¼“å­˜</p><p>åœ¨ APP Serverä¸­æ·»åŠ ç¼“å­˜ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611213114131.png" /></p><p>æ­¥éª¤10ï¼šåå‘ä»£ç†/HTTPåŠ é€Ÿå™¨</p><p>ç›®çš„ï¼šå°†é™æ€å†…å®¹è¯·æ±‚é‡å®šå‘åˆ°è¾ƒè½»çš„HTTPæœåŠ¡å™¨ã€åŸºäºè§„åˆ™ç¼“å­˜å†…å®¹ï¼ˆæ”¯æŒç»†ç²’åº¦å¤±æ•ˆï¼‰ã€åœ¨ç”¨æˆ·ç«¯ä½¿ç”¨å¼‚æ­¥NIOã€æ™ºèƒ½è´Ÿè½½å¹³è¡¡ã€‚</p><p>å®ç°æ–¹å¼ï¼šNginx</p><p>åå‘ä»£ç†ï¼šæ§åˆ¶å®¢æˆ·ç«¯å¯¹æœåŠ¡å™¨æœºç¾¤çš„è®¿é—®ï¼Œå¹¶ä¸”é€šå¸¸æä¾›è´Ÿè½½å‡è¡¡ã€å®‰å…¨ã€åŠ å¯†ä»¥åŠç¼“å­˜ç­‰æœåŠ¡ã€‚</p><p>åªè¦å¿…é¡»é€šè¿‡å•ä¸ªå…¬å…±IPåœ°å€è®¿é—®å¤šä¸ªwebæœåŠ¡å™¨ï¼Œå°±å¯ä»¥ä½¿ç”¨åå‘ä»£ç†ã€‚åº”ç”¨ç¨‹åºé˜²ç«å¢™åŠŸèƒ½å¯ä»¥é˜²æ­¢å¸¸è§çš„åŸºäºwebçš„æ”»å‡»ã€‚ SSLåŠ å¯†å¯ä»¥å¸è½½åˆ°åå‘ä»£ç†ã€‚åå‘ä»£ç†å¯ä»¥å°†ä¼ å…¥è¯·æ±‚çš„è´Ÿè½½åˆ†é…ç»™å¤šä¸ªæœåŠ¡å™¨ã€‚åå‘ä»£ç†å¯ä»¥é€šè¿‡ç¼“å­˜é™æ€å†…å®¹å’ŒåŠ¨æ€å†…å®¹æ¥å‡å°‘å…¶åŸå§‹æœåŠ¡å™¨ä¸Šçš„è´Ÿè½½ã€‚åå‘ä»£ç†å¯ä»¥é€šè¿‡å‹ç¼©å†…å®¹æ¥ä¼˜åŒ–å†…å®¹ï¼Œä»¥åŠ å¿«åŠ è½½æ—¶é—´ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611214606155.png" /></p><p>ä»£ç†æœåŠ¡å™¨æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ï¼ˆè®¡ç®—æœºç³»ç»Ÿæˆ–åº”ç”¨ç¨‹åºï¼‰ï¼Œå®ƒå……å½“ä»å…¶ä»–æœåŠ¡å™¨å¯»æ±‚èµ„æºçš„å®¢æˆ·ç«¯è¯·æ±‚çš„ä¸­ä»‹ã€‚è½¬å‘ä»£ç†ä»å†…éƒ¨ç½‘ç»œæ¥æ”¶è¯·æ±‚å¹¶å°†å…¶è½¬å‘åˆ°Internetã€‚å¼€æ”¾ä»£ç†æ˜¯ä»»ä½• Internetç”¨æˆ·éƒ½å¯ä»¥è®¿é—®çš„è½¬å‘ä»£ç†æœåŠ¡å™¨ã€‚åå‘ä»£ç†ä» Internetæ¥æ”¶è¯·æ±‚å¹¶å°†å…¶è½¬å‘åˆ°å†…éƒ¨ç½‘ç»œä¸­çš„æœåŠ¡å™¨ã€‚</p><p>æ­¥éª¤11ï¼šå…¶ä»–æ–¹å¼</p><p>CDNsã€å¼‚æ­¥IOã€å¤šå±‚ç¼“å­˜</p><h3 id="å¹¶è¡Œè®¡ç®—æ¶æ„">å¹¶è¡Œè®¡ç®—æ¶æ„ğŸ¦„</h3><h4 id="å¹¶è¡Œè®¡ç®—ç†è®º">å¹¶è¡Œè®¡ç®—ç†è®ºğŸ¦—</h4><p>ä¼ ç»Ÿä¸Šéƒ½æ˜¯ä¸²è¡Œè®¡ç®—ç¼–å†™çš„è½¯ä»¶ï¼šä¸€ä¸ªé—®é¢˜è¢«åˆ†è§£æˆä¸€ç³»åˆ—ç¦»æ•£çš„æŒ‡ä»¤ï¼ŒæŒ‡ä»¤ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æŒ‰é¡ºåºæ‰§è¡Œï¼Œåœ¨å•ä¸ªå¤„ç†å™¨ä¸Šæ‰§è¡Œï¼Œä»»ä½•æ—¶å€™åªèƒ½æ‰§è¡Œä¸€æ¡æŒ‡ä»¤ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611220544931.png" /></p><p>å¹¶è¡Œè®¡ç®—æŒ‡åŒæ—¶ä½¿ç”¨å¤šä¸ªè®¡ç®—èµ„æºæ¥è§£å†³è®¡ç®—é—®é¢˜ï¼šå°†é—®é¢˜åˆ†è§£ä¸ºå¯åŒæ—¶è§£å†³çš„ç¦»æ•£éƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†è¿›ä¸€æ­¥ç»†åˆ†ä¸ºä¸€ç³»åˆ—è¯´æ˜ï¼Œæ¥è‡ªæ¯ä¸ªéƒ¨åˆ†çš„æŒ‡ä»¤åœ¨ä¸åŒçš„å¤„ç†å™¨ä¸ŠåŒæ—¶æ‰§è¡Œï¼Œé‡‡ç”¨æ•´ä½“æ§åˆ¶/åè°ƒæœºåˆ¶ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611220557021.png" /></p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220611221653809.png" /></p><p>å¹¶è¡ŒåŒ–èŒƒä¾‹</p><ul><li><p>ä¸»ä»æ¨¡å¼</p><p>Masterå°†é—®é¢˜åˆ†è§£ä¸ºå°ä»»åŠ¡ï¼Œåˆ†å‘ç»™å·¥äººå¹¶æ”¶é›†éƒ¨åˆ†ç»“æœä»¥ç”Ÿæˆæœ€ç»ˆç»“æœã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612105522967.png" /></p></li><li><p>å·¥ä½œçªƒå–ï¼ˆwork stealingï¼‰</p><p>æŸä¸ªçº¿ç¨‹ä»å…¶ä»–é˜Ÿåˆ—é‡Œçªƒå–ä»»åŠ¡æ¥æ‰§è¡Œã€‚ä¸€ä¸ªå¤§ä»»åŠ¡åˆ†å‰²ä¸ºè‹¥å¹²ä¸ªäº’ä¸ä¾èµ–çš„å­ä»»åŠ¡ï¼Œä¸ºäº†å‡å°‘çº¿ç¨‹é—´çš„ç«äº‰ï¼ŒæŠŠè¿™äº›å­ä»»åŠ¡åˆ†åˆ«æ”¾åˆ°ä¸åŒçš„é˜Ÿåˆ—é‡Œï¼Œå¹¶æœªæ¯ä¸ªé˜Ÿåˆ—åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹æ¥æ‰§è¡Œé˜Ÿåˆ—é‡Œçš„ä»»åŠ¡ï¼Œçº¿ç¨‹å’Œé˜Ÿåˆ—ä¸€ä¸€å¯¹åº”ã€‚æ¯”å¦‚çº¿ç¨‹1è´Ÿè´£å¤„ç†1é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡ï¼Œ2çº¿ç¨‹è´Ÿè´£2é˜Ÿåˆ—çš„ã€‚ä½†æ˜¯æœ‰çš„çº¿ç¨‹ä¼šå…ˆæŠŠè‡ªå·±é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡å¹²å®Œï¼Œè€Œå…¶ä»–çº¿ç¨‹å¯¹åº”çš„é˜Ÿåˆ—é‡Œè¿˜æœ‰ä»»åŠ¡å¾…å¤„ç†ã€‚å¹²å®Œæ´»çš„çº¿ç¨‹ä¸å…¶ç­‰ç€ï¼Œä¸å¦‚å¸®å…¶ä»–çº¿ç¨‹å¹²æ´»ï¼Œäºæ˜¯å®ƒå°±å»å…¶ä»–çº¿ç¨‹çš„é˜Ÿåˆ—é‡Œçªƒå–ä¸€ä¸ªä»»åŠ¡æ¥æ‰§è¡Œã€‚è€Œåœ¨è¿™æ—¶å®ƒä»¬å¯èƒ½ä¼šè®¿é—®åŒä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ‰€ä»¥ä¸ºäº†å‡å°‘çªƒå–ä»»åŠ¡çº¿ç¨‹å’Œè¢«çªƒå–ä»»åŠ¡çº¿ç¨‹ä¹‹é—´çš„ç«äº‰ï¼Œé€šå¸¸ä¼šä½¿ç”¨åŒç«¯é˜Ÿåˆ—ï¼Œè¢«çªƒå–ä»»åŠ¡çº¿ç¨‹æ°¸è¿œä»åŒç«¯é˜Ÿåˆ—çš„å¤´éƒ¨æ‹¿ä»»åŠ¡æ‰§è¡Œï¼Œè€Œçªƒå–ä»»åŠ¡çº¿ç¨‹æ°¸è¿œä»åŒç«¯é˜Ÿåˆ—çš„å°¾éƒ¨æ‹¿ä»»åŠ¡æ‰§è¡Œã€‚</p></li><li><p>æµæ°´çº¿</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612105855651.png" /></p><p>å¯¹å¤§é‡æ•°æ®é›†è¿›è¡Œæ“ä½œ</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612110053992.png" /></p></li><li><p>åˆ†æ²»</p><p>ä¸€ä¸ªé—®é¢˜è¢«åˆ†ä¸ºä¸¤ä¸ªæˆ–å¤šä¸ªå­é—®é¢˜ï¼Œæ¯ä¸ªå­é—®é¢˜éƒ½ç‹¬ç«‹è§£å†³ï¼Œå¹¶å°†å…¶ç»“æœåˆå¹¶ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612110143525.png" /></p></li></ul><p>é˜¿å§†è¾¾å°”å®šå¾‹ï¼šå¿½ç•¥æ‰€æœ‰ç³»ç»Ÿæˆ–é€šä¿¡å¼€é”€çš„æƒ…å†µä¸‹ï¼ŒNå¤„ç†å™¨å¹¶è¡Œçš„åŠ é€Ÿæ¯”ï¼š<spanclass="math inline">\(Speedup= \frac{1}{r_s + \frac{r_p}{N}}\)</span>ï¼Œ<span class="math inline">\(r_p\)</span> è¡¨ç¤ºå¹¶è¡Œæ—¶é—´ã€‚</p><h4 id="å¹¶è¡Œç¨‹åº-pcam-è®¾è®¡æ–¹æ³•">å¹¶è¡Œç¨‹åº PCAM è®¾è®¡æ–¹æ³•ğŸ¦‹</h4><ul><li><p>ä¸²è¡Œç®—æ³•çš„ç›´æ¥å¹¶è¡ŒåŒ–</p><p>å‘æ˜å’Œåˆ©ç”¨ç°æœ‰ä¸²è¡Œç®—æ³•ä¸­çš„å¹¶è¡Œæ€§ï¼Œç›´æ¥å°†ä¸²è¡Œç®—æ³•æ”¹é€ ä¸ºå¹¶è¡Œç®—æ³•ã€‚</p></li><li><p>ä»é—®é¢˜æè¿°å¼€å§‹è®¾è®¡å¹¶è¡Œç®—æ³•</p><p>ä»é—®é¢˜æœ¬èº«æè¿°å‡ºå‘ï¼Œä¸è€ƒè™‘ç›¸åº”çš„ä¸²è¡Œç®—æ³•ï¼Œè®¾è®¡ä¸€ä¸ªå…¨æ–°çš„å¹¶è¡Œç®—æ³•ã€‚</p></li><li><p>å€Ÿç”¨å·²æœ‰ç®—æ³•æ±‚è§£æ–°é—®é¢˜</p><p>æ‰¾å‡ºæ±‚è§£é—®é¢˜å’ŒæŸä¸ªå·²è§£å†³é—®é¢˜ä¹‹é—´çš„è”ç³»ï¼›æ”¹é€ æˆ–åˆ©ç”¨å·²çŸ¥ç®—æ³•åº”ç”¨åˆ°æ±‚è§£é—®é¢˜ä¸Šã€‚</p></li></ul><p>è®¾è®¡å¹¶è¡Œç®—æ³•å››ä¸ªé˜¶æ®µ</p><ul><li>åˆ’åˆ†(Partitioning)ï¼šåˆ†è§£æˆå°çš„ä»»åŠ¡ï¼Œå¼€æ‹“å¹¶å‘æ€§</li><li>é€šè®¯(Communication)ï¼šç¡®å®šè¯¸ä»»åŠ¡é—´çš„æ•°æ®äº¤æ¢ï¼Œç›‘æµ‹åˆ’åˆ†çš„åˆç†æ€§</li><li>ç»„åˆ(Agglomeration)ï¼šä¾æ®ä»»åŠ¡çš„å±€éƒ¨æ€§ï¼Œç»„åˆæˆæ›´å¤§çš„ä»»åŠ¡</li><li>æ˜ å°„(Mapping)ï¼šå°†æ¯ä¸ªä»»åŠ¡åˆ†é…åˆ°å¤„ç†å™¨ä¸Šï¼Œæé«˜ç®—æ³•çš„æ€§èƒ½</li></ul><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612124910865.png" /></p><p>åˆ’åˆ†æ–¹æ³•ï¼šå……åˆ†å¼€æ‹“ç®—æ³•çš„å¹¶å‘æ€§å’Œå¯æ‰©å±•æ€§ï¼›å…ˆè¿›è¡Œæ•°æ®åˆ†è§£(ç§°åŸŸåˆ†è§£)ï¼Œå†è¿›è¡Œè®¡ç®—åŠŸèƒ½çš„åˆ†è§£(ç§°åŠŸèƒ½åˆ†è§£)ï¼›ä½¿æ•°æ®é›†å’Œè®¡ç®—é›†äº’ä¸ç›¸äº¤ï¼›åˆ’åˆ†é˜¶æ®µå¿½ç•¥å¤„ç†å™¨æ•°ç›®å’Œç›®æ ‡æœºå™¨çš„ä½“ç³»ç»“æ„ï¼›</p><ul><li><p>åŸŸåˆ†è§£</p><p>åˆ’åˆ†çš„å¯¹è±¡æ˜¯æ•°æ®ï¼Œå¯ä»¥æ˜¯ç®—æ³•çš„è¾“å…¥æ•°æ®ã€ä¸­é—´å¤„ç†æ•°æ®å’Œè¾“å‡ºæ•°æ®ï¼›å°†æ•°æ®åˆ†è§£æˆå¤§è‡´ç›¸ç­‰çš„å°æ•°æ®ç‰‡ï¼›åˆ’åˆ†æ—¶è€ƒè™‘æ•°æ®ä¸Šçš„ç›¸åº”æ“ä½œï¼›å¦‚æœä¸€ä¸ªä»»åŠ¡éœ€è¦åˆ«çš„ä»»åŠ¡ä¸­çš„æ•°æ®ï¼Œåˆ™ä¼šäº§ç”Ÿä»»åŠ¡é—´çš„é€šè®¯ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612130543010.png" /></p></li><li><p>åŠŸèƒ½åˆ†è§£</p><p>åˆ’åˆ†çš„å¯¹è±¡æ˜¯è®¡ç®—ï¼šå°†è®¡ç®—åˆ’åˆ†ä¸ºä¸åŒçš„ä»»åŠ¡ï¼Œå…¶å‡ºå‘ç‚¹ä¸åŒäºåŸŸåˆ†è§£ï¼›åˆ’åˆ†åï¼Œç ”ç©¶ä¸åŒä»»åŠ¡æ‰€éœ€çš„æ•°æ®ï¼Œå¦‚æœè¿™äº›æ•°æ®ä¸ç›¸äº¤çš„ï¼Œåˆ™åˆ’åˆ†æ˜¯æˆåŠŸçš„ï¼Œå¦‚æœæ•°æ®æœ‰ç›¸å½“çš„é‡å ï¼Œæ„å‘³ç€è¦é‡æ–°è¿›è¡ŒåŸŸåˆ†è§£å’ŒåŠŸèƒ½åˆ†è§£ï¼›åŠŸèƒ½åˆ†è§£æ˜¯ä¸€ç§æ›´æ·±å±‚æ¬¡çš„åˆ†è§£ã€‚</p></li></ul><p>é€šè®¯æ˜¯PCAMè®¾è®¡è¿‡ç¨‹çš„é‡è¦é˜¶æ®µï¼›åˆ’åˆ†äº§ç”Ÿçš„è¯¸ä»»åŠ¡ï¼Œä¸€èˆ¬ä¸èƒ½å®Œå…¨ç‹¬ç«‹æ‰§è¡Œï¼Œéœ€è¦åœ¨ä»»åŠ¡é—´è¿›è¡Œæ•°æ®äº¤æ¢ï¼›ä»è€Œäº§ç”Ÿäº†é€šè®¯ï¼›åŠŸèƒ½åˆ†è§£ç¡®å®šäº†è¯¸ä»»åŠ¡ä¹‹é—´çš„æ•°æ®æµï¼›è¯¸ä»»åŠ¡æ˜¯å¹¶å‘æ‰§è¡Œçš„ï¼Œé€šè®¯åˆ™é™åˆ¶äº†è¿™ç§å¹¶å‘æ€§ã€‚</p><ul><li><p>å±€éƒ¨/å…¨å±€é€šè®¯</p><p>å±€éƒ¨ï¼šé€šè®¯é™åˆ¶åœ¨ä¸€ä¸ªé‚»åŸŸå†…</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612131551517.png" /></p><p>å…¨å±€ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612131711244.png" /></p></li><li><p>ç»“æ„åŒ–/éç»“æ„åŒ–é€šè®¯</p><p>ç»“æ„åŒ–ï¼šæ¯ä¸ªä»»åŠ¡çš„é€šè®¯æ¨¡å¼æ˜¯ç›¸åŒçš„</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612165001984.png" /></p><p>â¾®ç»“æ„åŒ–ï¼šé€šè®¯æ„æˆçš„â½¹ç»œå¯ä»¥æ˜¯ä»»æ„å›¾ç»“æ„</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612165026152.png" /></p></li><li><p>é™æ€/åŠ¨æ€é€šè®¯</p><p>é™æ€é€šè®¯ï¼šåŒä¼™çš„èº«ä»½ä¸ä¼šéšæ—¶é—´å˜åŒ–</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612165126184.png" /></p><p>åŠ¨æ€é€šè®¯åŒä¼™çš„â¾ä»½å¯èƒ½æ˜¯è¿â¾è¿‡ç¨‹ä¸­å¯¹æ•°æ®è¿›â¾è¿ç®—å¾—åˆ°ï¼Œå…·æœ‰â¾¼åº¦å˜åŠ¨æ€§</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612165136196.png" /></p></li><li><p>åŒæ­¥/å¼‚æ­¥é€šè®¯</p><p>åŒæ­¥é€šè®¯ï¼šâ½£äº§è€…ä¸æ¶ˆè´¹è€…åœ¨æ•°æ®ä¼ è¾“æ“ä½œè¿‡ç¨‹ä¸­äº’ç›¸åä½œï¼‰</p><p>å¼‚æ­¥é€šè®¯ï¼šæ¶ˆè´¹è€…åœ¨è·å–æ•°æ®æ—¶â½†éœ€â½£äº§è€…çš„åä½œ</p></li></ul><p>ç»„åˆæ˜¯ç”±æŠ½è±¡åˆ°å…·ä½“çš„è¿‡ç¨‹ï¼Œæ˜¯å°†ç»„åˆçš„ä»»åŠ¡èƒ½åœ¨ä¸€ç±»å¹¶è¡Œæœºä¸Šæœ‰æ•ˆçš„æ‰§è¡Œï¼›åˆå¹¶å°å°ºå¯¸ä»»åŠ¡ï¼Œå‡å°‘ä»»åŠ¡æ•°ï¼›å¦‚æœä»»åŠ¡æ•°æ°å¥½ç­‰äºå¤„ç†å™¨æ•°ï¼Œåˆ™ä¹Ÿå®Œæˆäº†æ˜ å°„è¿‡ç¨‹ï¼›é€šè¿‡å¢åŠ ä»»åŠ¡çš„ç²’åº¦å’Œé‡å¤è®¡ç®—ï¼Œå¯ä»¥å‡å°‘é€šè®¯æˆæœ¬ï¼›ä¿æŒæ˜ å°„å’Œæ‰©å±•çš„çµæ´»æ€§ï¼Œé™ä½è½¯ä»¶å·¥ç¨‹æˆæœ¬ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612165335922.png" /></p><ul><li><p>ç»†ç²’åº¦</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612165504585.png" /></p></li><li><p>ç²—ç²’åº¦</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612165551281.png" /></p></li></ul><p>è¡¨é¢-å®¹ç§¯æ•ˆåº”ï¼šé€šè®¯é‡ä¸ä»»åŠ¡å­é›†çš„è¡¨é¢æˆæ­£æ¯”ï¼Œè®¡ç®—é‡ä¸ä»»åŠ¡å­é›†çš„ä½“ç§¯æˆæ­£æ¯”ã€‚</p><p>å¢åŠ é‡å¤è®¡ç®—æœ‰å¯èƒ½å‡å°‘é€šè®¯é‡ï¼›é‡å¤è®¡ç®—å‡å°‘é€šè®¯é‡ï¼Œä½†å¢åŠ äº†è®¡ç®—é‡ï¼Œåº”ä¿æŒæ°å½“çš„å¹³è¡¡ï¼›é‡å¤è®¡ç®—çš„ç›®æ ‡åº”å‡å°‘ç®—æ³•çš„æ€»è¿ç®—æ—¶é—´ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612170006287.png" /></p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220612170019962.png" /></p><p>æ¯ä¸ªä»»åŠ¡è¦æ˜ å°„åˆ°å…·ä½“çš„å¤„ç†å™¨ï¼Œå®šä½åˆ°è¿è¡Œæœºå™¨ä¸Šï¼›ä»»åŠ¡æ•°å¤§äºå¤„ç†å™¨æ•°æ—¶ï¼Œå­˜åœ¨è´Ÿè½½å¹³è¡¡å’Œä»»åŠ¡è°ƒåº¦é—®é¢˜ï¼›æ˜ å°„çš„ç›®æ ‡ï¼šå‡å°‘ç®—æ³•çš„æ‰§è¡Œæ—¶é—´å¹¶å‘çš„ä»»åŠ¡â†’ ä¸åŒçš„å¤„ç†å™¨ï¼Œä»»åŠ¡ä¹‹é—´å­˜åœ¨é«˜é€šè®¯çš„ â†’åŒä¸€å¤„ç†å™¨ï¼›æ˜ å°„å®é™…æ˜¯ä¸€ç§æƒè¡¡ï¼Œå±äºNPå®Œå…¨é—®é¢˜ã€‚</p><p>ä»»åŠ¡è°ƒåº¦é—®é¢˜ï¼šä»»åŠ¡æ”¾åœ¨é›†ä¸­çš„æˆ–åˆ†æ•£çš„ä»»åŠ¡æ± ä¸­ï¼Œä½¿ç”¨ä»»åŠ¡è°ƒåº¦ç®—æ³•å°†æ± ä¸­çš„ä»»åŠ¡åˆ†é…ç»™ç‰¹å®šçš„å¤„ç†å™¨ã€‚ä¸¤ç§å¸¸ç”¨è°ƒåº¦æ¨¡å¼ï¼šMaster-Slaveï¼Œéé›†ä¸­å¼ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>è¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶ï¼ˆä¸€ï¼‰</title>
    <link href="/post/ff013228.html"/>
    <url>/post/ff013228.html</url>
    
    <content type="html"><![CDATA[<p>å¯¹è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶è¯¾ç¨‹çš„ä¸»è¦å†…å®¹è¿›è¡Œæ€»ç»“</p><span id="more"></span><h1 id="è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶ä¸€">è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶ï¼ˆä¸€ï¼‰</h1><h2 id="ç¬¬1ç« -è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶çš„å†…æ¶µåŠè¦ç‚¹">ç¬¬1ç« è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶çš„å†…æ¶µåŠè¦ç‚¹ğŸ§§</h2><h3 id="è½¯ä»¶æ¶æ„æ¦‚è¿°">è½¯ä»¶æ¶æ„æ¦‚è¿°ğŸŒš</h3><p>æ¶æ„çš„å…±æ€§ï¼š</p><ul><li>æ„ä»¶ï¼šä¸€ç»„åŸºæœ¬çš„æ„æˆè¦ç´ <br /></li><li>è¿æ¥ä»¶ï¼šè¿™äº›è¦ç´ ä¹‹é—´çš„è¿æ¥å…³ç³»<br /></li><li>ç‰©ç†åˆ†å¸ƒï¼šè¿™äº›è¦ç´ è¿æ¥ä¹‹åå½¢æˆçš„æ‹“æ‰‘ç»“æ„<br /></li><li>çº¦æŸï¼šä½œç”¨äºè¿™äº›è¦ç´ æˆ–è¿æ¥å…³ç³»ä¸Šçš„é™åˆ¶æ¡ä»¶<br /></li><li>æ€§èƒ½ï¼šè´¨é‡</li></ul><p>è½¯ä»¶æ¶æ„ï¼ˆSAï¼‰ï¼š</p><p>æä¾›äº†â¼€ä¸ªç»“æ„ã€â¾ä¸ºå’Œå±æ€§çš„é«˜çº§æŠ½è±¡ï¼›ä»â¼€ä¸ªè¾ƒâ¾¼çš„å±‚æ¬¡æ¥è€ƒè™‘ç»„æˆç³»ç»Ÿçš„æ„ä»¶ã€æ„ä»¶ä¹‹é—´çš„è¿æ¥ï¼Œä»¥åŠç”±æ„ä»¶ä¸æ„ä»¶äº¤äº’å½¢æˆçš„æ‹“æ‰‘ç»“æ„ï¼›è¿™äº›è¦ç´ åº”è¯¥æ»¡â¾œâ¼€å®šçš„é™åˆ¶ï¼Œéµå¾ªâ¼€å®šçš„è®¾è®¡è§„åˆ™ï¼Œèƒ½å¤Ÿåœ¨â¼€å®šçš„ç¯å¢ƒä¸‹è¿›â¾æ¼”åŒ–ï¼›åæ˜ ç³»ç»Ÿå¼€å‘ä¸­å…·æœ‰é‡è¦å½±å“çš„è®¾è®¡å†³ç­–ï¼Œä¾¿äºå„ç§â¼ˆå‘˜çš„äº¤æµï¼Œåæ˜ å¤šç§å…³æ³¨ï¼Œæ®æ­¤å¼€å‘çš„ç³»ç»Ÿèƒ½å®Œæˆç³»ç»Ÿæ—¢å®šçš„åŠŸèƒ½å’Œæ€§èƒ½éœ€æ±‚ã€‚</p><p><strong>æ¶æ„=æ„ä»¶+è¿æ¥ä»¶+æ‹“æ‰‘ç»“æ„+çº¦æŸ+è´¨é‡</strong></p><p><strong>ç¨‹åº = æ„ä»¶ + è¿æ¥ä»¶ </strong></p><p>å¯¹äºâ¼¤è§„æ¨¡çš„å¤æ‚è½¯ä»¶ç³»ç»Ÿæ¥è¯´ï¼Œå¯¹ç³»ç»Ÿå…¨å±€ç»“æ„çš„è®¾è®¡â½èµ·å¯¹ç®—æ³•çš„é€‰æ‹©å’Œæ•°æ®ç»“æ„çš„è®¾è®¡æ˜æ˜¾é‡è¦å¾—å¤šã€‚</p><p>è½¯ä»¶æ¶æ„ç›®æ ‡ï¼š</p><ul><li>ä¸»è¦ç›®æ ‡ï¼šå»ºâ½´â¼€ä¸ªâ¼€è‡´çš„ç³»ç»ŸåŠå…¶è§†å›¾é›†ï¼Œå¹¶è¡¨è¾¾ä¸ºæœ€ç»ˆâ½¤æˆ·å’Œè½¯ä»¶è®¾è®¡è€…éœ€è¦çš„ç»“æ„å½¢å¼ï¼Œâ½€æŒâ½¤æˆ·å’Œè®¾è®¡è€…ä¹‹é—´çš„äº¤æµä¸ç†è§£ã€‚<br /></li><li>å¤–å‘ç›®æ ‡ï¼šå»ºç«‹æ»¡è¶³æœ€ç»ˆç”¨æˆ·è¦æ±‚çš„ç³»ç»Ÿéœ€æ±‚<br /></li><li>å†…å‘ç›®æ ‡ï¼šå»ºç«‹æ»¡è¶³ç³»ç»Ÿè®¾è®¡è€…éœ€è¦ä»¥åŠæ˜“äºç³»ç»Ÿå®ç°ã€ç»´æŠ¤å’Œæ‰©å±•çš„ç³»ç»Ÿæ„ä»¶æ„æˆã€‚</li></ul><p>è½¯ä»¶æ¶æ„ä½œç”¨ï¼š</p><ul><li>äº¤æµçš„æ‰‹æ®µ</li><li>å¯ä¼ é€’ã€å¯å¤ç”¨çš„æ¨¡å‹</li><li>å…³é”®å†³ç­–çš„ä½“ç°ï¼ˆæŠ˜è¡·ï¼‰</li></ul><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220324140326517.png" style="zoom:67%;" /></p><p>è½¯ä»¶è´¨é‡å› ç´ åŠå¯¹ç­–</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220324140715537.png" style="zoom:67%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220324140732705.png" style="zoom:67%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220324140809125.png" style="zoom:67%;" /></p><p><strong>ç³»ç»Ÿ=æœåŠ¡é›†ç¾¤+ä¸­é—´ä»¶</strong></p><h3 id="è½¯ä»¶ä¸­é—´ä»¶æ¦‚è¿°">è½¯ä»¶ä¸­é—´ä»¶æ¦‚è¿°ğŸŒµ</h3><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220324141033393.png" style="zoom:67%;" /></p><ul><li>ä¸­é—´ä»¶ï¼ˆ<spanclass="math inline">\(Middleware\)</span>ï¼‰æ˜¯<strong>ä¸€ç»„ç¨‹åº</strong>ï¼Œåº”ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿå„åº”ç”¨ä¹‹ä¸­ï¼Œä¸ºç³»ç»Ÿå±è”½åº•å±‚é€šè®¯å’Œæä¾›å…¬å…±æœåŠ¡ï¼Œå¹¶ä¿éšœç³»ç»Ÿçš„é«˜å¯é æ€§ã€é«˜å¯ç”¨æ€§ã€é«˜çµæ´»æ€§ã€‚</li><li>åˆ†å¸ƒå¼åº”ç”¨å€ŸåŠ©ä¸­é—´ä»¶åœ¨ä¸åŒæŠ€æœ¯ä¹‹é—´å…±äº«èµ„æºã€‚</li><li>ä¸­é—´ä»¶ä½äºå®¢æˆ·æœº/æœåŠ¡å™¨çš„æ“ä½œç³»ç»Ÿä¹‹ä¸Šï¼Œç®¡ç†è®¡ç®—æœºèµ„æºå’Œç½‘ç»œé€šè®¯ã€‚</li><li>ä¸­é—´ä»¶æ˜¯<strong>è¿æ¥ä¸¤ä¸ªç‹¬ç«‹åº”ç”¨ç¨‹åºæˆ–ç‹¬ç«‹ç³»ç»Ÿçš„è½¯ä»¶</strong>ï¼Œå³ä½¿å®ƒä»¬å…·æœ‰ä¸åŒçš„æ¥å£ã€‚</li><li>é€šè¿‡ä¸­é—´ä»¶ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥å·¥ä½œäºå¤šå¹³å°æˆ–OS ç¯å¢ƒ ã€‚</li></ul><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220324141705118.png" style="zoom:67%;" /></p><p>è½¯ä»¶ä¸­é—´ä»¶ä½œç”¨ï¼š</p><ul><li>å±è”½å¼‚æ„æ€§ï¼šå¼‚æ„æ€§è¡¨ç°åœ¨è®¡ç®—æœºçš„è½¯ç¡¬ä»¶å·®å¼‚ï¼ŒåŒ…æ‹¬ç¡¬ä»¶ã€æ“ä½œç³»ç»Ÿã€æ•°æ®åº“ç­‰ã€‚</li><li>å®ç°äº’æ“ä½œï¼šå› ä¸ºå¼‚æ„æ€§ï¼Œäº§ç”Ÿçš„ç»“æœæ˜¯è½¯ä»¶ä¾èµ–äºè®¡ç®—ç¯å¢ƒï¼Œä½¿å¾—å„ç§ä¸åŒè½¯ä»¶ä¹‹é—´åœ¨ä¸åŒå¹³å°ä¹‹é—´ä¸èƒ½ç§»æ¤ï¼Œæˆ–è€…ç§»æ¤å›°éš¾ã€‚è€Œä¸”ï¼Œå› ä¸ºç½‘ç»œåè®®å’Œé€šä¿¡æœºåˆ¶ä¸åŒï¼Œè¿™äº›ç³»ç»Ÿä¸èƒ½æœ‰æ•ˆç›¸äº’é›†æˆã€‚<br /></li><li>å…±æ€§å‡ç»ƒå’Œå¤ç”¨ï¼šè½¯ä»¶åº”ç”¨é¢†åŸŸè¶Šæ¥è¶Šå¤šï¼Œç›¸åŒé¢†åŸŸçš„åº”ç”¨ç³»ç»Ÿä¹‹é—´è®¸å¤šåŸºç¡€åŠŸèƒ½å’Œç»“æ„æ˜¯æœ‰ç›¸ä¼¼æ€§çš„ã€‚é€šè¿‡ä¸­é—´ä»¶æä¾›ç®€å•ã€ä¸€è‡´ã€é›†æˆçš„å¼€å‘å’Œè¿è¡Œç¯å¢ƒï¼Œç®€åŒ–åˆ†å¸ƒå¼ç³»ç»Ÿçš„è®¾è®¡ã€ç¼–ç¨‹å’Œç®¡ç†ã€‚</li></ul><p>è½¯ä»¶ä¸­é—´ä»¶åˆ†ç±»ï¼š</p><ul><li>åº”ç”¨æœåŠ¡ç±»ä¸­é—´ä»¶</li><li>åº”ç”¨é›†æˆç±»ä¸­é—´ä»¶</li><li>ä¸šåŠ¡æ¶æ„ç±»ä¸­é—´ä»¶</li></ul><h3 id="è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶è®¾è®¡è¿‡ç¨‹">è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶è®¾è®¡è¿‡ç¨‹ğŸ³</h3><p>4+1è§†å›¾æ¨¡å‹ï¼š</p><ul><li>â½¤ä¾‹è§†å›¾ï¼šæè¿°ç³»ç»Ÿçš„å…¸å‹åœºæ™¯ä¸åŠŸèƒ½ï¼Œä¸»è¦å›¾å½¢åŒ…æ‹¬<spanclass="math inline">\(use\ case\ diagram\)</span> ç­‰ã€‚</li><li>é€»è¾‘è§†å›¾ï¼šæè¿°ç³»ç»Ÿçš„æŠ½è±¡æ¦‚å¿µä¸åŠŸèƒ½(ç±»ã€å¯¹è±¡ã€æ¥å£ã€æ¨¡å¼ç­‰)ï¼Œä¸»è¦å›¾å½¢åŒ…æ‹¬<span class="math inline">\(class\ diagrams, Communication\diagrams\ and\ sequence\ diagrams\)</span>ç­‰ï¼›</li><li>å¼€å‘è§†å›¾ï¼šæè¿°ç³»ç»Ÿä¸­çš„å­ç³»ç»Ÿã€æ¨¡å—ã€æ–‡ä»¶ã€èµ„æºåŠå…¶ä¹‹é—´çš„å…³ç³»ï¼Œä¸»è¦å›¾å½¢åŒ…æ‹¬<span class="math inline">\(component\ diagrams, package\diagrams\)</span>ç­‰ï¼›</li><li>è¿›ç¨‹è§†å›¾ï¼šæè¿°ç³»ç»Ÿçš„è¿›ç¨‹åŠå…¶ä¹‹é—´çš„é€šä¿¡åä½œå…³ç³»ï¼Œä¸»è¦å›¾å½¢åŒ…æ‹¬ <spanclass="math inline">\(activity\ diagram, sequence\diagram\)</span>ç­‰ï¼›</li><li>ç‰©ç†è§†å›¾ï¼šæè¿°ç³»ç»Ÿå¦‚ä½•è¢«å®‰è£…ã€éƒ¨ç½²ä¸é…ç½®åœ¨åˆ†å¸ƒå¼çš„ç‰©ç†ç¯å¢ƒä¸‹ï¼Œä¸»è¦å›¾å½¢åŒ…æ‹¬<span class="math inline">\(deployment\diagram\)</span>ç­‰</li></ul><p>æ¯ä¸ªè§†å›¾ä»ä¸åŒçš„â»†åº¦åˆ»ç”»äº†ç³»ç»Ÿçš„ç»“æ„å±æ€§ï¼Œå°†å®ƒä»¬ç»¼åˆåœ¨â¼€èµ·å°±å½¢æˆäº†ç³»ç»Ÿçš„æ•´ä½“æ¶æ„ã€‚é€»è¾‘è§†å›¾å’Œå¼€å‘è§†å›¾æè¿°ç³»ç»Ÿçš„é™æ€ç»“æ„ï¼Œè€Œè¿›ç¨‹è§†å›¾å’Œç‰©ç†è§†å›¾æè¿°ç³»ç»Ÿçš„åŠ¨æ€ç»“æ„ã€‚</p><h2 id="ç¬¬2ç« -è½¯ä»¶æ¶æ„çš„ä¼ ç»Ÿé£æ ¼">ç¬¬2ç«  è½¯ä»¶æ¶æ„çš„ä¼ ç»Ÿé£æ ¼ğŸ¸</h2><h3 id="è½¯ä»¶æ¶æ„é£æ ¼æ¦‚è¿°">è½¯ä»¶æ¶æ„é£æ ¼æ¦‚è¿°ğŸ˜¶â€ğŸŒ«ï¸</h3><p>è½¯ä»¶æ¶æ„é£æ ¼å®šä¹‰ï¼š</p><ul><li>æè¿°â½¤ä»¥ç»„ç»‡â¼€ç±»è½¯ä»¶ç³»ç»Ÿçš„æƒ¯â½¤æ¨¡å¼ï¼Œåæ˜ äº†é¢†åŸŸä¸­ä¼—å¤šç³»ç»Ÿæ‰€å…±æœ‰çš„ç»“æ„å’Œè¯­ä¹‰ç‰¹æ€§ï¼Œå¹¶æŒ‡å¯¼å¦‚ä½•å°†å„ä¸ªæ¨¡å—å’Œå­ç³»ç»Ÿæœ‰æ•ˆåœ°ç»„ç»‡æˆä¸€ä¸ªå®Œæ•´çš„ç³»ç»Ÿ</li><li>å®šä¹‰ä¸€äº›æ„ä»¶å’Œè¿æ¥ä»¶ç±»å‹ï¼Œæ–½åŠ ä¸€ç»„çº¦æŸæè¿°ç»„åˆæ–¹å¼</li></ul><p>è½¯ä»¶æ¶æ„é£æ ¼ç»„æˆï¼š</p><ul><li>â¼€ç»„æ„ä»¶ç±»å‹<br /></li><li>â¼€ç»„è¿æ¥ä»¶ç±»å‹/äº¤äº’æœºåˆ¶</li><li>è¿™äº›æ„ä»¶çš„æ‹“æ‰‘åˆ†å¸ƒ<br /></li><li>â¼€ç»„å¯¹æ‹“æ‰‘å’Œâ¾ä¸ºçš„çº¦æŸ</li><li>å¯¹â»›æ ¼å¸¦æ¥æˆæœ¬å’Œæ”¶ç›Šçš„æè¿°</li></ul><p>ç»å…¸æ¶æ„é£æ ¼åˆ†ç±»</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220327163435781.png" style="zoom:67%;" /></p><ul><li>æ•°æ®æµé£æ ¼ï¼šç®¡é“/è¿‡æ»¤å™¨</li><li>è°ƒç”¨/è¿”å›é£æ ¼ï¼šä¸»ç¨‹åº/â¼¦ç¨‹åºï¼›â¾¯å‘å¯¹è±¡ï¼› åˆ†å±‚ç»“æ„</li><li>ç‹¬ç«‹æ„ä»¶é£æ ¼ï¼šäº‹ä»¶ç³»ç»Ÿ</li><li>è™šæ‹Ÿæœºé£æ ¼ï¼šè§£é‡Šå™¨</li><li>å…¶ä»–æ¶æ„é£æ ¼ï¼š<span class="math inline">\(MVC\)</span></li></ul><p><spanclass="math inline">\(KWICç´¢å¼•ç³»ç»Ÿ\)</span>ï¼ˆ"çº¯"åŸºæœ¬æ¶æ„é£æ ¼ä¾‹å­ï¼‰</p><p>æ¥æ”¶æŒ‰â¾æ’åˆ—çš„æ•°æ®ã€æ¯â¾æœ‰è‹¥â¼²æœ‰åºæ’åˆ—çš„è¯ã€æ¯ä¸ªè¯ç”±è‹¥â¼²æœ‰åºæ’åˆ—çš„å­—ç¬¦ç»„æˆã€æ¯â¾éƒ½å¯ä»¥å¾ªç¯ç§»ä½ã€‚é‡å¤åœ°æŠŠç¬¬â¼€ä¸ªè¯åˆ é™¤ï¼Œç„¶åæ¥åˆ°â¾æœ«ã€<spanclass="math inline">\(KWIC\)</span>æŠŠæ‰€æœ‰â¾çš„å„ç§ç§»ä½ç»“æœæŒ‰ç…§å­—âºŸè¡¨é¡ºåºè¾“å‡ºã€‚</p><h3 id="ä¸»ç¨‹åº-å­è¿‡ç¨‹é£æ ¼">ä¸»ç¨‹åº-å­è¿‡ç¨‹é£æ ¼ğŸœï¸</h3><p>ç»“æ„åŒ–ç¨‹åºï¼šä»åŠŸèƒ½è§‚ç‚¹è®¾è®¡ç³»ç»Ÿï¼›ç»“æ„åŒ–è®¾è®¡ä¸é€æ­¥ç»†åŒ–æ˜¯è¿™ç§â½…æ³•çš„å…¸å‹å®ä¾‹ï¼›é€æ­¥åˆ†è§£ï¼ˆåŸºäº"å®šä¹‰-ä½¿ç”¨"å…³ç³»ã€ç”¨è¿‡ç¨‹è°ƒç”¨ä½œä¸ºäº¤äº’æœºåˆ¶ã€ä¸»ç¨‹åºçš„æ­£ç¡®æ€§ä¾èµ–äºå®ƒæ‰€è°ƒâ½¤çš„â¼¦ç¨‹åºçš„æ­£ç¡®æ€§ï¼‰</p><ul><li>æ„ä»¶ï¼šä¸»ç¨‹åºï¼Œå­ç¨‹åº</li><li>è¿æ¥å™¨ï¼šè°ƒç”¨-è¿”å›æœºåˆ¶</li><li>æ‹“æ‰‘ç»“æ„ï¼šå±‚æ¬¡åŒ–ç»“æ„</li><li>æœ¬è´¨ï¼šå°†â¼¤ç³»ç»Ÿåˆ†è§£ä¸ºè‹¥â¼²æ¨¡å—(æ¨¡å—åŒ–)ï¼Œä¸»ç¨‹åºè°ƒâ½¤è¿™äº›æ¨¡å—å®ç°å®Œæ•´çš„ç³»ç»ŸåŠŸèƒ½</li></ul><p>æ¨¡å—åˆ†è§£åŸåˆ™ï¼š</p><ul><li>æ¨¡å—ç‹¬ç«‹æ€§<ul><li>é«˜èšåˆã€ä½è€¦åˆ<br /></li></ul></li><li>æ¨¡å—è§„æ¨¡ä¸­æ€§<ul><li>è¿‡å¤§ï¼šåˆ†è§£ä¸å……åˆ†ï¼Œéš¾ç†è§£</li><li>è¿‡å°ï¼šå¼€é”€å¤§ï¼Œæ¥å£å¤æ‚<br /></li></ul></li><li>æ¨¡å—å¤ç”¨æ€§<ul><li>é«˜æ‰‡å…¥+ä½æ‰‡å‡º<br /></li></ul></li><li>ä½œç”¨åŸŸä¸æ§åˆ¶åŸŸé€‚å½“æ€§<ul><li>ä½œç”¨åŸŸè¦åŒ…å«åœ¨æ§åˆ¶åŸŸä¹‹ä¸­</li></ul></li></ul><p>ä¼˜ç‚¹ï¼šå·²è¢«è¯æ˜æ˜¯æˆåŠŸçš„è®¾è®¡â½…æ³•ï¼Œå¯ä»¥è¢«â½¤äºè¾ƒâ¼¤ç¨‹åº</p><p>ç¼ºç‚¹ï¼šç¨‹åºè¶…è¿‡10ä¸‡â¾ï¼Œè¡¨ç°ä¸å¥½ï¼›ç¨‹åºå¤ªâ¼¤ï¼Œå¼€å‘å¤ªæ…¢ï¼Œæµ‹è¯•è¶Šæ¥è¶Šå›°éš¾</p><p>è§£å†³<span class="math inline">\(KWIC\)</span>é—®é¢˜ï¼š</p><ul><li>åˆ†ä¸ºå››ä¸ªåŸºæœ¬åŠŸèƒ½ï¼šè¾“å…¥ã€ç§»ä½ã€æ’åºã€è¾“å‡ºï¼›ä¸»ç¨‹åºæŒ‰æ¬¡åºè°ƒç”¨è¿™å››ä¸ªæ¨¡å—ï¼›é€šè¿‡å…±äº«çš„æ•°æ®å­˜å‚¨ã€ä½¿ç”¨æ— çº¦æŸçš„è¯»-å†™åè®®åœ¨æ¨¡å—ä¹‹é—´è¿›è¡Œæ•°æ®äº¤æ¢</li><li>ä¼˜ç‚¹ï¼šæ¨¡å—é—´æ•°æ®å…±äº«ï¼›ä¸åŒè®¡ç®—åŠŸèƒ½è¢«éš”ç¦»åœ¨ä¸åŒæ¨¡å—ä¸­</li><li>ç¼ºç‚¹ï¼šå¯¹æ•°æ®å­˜å‚¨æ ¼å¼çš„å˜åŒ–ä¼šå½±å“å‡ ä¹æ‰€æœ‰çš„æ¨¡å—ï¼›å¯¹å¤„ç†æµç¨‹çš„æ”¹å˜ä¸ç³»ç»ŸåŠŸèƒ½çš„å¢å¼ºä¹Ÿå¾ˆéš¾é€‚åº”ï¼Œä¾èµ–äºæ§åˆ¶æ¨¡å—å†…éƒ¨çš„è°ƒâ½¤æ¬¡åºï¼›è¿™ç§åˆ†è§£éš¾ä»¥æ”¯æŒæœ‰æ•ˆçš„å¤ç”¨</li></ul><h3 id="é¢å‘å¯¹è±¡é£æ ¼">é¢å‘å¯¹è±¡é£æ ¼â˜ƒï¸</h3><p>ç³»ç»Ÿè¢«çœ‹ä½œå¯¹è±¡çš„é›†åˆï¼›æ¯ä¸ªå¯¹è±¡éƒ½æœ‰â¼€ä¸ªå®ƒâ¾ƒâ¼°çš„æ“ä½œé›†åˆã€‚æ•°æ®åŠä½œâ½¤åœ¨æ•°æ®ä¸Šçš„æ“ä½œè¢«å°è£…æˆæŠ½è±¡æ•°æ®ç±»å‹â€”â€”å¯¹è±¡</p><ul><li>æ„ä»¶ï¼šç±»å’Œå¯¹è±¡<ul><li>ç±»çš„å†…éƒ¨ç»“æ„<ul><li>å±æ€§ï¼šæè¿°å¯¹è±¡é™æ€ç‰¹æ€§çš„æ•°æ®é¡¹<br /></li><li>æ“ä½œï¼šæè¿°å¯¹è±¡åŠ¨æ€ç‰¹æ€§çš„ä¸€ä¸ªåŠ¨ä½œ<br /></li></ul></li></ul></li><li>è¿æ¥ä»¶ï¼šå¯¹è±¡ä¹‹é—´é€šè¿‡å‡½æ•°ä¸è¿‡ç¨‹è°ƒç”¨å®ç°äº¤äº’</li></ul><p>é¢å‘å¯¹è±¡ç‰¹æ€§ï¼š</p><ul><li>å°è£…ï¼šé™åˆ¶å¯¹æŸäº›ä¿¡æ¯çš„è®¿é—®</li><li>äº¤äº’ï¼šé€šè¿‡è¿‡ç¨‹è°ƒâ½¤æˆ–ç±»ä¼¼çš„åè®®</li><li>å¤šæ€ï¼šåœ¨è¿â¾æ—¶é€‰æ‹©å…·ä½“çš„æ“ä½œ</li><li>ç»§æ‰¿ï¼šå¯¹å…±äº«çš„åŠŸèƒ½ä¿æŒå”¯â¼€çš„æ¥â¼</li><li>åŠ¨æ€ç»‘å®šï¼šè¿â¾æ—¶å†³å®šå®é™…è°ƒâ½¤çš„æ“ä½œ</li><li>å¤â½¤å’Œç»´æŠ¤</li></ul><p>é¢å‘å¯¹è±¡ç‰¹ç‚¹</p><ul><li>ä¼˜ç‚¹ï¼šå¤â½¤å’Œç»´æŠ¤ï¼šåˆ©â½¤å°è£…å’Œèšåˆæâ¾¼â½£äº§â¼’ã€åæ˜ ç°å®ä¸–ç•Œã€å®¹æ˜“åˆ†è§£æˆä¸€ä¸ªç³»ç»Ÿ</li><li>ç¼ºç‚¹ï¼šç®¡ç†â¼¤é‡çš„å¯¹è±¡ï¼šæ€æ ·ç¡®â½´â¼¤é‡å¯¹è±¡çš„ç»“æ„ã€å¿…é¡»çŸ¥é“å¯¹è±¡çš„èº«ä»½æ ‡è¯†ã€ç»§æ‰¿å¼•èµ·å¤æ‚åº¦ï¼Œå…³é”®ç³»ç»Ÿä¸­æ…â½¤</li></ul><p>è§£å†³<span class="math inline">\(KWIC\)</span>é—®é¢˜ï¼š</p><ul><li>é‡‡ç”¨<spanclass="math inline">\(OO\)</span>çš„æ€æƒ³ï¼Œæ•°æ®å’Œä½œç”¨åœ¨æ•°æ®ä¸Šçš„è¯»å†™æ“ä½œè¢«å°è£…ä¸ºobjectï¼Œä¸»ç¨‹åºè°ƒç”¨è¿™äº›objectï¼Œå½¢æˆæ§åˆ¶æµç¨‹</li><li>æ•°æ®ä¸å†è¢«æ„ä»¶ç›´æ¥å…±äº«ï¼Œâ½½æ˜¯è¢«å°è£…åœ¨äº†objectä¸­</li><li>æ¯ä¸ªå¯¹è±¡æä¾›äº†â¼€ä¸ªæ¥â¼ï¼Œå…è®¸å…¶ä»–å¯¹è±¡é€šè¿‡è¯¥æ¥â¼è°ƒâ½¤å¯¹è¯¥å¯¹è±¡å†…å°è£…çš„æ•°æ®çš„æ“ä½œ</li><li>ä¼˜ç‚¹ï¼šæŸâ¼€æ„ä»¶çš„ç®—æ³•ä¸æ•°æ®ç»“æ„çš„ä¿®æ”¹ä¸ä¼šå½±å“å…¶ä»–æ„ä»¶ã€æ„ä»¶ä¹‹é—´ä¾èµ–æ€§é™ä½ï¼Œæâ¾¼äº†å¤â½¤åº¦</li><li>ç¼ºç‚¹ï¼šä¸é€‚åˆåŠŸèƒ½çš„æ‰©å±•ã€ä¸ºäº†å¢åŠ æ–°åŠŸèƒ½ï¼Œè¦ä¹ˆä¿®æ”¹å·²æœ‰çš„æ¨¡å—ï¼Œè¦ä¹ˆå°±åŠ â¼Šæ–°çš„æ¨¡å—ï¼Œæ€§èƒ½ä¼šå—åˆ°å½±å“</li></ul><h3 id="æ•°æ®æµé£æ ¼">æ•°æ®æµé£æ ¼ğŸ—ï¸</h3><h4 id="æ•°æ®æµé£æ ¼æ¦‚è¿°">æ•°æ®æµé£æ ¼æ¦‚è¿°ğŸŒ¸</h4><p>å¤„ç†æ“ä½œï¼šæ•°æ®åˆ°è¾¾å³è¢«æ¿€æ´»ï¼Œæ— æ•°æ®æ—¶ä¸å·¥ä½œ</p><ul><li>æ•°æ®çš„å¯â½¤æ€§å†³å®šç€å¤„ç†<è®¡ç®—å•å…ƒ>æ˜¯å¦æ‰§â¾<br /></li><li>ç³»ç»Ÿç»“æ„ï¼šæ•°æ®åœ¨å„å¤„ç†ä¹‹é—´çš„æœ‰åºç§»åŠ¨<br /></li><li>åœ¨çº¯æ•°æ®æµç³»ç»Ÿä¸­ï¼Œå¤„ç†æ“ä½œä¹‹é—´é™¤äº†æ•°æ®äº¤æ¢ï¼Œæ²¡æœ‰ä»»ä½•å…¶ä»–çš„äº¤äº’</li></ul><p>æ•°æ®æµé£æ ¼åŸºæœ¬æ„ä»¶ï¼šæ•°æ®å¤„ç†(æ„ä»¶æ¥â¼ï¼šè¾“â¼Šç«¯â¼å’Œè¾“å‡ºç«¯â¼ï¼›ä»è¾“å…¥ç«¯å£è¯»å–æ•°æ®ï¼Œä»è¾“å‡ºç«¯å£å†™å…¥æ•°æ®ï¼›è®¡ç®—æ¨¡å‹ï¼šä»è¾“â¼Šç«¯â¼è¯»æ•°ï¼Œç»è¿‡è®¡ç®—/å¤„ç†ï¼Œç„¶åå†™åˆ°è¾“å‡ºç«¯â¼)</p><p>æ•°æ®æµé£æ ¼è¿æ¥ä»¶ï¼šæ•°æ®æµ(å•å‘ï¼Œé€šå¸¸æ˜¯å¼‚æ­¥ï¼Œæœ‰ç¼“å†²ï¼›æ¥å£è§’è‰²ï¼šreaderå’Œwriterï¼›è®¡ç®—æ¨¡å‹ï¼šæŠŠæ•°æ®ä»ä¸€ä¸ªå¤„ç†çš„è¾“å‡ºç«¯å£ä¼ é€åˆ°å¦ä¸€ä¸ªå¤„ç†çš„è¾“å…¥ç«¯å£)</p><p>ä¸€èˆ¬æ¥è¯´æ•°æ®çš„æµå‘æ˜¯æ— åºçš„ï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨è¿‘ä¼¼çº¿æ€§çš„æ•°æ®æµæˆ–åœ¨æœ‰é™åº¦å†…çš„å¾ªç¯æ•°æ®æµã€‚</p><h4 id="ç®¡é“-è¿‡æ»¤å™¨é£æ ¼">ç®¡é“-è¿‡æ»¤å™¨é£æ ¼ğŸ¥’</h4><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220327195329793.png" style="zoom:67%;" /></p><p>é€‚ç”¨åœºæ™¯ï¼šæ•°æ®æºæºä¸æ–­çš„äº§â½£ï¼Œç³»ç»Ÿéœ€è¦å¯¹è¿™äº›æ•°æ®è¿›â¾è‹¥â¼²å¤„ç†(åˆ†æã€è®¡ç®—ã€è½¬æ¢ç­‰)ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>æŠŠç³»ç»Ÿåˆ†è§£ä¸ºâ¼ä¸ªé¡ºåºçš„å¤„ç†æ­¥éª¤ï¼Œè¿™äº›æ­¥éª¤ä¹‹é—´é€šè¿‡æ•°æ®æµè¿æ¥ï¼Œâ¼€ä¸ªæ­¥éª¤çš„è¾“å‡ºæ˜¯å¦â¼€ä¸ªæ­¥éª¤çš„è¾“â¼Šï¼›</li><li>æ¯ä¸ªå¤„ç†æ­¥éª¤ç”±â¼€ä¸ªè¿‡æ»¤å™¨æ„ä»¶(Filter)å®ç°ï¼›</li><li>å¤„ç†æ­¥éª¤ä¹‹é—´çš„æ•°æ®ä¼ è¾“ç”±ç®¡é“(Pipe)è´Ÿè´£ã€‚</li></ul><p>æ¯ä¸ªå¤„ç†æ­¥éª¤(è¿‡æ»¤å™¨)éƒ½æœ‰ä¸€ç»„è¾“å…¥å’Œè¾“å‡ºï¼Œè¿‡æ»¤å™¨ä»ç®¡é“ä¸­è¯»å–è¾“å…¥çš„æ•°æ®æµï¼Œç»è¿‡å†…éƒ¨å¤„ç†ï¼Œç„¶åäº§ç”Ÿè¾“å‡ºæ•°æ®æµå¹¶å†™å…¥ç®¡é“ä¸­ã€‚</p><p>æ„ä»¶ï¼šè¿‡æ»¤å™¨ï¼Œå¤„ç†æ•°æ®æµï¼ˆä¸€ä¸ªè¿‡æ»¤å™¨å°è£…äº†ä¸€ä¸ªå¤„ç†æ­¥éª¤ã€æ•°æ®æºç‚¹å’Œæ•°æ®ç»ˆç‚¹å¯ä»¥çœ‹ä½œæ˜¯ç‰¹æ®Šçš„è¿‡æ»¤å™¨ï¼‰</p><ul><li><p>ç›®æ ‡ï¼šå°†æºæ•°æ®é€’å¢çš„å˜æ¢æˆç›®æ ‡æ•°æ®</p></li><li><p>ä»"æ•°æ®æµ"åˆ°"æ•°æ®æµ"çš„å˜æ¢</p></li><li><p>è¿‡æ»¤å™¨å¯¹æ•°æ®æµçš„äº”ç§å˜æ¢ç±»å‹ï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220327201643730.png" style="zoom:67%;" /></p></li><li><p>è¿‡æ»¤å™¨å¤„ç†æ•°æ®æµçš„æ–¹å¼ï¼šé€’å¢çš„è¯»å–å’Œæ¶ˆè´¹æ•°æ®ï¼ˆæ•°æ®åˆ°æ¥æ—¶ä¾¿è¢«å¤„ç†ï¼Œä¸æ˜¯æ”¶é›†å®Œäº†ç„¶åå¤„ç†ï¼Œå³åœ¨è¾“å…¥è¢«å®Œå…¨æ¶ˆè´¹ä¹‹å‰ï¼Œè¾“å‡ºä¾¿äº§ç”Ÿäº†ï¼‰</p></li><li><p>è¿‡æ»¤å™¨å…¶ä»–ç‰¹å¾ï¼šæ— ä¸Šä¸‹æ–‡ä¿¡æ¯ã€ä¸ä¿ç•™çŠ¶æ€ã€å¯¹ä¸Šä¸‹æ¸¸çš„å…¶ä»–è¿‡æ»¤å™¨æ— ä»»ä½•äº†è§£ã€‚</p></li><li><p>è¿‡æ»¤å™¨çŠ¶æ€ï¼šåœâ½ŒçŠ¶æ€ï¼šè¡¨ç¤ºè¿‡æ»¤å™¨å¤„äºå¾…å¯åŠ¨çŠ¶æ€ï¼Œå½“å¤–éƒ¨å¯åŠ¨è¿‡æ»¤å™¨åï¼Œè¿‡æ»¤å™¨å¤„äºå¤„ç†çŠ¶æ€ï¼›å¤„ç†çŠ¶æ€ï¼šè¡¨ç¤ºè¿‡æ»¤å™¨æ­£å¤„ç†è¾“å…¥æ•°æ®é˜Ÿåˆ—ä¸­çš„æ•°æ®ï¼›ç­‰å¾…çŠ¶æ€ï¼šè¡¨ç¤ºè¿‡æ»¤å™¨çš„è¾“å…¥æ•°æ®é˜Ÿåˆ—ä¸ºç©ºï¼Œæ­¤æ—¶è¿‡æ»¤å™¨ç­‰å¾…ï¼Œå½“æœ‰æ–°çš„æ•°æ®è¾“å…¥æ—¶ï¼Œè¿‡æ»¤å™¨å¤„äºå¤„ç†çŠ¶æ€ã€‚</p></li></ul><p>è¿æ¥ä»¶ï¼šè¿æ¥ä¸€ä¸ªæºå’Œä¸€ä¸ªç›®çš„è¿‡æ»¤å™¨ï¼ˆè½¬å‘æ•°æ®æµï¼‰</p><ul><li>ç®¡é“ä½œç”¨ï¼šåœ¨è¿‡æ»¤å™¨ä¹‹é—´ä¼ é€æ•°æ®</li><li>å•å‘æµï¼›å¯èƒ½å…·æœ‰ç¼“å†²åŒºï¼›æ•°æ®ç¼“å†²åŒºå¯ä»¥æ˜¯æ–‡ä»¶ï¼Œæ•°ç»„ï¼Œå­—å…¸ï¼Œæ ‘ç­‰é›†åˆç±»å‹ï¼›ç®¡é“å½¢æˆæ•°æ®ä¼ è¾“å›¾ï¼›ç®¡é“çš„å…ˆåé¡ºåºä¸å½±å“è¾“å‡ºçš„ç»“æœã€‚</li><li>ä¸åŒç®¡é“ä¸­æµåŠ¨çš„æ•°æ®æµå¯èƒ½å…·æœ‰ä¸åŒçš„æ•°æ®æ ¼å¼ã€‚</li></ul><p>è¿æ¥å™¨å®šä¹‰äº†æ•°æ®æµçš„å›¾ï¼Œå½¢æˆæ‹“æ‰‘ç»“æ„</p><p>ç®¡é“-è¿‡æ»¤å™¨é£æ ¼</p><ul><li>ä¼˜ç‚¹ï¼šä½¿å¾—ç³»ç»Ÿä¸­çš„æ„ä»¶å…·æœ‰è‰¯å¥½çš„éšè”½æ€§å’Œâ¾¼å†…èšã€ä½è€¦åˆçš„ç‰¹ç‚¹ï¼›æ”¯æŒè½¯ä»¶å¤ç”¨ï¼Œç³»ç»Ÿç»´æŠ¤å’Œå¢å¼ºç³»ç»Ÿæ€§èƒ½æ›´ç®€å•ï¼›å…è®¸å¯¹ååé‡ã€æ­»é”ç­‰å±æ€§è¿›è¡Œåˆ†æï¼›æ”¯æŒå¹¶è¡Œæ‰§è¡Œ</li><li>ç¼ºç‚¹ï¼šé€šå¸¸å¯¼è‡´è¿›ç¨‹æˆä¸ºæ‰¹å¤„ç†çš„ç»“æ„ï¼›ä¸é€‚åˆå¤„ç†äº¤äº’çš„åº”â½¤</li></ul><p>è§£å†³<span class="math inline">\(KWIC\)</span>é—®é¢˜ï¼š</p><ul><li>å››ä¸ªè¿‡æ»¤å™¨ï¼šè¾“â¼Šã€ç§»ä½ã€æ’åºã€è¾“å‡ºï¼›æ¯ä¸ªè¿‡æ»¤å™¨å¤„ç†æ•°æ®ï¼Œç„¶åå°†ç»“æœé€â¾„ä¸‹â¼€ä¸ªè¿‡æ»¤å™¨ï¼›æ§åˆ¶æœºåˆ¶æ˜¯åˆ†å¸ƒå¼çš„ï¼šåªè¦æœ‰æ•°æ®ä¼ â¼Šï¼Œè¿‡æ»¤å™¨å³å¼€å§‹â¼¯ä½œï¼›è¿‡æ»¤å™¨ä¹‹é—´çš„æ•°æ®å…±äº«è¢«ä¸¥æ ¼é™åˆ¶åœ¨ç®¡é“ä¼ è¾“</li></ul><h3 id="äº‹ä»¶é©±åŠ¨é£æ ¼">äº‹ä»¶é©±åŠ¨é£æ ¼ğŸ˜</h3><ul><li>æ˜¾å¼è°ƒç”¨ï¼šå„ä¸ªæ„ä»¶ä¹‹é—´çš„äº’åŠ¨æ˜¯ç”±æ˜¾å¼è°ƒç”¨å‡½æ•°æˆ–è¿‡ç¨‹å®Œæˆçš„ï¼›è°ƒç”¨çš„è¿‡ç¨‹ä¸æ¬¡åºæ˜¯å›ºå®šçš„ï¼Œé¢„å…ˆè®¾å®šçš„ã€‚</li><li>éšå¼è°ƒç”¨ï¼šä¸€ä¸ªç»„ä»¶å¯ä»¥å¹¿æ’­ä¸€äº›äº‹ä»¶ï¼›ç³»ç»Ÿä¸­çš„å…¶ä»–æ„ä»¶å¯ä»¥æ³¨å†Œè‡ªå·±æ„Ÿå…´è¶£çš„äº‹ä»¶ï¼Œå¹¶å°†è‡ªå·±çš„æŸä¸ªè¿‡ç¨‹ä¸ç›¸åº”çš„äº‹ä»¶è¿›è¡Œå…³è”ï¼›å½“ä¸€ä¸ªäº‹ä»¶è¢«å‘å¸ƒï¼Œç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨åœ¨è¯¥äº‹ä»¶ä¸­æ³¨å†Œçš„æ‰€æœ‰è¿‡ç¨‹ã€‚</li></ul><p>äº‹ä»¶é£æ ¼ç‰¹ç‚¹ï¼šäº‹ä»¶çš„è§¦å‘è€…å¹¶ä¸çŸ¥é“å“ªäº›æ„ä»¶ä¼šè¢«è¿™äº›äº‹ä»¶å½±å“ï¼Œç›¸äº’ä¿æŒç‹¬â½´</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220327205402944.png" style="zoom:67%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220327205505793.png" style="zoom:67%;" /></p><p>æ„ä»¶ï¼šå¯¹è±¡æˆ–è¿‡ç¨‹ï¼Œå¹¶æä¾›ä»¥ä¸‹ä¸¤ç§æ¥å£ï¼š</p><ul><li>è¿‡ç¨‹æˆ–å‡½æ•°ï¼Œå……å½“äº‹ä»¶æºæˆ–äº‹ä»¶å¤„ç†å™¨çš„è§’è‰²ã€‚</li><li>äº‹ä»¶</li></ul><p>è¿æ¥å™¨ï¼šäº‹ä»¶-è¿‡ç¨‹ç»‘å®š</p><ul><li>äº‹ä»¶å¤„ç†å™¨ï¼ˆäº‹ä»¶çš„æ¥æ”¶å’Œå¤„ç†â½…ï¼‰çš„è¿‡ç¨‹å‘ç‰¹å®šçš„äº‹ä»¶è¿›â¾æ³¨å†Œ</li><li>äº‹ä»¶æºæ„ä»¶å‘å¸ƒäº‹ä»¶</li><li>å½“æŸäº›äº‹ä»¶è¢«å‘å¸ƒæ—¶ï¼Œå‘å…¶æ³¨å†Œçš„è¿‡ç¨‹è¢«éšå¼è°ƒâ½¤</li><li>è°ƒâ½¤çš„æ¬¡åºæ˜¯ä¸ç¡®å®šçš„</li><li>åœ¨æŸäº›æ¸…ç©ºä¸‹ï¼Œè¿æ¥ä»¶å¯ä»¥æ˜¯äº‹ä»¶-äº‹ä»¶ç»‘å®šï¼ˆä¸€ä¸ªäº‹ä»¶ä¹Ÿå¯èƒ½è§¦å‘å…¶ä»–äº‹ä»¶ï¼Œå½¢æˆäº‹ä»¶é“¾ï¼‰</li></ul><p>ä¾‹ï¼šè°ƒè¯•å™¨ï¼ˆdebuggerï¼‰</p><ul><li>â¼€æ—¦é‡åˆ°æ–­ç‚¹ï¼Œè°ƒè¯•å™¨å‘å¸ƒäº‹ä»¶ï¼Œä»â½½è§¦å‘â€ç¼–è¾‘å™¨â€ä¸â€å˜é‡ç›‘æµ‹å™¨â€ï¼›ç¼–è¾‘å™¨å°†æºä»£ç æ»šåŠ¨åˆ°æ–­ç‚¹å¤„ï¼Œå˜é‡ç›‘æµ‹å™¨åˆ™æ›´æ–°å½“å‰å˜é‡å€¼å¹¶æ˜¾ç¤ºå‡ºæ¥ã€‚</li></ul><p>äº‹ä»¶è°ƒåº¦ç­–ç•¥ï¼ˆå½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå·²å‘æ­¤äº‹ä»¶æ³¨å†Œè¿‡çš„æ‰€æœ‰è¿‡ç¨‹è¢«æ¿€å‘å¹¶æ‰§è¡Œï¼Œè¿™æ—¶éœ€è¦ç¡®å®šäº‹ä»¶å¦‚ä½•è¢«åˆ†å‘åˆ°å·²æ³¨å†Œçš„æ¨¡å—ï¼‰ï¼š</p><ul><li><p>æ— ç‹¬ç«‹ï¼ˆéé›†ä¸­å¼ï¼‰è°ƒåº¦æ¨¡å—çš„äº‹ä»¶ç®¡ç†å™¨</p><p>è¢«ç§°ä¸º"è¢«è§‚å¯Ÿè€…/è§‚å¯Ÿè€…"ï¼Œæ¯ä¸€ä¸ªæ¨¡å—éƒ½å…è®¸å…¶ä»–æ¨¡å—å‘è‡ªå·±æ‰€èƒ½å‘é€çš„æŸäº›äº‹ä»¶è¡¨æ˜å…´è¶£ï¼Œå½“æŸâ¼€æ¨¡å—å‘å‡ºæŸâ¼€äº‹ä»¶æ—¶ï¼Œå®ƒâ¾ƒåŠ¨å°†è¿™äº›äº‹ä»¶å‘å¸ƒç»™é‚£äº›æ›¾ç»å‘â¾ƒâ¼°æ³¨å†Œè¿‡æ­¤äº‹ä»¶çš„æ¨¡å—ã€‚</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220329203950882.png" style="zoom:67%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220329204325365.png" style="zoom:67%;" /></p><p><span class="math inline">\(ConcreteSubject\)</span>è¿æ¥<spanclass="math inline">\(ConcreteObserver\)</span>ï¼Œä¸€æ—¦æœ‰äº‹ä»¶ï¼Œ<spanclass="math inline">\(ConcreteSubject\)</span>ä¼šé€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…ï¼Œæ¯ä¸€ä¸ªè§‚å¯Ÿè€…éƒ½æœ‰ä¸€ä¸ª<code>update</code>æ–¹æ³•ï¼Œä¸€æ—¦è¢«é€šçŸ¥ï¼Œè§‚å¯Ÿè€…è°ƒç”¨<code>update</code>æ–¹æ³•ã€‚</p></li><li><p>å¸¦æœ‰ç‹¬ç«‹è°ƒåº¦æ¨¡å—çš„äº‹ä»¶ç®¡ç†å™¨</p><p>äº‹ä»¶è°ƒåº¦æ¨¡å—åŠŸèƒ½ï¼šæ¥æ”¶åˆ°æ¥çš„äº‹ä»¶å¹¶åˆ†å‘å®ƒä»¬åˆ°å…¶å®ƒæ¨¡å—ã€‚</p><p>è°ƒåº¦å™¨å†³å®šå¦‚ä½•åˆ†å‘äº‹ä»¶ï¼š</p><ul><li><p>å…¨å¹¿æ’­å¼</p><p>è°ƒåº¦æ¨¡å—å°†äº‹ä»¶å¹¿æ’­åˆ°æ‰€æœ‰çš„æ¨¡å—ï¼Œä½†åªæœ‰æ„Ÿå…´è¶£çš„æ¨¡å—æ‰å»å–äº‹ä»¶å¹¶è§¦å‘è‡ªèº«çš„è¡Œä¸º</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220329205801151.png" style="zoom:67%;" /></p></li><li><p>é€‰æ‹©å¹¿æ’­å¼ï¼ˆå‘å¸ƒ/è®¢é˜…ç­–ç•¥ï¼‰</p><p>è°ƒåº¦æ¨¡å—å°†äº‹ä»¶é€åˆ°é‚£äº›å·²ç»æ³¨å†Œäº†çš„æ¨¡å—ä¸­</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220329205946620.png" style="zoom:67%;" /></p><ul><li><p>ç‚¹å¯¹ç‚¹æ¨¡å¼ï¼šåŸºäºæ¶ˆæ¯é˜Ÿåˆ—</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220329210204856.png" style="zoom:67%;" /></p><p>ç³»ç»Ÿå®‰è£…å¹¶é…ç½®â¼€ä¸ªé˜Ÿåˆ—ç®¡ç†å™¨ï¼Œå¹¶å®šä¹‰â¼€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼ŒæŸä¸ªåº”â½¤å‘æ¶ˆæ¯é˜Ÿåˆ—æ³¨å†Œè¿‡ç¨‹ï¼Œä»¥ç›‘å¬å¹¶å¤„ç†è¢«æ”¾ç½®åœ¨é˜Ÿåˆ—â¾¥çš„äº‹ä»¶ï¼Œå…¶ä»–çš„åº”â½¤è¿æ¥åˆ°è¯¥é˜Ÿåˆ—å¹¶å‘å…¶ä¸­å‘å¸ƒäº‹ä»¶ï¼Œé˜Ÿåˆ—ç®¡ç†å™¨å­˜å‚¨è¿™äº›æ¶ˆæ¯ï¼Œç›´åˆ°æ¥æ”¶ç«¯çš„åº”â½¤è¿æ¥åˆ°é˜Ÿåˆ—ï¼Œå–å›è¿™äº›æ¶ˆæ¯å¹¶åŠ ä»¥å¤„ç†ï¼Œæ¶ˆæ¯åªèƒ½å¤Ÿè¢«å”¯â¼€çš„æ¶ˆè´¹è€…æ‰€æ¶ˆè´¹ï¼Œæ¶ˆè´¹ä¹‹åå³ä»é˜Ÿåˆ—ä¸­åˆ é™¤ã€‚</p></li></ul></li></ul></li><li><p>å‘å¸ƒ/è®¢é˜…æ¨¡å¼</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220329210238694.png" style="zoom:67%;" /></p><p>äº‹ä»¶å‘å¸ƒè€…å‘â€œä¸»é¢˜â€å‘å¸ƒäº‹ä»¶ï¼Œè®¢é˜…è€…å‘â€œä¸»é¢˜â€è®¢é˜…äº‹ä»¶ï¼Œä¸€ä¸ªäº‹ä»¶å¯ä»¥è¢«å¤šä¸ªè®¢é˜…è€…æ¶ˆè´¹ï¼Œäº‹ä»¶åœ¨å‘é€ç»™è®¢é˜…è€…ä¹‹åï¼Œå¹¶ä¸ä¼šé©¬ä¸Šä»topicä¸­åˆ é™¤ï¼Œtopicä¼šåœ¨äº‹ä»¶è¿‡æœŸä¹‹åè‡ªåŠ¨å°†å…¶åˆ é™¤ã€‚</p></li></ul><p>è§£å†³<span class="math inline">\(KWIC\)</span>é—®é¢˜ï¼š</p><ul><li>å››ä¸ªå…±äº«æ¨¡å—</li><li>å…±äº«æ•°æ®ï¼Œä½†å…±äº«æ•°æ®å¹¶ä¸ç›´æ¥æš´éœ²å…¶æ ¼å¼ï¼Œè€Œæ˜¯è¿›è¡Œå°è£…ï¼ˆå€Ÿé‰´é¢å‘å¯¹è±¡æ–¹æ¡ˆï¼‰</li><li>æ¨¡å—çš„è°ƒç”¨å‘ç”Ÿåœ¨æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¸æ˜¯ä¸»ç¨‹åºæ§åˆ¶</li></ul><p>äº‹ä»¶é©±åŠ¨é£æ ¼ä¼˜ç‚¹ï¼š</p><ul><li>æ”¯æŒå®ç°äº¤äº’å¼ç³»ç»Ÿï¼ˆç”¨æˆ·è¾“å…¥/ç½‘ç»œé€šè®¯ï¼‰</li><li>å¼‚æ­¥æ‰§â¾ï¼Œä¸å¿…åŒæ­¥ç­‰å¾…æ‰§è¡Œç»“æœï¼›<ul><li>ä¸ºè½¯ä»¶å¤â½¤æä¾›äº†å¼ºå¤§çš„æ”¯æŒã€‚è¦å°†ä¸€ä¸ªæ„ä»¶åŠ å…¥ç°å­˜ç³»ç»Ÿä¸­æ—¶ï¼Œåªéœ€å°†å®ƒæ³¨å†Œåˆ°ç³»ç»Ÿçš„äº‹ä»¶ä¸­ï¼›</li></ul></li><li>ä¸ºç³»ç»ŸåŠ¨æ€æ¼”åŒ–å¸¦æ¥äº†æ–¹ä¾¿ã€‚<ul><li>æ„ä»¶ç‹¬ç«‹å­˜åœ¨ï¼Œå½“ç”¨ä¸€ä¸ªæ„ä»¶ä»£æ›¿å¦ä¸€ä¸ªæ„ä»¶æ—¶ï¼Œä¸ä¼šå½±å“åˆ°å…¶å®ƒæ„ä»¶çš„æ¥å£ï¼›</li></ul></li><li>å¯¹äº‹ä»¶çš„å¹¶å‘å¤„ç†å°†æé«˜ç³»ç»Ÿæ€§èƒ½ï¼›</li><li>å¥å£®æ€§ï¼šä¸€ä¸ªæ„ä»¶å‡ºé”™å°†ä¸ä¼šå½±å“å…¶ä»–æ„ä»¶ã€‚</li></ul><p>äº‹ä»¶é©±åŠ¨é£æ ¼ç¼ºç‚¹ï¼š</p><ul><li>åˆ†å¸ƒå¼çš„æ§åˆ¶æ–¹å¼ä½¿å¾—ç³»ç»Ÿçš„åŒæ­¥ã€éªŒè¯å’Œè°ƒè¯•å˜å¾—å¼‚å¸¸å›°éš¾<br /></li><li>æ•°æ®äº¤æ¢é—®é¢˜ï¼šæ•°æ®å¯é€šè¿‡äº‹ä»¶ç›´æ¥åœ¨ç³»ç»Ÿé—´ä¼ é€’(æ— è°ƒåº¦æ¨¡å—æ—¶)ï¼Œä½†åœ¨å…·æœ‰ç‹¬ç«‹è°ƒåº¦æ¨¡å—çš„äº‹ä»¶ç³»ç»Ÿä¸­ï¼Œæ•°æ®åˆ™éœ€è¦ç»è¿‡è°ƒåº¦æ¨¡å—çš„ä¼ é€’ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå…¨å±€æ€§èƒ½å’Œèµ„æºç®¡ç†æˆä¸ºäº†ç³»ç»Ÿçš„ç“¶é¢ˆã€‚</li></ul><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220329212209272.png"  style="zoom:67%;" /></p><h3 id="è§£é‡Šå™¨é£æ ¼">è§£é‡Šå™¨é£æ ¼ğŸ¥¶</h3><p>ä¾‹ï¼š<span class="math inline">\(java\)</span>è™šæ‹Ÿæœºï¼ˆ<spanclass="math inline">\(Write\ Once,\ Run\ Anywhere\)</span>ï¼‰</p><p>è§£é‡Šå™¨</p><ul><li>è§£é‡Šå™¨æ˜¯â¼€ä¸ªâ½¤æ¥æ‰§â¾å…¶ä»–ç¨‹åºçš„ç¨‹åºï¼Œé’ˆå¯¹ä¸åŒçš„ç¡¬ä»¶å¹³å°å®ç°äº†â¼€ä¸ªè™šæ‹Ÿæœºï¼Œâ¾¼æŠ½è±¡å±‚æ¬¡çš„ç¨‹åºç¿»è¯‘ä¸ºä½æŠ½è±¡å±‚æ¬¡æ‰€èƒ½ç†è§£çš„æŒ‡ä»¤ï¼Œä»¥æ¶ˆé™¤åœ¨ç¨‹åºè¯­â¾”ä¸ç¡¬ä»¶ä¹‹é—´å­˜åœ¨çš„è¯­ä¹‰å·®å¼‚ã€‚</li><li>è§£é‡Šå™¨é€šå¸¸ç”¨æ¥åœ¨ç¨‹åºè¯­â¾”å®šä¹‰çš„è®¡ç®—å’Œæœ‰æ•ˆç¡¬ä»¶æ“ä½œç¡®å®šçš„è®¡ç®—ä¹‹é—´å»ºâ½´å¯¹åº”å’Œè”ç³»ã€‚</li></ul><p>è§£é‡Šå™¨é£æ ¼</p><ul><li>æ„ä»¶<ul><li>è§£é‡Šå™¨å¼•æ“</li><li>å­˜å‚¨åŒº<ul><li>è¢«è§£é‡Šçš„æºä»£ç </li><li>è§£é‡Šå™¨å¼•æ“å½“å‰çš„æ§åˆ¶çŠ¶æ€çš„è¡¨ç¤º</li><li>ç¨‹åºå½“å‰æ‰§è¡ŒçŠ¶æ€çš„è¡¨ç¤º</li></ul></li></ul></li><li>è¿æ¥å™¨<ul><li>å¯¹å­˜å‚¨åŒºçš„æ•°æ®è®¿é—®</li></ul></li></ul><p>è§£é‡Šå™¨&amp;ç¼–è¯‘å™¨</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220329213103835.png" style="zoom:67%;" /></p><ul><li>è§£é‡Šå™¨çš„æ‰§â¾é€Ÿåº¦è¦æ…¢äºç¼–è¯‘å™¨äº§â½£çš„â½¬æ ‡ä»£ç çš„æ‰§â¾é€Ÿåº¦ï¼Œä½†æ˜¯å¯èƒ½ä½äºç¼–è¯‘å™¨â€œç¼–è¯‘+é“¾æ¥+æ‰§â¾â€çš„æ€»æ—¶é—´<br /></li><li>è§£æå™¨æ‰§â¾é€Ÿåº¦ä¹‹æ‰€ä»¥æ…¢ï¼Œæ˜¯å› ä¸ºæ¯æ¬¡è§£é‡Šæ‰§â¾çš„æ—¶å€™ï¼Œéƒ½éœ€è¦åˆ†æç¨‹åºçš„ç»“æ„ï¼Œâ½½ç¼–è¯‘ä»£ç åˆ™ç›´æ¥æ‰§â¾â½½â½†éœ€é‡å¤ç¼–è¯‘<br /></li><li>è§£é‡Šå™¨å¯¹å†…å­˜çš„åˆ†é…æ˜¯åœ¨è§£é‡Šæ—¶æ‰è¿›â¾çš„ï¼›â½½ç¼–è¯‘å™¨åˆ™æ˜¯åœ¨ç¼–è¯‘æ—¶è¿›â¾ï¼Œå› æ­¤è¿â¾æ—¶ç›´æ¥å°†ç¨‹åºä»£ç è£…â¼Šå†…å­˜å¹¶æ‰§â¾å³å¯</li></ul><p>è§£é‡Šå™¨ä¸­è§£é‡Šå™¨ç­–ç•¥</p><ul><li><p>ä¼ ç»Ÿè§£é‡Šå™¨ï¼ˆçº¯ç²¹çš„è§£é‡Šæ‰§è¡Œï¼‰</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220329213622694.png" style="zoom:67%;" /></p></li><li><p>åŸºäºå­—èŠ‚ç çš„è§£é‡Šå™¨ï¼ˆç¼–è¯‘<spanclass="math inline">\(\rightarrow\)</span> è§£é‡Šæ‰§è¡Œï¼‰</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220329213735554.png" style="zoom:67%;" /></p></li><li><p>(Just-in-Time)<span class="math inline">\(\ JIT\\)</span>ç¼–è¯‘å™¨ï¼ˆç¼–è¯‘||è§£é‡Šæ‰§è¡Œï¼‰</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220329213825615.png" style="zoom:67%;" /></p><p>åªæœ‰å½“æŸä¸ªå‡½æ•°è¦è¢«æ‰§â¾æ—¶ï¼Œæ‰è¢«ç¼–è¯‘ï¼›â½½ä¸”ï¼Œ <spanclass="math inline">\(JIT\)</span>å¹¶ä¸æ˜¯ç¼–è¯‘å…¨éƒ¨çš„ä»£ç ï¼Œâ½½æ˜¯åªç¼–è¯‘é‚£äº›è¢«é¢‘ç¹æ‰§â¾çš„ä»£ç æ®µã€‚</p></li></ul><h3 id="åˆ†å±‚ç»“æ„">åˆ†å±‚ç»“æ„ğŸ§´</h3><p>åœ¨å±‚æ¬¡ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿè¢«ç»„ç»‡æˆè‹¥å¹²ä¸ªå±‚æ¬¡ï¼Œæ¯ä¸ªå±‚æ¬¡ç”±ä¸€ç³»åˆ—æ„ä»¶ç»„æˆã€‚</p><ul><li>ä¸‹å±‚æ„ä»¶å‘ä¸Šå±‚æ„ä»¶æä¾›æœåŠ¡</li><li>ä¸Šå±‚æ„ä»¶çœ‹ä½œæ˜¯ä¸‹å±‚æ„ä»¶çš„å®¢æˆ·</li></ul><p>åˆ†å±‚åŸåˆ™ï¼š</p><ul><li>åˆ†ç¦»å…³æ³¨ï¼Œå°½é‡å‡å°‘åŠŸèƒ½é‡å </li><li>æŠ½è±¡ï¼Œåˆ æèŠ‚ç•™ä¸»å¹²</li><li>éšè—ï¼Œåªæš´éœ²éœ€è¦è®¿é—®çš„æ¥å£</li></ul><p>åŸºæœ¬æ„ä»¶ï¼šå„å±‚æ¬¡å†…éƒ¨åŒ…å«çš„æ„ä»¶</p><p>è¿æ¥ä»¶ï¼šå±‚é—´çš„äº¤äº’åè®®</p><p>æ‹“æ‰‘ç»“æ„ï¼šåˆ†å±‚</p><p>æ‹“æ‰‘çº¦æŸï¼šå¯¹ç›¸é‚»å±‚é—´äº¤äº’çš„çº¦æŸ</p><ul><li>é›†ä¸­å¼éƒ¨ç½²</li><li>åˆ†å¸ƒå¼éƒ¨ç½²</li></ul><p>æŸâ¼€å±‚ä¸­çš„æ„ä»¶â¼€èˆ¬åªä¸åŒâ¼€çº§åˆ«ä¸­çš„å¯¹ç­‰å®ä½“æˆ–è¾ƒä½çº§åˆ«ä¸­çš„æ„ä»¶äº¤äº’ï¼Œè¿™ç§å•å‘äº¤äº’æœ‰åŠ©äºå‡å°‘ä¸åŒçº§åˆ«ä¸­çš„æ„ä»¶ä¹‹é—´çš„ä¾èµ–æ€§ã€‚</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220330172633233.png" style="zoom:67%;" /></p><p>ä¸‰å±‚C/Sç»“æ„</p><p>åœ¨å®¢æˆ·ç«¯ä¸æ•°æ®åº“æœåŠ¡å™¨ä¹‹é—´å¢åŠ äº†â¼€ä¸ªä¸­é—´å±‚ï¼Œä¸­é—´å±‚å¯èƒ½ä¸ºï¼šäº‹åŠ¡å¤„ç†ç›‘æ§æœåŠ¡å™¨ã€æ¶ˆæ¯æœåŠ¡å™¨ã€åº”â½¤æœåŠ¡å™¨ç­‰ï¼Œä¸­é—´å±‚è´Ÿè´£æ¶ˆæ¯æ’é˜Ÿã€ä¸šåŠ¡é€»è¾‘æ‰§â¾ã€æ•°æ®ä¸­è½¬ç­‰åŠŸèƒ½ã€‚</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220330173532756.png" style="zoom:67%;" /></p><ul><li><p>è¡¨ç¤ºå±‚</p><p>ç”¨æˆ·æ¥å£éƒ¨åˆ†ï¼Œæ‹…è´Ÿç€ç”¨æˆ·ä¸åº”ç”¨ä¹‹é—´çš„å¯¹è¯åŠŸèƒ½ï¼›æ£€æŸ¥ç”¨æˆ·çš„è¾“å…¥ï¼Œæ˜¾ç¤ºåº”ç”¨çš„è¾“å‡ºï¼›é€šå¸¸ä½¿ç”¨GUIï¼›åœ¨å˜æ›´æ—¶ï¼Œåªéœ€è¦æ”¹å†™æ˜¾ç¤ºæ§åˆ¶å’Œæ•°æ®æ£€æŸ¥ç¨‹åºï¼Œè€Œä¸å½±å“å…¶ä»–å±‚ï¼›ä¸åŒ…å«æˆ–åŒ…å«ä¸€éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘ã€‚</p></li><li><p>åŠŸèƒ½å±‚</p><p>åº”ç”¨ç³»ç»Ÿçš„ä¸»ä½“ï¼ŒåŒ…æ‹¬å¤§éƒ¨åˆ†ä¸šåŠ¡å¤„ç†é€»è¾‘(é€šå¸¸ä»¥ä¸šåŠ¡æ„ä»¶çš„å½¢å¼å­˜åœ¨ï¼Œå¦‚<spanclass="math inline">\(JavaBean/EJB/COM\)</span>ç­‰)ï¼›ä»è¡¨ç¤ºå±‚è·å–ç”¨æˆ·çš„è¾“å…¥æ•°æ®å¹¶åŠ ä»¥å¤„ç†ï¼›å¤„ç†è¿‡ç¨‹ä¸­éœ€è¦ä»æ•°æ®å±‚è·å–æ•°æ®æˆ–å‘æ•°æ®å±‚æ›´æ–°æ•°æ®ï¼›å¤„ç†ç»“æœè¿”å›ç»™è¡¨ç¤ºå±‚ã€‚</p></li><li><p>æ•°æ®å±‚</p><p>DBMSï¼›æ¥å—åŠŸèƒ½å±‚çš„æ•°æ®æŸ¥è¯¢è¯·æ±‚ï¼Œæ‰§è¡Œè¯·æ±‚ï¼Œå¹¶å°†æŸ¥è¯¢ç»“æœè¿”å›ç»™åŠŸèƒ½å±‚ï¼›ä»åŠŸèƒ½å±‚æ¥å—æ•°æ®å­˜å–è¯·æ±‚ï¼Œå¹¶å°†æ•°æ®å†™å…¥æ•°æ®åº“ï¼›è¯·æ±‚çš„æ‰§è¡Œç»“æœä¹Ÿè¦è¿”å›ç»™åŠŸèƒ½å±‚ã€‚</p></li></ul><p>æµè§ˆå™¨/æœåŠ¡å™¨B/Sç»“æ„</p><p>æµè§ˆå™¨/æœåŠ¡å™¨(B/S)æ˜¯ä¸‰å±‚C/Sé£æ ¼çš„ä¸€ç§å®ç°æ–¹å¼</p><p>è¡¨ç°å±‚ï¼š</p><ul><li>æµè§ˆå™¨</li></ul><p>é€»è¾‘å±‚ï¼š</p><ul><li>WebæœåŠ¡å™¨</li><li>åº”â½¤æœåŠ¡å™¨</li></ul><p>æ•°æ®å±‚</p><ul><li>æ•°æ®åº“æœåŠ¡å™¨</li></ul><p>B/Sç»“æ„</p><ul><li>ä¼˜ç‚¹<ul><li>ç³»ç»Ÿç»´æŠ¤æˆæœ¬ä½</li><li>è¾ƒå¥½å®‰å…¨æ€§</li><li>â€œç˜¦å®¢æˆ·ç«¯â€</li><li>è‰¯å¥½çš„å®¹é”™èƒ½åŠ›å’Œè´Ÿè½½å¹³è¡¡èƒ½åŠ›</li></ul></li><li>ç¼ºç‚¹<ul><li>å®¢æˆ·ç«¯æµè§ˆå™¨ä»¥åŒæ­¥çš„è¯·æ±‚/å“åº”æ¨¡å¼äº¤æ¢æ•°æ®ï¼Œæ¯è¯·æ±‚ä¸€æ¬¡æœåŠ¡å™¨å°±è¦åˆ·æ–°ä¸€æ¬¡é¡µé¢ï¼›</li><li>å—HTTPåè®®â€œåŸºäºâ½‚æœ¬çš„æ•°æ®äº¤æ¢â€çš„é™åˆ¶ï¼Œåœ¨æ•°æ®æŸ¥è¯¢ç­‰å“åº”é€Ÿåº¦ä¸Šï¼Œè¦è¿œè¿œä½äºC/Sæ¶æ„ï¼›</li><li>æ•°æ®æäº¤ä¸€èˆ¬ä»¥é¡µé¢ä¸ºå•ä½ï¼Œæ•°æ®çš„åŠ¨æ€äº¤äº’æ€§ä¸å¼ºï¼Œä¸åˆ©äºåœ¨çº¿äº‹åŠ¡å¤„ç†(<spanclass="math inline">\(OLTP\)</span>)åº”ç”¨ï¼›</li><li>å—é™äºHTMLçš„è¡¨è¾¾èƒ½åŠ›ï¼Œéš¾ä»¥â½€æŒå¤æ‚GUI (å¦‚æŠ¥è¡¨ç­‰)ã€‚</li></ul></li></ul><h3 id="æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨mvc">æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ï¼ˆ<spanclass="math inline">\(MVC\)</span>ï¼‰ğŸŒŠ</h3><p>æ„ä»¶ï¼šæ¨¡å‹ã€è§†å›¾ã€æ§åˆ¶å™¨ã€‚</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220330194825981.png"  style="zoom:67%;" /></p><ul><li>æ¨¡å‹ï¼ˆ<span class="math inline">\(Model\)</span>ï¼‰<ul><li>è´Ÿè´£æ•°æ®å­˜å–ã€ä¸šåŠ¡é€»è¾‘å®ç°ã€æ•°æ®éªŒè¯ã€‚</li><li>åœ¨äº‹ä»¶é©±åŠ¨ç³»ç»Ÿä¸­ï¼Œå½“ä¿¡æ¯å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ¨¡å‹ä¼šé€šçŸ¥è§‚å¯Ÿè€…ï¼ˆé€šå¸¸æ˜¯è§†å›¾ï¼‰ï¼Œä»¥ä¾¿ä»–ä»¬åšå‡ºååº”ã€‚</li></ul></li><li>è§†å›¾ï¼ˆ<span class="math inline">\(View\)</span>ï¼‰<ul><li>è·å–ç”¨æˆ·è¾“å…¥ï¼Œå‘æ§åˆ¶å™¨ï¼ˆ<spanclass="math inline">\(Controller\)</span>ï¼‰å‘é€å¤„ç†è¯·æ±‚ï¼Œæ¥æ”¶æ¥è‡ªï¼ˆ<spanclass="math inline">\(Controller\)</span>ï¼‰çš„åé¦ˆå¹¶å°†æ¨¡å‹ï¼ˆ<spanclass="math inline">\(Model\)</span>ï¼‰çš„å¤„ç†ç»“æœæ˜¾ç¤ºç»™ç”¨æˆ·ã€‚</li><li>ä¸€ä¸ªæ¨¡å‹ï¼ˆ<spanclass="math inline">\(Model\)</span>ï¼‰å¯èƒ½æœ‰å¤šä¸ª</li></ul></li><li>æ§åˆ¶å™¨ï¼ˆ<span class="math inline">\(Controller\)</span>ï¼‰<ul><li>æ¥æ”¶æ¥è‡ªå®¢æˆ·çš„è¯·æ±‚ã€è°ƒç”¨æ¨¡å‹ï¼ˆ<spanclass="math inline">\(Model\)</span>ï¼‰æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œè°ƒç”¨è§†å›¾ï¼ˆ<spanclass="math inline">\(View\)</span>ï¼‰æ˜¾ç¤ºæ‰§è¡Œç»“æœ</li></ul></li></ul><p>è¿æ¥ä»¶ï¼šæ˜¾å¼è°ƒç”¨ã€éšå¼è°ƒç”¨æˆ–å…¶ä»–æœºåˆ¶ï¼ˆä¾‹å¦‚HTTPåè®®ï¼‰</p><p><span class="math inline">\(MVC\)</span></p><ul><li>ä¼˜ç‚¹<ul><li>åˆ†ç¦»ï¼ˆ<span class="math inline">\(View\)</span>ä¸<spanclass="math inline">\(Model\)</span>ã€<spanclass="math inline">\(Controller\)</span>ä¸<spanclass="math inline">\(View\)</span>ï¼‰</li><li>ä»£ç æ˜“ç»´æŠ¤</li><li>åŒä¸€ä¿¡æ¯æœ‰ä¸åŒæ˜¾ç¤ºæ–¹å¼</li><li>ä¸šåŠ¡é€»è¾‘æ›´æ˜“è°ƒè¯•</li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>è¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è½¯ä»¶æ¶æ„ä¸ä¸­é—´ä»¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaå¹¶å‘ç¼–ç¨‹å®æˆ˜ç¬”è®°ï¼ˆäºŒï¼‰</title>
    <link href="/post/d1ecf364.html"/>
    <url>/post/d1ecf364.html</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦å¯¹<ahref="https://time.geekbang.org/column/intro/100023901">Javaå¹¶å‘ç¼–ç¨‹å®æˆ˜</a>çš„å†…å®¹è¿›è¡Œæ€»ç»“</p><span id="more"></span><h1 id="javaå¹¶å‘ç¼–ç¨‹å®æˆ˜ç¬”è®°äºŒ">Javaå¹¶å‘ç¼–ç¨‹å®æˆ˜ç¬”è®°ï¼ˆäºŒï¼‰</h1><h3 id="æ­»é”">æ­»é”ğŸ˜¤</h3><p>åœ¨ä¸ŠèŠ‚ä¸­ï¼Œæˆ‘ä»¬æœ€ç»ˆä½¿ç”¨ä¸‹é¢çš„ä»£ç è§£å†³äº†å¹¶å‘å†²çªçš„é—®é¢˜</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Account</span> &#123;<br>  <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> balance;<br>  <span class="hljs-comment">// è½¬è´¦</span><br>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">transfer</span><span class="hljs-params">(Account target, <span class="hljs-type">int</span> amt)</span>&#123;<br>    <span class="hljs-keyword">synchronized</span>(Account.class) &#123;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.balance &gt; amt) &#123;<br>        <span class="hljs-built_in">this</span>.balance -= amt;<br>        target.balance += amt;<br>      &#125;<br>    &#125;<br>  &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure><p>ä½†æ˜¯è¿™ç§æ–¹æ³•ç›´æ¥ä¸²è¡ŒåŒ–äº†ï¼Œæ¯æ¬¡éƒ½ç›´æ¥å°† <code>Account</code>ç±»åŠ é”ã€‚å› ä¸ºè¦ä¸Šé”éœ€æ±‚çš„æ˜¯ <code>this</code> å’Œ <code>target</code>ï¼Œå…¶å®åªè¦ç»™å®ƒä»¬ä¸Šé”å³å¯ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220531171357136.png" /></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Account</span> &#123;<br>  <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> balance;<br>  <span class="hljs-comment">// è½¬è´¦</span><br>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">transfer</span><span class="hljs-params">(Account target, <span class="hljs-type">int</span> amt)</span>&#123;<br>    <span class="hljs-comment">// é”å®šè½¬å‡ºè´¦æˆ·</span><br>    <span class="hljs-keyword">synchronized</span>(<span class="hljs-built_in">this</span>) &#123;              <br>      <span class="hljs-comment">// é”å®šè½¬å…¥è´¦æˆ·</span><br>      <span class="hljs-keyword">synchronized</span>(target) &#123;           <br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.balance &gt; amt) &#123;<br>          <span class="hljs-built_in">this</span>.balance -= amt;<br>          target.balance += amt;<br>        &#125;<br>      &#125;<br>    &#125;<br>  &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç æ˜¯<strong>ç»†ç²’åº¦é”</strong>æ€æƒ³çš„ä½“ç°ï¼Œä½†æ˜¯ä¸Šé¢çš„ä»£ç å¯èƒ½ä¼šäº§ç”Ÿæ­»é”ã€‚</p><p>æ­»é”çš„å½¢å¼åŒ–ç†è§£ï¼šå¦‚æœæœ‰å®¢æˆ·æ‰¾æŸœå‘˜å¼ ä¸‰åšä¸ªè½¬è´¦ä¸šåŠ¡ï¼šè´¦æˆ· A è½¬è´¦æˆ· B100 å…ƒï¼Œæ­¤æ—¶å¦ä¸€ä¸ªå®¢æˆ·æ‰¾æŸœå‘˜æå››ä¹Ÿåšä¸ªè½¬è´¦ä¸šåŠ¡ï¼šè´¦æˆ· B è½¬è´¦æˆ· A 100å…ƒï¼Œäºæ˜¯å¼ ä¸‰å’Œæå››åŒæ—¶éƒ½å»æ–‡ä»¶æ¶ä¸Šæ‹¿è´¦æœ¬ï¼Œè¿™æ—¶å€™æœ‰å¯èƒ½å‡‘å·§å¼ ä¸‰æ‹¿åˆ°äº†è´¦æœ¬Aï¼Œæå››æ‹¿åˆ°äº†è´¦æœ¬ Bã€‚å¼ ä¸‰æ‹¿åˆ°è´¦æœ¬ A åå°±ç­‰ç€è´¦æœ¬ Bï¼ˆè´¦æœ¬ Bå·²ç»è¢«æå››æ‹¿èµ°ï¼‰ï¼Œè€Œæå››æ‹¿åˆ°è´¦æœ¬ B åå°±ç­‰ç€è´¦æœ¬ Aï¼ˆè´¦æœ¬ Aå·²ç»è¢«å¼ ä¸‰æ‹¿èµ°ï¼‰ï¼Œä»–ä»¬è¦ç­‰å¤šä¹…å‘¢ï¼Ÿä»–ä»¬ä¼šæ°¸è¿œç­‰å¾…ä¸‹å»ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220531172113371.png" /></p><p>æ­»é”ï¼šä¸€ç»„äº’ç›¸ç«äº‰èµ„æºçš„çº¿ç¨‹å› äº’ç›¸ç­‰å¾…ï¼Œå¯¼è‡´â€œæ°¸ä¹…â€é˜»å¡çš„ç°è±¡ã€‚</p><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå‡è®¾çº¿ç¨‹ T1 æ‰§è¡Œè´¦æˆ· A è½¬è´¦æˆ· B çš„æ“ä½œï¼Œè´¦æˆ·A.transfer(è´¦æˆ· B)ï¼›åŒæ—¶çº¿ç¨‹ T2 æ‰§è¡Œè´¦æˆ· B è½¬è´¦æˆ· A çš„æ“ä½œï¼Œè´¦æˆ·B.transfer(è´¦æˆ· A)ã€‚å½“ T1 å’Œ T2 åŒæ—¶æ‰§è¡Œå®Œ<code>synchronized(this)</code> æ—¶ï¼ŒT1 è·å¾—äº†è´¦æˆ· A çš„é”ï¼ˆå¯¹äº T1ï¼Œthisæ˜¯è´¦æˆ· Aï¼‰ï¼Œè€Œ T2 è·å¾—äº†è´¦æˆ· B çš„é”ï¼ˆå¯¹äº T2ï¼Œthis æ˜¯è´¦æˆ· Bï¼‰ã€‚ä¹‹å T1å’Œ T2 åœ¨æ‰§è¡Œ <code>synchronized(target)</code> æ—¶ï¼ŒT1 è¯•å›¾è·å–è´¦æˆ· Bçš„é”æ—¶ï¼Œå‘ç°è´¦æˆ· B å·²ç»è¢«é”å®šï¼ˆè¢« T2 é”å®šï¼‰ï¼Œæ‰€ä»¥ T1 å¼€å§‹ç­‰å¾…ï¼›T2åˆ™è¯•å›¾è·å–è´¦æˆ· A çš„é”æ—¶ï¼Œå‘ç°è´¦æˆ· A å·²ç»è¢«é”å®šï¼ˆè¢« T1 é”å®šï¼‰ï¼Œæ‰€ä»¥ T2ä¹Ÿå¼€å§‹ç­‰å¾…ã€‚äºæ˜¯ T1 å’Œ T2ä¼šæ— æœŸé™åœ°ç­‰å¾…ä¸‹å»ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„æ­»é”äº†ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220531172446337.png" /></p><p>æ­»é”è§£å†³æ–¹æ³•ï¼šè§„é¿æ­»é”ã€‚</p><p>æ­»é”äº§ç”Ÿæ¡ä»¶ï¼š</p><ol type="1"><li>äº’æ–¥ï¼Œå…±äº«èµ„æº X å’Œ Y åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹å ç”¨ï¼›</li><li>å æœ‰ä¸”ç­‰å¾…ï¼Œçº¿ç¨‹ T1 å·²ç»å–å¾—å…±äº«èµ„æº Xï¼Œåœ¨ç­‰å¾…å…±äº«èµ„æº Yçš„æ—¶å€™ï¼Œä¸é‡Šæ”¾å…±äº«èµ„æº Xï¼›</li><li>ä¸å¯æŠ¢å ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½å¼ºè¡ŒæŠ¢å çº¿ç¨‹ T1 å æœ‰çš„èµ„æºï¼›</li><li>å¾ªç¯ç­‰å¾…ï¼Œçº¿ç¨‹ T1 ç­‰å¾…çº¿ç¨‹ T2 å æœ‰çš„èµ„æºï¼Œçº¿ç¨‹ T2 ç­‰å¾…çº¿ç¨‹ T1å æœ‰çš„èµ„æºï¼Œå°±æ˜¯å¾ªç¯ç­‰å¾…ã€‚</li></ol><p>æˆ‘ä»¬åªè¦ç ´åå…¶ä¸­ä¸€ä¸ªï¼Œå°±å¯ä»¥æˆåŠŸé¿å…æ­»é”çš„å‘ç”Ÿã€‚ã€å…¶ä¸­ç¬¬ä¸€ä¸ªæ¡ä»¶æ— æ³•ç ´åã€‘</p><ul><li><p>ç ´åæ¡ä»¶2 ã€å ç”¨ä¸”ç­‰å¾…ã€‘</p><p>â€œä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æºâ€ã€‚</p><p>å¢åŠ ä¸€ä¸ªè´¦æœ¬ç®¡ç†å‘˜ï¼Œç„¶ååªå…è®¸è´¦æœ¬ç®¡ç†å‘˜ä»æ–‡ä»¶æ¶ä¸Šæ‹¿è´¦æœ¬ï¼Œä¹Ÿå°±æ˜¯è¯´æŸœå‘˜ä¸èƒ½ç›´æ¥åœ¨æ–‡ä»¶æ¶ä¸Šæ‹¿è´¦æœ¬ï¼Œå¿…é¡»é€šè¿‡è´¦æœ¬ç®¡ç†å‘˜æ‰èƒ½æ‹¿åˆ°æƒ³è¦çš„è´¦æœ¬ã€‚ä¾‹å¦‚ï¼Œå¼ ä¸‰åŒæ—¶ç”³è¯·è´¦æœ¬A å’Œ Bï¼Œè´¦æœ¬ç®¡ç†å‘˜å¦‚æœå‘ç°æ–‡ä»¶æ¶ä¸Šåªæœ‰è´¦æœ¬Aï¼Œè¿™ä¸ªæ—¶å€™è´¦æœ¬ç®¡ç†å‘˜æ˜¯ä¸ä¼šæŠŠè´¦æœ¬ A æ‹¿ä¸‹æ¥ç»™å¼ ä¸‰çš„ï¼Œåªæœ‰è´¦æœ¬ A å’Œ Béƒ½åœ¨çš„æ—¶å€™æ‰ä¼šç»™å¼ ä¸‰ã€‚è¿™æ ·å°±ä¿è¯äº†â€œä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æºâ€ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220601093708121.png" /></p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Allocator</span> &#123;<br>  <span class="hljs-keyword">private</span> List&lt;Object&gt; als = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>    <br>  <span class="hljs-comment">// ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æº</span><br>  <span class="hljs-keyword">synchronized</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">apply</span><span class="hljs-params">(Object from, Object to)</span>&#123;<br>    <span class="hljs-keyword">if</span>(als.contains(from) &amp;&amp; als.contains(to))&#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;  <br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      als.add(from);<br>      als.add(to);  <br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>  &#125;<br>    <br>  <span class="hljs-comment">// å½’è¿˜èµ„æº</span><br>  <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">free</span><span class="hljs-params">(Object from, Object to)</span>&#123;<br>    als.remove(from);<br>    als.remove(to);<br>  &#125;<br>&#125;<br> <br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Account</span> &#123;<br>  <span class="hljs-comment">// actr åº”è¯¥ä¸ºå•ä¾‹</span><br>  <span class="hljs-keyword">private</span> Allocator actr;<br>  <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> balance;<br>  <span class="hljs-comment">// è½¬è´¦</span><br>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">transfer</span><span class="hljs-params">(Account target, <span class="hljs-type">int</span> amt)</span>&#123;<br>    <span class="hljs-comment">// ä¸€æ¬¡æ€§ç”³è¯·è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·ï¼Œç›´åˆ°æˆåŠŸ</span><br>    <span class="hljs-keyword">while</span>(!actr.apply(<span class="hljs-built_in">this</span>, target));<br>    <span class="hljs-keyword">try</span>&#123;<br>      <span class="hljs-comment">// é”å®šè½¬å‡ºè´¦æˆ·</span><br>      <span class="hljs-keyword">synchronized</span>(<span class="hljs-built_in">this</span>)&#123;              <br>        <span class="hljs-comment">// é”å®šè½¬å…¥è´¦æˆ·</span><br>        <span class="hljs-keyword">synchronized</span>(target)&#123;           <br>          <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.balance &gt; amt)&#123;<br>            <span class="hljs-built_in">this</span>.balance -= amt;<br>            target.balance += amt;<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>      actr.free(<span class="hljs-built_in">this</span>, target)<br>    &#125;<br>  &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure><p>Allocatoræœ‰ä¸¤ä¸ªé‡è¦åŠŸèƒ½ï¼Œåˆ†åˆ«æ˜¯ï¼šåŒæ—¶ç”³è¯·èµ„æº apply() å’ŒåŒæ—¶é‡Šæ”¾èµ„æºfree()ã€‚è´¦æˆ· Account ç±»é‡Œé¢æŒæœ‰ä¸€ä¸ª Allocatorçš„å•ä¾‹ï¼ˆå¿…é¡»æ˜¯å•ä¾‹ï¼Œåªèƒ½ç”±ä¸€ä¸ªäººæ¥åˆ†é…èµ„æºï¼‰ã€‚å½“è´¦æˆ· Accountåœ¨æ‰§è¡Œè½¬è´¦æ“ä½œçš„æ—¶å€™ï¼Œé¦–å…ˆå‘ AllocatoråŒæ—¶ç”³è¯·è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·è¿™ä¸¤ä¸ªèµ„æºï¼ŒæˆåŠŸåå†é”å®šè¿™ä¸¤ä¸ªèµ„æºï¼›å½“è½¬è´¦æ“ä½œæ‰§è¡Œå®Œï¼Œé‡Šæ”¾é”ä¹‹åï¼Œæˆ‘ä»¬éœ€é€šçŸ¥Allocator åŒæ—¶é‡Šæ”¾è½¬å‡ºè´¦æˆ·å’Œè½¬å…¥è´¦æˆ·è¿™ä¸¤ä¸ªèµ„æºã€‚</p></li><li><p>ç ´åæ¡ä»¶3 ã€ä¸å¯æŠ¢å ã€‘</p><p>é€šè¿‡Lockè¿›è¡Œå®ç°ã€‚</p></li><li><p>ç ´åæ¡ä»¶4 ã€å¾ªç¯ç­‰å¾…ã€‘</p><p>ç ´åè¿™ä¸ªæ¡ä»¶ï¼Œéœ€è¦å¯¹èµ„æºè¿›è¡Œæ’åºï¼Œç„¶åæŒ‰åºç”³è¯·èµ„æºã€‚</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Account</span> &#123;<br>  <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;<br>  <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> balance;<br>  <span class="hljs-comment">// è½¬è´¦</span><br>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">transfer</span><span class="hljs-params">(Account target, <span class="hljs-type">int</span> amt)</span>&#123;<br>    <span class="hljs-type">Account</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>        <br>    <span class="hljs-type">Account</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> target;    <br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.id &gt; target.id) &#123;<br>      left = target;          <br>      right = <span class="hljs-built_in">this</span>;           <br>    &#125;                         <br>    <span class="hljs-comment">// é”å®šåºå·å°çš„è´¦æˆ·</span><br>    <span class="hljs-keyword">synchronized</span>(left)&#123;<br>      <span class="hljs-comment">// é”å®šåºå·å¤§çš„è´¦æˆ·</span><br>      <span class="hljs-keyword">synchronized</span>(right)&#123; <br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.balance &gt; amt)&#123;<br>          <span class="hljs-built_in">this</span>.balance -= amt;<br>          target.balance += amt;<br>        &#125;<br>      &#125;<br>    &#125;<br>  &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure><p>ã€å‡è®¾æ¯ä¸ªè´¦æˆ·æœ‰ä¸åŒå±æ€§idï¼Œå¯ä»¥ä½œä¸ºæ’åºå­—æ®µã€‘</p></li></ul><h3 id="ç­‰å¾…-é€šçŸ¥æœºåˆ¶">ç­‰å¾…-é€šçŸ¥æœºåˆ¶ğŸ„</h3><p>å¦‚æœä½¿ç”¨æ­»å¾ªç¯ç­‰å¾…çš„æ–¹å¼å¯èƒ½ä¼šæ¶ˆè€—å¤§é‡èµ„æºï¼Œå¦‚ä¸Šæ–‡ä¸­ç ´åæ¡ä»¶2ã€å ç”¨ä¸”ç­‰å¾…ã€‘ä»£ç  <code>while(!actr.apply(this, target));</code>å°±æ˜¯é‡‡ç”¨è¿™ç§æ–¹å¼è·å–å…¨éƒ¨èµ„æºï¼Œè€Œæœ€å¥½çš„æ–¹æ¡ˆåº”è¯¥æ˜¯ï¼šå¦‚æœçº¿ç¨‹è¦æ±‚çš„æ¡ä»¶ï¼ˆè½¬å‡ºè´¦æœ¬å’Œè½¬å…¥è´¦æœ¬åŒåœ¨æ–‡ä»¶æ¶ä¸Šï¼‰ä¸æ»¡è¶³ï¼Œåˆ™çº¿ç¨‹é˜»å¡è‡ªå·±ï¼Œè¿›å…¥<strong>ç­‰å¾…</strong>çŠ¶æ€ï¼›å½“çº¿ç¨‹è¦æ±‚çš„æ¡ä»¶ï¼ˆè½¬å‡ºè´¦æœ¬å’Œè½¬å…¥è´¦æœ¬åŒåœ¨æ–‡ä»¶æ¶ä¸Šï¼‰æ»¡è¶³åï¼Œ<strong>é€šçŸ¥</strong>ç­‰å¾…çš„çº¿ç¨‹é‡æ–°æ‰§è¡Œã€‚å…¶ä¸­ï¼Œä½¿ç”¨çº¿ç¨‹é˜»å¡çš„æ–¹å¼å°±èƒ½é¿å…å¾ªç¯ç­‰å¾…æ¶ˆè€—CPU çš„é—®é¢˜ã€‚</p><p>ä¸€ä¸ªå®Œæ•´çš„ç­‰å¾… -é€šçŸ¥æœºåˆ¶ï¼šçº¿ç¨‹é¦–å…ˆè·å–äº’æ–¥é”ï¼Œå½“çº¿ç¨‹è¦æ±‚çš„æ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œé‡Šæ”¾äº’æ–¥é”ï¼Œè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼›å½“è¦æ±‚çš„æ¡ä»¶æ»¡è¶³æ—¶ï¼Œé€šçŸ¥ç­‰å¾…çš„çº¿ç¨‹ï¼Œé‡æ–°è·å–äº’æ–¥é”ã€‚</p><p>waitæ“ä½œï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220601100532404.png" /></p><p>ç­‰å¾…é˜Ÿåˆ—å’Œäº’æ–¥é”æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œæ¯ä¸ªäº’æ–¥é”éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ç­‰å¾…é˜Ÿåˆ—ã€‚</p><p>å½“è°ƒç”¨ wait()æ–¹æ³•åï¼Œå½“å‰çº¿ç¨‹å°±ä¼šè¢«é˜»å¡ï¼Œå¹¶ä¸”è¿›å…¥åˆ°å³è¾¹çš„ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œè¿™ä¸ªç­‰å¾…é˜Ÿåˆ—ä¹Ÿæ˜¯äº’æ–¥é”çš„ç­‰å¾…é˜Ÿåˆ—ã€‚çº¿ç¨‹åœ¨è¿›å…¥ç­‰å¾…é˜Ÿåˆ—çš„åŒæ—¶ï¼Œä¼šé‡Šæ”¾æŒæœ‰çš„äº’æ–¥é”ï¼Œçº¿ç¨‹é‡Šæ”¾é”åï¼Œå…¶ä»–çº¿ç¨‹å°±æœ‰æœºä¼šè·å¾—é”ï¼Œå¹¶è¿›å…¥ä¸´ç•ŒåŒºäº†ã€‚</p><p>notifyæ“ä½œï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220601100812886.png" /></p><p>å½“æ¡ä»¶æ»¡è¶³æ—¶è°ƒç”¨notify()ï¼Œä¼šé€šçŸ¥ç­‰å¾…é˜Ÿåˆ—ï¼ˆäº’æ–¥é”çš„ç­‰å¾…é˜Ÿåˆ—ï¼‰ä¸­çš„çº¿ç¨‹ï¼Œå‘Šè¯‰å®ƒæ¡ä»¶<strong>æ›¾ç»æ»¡è¶³è¿‡</strong>ã€‚<strong>notify()åªèƒ½ä¿è¯åœ¨é€šçŸ¥æ—¶é—´ç‚¹ï¼Œæ¡ä»¶æ˜¯æ»¡è¶³çš„</strong>ã€‚è€Œè¢«é€šçŸ¥çº¿ç¨‹çš„<strong>æ‰§è¡Œæ—¶é—´ç‚¹å’Œé€šçŸ¥çš„æ—¶é—´ç‚¹</strong>åŸºæœ¬ä¸Šä¸ä¼šé‡åˆï¼Œæ‰€ä»¥å½“çº¿ç¨‹æ‰§è¡Œçš„æ—¶å€™ï¼Œå¾ˆå¯èƒ½æ¡ä»¶å·²ç»ä¸æ»¡è¶³äº†ï¼ˆä¿ä¸é½æœ‰å…¶ä»–çº¿ç¨‹æ’é˜Ÿï¼‰ã€‚</p><p>è¢«é€šçŸ¥çš„çº¿ç¨‹è¦æƒ³é‡æ–°æ‰§è¡Œï¼Œä»ç„¶éœ€è¦è·å–åˆ°äº’æ–¥é”ï¼ˆå› ä¸ºæ›¾ç»è·å–çš„é”åœ¨è°ƒç”¨wait() æ—¶å·²ç»é‡Šæ”¾äº†ï¼‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Allocator</span> &#123;<br>  <span class="hljs-keyword">private</span> List&lt;Object&gt; als = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>    <br>  <span class="hljs-comment">// ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æº</span><br>  <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">apply</span><span class="hljs-params">(Object from, Object to)</span>&#123;<br>    <span class="hljs-keyword">while</span>(als.contains(from) &amp;&amp; als.contains(to))&#123;<br>      wait();<br>    &#125;<br>    als.add(from);<br>    als.add(to);<br>  &#125;<br><br>  <span class="hljs-comment">// å½’è¿˜èµ„æº</span><br>  <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">free</span><span class="hljs-params">(Object from, Object to)</span>&#123;<br>    als.remove(from);<br>    als.remove(to);<br>    notifyAll();<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>å°½é‡ä½¿ç”¨ <code>notifyAll</code> è€Œä¸æ˜¯ <code>notify</code> ï¼Œä½¿ç”¨<code>notify</code>å¾ˆæœ‰é£é™©ï¼Œå®ƒçš„é£é™©åœ¨äºå¯èƒ½å¯¼è‡´æŸäº›çº¿ç¨‹æ°¸è¿œä¸ä¼šè¢«é€šçŸ¥åˆ°ã€‚</p><p>å‡è®¾æˆ‘ä»¬æœ‰èµ„æº Aã€Bã€Cã€Dï¼Œçº¿ç¨‹ 1 ç”³è¯·åˆ°äº† ABï¼Œçº¿ç¨‹ 2 ç”³è¯·åˆ°äº†CDï¼Œæ­¤æ—¶çº¿ç¨‹ 3 ç”³è¯· ABï¼Œä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼ˆAB åˆ†é…ç»™çº¿ç¨‹ 1ï¼Œçº¿ç¨‹ 3è¦æ±‚çš„æ¡ä»¶ä¸æ»¡è¶³ï¼‰ï¼Œçº¿ç¨‹ 4 ç”³è¯· CD ä¹Ÿä¼šè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚æˆ‘ä»¬å†å‡è®¾ä¹‹åçº¿ç¨‹1 å½’è¿˜äº†èµ„æº ABï¼Œå¦‚æœä½¿ç”¨ <code>notify</code>æ¥é€šçŸ¥ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹ï¼Œæœ‰å¯èƒ½è¢«é€šçŸ¥çš„æ˜¯çº¿ç¨‹ 4ï¼Œä½†çº¿ç¨‹ 4 ç”³è¯·çš„æ˜¯CDï¼Œæ‰€ä»¥æ­¤æ—¶çº¿ç¨‹ 4 è¿˜æ˜¯ä¼šç»§ç»­ç­‰å¾…ï¼Œè€ŒçœŸæ­£è¯¥å”¤é†’çš„çº¿ç¨‹ 3å°±å†ä¹Ÿæ²¡æœ‰æœºä¼šè¢«å”¤é†’äº†ã€‚</p><h3 id="å®‰å…¨æ€§æ´»è·ƒæ€§ä»¥åŠæ€§èƒ½é—®é¢˜">å®‰å…¨æ€§ã€æ´»è·ƒæ€§ä»¥åŠæ€§èƒ½é—®é¢˜ğŸ“±</h3><h4 id="å®‰å…¨æ€§é—®é¢˜">å®‰å…¨æ€§é—®é¢˜ğŸ”«</h4><p>ç†è®ºä¸Šçº¿ç¨‹å®‰å…¨çš„ç¨‹åºï¼Œå°±è¦é¿å…å‡ºç°åŸå­æ€§é—®é¢˜ã€å¯è§æ€§é—®é¢˜å’Œæœ‰åºæ€§é—®é¢˜ã€‚</p><p>å­˜åœ¨å®‰å…¨æ€§é—®é¢˜çš„åœºæ™¯ï¼š<strong>å­˜åœ¨å…±äº«æ•°æ®å¹¶ä¸”è¯¥æ•°æ®ä¼šå‘ç”Ÿå˜åŒ–ï¼Œé€šä¿—åœ°è®²å°±æ˜¯æœ‰å¤šä¸ªçº¿ç¨‹ä¼šåŒæ—¶è¯»å†™åŒä¸€æ•°æ®</strong>ã€‚</p><p>æ•°æ®ç«äº‰ï¼šå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€æ•°æ®ï¼Œå¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ä¼šå†™è¿™ä¸ªæ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬ä¸é‡‡å–é˜²æŠ¤æªæ–½ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´å¹¶å‘Bugã€‚</p><p>ç«æ€æ¡ä»¶ï¼šç¨‹åºçš„æ‰§è¡Œç»“æœä¾èµ–çº¿ç¨‹æ‰§è¡Œçš„é¡ºåºã€‚å¦‚æœç¨‹åºå­˜åœ¨ç«æ€æ¡ä»¶é—®é¢˜ï¼Œé‚£å°±æ„å‘³ç€ç¨‹åºæ‰§è¡Œçš„ç»“æœæ˜¯ä¸ç¡®å®šçš„ï¼Œè€Œæ‰§è¡Œç»“æœä¸ç¡®å®šè¿™å¯æ˜¯ä¸ªå¤§Bugã€‚</p><p>è½¬è´¦æ“ä½œé‡Œé¢æœ‰ä¸ªåˆ¤æ–­æ¡ä»¶ â€”â€”è½¬å‡ºé‡‘é¢ä¸èƒ½å¤§äºè´¦æˆ·ä½™é¢ï¼Œä½†åœ¨å¹¶å‘ç¯å¢ƒé‡Œé¢ï¼Œå¦‚æœä¸åŠ æ§åˆ¶ï¼Œå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€ä¸ªè´¦å·æ‰§è¡Œè½¬å‡ºæ“ä½œæ—¶ï¼Œå°±æœ‰å¯èƒ½å‡ºç°è¶…é¢è½¬å‡ºé—®é¢˜ã€‚å‡è®¾è´¦æˆ·A æœ‰ä½™é¢ 200ï¼Œçº¿ç¨‹ 1 å’Œçº¿ç¨‹ 2 éƒ½è¦ä»è´¦æˆ· A è½¬å‡º150ï¼Œåœ¨ä¸‹é¢çš„ä»£ç é‡Œï¼Œæœ‰å¯èƒ½çº¿ç¨‹ 1 å’Œçº¿ç¨‹ 2 åŒæ—¶æ‰§è¡Œåˆ°ç¬¬ 6 è¡Œï¼Œè¿™æ ·çº¿ç¨‹ 1å’Œçº¿ç¨‹ 2 éƒ½ä¼šå‘ç°è½¬å‡ºé‡‘é¢ 150 å°äºè´¦æˆ·ä½™é¢200ï¼Œäºæ˜¯å°±ä¼šå‘ç”Ÿè¶…é¢è½¬å‡ºçš„æƒ…å†µã€‚</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Account</span> &#123;<br>  <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> balance;<br>  <span class="hljs-comment">// è½¬è´¦</span><br>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">transfer</span><span class="hljs-params">(Account target, <span class="hljs-type">int</span> amt)</span>&#123;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.balance &gt; amt) &#123;<br>          <span class="hljs-built_in">this</span>.balance -= amt;<br>          target.balance += amt;<br>      &#125;<br>   &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure><p>ç±»ä¼¼ä¸‹é¢ï¼š</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (çŠ¶æ€å˜é‡ æ»¡è¶³ æ‰§è¡Œæ¡ä»¶) &#123;<br>  æ‰§è¡Œæ“ä½œ<br>&#125;<br></code></pre></div></td></tr></table></figure><p>å½“æŸä¸ªçº¿ç¨‹å‘ç°çŠ¶æ€å˜é‡æ»¡è¶³æ‰§è¡Œæ¡ä»¶åï¼Œå¼€å§‹æ‰§è¡Œæ“ä½œï¼›å¯æ˜¯å°±åœ¨è¿™ä¸ªçº¿ç¨‹æ‰§è¡Œæ“ä½œçš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹åŒæ—¶ä¿®æ”¹äº†çŠ¶æ€å˜é‡ï¼Œå¯¼è‡´çŠ¶æ€å˜é‡ä¸æ»¡è¶³æ‰§è¡Œæ¡ä»¶äº†ã€‚</p><p>é¢å¯¹æ•°æ®ç«äº‰å’Œç«æ€æ¡ä»¶é—®é¢˜ï¼Œéƒ½å¯ä»¥ç”¨<strong>äº’æ–¥</strong>è¿™ä¸ªæŠ€æœ¯æ–¹æ¡ˆï¼Œè€Œå®ç°<strong>äº’æ–¥</strong>çš„æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼Œä»é€»è¾‘ä¸Šæ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥ç»Ÿä¸€å½’ä¸ºï¼š<strong>é”</strong>ã€‚</p><h4 id="æ´»è·ƒæ€§é—®é¢˜">æ´»è·ƒæ€§é—®é¢˜ğŸª”</h4><p>æ´»è·ƒæ€§é—®é¢˜ï¼ŒæŒ‡çš„æ˜¯æŸä¸ªæ“ä½œæ— æ³•æ‰§è¡Œä¸‹å»ã€‚ä¸»è¦æœ‰ä¸‰ç§ï¼šæ­»é”ã€æ´»é”ã€é¥¥é¥¿ã€‚</p><ul><li><p>æ­»é”</p><p>çº¿ç¨‹æ°¸ä¹…åœ°â€œé˜»å¡â€äº†ã€‚</p></li><li><p>æ´»é”</p><p>æœ‰æ—¶çº¿ç¨‹è™½ç„¶æ²¡æœ‰å‘ç”Ÿé˜»å¡ï¼Œä½†ä»ç„¶ä¼šå­˜åœ¨æ‰§è¡Œä¸ä¸‹å»çš„æƒ…å†µã€‚æ¯”å¦‚ï¼šè·¯äººç”²ä»å·¦æ‰‹è¾¹å‡ºé—¨ï¼Œè·¯äººä¹™ä»å³æ‰‹è¾¹è¿›é—¨ï¼Œä¸¤äººä¸ºäº†ä¸ç›¸æ’ï¼Œäº’ç›¸è°¦è®©ï¼Œè·¯äººç”²è®©è·¯èµ°å³æ‰‹è¾¹ï¼Œè·¯äººä¹™ä¹Ÿè®©è·¯èµ°å·¦æ‰‹è¾¹ï¼Œç»“æœæ˜¯ä¸¤äººåˆç›¸æ’äº†ã€‚å¦‚æœè¿™ç§æƒ…å†µå‘ç”Ÿåœ¨ç¼–ç¨‹ä¸–ç•Œäº†ï¼Œå°±æœ‰å¯èƒ½ä¼šä¸€ç›´æ²¡å®Œæ²¡äº†åœ°â€œè°¦è®©â€ä¸‹å»ï¼Œæˆä¸ºæ²¡æœ‰å‘ç”Ÿé˜»å¡ä½†ä¾ç„¶æ‰§è¡Œä¸ä¸‹å»çš„â€œæ´»é”â€ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><p>è°¦è®©æ—¶ï¼Œå°è¯•ç­‰å¾…ä¸€ä¸ªéšæœºçš„æ—¶é—´å°±å¯ä»¥äº†ã€‚ä¾‹å¦‚ä¸Šé¢çš„é‚£ä¸ªä¾‹å­ï¼Œè·¯äººç”²èµ°å·¦æ‰‹è¾¹å‘ç°å‰é¢æœ‰äººï¼Œå¹¶ä¸æ˜¯ç«‹åˆ»æ¢åˆ°å³æ‰‹è¾¹ï¼Œè€Œæ˜¯ç­‰å¾…ä¸€ä¸ªéšæœºçš„æ—¶é—´åï¼Œå†æ¢åˆ°å³æ‰‹è¾¹ï¼›åŒæ ·ï¼Œè·¯äººä¹™ä¹Ÿä¸æ˜¯ç«‹åˆ»åˆ‡æ¢è·¯çº¿ï¼Œä¹Ÿæ˜¯ç­‰å¾…ä¸€ä¸ªéšæœºçš„æ—¶é—´å†åˆ‡æ¢ã€‚ç”±äºè·¯äººç”²å’Œè·¯äººä¹™ç­‰å¾…çš„æ—¶é—´æ˜¯éšæœºçš„ï¼Œæ‰€ä»¥åŒæ—¶ç›¸æ’åå†æ¬¡ç›¸æ’çš„æ¦‚ç‡å°±å¾ˆä½äº†ã€‚</p><p><code>Raft ä¸­ä½¿ç”¨è¿™ç§æ€æƒ³è§£å†³æ´»é”é—®é¢˜ã€‚</code></p></li><li><p>é¥¥é¥¿</p><p>çº¿ç¨‹å› æ— æ³•è®¿é—®æ‰€éœ€èµ„æºè€Œæ— æ³•æ‰§è¡Œä¸‹å»çš„æƒ…å†µã€‚â€œä¸æ‚£å¯¡ï¼Œè€Œæ‚£ä¸å‡â€ï¼Œå¦‚æœçº¿ç¨‹ä¼˜å…ˆçº§â€œä¸å‡â€ï¼Œåœ¨CPUç¹å¿™çš„æƒ…å†µä¸‹ï¼Œä¼˜å…ˆçº§ä½çš„çº¿ç¨‹å¾—åˆ°æ‰§è¡Œçš„æœºä¼šå¾ˆå°ï¼Œå°±å¯èƒ½å‘ç”Ÿçº¿ç¨‹â€œé¥¥é¥¿â€ï¼›æŒæœ‰é”çš„çº¿ç¨‹ï¼Œå¦‚æœæ‰§è¡Œçš„æ—¶é—´è¿‡é•¿ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´â€œé¥¥é¥¿â€é—®é¢˜ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>ä¿è¯èµ„æºå……è¶³</li><li>å…¬å¹³åœ°åˆ†é…èµ„æº</li><li>é¿å…æŒæœ‰é”çš„çº¿ç¨‹é•¿æ—¶é—´æ‰§è¡Œ</li></ul><p><code>ä¸€èˆ¬ä½¿ç”¨æ–¹æ³•äºŒã€‚</code>å…¬å¹³é”ï¼šä¸€ç§å…ˆæ¥ååˆ°çš„æ–¹æ¡ˆï¼Œçº¿ç¨‹çš„ç­‰å¾…æ˜¯æœ‰é¡ºåºçš„ï¼Œæ’åœ¨ç­‰å¾…é˜Ÿåˆ—å‰é¢çš„çº¿ç¨‹ä¼šä¼˜å…ˆè·å¾—èµ„æºã€‚</p></li></ul><h4 id="æ€§èƒ½é—®é¢˜">æ€§èƒ½é—®é¢˜ğŸ’¨</h4><p>â€œé”â€çš„è¿‡åº¦ä½¿ç”¨å¯èƒ½å¯¼è‡´ä¸²è¡ŒåŒ–çš„èŒƒå›´è¿‡å¤§ï¼Œè¿™æ ·å°±ä¸èƒ½å¤Ÿå‘æŒ¥å¤šçº¿ç¨‹çš„ä¼˜åŠ¿äº†ã€‚</p><p><span class="math inline">\(S=\frac{1}{(1-p)+\frac{p}{n}}\)</span>ï¼Œå…¶ä¸­ S è¡¨ç¤ºå¤„ç†å™¨å¹¶è¡Œè¿ç®—ä¹‹åæ•ˆç‡æå‡çš„èƒ½åŠ›ï¼Œn å¯ä»¥ç†è§£ä¸º CPUçš„æ ¸æ•°ï¼Œp å¯ä»¥ç†è§£ä¸ºå¹¶è¡Œç™¾åˆ†æ¯”ï¼Œæ¯”å¦‚ä¸²è¡Œç‡ä¸º 5 % ï¼Œå‡è®¾ n â†’+âˆï¼Œæ— è®ºé‡‡ç”¨ä»€ä¹ˆæŠ€æœ¯ï¼Œæœ€é«˜ä¹Ÿå°±åªèƒ½æé«˜ 20 å€çš„æ€§èƒ½ã€‚</p><p>é¿å…é”å¸¦æ¥çš„æ€§èƒ½é—®é¢˜è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>ä½¿ç”¨æ— é”çš„ç®—æ³•å’Œæ•°æ®ç»“æ„äº†ã€‚åœ¨è¿™æ–¹é¢æœ‰å¾ˆå¤šç›¸å…³çš„æŠ€æœ¯ï¼Œä¾‹å¦‚çº¿ç¨‹æœ¬åœ°å­˜å‚¨(Thread Local Storage, TLS)ã€å†™å…¥æ—¶å¤åˆ¶ (Copy-on-write)ã€ä¹è§‚é”ç­‰ï¼›Javaå¹¶å‘åŒ…é‡Œé¢çš„åŸå­ç±»ä¹Ÿæ˜¯ä¸€ç§æ— é”çš„æ•°æ®ç»“æ„ï¼›Disruptoråˆ™æ˜¯ä¸€ä¸ªæ— é”çš„å†…å­˜é˜Ÿåˆ—</li><li>å‡å°‘é”æŒæœ‰çš„æ—¶é—´ã€‚äº’æ–¥é”æœ¬è´¨ä¸Šæ˜¯å°†å¹¶è¡Œçš„ç¨‹åºä¸²è¡ŒåŒ–ï¼Œæ‰€ä»¥è¦å¢åŠ å¹¶è¡Œåº¦ï¼Œä¸€å®šè¦å‡å°‘æŒæœ‰é”çš„æ—¶é—´ã€‚è¿™ä¸ªæ–¹æ¡ˆå…·ä½“çš„å®ç°æŠ€æœ¯ä¹Ÿæœ‰å¾ˆå¤šï¼Œä¾‹å¦‚ä½¿ç”¨ç»†ç²’åº¦çš„é”ï¼Œä¸€ä¸ªå…¸å‹çš„ä¾‹å­å°±æ˜¯Javaå¹¶å‘åŒ…é‡Œçš„ConcurrentHashMapï¼Œå®ƒä½¿ç”¨äº†åˆ†æ®µé”çš„æŠ€æœ¯ï¼›è¿˜å¯ä»¥ä½¿ç”¨è¯»å†™é”ï¼Œä¹Ÿå°±æ˜¯è¯»æ˜¯æ— é”çš„ï¼Œåªæœ‰å†™çš„æ—¶å€™æ‰ä¼šäº’æ–¥ã€‚</li></ul><h3 id="ç®¡ç¨‹">ç®¡ç¨‹ğŸ’Œ</h3><p>ç®¡ç¨‹ï¼ŒæŒ‡çš„æ˜¯ç®¡ç†å…±äº«å˜é‡ä»¥åŠå¯¹å…±äº«å˜é‡çš„æ“ä½œè¿‡ç¨‹ï¼Œè®©ä»–ä»¬æ”¯æŒå¹¶å‘ã€‚</p><h4 id="mesa-æ¨¡å‹">MESA æ¨¡å‹ğŸ’˜</h4><p>åœ¨å¹¶å‘ç¼–ç¨‹é¢†åŸŸï¼Œæœ‰ä¸¤å¤§æ ¸å¿ƒé—®é¢˜ï¼šä¸€ä¸ªæ˜¯<strong>äº’æ–¥</strong>ï¼Œå³åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®å…±äº«èµ„æºï¼›å¦ä¸€ä¸ªæ˜¯<strong>åŒæ­¥</strong>ï¼Œå³çº¿ç¨‹ä¹‹é—´å¦‚ä½•é€šä¿¡ã€åä½œã€‚</p><p>è§£å†³äº’æ–¥ï¼šå°†å…±äº«å˜é‡åŠå…¶å¯¹å…±äº«å˜é‡çš„æ“ä½œç»Ÿä¸€å°è£…èµ·æ¥ã€‚åœ¨ä¸‹å›¾ä¸­ï¼Œç®¡ç¨‹X å°†å…±äº«å˜é‡ queue è¿™ä¸ªé˜Ÿåˆ—å’Œç›¸å…³çš„æ“ä½œå…¥é˜Ÿ enq()ã€å‡ºé˜Ÿ deq()éƒ½å°è£…èµ·æ¥äº†ï¼›çº¿ç¨‹ A å’Œçº¿ç¨‹ B å¦‚æœæƒ³è®¿é—®å…±äº«å˜é‡queueï¼Œåªèƒ½é€šè¿‡è°ƒç”¨ç®¡ç¨‹æä¾›çš„ enq()ã€deq() æ–¹æ³•æ¥å®ç°ï¼›enq()ã€deq()ä¿è¯äº’æ–¥æ€§ï¼Œåªå…è®¸ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ç®¡ç¨‹ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220602194307093.png" /></p><p>è§£å†³åŒæ­¥ï¼šå…±äº«å˜é‡å’Œå¯¹å…±äº«å˜é‡çš„æ“ä½œæ˜¯è¢«å°è£…èµ·æ¥çš„ï¼Œå›¾ä¸­æœ€å¤–å±‚çš„æ¡†å°±ä»£è¡¨å°è£…çš„æ„æ€ã€‚æ¡†çš„ä¸Šé¢åªæœ‰ä¸€ä¸ªå…¥å£ï¼Œå¹¶ä¸”åœ¨å…¥å£æ—è¾¹è¿˜æœ‰ä¸€ä¸ªå…¥å£ç­‰å¾…é˜Ÿåˆ—ã€‚å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶è¯•å›¾è¿›å…¥ç®¡ç¨‹å†…éƒ¨æ—¶ï¼Œåªå…è®¸ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ï¼Œå…¶ä»–çº¿ç¨‹åˆ™åœ¨å…¥å£ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚è¿™ä¸ªè¿‡ç¨‹ç±»ä¼¼å°±åŒ»æµç¨‹çš„åˆ†è¯Šï¼Œåªå…è®¸ä¸€ä¸ªæ‚£è€…å°±è¯Šï¼Œå…¶ä»–æ‚£è€…éƒ½åœ¨é—¨å£ç­‰å¾…ã€‚</p><p>æ¯ä¸ªæ¡ä»¶å˜é‡éƒ½å¯¹åº”æœ‰ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Œæ¡ä»¶å˜é‡å’Œç­‰å¾…é˜Ÿåˆ—çš„ä½œç”¨æ˜¯è§£å†³çº¿ç¨‹åŒæ­¥é—®é¢˜</p><ul><li>å‡è®¾æœ‰ä¸ªçº¿ç¨‹ T1æ‰§è¡Œå‡ºé˜Ÿæ“ä½œï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯æ‰§è¡Œå‡ºé˜Ÿæ“ä½œï¼Œæœ‰ä¸ªå‰ææ¡ä»¶ï¼Œå°±æ˜¯é˜Ÿåˆ—ä¸èƒ½æ˜¯ç©ºçš„ï¼Œè€Œé˜Ÿåˆ—ä¸ç©ºè¿™ä¸ªå‰ææ¡ä»¶å°±æ˜¯ç®¡ç¨‹é‡Œçš„æ¡ä»¶å˜é‡ã€‚å¦‚æœçº¿ç¨‹ T1è¿›å…¥ç®¡ç¨‹åæ°å¥½å‘ç°é˜Ÿåˆ—æ˜¯ç©ºçš„ï¼Œé‚£æ€ä¹ˆåŠå‘¢ï¼Ÿç­‰å¾…å•Šï¼Œå»å“ªé‡Œç­‰å‘¢ï¼Ÿå°±å»æ¡ä»¶å˜é‡å¯¹åº”çš„ç­‰å¾…é˜Ÿåˆ—é‡Œé¢ç­‰ã€‚ï¼ˆ<strong>waitã€await</strong>ï¼‰</li><li>æ­¤æ—¶çº¿ç¨‹ T1å°±å»â€œé˜Ÿåˆ—ä¸ç©ºâ€è¿™ä¸ªæ¡ä»¶å˜é‡çš„ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚è¿™ä¸ªè¿‡ç¨‹ç±»ä¼¼äºå¤§å¤«å‘ç°ä½ è¦å»éªŒä¸ªè¡€ï¼Œäºæ˜¯ç»™ä½ å¼€äº†ä¸ªéªŒè¡€çš„å•å­ï¼Œä½ å‘¢å°±å»éªŒè¡€çš„é˜Ÿä¼é‡Œæ’é˜Ÿã€‚çº¿ç¨‹T1è¿›å…¥æ¡ä»¶å˜é‡çš„ç­‰å¾…é˜Ÿåˆ—åï¼Œæ˜¯å…è®¸å…¶ä»–çº¿ç¨‹è¿›å…¥ç®¡ç¨‹çš„ã€‚è¿™å’Œä½ å»éªŒè¡€çš„æ—¶å€™ï¼ŒåŒ»ç”Ÿå¯ä»¥ç»™å…¶ä»–æ‚£è€…è¯Šæ²»ï¼Œé“ç†éƒ½æ˜¯ä¸€æ ·çš„ã€‚</li><li>å†å‡è®¾ä¹‹åå¦å¤–ä¸€ä¸ªçº¿ç¨‹ T2æ‰§è¡Œå…¥é˜Ÿæ“ä½œï¼Œå…¥é˜Ÿæ“ä½œæ‰§è¡ŒæˆåŠŸä¹‹åï¼Œâ€œé˜Ÿåˆ—ä¸ç©ºâ€è¿™ä¸ªæ¡ä»¶å¯¹äºçº¿ç¨‹ T1æ¥è¯´å·²ç»æ»¡è¶³äº†ï¼Œæ­¤æ—¶çº¿ç¨‹ T2 è¦é€šçŸ¥T1ï¼Œå‘Šè¯‰å®ƒéœ€è¦çš„æ¡ä»¶å·²ç»æ»¡è¶³äº†ã€‚å½“çº¿ç¨‹ T1å¾—åˆ°é€šçŸ¥åï¼Œä¼šä»ç­‰å¾…é˜Ÿåˆ—é‡Œé¢å‡ºæ¥ï¼Œä½†æ˜¯å‡ºæ¥ä¹‹åä¸æ˜¯é©¬ä¸Šæ‰§è¡Œï¼Œè€Œæ˜¯é‡æ–°è¿›å…¥åˆ°å…¥å£ç­‰å¾…é˜Ÿåˆ—é‡Œé¢ã€‚ï¼ˆ<strong>notifyã€notifyAllã€signalã€signalAll</strong>ï¼‰</li><li>è¿™ä¸ªè¿‡ç¨‹ç±»ä¼¼ä½ éªŒè¡€å®Œï¼Œå›æ¥æ‰¾å¤§å¤«ï¼Œéœ€è¦é‡æ–°åˆ†è¯Šã€‚</li></ul><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220602203057885.png" /></p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BlockedQueue</span>&lt;T&gt;&#123;<br>  <span class="hljs-keyword">final</span> <span class="hljs-type">Lock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();<br>  <span class="hljs-comment">// æ¡ä»¶å˜é‡ï¼šé˜Ÿåˆ—ä¸æ»¡  </span><br>  <span class="hljs-keyword">final</span> <span class="hljs-type">Condition</span> <span class="hljs-variable">notFull</span> <span class="hljs-operator">=</span> lock.newCondition();<br>  <span class="hljs-comment">// æ¡ä»¶å˜é‡ï¼šé˜Ÿåˆ—ä¸ç©º  </span><br>  <span class="hljs-keyword">final</span> <span class="hljs-type">Condition</span> <span class="hljs-variable">notEmpty</span> <span class="hljs-operator">=</span> lock.newCondition();<br> <br>  <span class="hljs-comment">// å…¥é˜Ÿ</span><br>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">enq</span><span class="hljs-params">(T x)</span> &#123;<br>    lock.lock();<br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-keyword">while</span> (é˜Ÿåˆ—å·²æ»¡)&#123;<br>        <span class="hljs-comment">// ç­‰å¾…é˜Ÿåˆ—ä¸æ»¡ </span><br>        notFull.await();<br>      &#125;  <br>      <span class="hljs-comment">// çœç•¥å…¥é˜Ÿæ“ä½œ...</span><br>      <span class="hljs-comment">// å…¥é˜Ÿå, é€šçŸ¥å¯å‡ºé˜Ÿ</span><br>      notEmpty.signal();<br>    &#125;<span class="hljs-keyword">finally</span> &#123;<br>      lock.unlock();<br>    &#125;<br>  &#125;<br>  <span class="hljs-comment">// å‡ºé˜Ÿ</span><br>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">deq</span><span class="hljs-params">()</span>&#123;<br>    lock.lock();<br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-keyword">while</span> (é˜Ÿåˆ—å·²ç©º)&#123;<br>        <span class="hljs-comment">// ç­‰å¾…é˜Ÿåˆ—ä¸ç©º</span><br>        notEmpty.await();<br>      &#125;<br>      <span class="hljs-comment">// çœç•¥å‡ºé˜Ÿæ“ä½œ...</span><br>      <span class="hljs-comment">// å‡ºé˜Ÿåï¼Œé€šçŸ¥å¯å…¥é˜Ÿ</span><br>      notFull.signal();<br>    &#125;<span class="hljs-keyword">finally</span> &#123;<br>      lock.unlock();<br>    &#125;  <br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>waitç¼–ç¨‹èŒƒå¼ï¼ˆ<strong>è¿™ä¸ªæ˜¯ MESA ç®¡ç¨‹ç‰¹æœ‰çš„</strong>ï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">while</span>(æ¡ä»¶ä¸æ»¡è¶³) &#123;<br>  wait();<br>&#125;<br></code></pre></div></td></tr></table></figure><p>ç®¡ç¨‹è¦æ±‚åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œå½“çº¿ç¨‹ T2 çš„æ“ä½œä½¿çº¿ç¨‹ T1ç­‰å¾…çš„æ¡ä»¶æ»¡è¶³æ—¶ï¼Œåœ¨MESA ç®¡ç¨‹é‡Œé¢ï¼ŒT2 é€šçŸ¥å®Œ T1 åï¼ŒT2è¿˜æ˜¯ä¼šæ¥ç€æ‰§è¡Œï¼ŒT1å¹¶ä¸ç«‹å³æ‰§è¡Œï¼Œä»…ä»…æ˜¯ä»æ¡ä»¶å˜é‡çš„ç­‰å¾…é˜Ÿåˆ—è¿›åˆ°å…¥å£ç­‰å¾…é˜Ÿåˆ—é‡Œé¢ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯notify ä¸ç”¨æ”¾åˆ°ä»£ç çš„æœ€åï¼ŒT2ä¹Ÿæ²¡æœ‰å¤šä½™çš„é˜»å¡å”¤é†’æ“ä½œã€‚ä½†æ˜¯ä¹Ÿæœ‰ä¸ªå‰¯ä½œç”¨ï¼Œå°±æ˜¯å½“ T1å†æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œå¯èƒ½æ›¾ç»æ»¡è¶³çš„æ¡ä»¶ï¼Œç°åœ¨å·²ç»ä¸æ»¡è¶³äº†ï¼Œæ‰€ä»¥éœ€è¦ä»¥å¾ªç¯æ–¹å¼æ£€éªŒæ¡ä»¶å˜é‡ã€‚</p><p>ä½¿ç”¨notifyçš„æƒ…å†µï¼š</p><ol type="1"><li>æ‰€æœ‰ç­‰å¾…çº¿ç¨‹æ‹¥æœ‰ç›¸åŒçš„ç­‰å¾…æ¡ä»¶ï¼›</li><li>æ‰€æœ‰ç­‰å¾…çº¿ç¨‹è¢«å”¤é†’åï¼Œæ‰§è¡Œç›¸åŒçš„æ“ä½œï¼›</li><li>åªéœ€è¦å”¤é†’ä¸€ä¸ªçº¿ç¨‹ã€‚</li></ol><p><strong>å¦åˆ™å°½é‡ä½¿ç”¨ notifyAll</strong>ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥ä½¿ç”¨<strong>signalã€‚</strong></p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¹¶å‘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaå¹¶å‘ç¼–ç¨‹å®æˆ˜ç¬”è®°ï¼ˆä¸€ï¼‰</title>
    <link href="/post/e1fa1fbc.html"/>
    <url>/post/e1fa1fbc.html</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦å¯¹<ahref="https://time.geekbang.org/column/intro/100023901">Javaå¹¶å‘ç¼–ç¨‹å®æˆ˜</a>çš„å†…å®¹è¿›è¡Œæ€»ç»“</p><span id="more"></span><h1 id="javaå¹¶å‘ç¼–ç¨‹å®æˆ˜ç¬”è®°ä¸€">Javaå¹¶å‘ç¼–ç¨‹å®æˆ˜ç¬”è®°ï¼ˆä¸€ï¼‰</h1><h3 id="å¹¶å‘æŠ½è±¡">å¹¶å‘æŠ½è±¡ğŸ³</h3><p>å¹¶å‘ç¼–ç¨‹é¢†åŸŸå¯ä»¥æŠ½è±¡æˆä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šåˆ†å·¥ã€åŒæ­¥å’Œäº’æ–¥ï¼š</p><ol type="1"><li><p>åˆ†å·¥</p><p>ç±»ä¼¼äºç°å®ä¸­ä¸€ä¸ªç»„ç»‡å®Œæˆä¸€ä¸ªé¡¹ç›®ï¼Œé¡¹ç›®ç»ç†è¦æ‹†åˆ†ä»»åŠ¡ï¼Œå®‰æ’åˆé€‚çš„æˆå‘˜å»å®Œæˆã€‚åœ¨å¹¶å‘ç¼–ç¨‹é¢†åŸŸï¼Œä½ å°±æ˜¯é¡¹ç›®ç»ç†ï¼Œçº¿ç¨‹å°±æ˜¯é¡¹ç›®ç»„æˆå‘˜ã€‚ä»»åŠ¡åˆ†è§£å’Œåˆ†å·¥å¯¹äºé¡¹ç›®æˆè´¥éå¸¸å…³é”®ï¼Œä¸è¿‡åœ¨å¹¶å‘é¢†åŸŸé‡Œï¼Œåˆ†å·¥æ›´é‡è¦ï¼Œå®ƒç›´æ¥å†³å®šäº†å¹¶å‘ç¨‹åºçš„æ€§èƒ½ã€‚</p></li><li><p>åŒæ­¥</p><p>åœ¨å¹¶å‘ç¼–ç¨‹é¢†åŸŸé‡Œçš„åŒæ­¥ï¼Œä¸»è¦æŒ‡çš„å°±æ˜¯çº¿ç¨‹é—´çš„åä½œï¼Œæœ¬è´¨ä¸Šå’Œç°å®ç”Ÿæ´»ä¸­çš„åä½œæ²¡åŒºåˆ«ã€‚</p><p>ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œäº†ä¸€ä¸ªä»»åŠ¡ï¼Œå¦‚ä½•é€šçŸ¥æ‰§è¡Œåç»­ä»»åŠ¡çš„çº¿ç¨‹å¼€å·¥ã€‚</p><p>å·¥ä½œä¸­é‡åˆ°çš„çº¿ç¨‹åä½œé—®é¢˜ï¼ŒåŸºæœ¬ä¸Šéƒ½å¯ä»¥æè¿°ä¸ºè¿™æ ·çš„ä¸€ä¸ªé—®é¢˜ï¼š<strong>å½“æŸä¸ªæ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œçº¿ç¨‹éœ€è¦ç­‰å¾…ï¼Œå½“æŸä¸ªæ¡ä»¶æ»¡è¶³æ—¶ï¼Œçº¿ç¨‹éœ€è¦è¢«å”¤é†’æ‰§è¡Œã€‚</strong></p><p>åœ¨ Javaå¹¶å‘ç¼–ç¨‹é¢†åŸŸï¼Œè§£å†³åä½œé—®é¢˜çš„æ ¸å¿ƒæŠ€æœ¯æ˜¯<strong>ç®¡ç¨‹</strong>ã€‚ç®¡ç¨‹æ˜¯ä¸€ç§è§£å†³å¹¶å‘é—®é¢˜çš„é€šç”¨æ¨¡å‹ï¼Œé™¤äº†èƒ½è§£å†³çº¿ç¨‹åä½œé—®é¢˜ï¼Œè¿˜èƒ½è§£å†³äº’æ–¥é—®é¢˜ã€‚<strong>ç®¡ç¨‹æ˜¯è§£å†³å¹¶å‘é—®é¢˜çš„ä¸‡èƒ½é’¥åŒ™</strong>ã€‚</p></li><li><p>äº’æ–¥</p><p>ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</p><p><strong>æ‰€è°“äº’æ–¥ï¼ŒæŒ‡çš„æ˜¯åŒä¸€æ—¶åˆ»ï¼Œåªå…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®å…±äº«å˜é‡ã€‚</strong></p><p>å®ç°äº’æ–¥çš„æ ¸å¿ƒæŠ€æœ¯æ˜¯é”ã€‚</p></li></ol><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220530140112045.png" /></p><h3id="å¯è§æ€§åŸå­æ€§å’Œæœ‰åºæ€§é—®é¢˜åŠè§£å†³">å¯è§æ€§ã€åŸå­æ€§å’Œæœ‰åºæ€§é—®é¢˜åŠè§£å†³ğŸ¯</h3><h4 id="ä¸‰ç§é—®é¢˜">ä¸‰ç§é—®é¢˜ğŸ˜¹</h4><p>CPUã€å†…å­˜ã€I/Oè®¾å¤‡ä¹‹é—´é€Ÿåº¦å·®å¼‚è¿‡å¤§ï¼Œä¸ºäº†åˆç†åˆ©ç”¨ CPUçš„é«˜æ€§èƒ½ï¼Œå¹³è¡¡è¿™ä¸‰è€…çš„é€Ÿåº¦å·®å¼‚ï¼Œè®¡ç®—æœºä½“ç³»ç»“æ„ã€æ“ä½œç³»ç»Ÿã€ç¼–è¯‘ç¨‹åºéƒ½åšå‡ºäº†è´¡çŒ®ï¼Œä¸»è¦ä½“ç°ä¸ºï¼š</p><ol type="1"><li>CPU å¢åŠ äº†ç¼“å­˜ï¼Œä»¥å‡è¡¡ä¸å†…å­˜çš„é€Ÿåº¦å·®å¼‚ï¼›</li><li>æ“ä½œç³»ç»Ÿå¢åŠ äº†è¿›ç¨‹ã€çº¿ç¨‹ï¼Œä»¥åˆ†æ—¶å¤ç”¨ CPUï¼Œè¿›è€Œå‡è¡¡ CPU ä¸ I/Oè®¾å¤‡çš„é€Ÿåº¦å·®å¼‚ï¼›</li><li>ç¼–è¯‘ç¨‹åºä¼˜åŒ–æŒ‡ä»¤æ‰§è¡Œæ¬¡åºï¼Œä½¿å¾—ç¼“å­˜èƒ½å¤Ÿå¾—åˆ°æ›´åŠ åˆç†åœ°åˆ©ç”¨ã€‚</li></ol><p>è€Œè¿™äº›ä¹Ÿå¯¼è‡´å‡ºä¸€äº›å¹¶å‘æ–¹é¢çš„é—®é¢˜ï¼š</p><ul><li><p>ç¼“å­˜å¯¼è‡´çš„å¯è§æ€§é—®é¢˜</p><p>å•æ ¸æ—¶ä»£ï¼šCPU ç¼“å­˜ä¸å†…å­˜çš„æ•°æ®ä¸€å®šæ˜¯ä¸€è‡´çš„ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220530141531166.png" /></p><p>ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿç«‹åˆ»çœ‹åˆ°ï¼Œæˆ‘ä»¬ç§°ä¸º<strong>å¯è§æ€§</strong>ã€‚</p><p>å¤šæ ¸æ—¶ä»£ï¼šå­˜åœ¨CPU ç¼“å­˜ä¸å†…å­˜çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220530141612068.png" /></p></li><li><p>çº¿ç¨‹åˆ‡æ¢å¸¦æ¥çš„åŸå­æ€§é—®é¢˜</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220530142402815.png" /></p><p>çº¿ç¨‹åˆ‡æ¢å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ—©æœŸçš„æ“ä½œç³»ç»ŸåŸºäºè¿›ç¨‹æ¥è°ƒåº¦CPUï¼Œä¸åŒè¿›ç¨‹é—´æ˜¯ä¸å…±äº«å†…å­˜ç©ºé—´çš„ï¼Œæ‰€ä»¥è¿›ç¨‹è¦åšä»»åŠ¡åˆ‡æ¢å°±è¦åˆ‡æ¢å†…å­˜æ˜ å°„åœ°å€ï¼Œè€Œä¸€ä¸ªè¿›ç¨‹åˆ›å»ºçš„æ‰€æœ‰çº¿ç¨‹ï¼Œéƒ½æ˜¯å…±äº«ä¸€ä¸ªå†…å­˜ç©ºé—´çš„ï¼Œæ‰€ä»¥çº¿ç¨‹åšä»»åŠ¡åˆ‡æ¢æˆæœ¬å°±å¾ˆä½äº†ã€‚ç°ä»£çš„æ“ä½œç³»ç»Ÿéƒ½åŸºäºæ›´è½»é‡çš„çº¿ç¨‹æ¥è°ƒåº¦ï¼Œç°åœ¨æˆ‘ä»¬æåˆ°çš„â€œä»»åŠ¡åˆ‡æ¢â€éƒ½æ˜¯æŒ‡â€œçº¿ç¨‹åˆ‡æ¢â€ã€‚</p><p>Javaå¹¶å‘ç¨‹åºéƒ½æ˜¯åŸºäºå¤šçº¿ç¨‹çš„ï¼Œè‡ªç„¶ä¹Ÿä¼šæ¶‰åŠåˆ°ä»»åŠ¡åˆ‡æ¢ï¼Œä»»åŠ¡åˆ‡æ¢çš„æ—¶æœºå¤§å¤šæ•°æ˜¯åœ¨æ—¶é—´ç‰‡ç»“æŸçš„æ—¶å€™ï¼Œåœ¨é«˜çº§è¯­è¨€é‡Œä¸€æ¡è¯­å¥å¾€å¾€éœ€è¦å¤šæ¡CPU æŒ‡ä»¤å®Œæˆï¼Œè€Œæ“ä½œç³»ç»Ÿåšä»»åŠ¡åˆ‡æ¢ï¼Œå‘ç”Ÿåœ¨ä»»ä½•ä¸€æ¡<strong>CPUæŒ‡ä»¤</strong>æ‰§è¡Œå®Œæˆçš„æ—¶å€™ï¼Œè€Œä¸æ˜¯ä¸€æ¡é«˜çº§è¯­è¨€è¯­å¥æ‰§è¡Œå®Œæˆçš„æ—¶å€™ï¼Œè€Œè¿™å°±ä¼šé€ æˆåŸå­æ€§é—®é¢˜ã€‚</p><p>ä»¥<code>count += 1;</code>ä¸ºä¾‹ï¼Œå®ƒå¯ä»¥æ‹†åˆ†ä¸ºä¸‰æ¡CPUæŒ‡ä»¤ï¼š</p><ul><li>æŒ‡ä»¤ 1ï¼šé¦–å…ˆï¼Œéœ€è¦æŠŠå˜é‡ count ä»å†…å­˜åŠ è½½åˆ° CPU çš„å¯„å­˜å™¨ï¼›</li><li>æŒ‡ä»¤ 2ï¼šä¹‹åï¼Œåœ¨å¯„å­˜å™¨ä¸­æ‰§è¡Œ +1 æ“ä½œï¼›</li><li>æŒ‡ä»¤ 3ï¼šæœ€åï¼Œå°†ç»“æœå†™å…¥å†…å­˜ï¼ˆç¼“å­˜æœºåˆ¶å¯¼è‡´å¯èƒ½å†™å…¥çš„æ˜¯ CPUç¼“å­˜è€Œä¸æ˜¯å†…å­˜ï¼‰ã€‚</li></ul><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220530143214275.png" /></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåœ¨çº¿ç¨‹Aæ‰§è¡ŒæŒ‡ä»¤1åä¾¿å‘ç”Ÿäº†çº¿ç¨‹åˆ‡æ¢ï¼Œç­‰çº¿ç¨‹Bæ‰§è¡Œ3æ¡æŒ‡ä»¤åï¼Œå†æ‰§è¡Œçº¿ç¨‹Aå‰©ä¸‹çš„2æ¡CPUæŒ‡ä»¤ï¼Œè¿™æ ·æœ€ç»ˆå¾—åˆ°çš„ç»“æœæ˜¯1è€Œä¸æ˜¯2ã€‚</p><p><strong>æŠŠä¸€ä¸ªæˆ–è€…å¤šä¸ªæ“ä½œåœ¨ CPUæ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä¸è¢«ä¸­æ–­çš„ç‰¹æ€§ç§°ä¸ºåŸå­æ€§</strong>ã€‚</p></li><li><p>ç¼–è¯‘ä¼˜åŒ–å¸¦æ¥çš„æœ‰åºæ€§é—®é¢˜</p><p>ç¼–è¯‘å™¨ä¸ºäº†ä¼˜åŒ–æ€§èƒ½ï¼Œæœ‰æ—¶å€™ä¼šæ”¹å˜ç¨‹åºä¸­è¯­å¥çš„å…ˆåé¡ºåºã€‚</p><p>åŒé‡æ£€æŸ¥åˆ›å»ºå•ä¾‹å¯¹è±¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> &#123;<br>  <span class="hljs-keyword">static</span> Singleton instance;<br>  <span class="hljs-keyword">static</span> Singleton <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) &#123;<br>      <span class="hljs-keyword">synchronized</span>(Singleton.class) &#123;<br>        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>)<br>          instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Singleton</span>();<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> instance;<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>å‡è®¾æœ‰ä¸¤ä¸ªçº¿ç¨‹ Aã€B åŒæ—¶è°ƒç”¨ getInstance() æ–¹æ³•ï¼Œä»–ä»¬ä¼šåŒæ—¶å‘ç°<code>instance == null</code> ï¼Œäºæ˜¯åŒæ—¶å¯¹ Singleton.class åŠ é”ï¼Œæ­¤æ—¶JVM ä¿è¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤ŸåŠ é”æˆåŠŸï¼ˆå‡è®¾æ˜¯çº¿ç¨‹Aï¼‰ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹åˆ™ä¼šå¤„äºç­‰å¾…çŠ¶æ€ï¼ˆå‡è®¾æ˜¯çº¿ç¨‹ Bï¼‰ï¼›çº¿ç¨‹ A ä¼šåˆ›å»ºä¸€ä¸ªSingleton å®ä¾‹ï¼Œä¹‹åé‡Šæ”¾é”ï¼Œé”é‡Šæ”¾åï¼Œçº¿ç¨‹ B è¢«å”¤é†’ï¼Œçº¿ç¨‹ Bå†æ¬¡å°è¯•åŠ é”ï¼Œæ­¤æ—¶æ˜¯å¯ä»¥åŠ é”æˆåŠŸçš„ï¼ŒåŠ é”æˆåŠŸåï¼Œçº¿ç¨‹ B æ£€æŸ¥<code>instance == null</code> æ—¶ä¼šå‘ç°ï¼Œå·²ç»åˆ›å»ºè¿‡ Singletonå®ä¾‹äº†ï¼Œæ‰€ä»¥çº¿ç¨‹ B ä¸ä¼šå†åˆ›å»ºä¸€ä¸ª Singleton å®ä¾‹ã€‚</p><p>ä½†æ˜¯ä¸Šè¿°ä»£ç ä¹Ÿå­˜åœ¨é—®é¢˜ï¼Œnewæ“ä½œçš„æ‰§è¡Œè·¯å¾„ï¼š</p><ol type="1"><li>åˆ†é…ä¸€å—å†…å­˜ Mï¼›</li><li>å°† M çš„åœ°å€èµ‹å€¼ç»™ instance å˜é‡ï¼›</li><li>æœ€ååœ¨å†…å­˜ M ä¸Šåˆå§‹åŒ– Singleton å¯¹è±¡ã€‚</li></ol><p>å‡è®¾çº¿ç¨‹ A å…ˆæ‰§è¡Œ getInstance() æ–¹æ³•ï¼Œå½“æ‰§è¡Œå®ŒæŒ‡ä»¤ 2æ—¶æ°å¥½å‘ç”Ÿäº†çº¿ç¨‹åˆ‡æ¢ï¼Œåˆ‡æ¢åˆ°äº†çº¿ç¨‹ B ä¸Šï¼›å¦‚æœæ­¤æ—¶çº¿ç¨‹ B ä¹Ÿæ‰§è¡ŒgetInstance() æ–¹æ³•ï¼Œé‚£ä¹ˆçº¿ç¨‹ B åœ¨æ‰§è¡Œç¬¬ä¸€ä¸ªåˆ¤æ–­æ—¶ä¼šå‘ç°<code>instance != null</code> ï¼Œæ‰€ä»¥ç›´æ¥è¿”å› instanceï¼Œè€Œæ­¤æ—¶çš„ instanceæ˜¯æ²¡æœ‰åˆå§‹åŒ–è¿‡çš„ï¼Œå¦‚æœæˆ‘ä»¬è¿™ä¸ªæ—¶å€™è®¿é—® instanceçš„æˆå‘˜å˜é‡å°±å¯èƒ½è§¦å‘ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220530150328600.png" /></p></li></ul><h4 id="å¯è§æ€§å’Œæœ‰åºæ€§è§£å†³">å¯è§æ€§å’Œæœ‰åºæ€§è§£å†³ğŸ¤–</h4><p><strong>æŒ‰éœ€ç¦ç”¨ç¼“å­˜ä»¥åŠç¼–è¯‘ä¼˜åŒ–</strong>ï¼Œå¦‚æœå®Œå…¨ç¦ç”¨å¯èƒ½ä¼šé€ æˆç¨‹åºæ€§èƒ½çš„å¤§å¹…ä¸‹é™ã€‚</p><ul><li><p>volatile ä½¿ç”¨</p><p>volatile å…³é”®å­—åœ¨C è¯­è¨€é‡Œä¹Ÿæœ‰ï¼Œå®ƒæœ€åŸå§‹çš„æ„ä¹‰å°±æ˜¯ç¦ç”¨ CPU ç¼“å­˜ã€‚</p><p>å£°æ˜ä¸€ä¸ª volatile å˜é‡<code>volatile int x = 0</code>ï¼Œå®ƒè¡¨è¾¾çš„æ˜¯ï¼šå‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå¯¹è¿™ä¸ªå˜é‡çš„è¯»å†™ï¼Œä¸èƒ½ä½¿ç”¨CPU ç¼“å­˜ï¼Œå¿…é¡»ä»å†…å­˜ä¸­è¯»å–æˆ–è€…å†™å…¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">VolatileExample</span> &#123;<br>  <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">volatile</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">writer</span><span class="hljs-params">()</span> &#123;<br>    x = <span class="hljs-number">42</span>;<br>    v = <span class="hljs-literal">true</span>;<br>  &#125;<br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reader</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">if</span> (v == <span class="hljs-literal">true</span>) &#123;<br>      <span class="hljs-comment">// è¿™é‡Œ x ä¼šæ˜¯å¤šå°‘å‘¢ï¼Ÿ</span><br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>åœ¨ jdk 1.5å‰<code>volatile</code>åªä¿è¯å£°æ˜ä¸ºvolatileå…³é”®å­—çš„å˜é‡ï¼Œä½†æ˜¯ä¸ä¼šç®¡å…¶ä»–å˜é‡ï¼Œè€Œä¸”ä¸ä¿è¯ä»£ç é¡ºåºã€‚æ‰€ä»¥ä¸Šé¢çš„ä»£ç åœ¨jdk1.5å‰ä¼šå‡ºç°<code>x=0</code> çš„æƒ…å†µäºæ˜¯é€šè¿‡ Happens-Beforeè§„åˆ™è¿›è¡Œè¯­ä¹‰å¢å¼ºã€‚</p></li><li><p>Happens-Before è§„åˆ™</p><p>å‰é¢ä¸€ä¸ªæ“ä½œçš„ç»“æœå¯¹åç»­æ“ä½œæ˜¯å¯è§çš„ã€‚Happens-Beforeçº¦æŸäº†ç¼–è¯‘å™¨çš„ä¼˜åŒ–è¡Œä¸ºï¼Œè™½å…è®¸ç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œä½†æ˜¯è¦æ±‚ç¼–è¯‘å™¨ä¼˜åŒ–åä¸€å®šéµå®ˆHappens-Before è§„åˆ™ã€‚</p><ul><li><p>ç¨‹åºçš„é¡ºåºæ€§è§„åˆ™</p><p>åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ï¼ŒæŒ‰ç…§ç¨‹åºé¡ºåºï¼Œå‰é¢çš„æ“ä½œ Happens-Beforeäºåç»­çš„ä»»æ„æ“ä½œã€‚ç¨‹åºå‰é¢å¯¹æŸä¸ªå˜é‡çš„ä¿®æ”¹ä¸€å®šæ˜¯å¯¹åç»­æ“ä½œå¯è§çš„ã€‚</p><p>è¿™æ¡è§„åˆ™å¯ä»¥ä¿è¯ <code>x=42;</code> åœ¨ <code>v=true;</code>ä¹‹å‰æ‰§è¡Œã€‚</p></li><li><p>volatile å˜é‡è§„åˆ™</p><p>å¯¹ä¸€ä¸ª volatile å˜é‡çš„å†™æ“ä½œï¼Œ Happens-Before äºåç»­å¯¹è¿™ä¸ª volatileå˜é‡çš„è¯»æ“ä½œã€‚</p></li><li><p>ä¼ é€’æ€§</p><p>å¦‚æœ A Happens-Before Bï¼Œä¸” B Happens-Before Cï¼Œé‚£ä¹ˆ A Happens-BeforeCã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220530213721663.png" /></p><p><code>x=42;</code> Happens-Before å†™å˜é‡ <code>v=true;</code>ï¼Œè¿™æ˜¯è§„åˆ™ 1 çš„å†…å®¹ï¼›</p><p>å†™å˜é‡<code>v=true;</code> Happens-Before è¯»å˜é‡<code>v=true;</code>ï¼Œè¿™æ˜¯è§„åˆ™ 2 çš„å†…å®¹ ã€‚</p><p>æ ¹æ®ä¼ é€’æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å¾—çŸ¥ <code>x=42;</code> Happens-Before è¯»å˜é‡<code>v=true;</code> ï¼Œå¦‚æœçº¿ç¨‹ B è¯»åˆ°äº†<code>v=true;</code> ï¼Œé‚£ä¹ˆçº¿ç¨‹A è®¾ç½®çš„<code>x=42;</code>å¯¹çº¿ç¨‹ B æ˜¯å¯è§çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œçº¿ç¨‹ B èƒ½çœ‹åˆ°<code>x == 42;</code></p></li><li><p>ç®¡ç¨‹ä¸­é”çš„è§„åˆ™</p><p>å¯¹ä¸€ä¸ªé”çš„è§£é” Happens-Before äºåç»­å¯¹è¿™ä¸ªé”çš„åŠ é”ã€‚</p><p>ç®¡ç¨‹æ˜¯ä¸€ç§é€šç”¨çš„åŒæ­¥åŸè¯­ï¼Œåœ¨ Javaä¸­æŒ‡çš„å°±æ˜¯synchronizedï¼Œsynchronized æ˜¯ Java é‡Œå¯¹ç®¡ç¨‹çš„å®ç°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">synchronized</span> (<span class="hljs-built_in">this</span>) &#123; <span class="hljs-comment">// æ­¤å¤„è‡ªåŠ¨åŠ é”</span><br>  <span class="hljs-comment">// x æ˜¯å…±äº«å˜é‡, åˆå§‹å€¼ =10</span><br>  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.x &lt; <span class="hljs-number">12</span>) &#123;<br>    <span class="hljs-built_in">this</span>.x = <span class="hljs-number">12</span>; <br>  &#125;  <br>&#125; <span class="hljs-comment">// æ­¤å¤„è‡ªåŠ¨è§£é”</span><br></code></pre></div></td></tr></table></figure><p>ç®¡ç¨‹ä¸­çš„é”åœ¨ Javaé‡Œæ˜¯éšå¼å®ç°çš„ï¼Œä¾‹å¦‚ä¸Šé¢çš„ä»£ç ï¼Œåœ¨è¿›å…¥åŒæ­¥å—ä¹‹å‰ï¼Œä¼šè‡ªåŠ¨åŠ é”ï¼Œè€Œåœ¨ä»£ç å—æ‰§è¡Œå®Œä¼šè‡ªåŠ¨é‡Šæ”¾é”ï¼ŒåŠ é”ä»¥åŠé‡Šæ”¾é”éƒ½æ˜¯ç¼–è¯‘å™¨å¸®æˆ‘ä»¬å®ç°çš„ã€‚</p><p>å‡è®¾ x çš„åˆå§‹å€¼æ˜¯ 10ï¼Œçº¿ç¨‹ A æ‰§è¡Œå®Œä»£ç å—å x çš„å€¼ä¼šå˜æˆ12ï¼ˆæ‰§è¡Œå®Œè‡ªåŠ¨é‡Šæ”¾é”ï¼‰ï¼Œçº¿ç¨‹ B è¿›å…¥ä»£ç å—æ—¶ï¼Œèƒ½å¤Ÿçœ‹åˆ°çº¿ç¨‹ A å¯¹ xçš„å†™æ“ä½œï¼Œä¹Ÿå°±æ˜¯çº¿ç¨‹ B èƒ½å¤Ÿçœ‹åˆ° <code>x==12;</code>ã€‚</p></li><li><p>çº¿ç¨‹ start() è§„åˆ™</p><p>ä¸»çº¿ç¨‹ A å¯åŠ¨å­çº¿ç¨‹ B åï¼Œå­çº¿ç¨‹ B èƒ½å¤Ÿçœ‹åˆ°ä¸»çº¿ç¨‹åœ¨å¯åŠ¨å­çº¿ç¨‹ Bå‰çš„æ“ä½œã€‚å³å¦‚æœçº¿ç¨‹ A è°ƒç”¨çº¿ç¨‹ B çš„ start() æ–¹æ³•ï¼ˆå³åœ¨çº¿ç¨‹ A ä¸­å¯åŠ¨çº¿ç¨‹Bï¼‰ï¼Œé‚£ä¹ˆè¯¥ start() æ“ä½œ Happens-Before äºçº¿ç¨‹ B ä¸­çš„ä»»æ„æ“ä½œã€‚</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-type">Thread</span> <span class="hljs-variable">B</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(()-&gt;&#123;<br>  <span class="hljs-comment">// ä¸»çº¿ç¨‹è°ƒç”¨ B.start() ä¹‹å‰</span><br>  <span class="hljs-comment">// æ‰€æœ‰å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹ï¼Œæ­¤å¤„çš†å¯è§</span><br>  <span class="hljs-comment">// æ­¤ä¾‹ä¸­ï¼Œvar==77</span><br>&#125;);<br><span class="hljs-comment">// æ­¤å¤„å¯¹å…±äº«å˜é‡ var ä¿®æ”¹</span><br><span class="hljs-keyword">var</span> = <span class="hljs-number">77</span>;<br><span class="hljs-comment">// ä¸»çº¿ç¨‹å¯åŠ¨å­çº¿ç¨‹</span><br>B.start();<br></code></pre></div></td></tr></table></figure></li><li><p>çº¿ç¨‹ join() è§„åˆ™</p><p>ä¸»çº¿ç¨‹ A ç­‰å¾…å­çº¿ç¨‹ B å®Œæˆï¼ˆä¸»çº¿ç¨‹ A é€šè¿‡è°ƒç”¨å­çº¿ç¨‹ B çš„ join()æ–¹æ³•å®ç°ï¼‰ï¼Œå½“å­çº¿ç¨‹ B å®Œæˆåï¼ˆä¸»çº¿ç¨‹ A ä¸­ join()æ–¹æ³•è¿”å›ï¼‰ï¼Œä¸»çº¿ç¨‹èƒ½å¤Ÿçœ‹åˆ°å­çº¿ç¨‹çš„æ“ä½œã€‚å½“ç„¶æ‰€è°“çš„â€œçœ‹åˆ°â€ï¼ŒæŒ‡çš„æ˜¯å¯¹<strong>å…±äº«å˜é‡</strong>çš„æ“ä½œã€‚å³å¦‚æœåœ¨çº¿ç¨‹A ä¸­ï¼Œè°ƒç”¨çº¿ç¨‹ B çš„ join() å¹¶æˆåŠŸè¿”å›ï¼Œé‚£ä¹ˆçº¿ç¨‹ B ä¸­çš„ä»»æ„æ“ä½œHappens-Before äºè¯¥ join() æ“ä½œçš„è¿”å›ã€‚</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-type">Thread</span> <span class="hljs-variable">B</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(()-&gt;&#123;<br>  <span class="hljs-comment">// æ­¤å¤„å¯¹å…±äº«å˜é‡ var ä¿®æ”¹</span><br>  <span class="hljs-keyword">var</span> = <span class="hljs-number">66</span>;<br>&#125;);<br><span class="hljs-comment">// ä¾‹å¦‚æ­¤å¤„å¯¹å…±äº«å˜é‡ä¿®æ”¹ï¼Œ</span><br><span class="hljs-comment">// åˆ™è¿™ä¸ªä¿®æ”¹ç»“æœå¯¹çº¿ç¨‹ B å¯è§</span><br><span class="hljs-comment">// ä¸»çº¿ç¨‹å¯åŠ¨å­çº¿ç¨‹</span><br>B.start();<br>B.join()<br><span class="hljs-comment">// å­çº¿ç¨‹æ‰€æœ‰å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹</span><br><span class="hljs-comment">// åœ¨ä¸»çº¿ç¨‹è°ƒç”¨ B.join() ä¹‹åçš†å¯è§</span><br><span class="hljs-comment">// æ­¤ä¾‹ä¸­ï¼Œvar==66</span><br></code></pre></div></td></tr></table></figure></li><li><p>çº¿ç¨‹ä¸­æ–­è§„åˆ™</p><p>å¯¹çº¿ç¨‹ interrupt()æ–¹æ³•çš„è°ƒç”¨ Happens-Beforeäºè¢«ä¸­æ–­çº¿ç¨‹çš„ä»£ç æ£€æµ‹åˆ°ä¸­æ–­äº‹ä»¶çš„å‘ç”Ÿã€‚</p></li><li><p>å¯¹è±¡ç»ˆç»“è§„åˆ™</p><p>ä¸€ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–å®Œæˆ Happens-Beforeäºå®ƒçš„finalize()æ–¹æ³•çš„å¼€å§‹ã€‚</p></li></ul><p>åœ¨ Java è¯­è¨€é‡Œé¢ï¼ŒHappens-Before çš„è¯­ä¹‰æœ¬è´¨ä¸Šæ˜¯ä¸€ç§å¯è§æ€§ï¼ŒAHappens-Before B æ„å‘³ç€ A äº‹ä»¶å¯¹ B äº‹ä»¶æ¥è¯´æ˜¯å¯è§çš„ï¼Œ<strong>æ— è®º Aäº‹ä»¶å’Œ B äº‹ä»¶æ˜¯å¦å‘ç”Ÿåœ¨åŒä¸€ä¸ªçº¿ç¨‹é‡Œ</strong>ã€‚ä¾‹å¦‚ A äº‹ä»¶å‘ç”Ÿåœ¨çº¿ç¨‹ 1ä¸Šï¼ŒB äº‹ä»¶å‘ç”Ÿåœ¨çº¿ç¨‹ 2 ä¸Šï¼ŒHappens-Before è§„åˆ™ä¿è¯çº¿ç¨‹ 2 ä¸Šä¹Ÿèƒ½çœ‹åˆ° Aäº‹ä»¶çš„å‘ç”Ÿã€‚</p></li><li><p>final ä½¿ç”¨</p><p>finalä¿®é¥°å˜é‡æ—¶ï¼Œåˆè¡·æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼šè¿™ä¸ªå˜é‡ç”Ÿè€Œä¸å˜ï¼Œå¯ä»¥å¯åŠ²å„¿çš„ä¼˜åŒ–ã€‚</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">final</span> <span class="hljs-type">int</span> x;<br><span class="hljs-comment">// é”™è¯¯çš„æ„é€ å‡½æ•°</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">FinalFieldExample</span><span class="hljs-params">()</span> &#123; <br>  x = <span class="hljs-number">3</span>;<br>  y = <span class="hljs-number">4</span>;<br>  <span class="hljs-comment">// æ­¤å¤„å°±æ˜¯è®² this é€¸å‡ºï¼Œ</span><br>  global.obj = <span class="hljs-built_in">this</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>è¦ç¡®ä¿æ„é€ å‡½æ•°ä¸å‡ºç° "é€¸å‡º" äº‹ä»¶ï¼Œçº¿ç¨‹é€šè¿‡ <code>global.obj</code>è¯»å– x æ˜¯æœ‰å¯èƒ½è¯»åˆ° 0 çš„ã€‚å› æ­¤æˆ‘ä»¬ä¸€å®šè¦é¿å…â€œé€¸å‡ºâ€ã€‚</p></li></ul><h4 id="åŸå­æ€§é—®é¢˜è§£å†³">åŸå­æ€§é—®é¢˜è§£å†³ğŸ¨</h4><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220531135228447.png" /></p><p>ä¸´ç•ŒåŒºï¼šä¸€æ®µéœ€è¦äº’æ–¥æ‰§è¡Œçš„ä»£ç ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦æŠŠä¸´ç•ŒåŒºè¦ä¿æŠ¤çš„èµ„æºæ ‡æ³¨å‡ºæ¥ï¼Œå¦‚å›¾ä¸­ä¸´ç•ŒåŒºé‡Œå¢åŠ äº†ä¸€ä¸ªå…ƒç´ ï¼šå—ä¿æŠ¤çš„èµ„æºRï¼›å…¶æ¬¡ï¼Œæˆ‘ä»¬è¦ä¿æŠ¤èµ„æº R å°±å¾—ä¸ºå®ƒåˆ›å»ºä¸€æŠŠé” LRï¼›æœ€åï¼Œé’ˆå¯¹è¿™æŠŠé”LRï¼Œæˆ‘ä»¬è¿˜éœ€åœ¨è¿›å‡ºä¸´ç•ŒåŒºæ—¶æ·»ä¸ŠåŠ é”æ“ä½œå’Œè§£é”æ“ä½œã€‚å¦å¤–ï¼Œåœ¨é” LRå’Œå—ä¿æŠ¤èµ„æºä¹‹é—´ï¼Œç”¨ä¸€æ¡çº¿åšäº†å…³è”ï¼Œè¿™ä¸ªå…³è”å…³ç³»éå¸¸é‡è¦ã€‚å¾ˆå¤šå¹¶å‘ Bugçš„å‡ºç°éƒ½æ˜¯å› ä¸ºæŠŠå®ƒå¿½ç•¥äº†ï¼Œç„¶åå°±å‡ºç°äº†ç±»ä¼¼é”è‡ªå®¶é—¨æ¥ä¿æŠ¤ä»–å®¶èµ„äº§çš„äº‹æƒ…ï¼Œè¿™æ ·çš„Bug éå¸¸ä¸å¥½è¯Šæ–­ï¼Œå› ä¸ºæ½œæ„è¯†é‡Œæˆ‘ä»¬è®¤ä¸ºå·²ç»æ­£ç¡®åŠ é”äº†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">X</span> &#123;<br>  <span class="hljs-comment">// ä¿®é¥°éé™æ€æ–¹æ³•</span><br>  <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">foo</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// ä¸´ç•ŒåŒº</span><br>  &#125;<br>  <span class="hljs-comment">// ä¿®é¥°é™æ€æ–¹æ³•</span><br>  <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bar</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// ä¸´ç•ŒåŒº</span><br>  &#125;<br>  <span class="hljs-comment">// ä¿®é¥°ä»£ç å—</span><br>  <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>()ï¼›<br>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">baz</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">synchronized</span>(obj) &#123;<br>      <span class="hljs-comment">// ä¸´ç•ŒåŒº</span><br>    &#125;<br>  &#125;<br>&#125;  <br></code></pre></div></td></tr></table></figure><p>å½“ä¿®é¥°é™æ€æ–¹æ³•çš„æ—¶å€™ï¼Œé”å®šçš„æ˜¯å½“å‰ç±»çš„ Classå¯¹è±¡ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­å°±æ˜¯Class Xã€‚</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">X</span> &#123;<br>  <span class="hljs-comment">// ä¿®é¥°é™æ€æ–¹æ³•</span><br>  <span class="hljs-keyword">synchronized</span>(X.class) <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bar</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// ä¸´ç•ŒåŒº</span><br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>å½“ä¿®é¥°éé™æ€æ–¹æ³•çš„æ—¶å€™ï¼Œé”å®šçš„æ˜¯å½“å‰å®ä¾‹å¯¹è±¡ thisã€‚</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">X</span> &#123;<br>  <span class="hljs-comment">// ä¿®é¥°éé™æ€æ–¹æ³•</span><br>  <span class="hljs-keyword">synchronized</span>(<span class="hljs-built_in">this</span>) <span class="hljs-keyword">void</span> <span class="hljs-title function_">foo</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// ä¸´ç•ŒåŒº</span><br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>å¯¹äºä»¥ä¸‹ä»£ç ï¼Œç¬¬ä¸€ç§ä¸ä¼šæœ‰å¹¶å‘é—®é¢˜ï¼Œè€Œç¬¬äºŒç§ä¼šæœ‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SafeCalc</span> &#123;<br>  <span class="hljs-type">long</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> <span class="hljs-number">0L</span>;<br>  <span class="hljs-type">long</span> <span class="hljs-title function_">get</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> value;<br>  &#125;<br>  <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addOne</span><span class="hljs-params">()</span> &#123;<br>    value += <span class="hljs-number">1</span>;<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SafeCalc</span> &#123;<br>  <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> <span class="hljs-number">0L</span>;<br>  <span class="hljs-keyword">synchronized</span> <span class="hljs-type">long</span> <span class="hljs-title function_">get</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> value;<br>  &#125;<br>  <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addOne</span><span class="hljs-params">()</span> &#123;<br>    value += <span class="hljs-number">1</span>;<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220531142348573.png" /></p><p>åœ¨ Java ä¸­ï¼Œå—ä¿æŠ¤èµ„æºå’Œé”ä¹‹é—´çš„å…³è”å…³ç³»æ˜¯ N: 1çš„å…³ç³»ï¼Œå¯¹äºç¬¬ä¸€ç§æƒ…å†µï¼Œæ˜¯ä¸€æŠŠé”ä¿æŠ¤ä¸¤ä¸ªèµ„æºï¼Œè¿™æ—¶æ˜¯ä¸ä¼šäº§ç”Ÿå¹¶å‘å†²çªçš„ï¼Œä½†æ˜¯ç¬¬äºŒç§æƒ…å†µï¼Œæ˜¯ä¸¤æŠŠé”åˆ†åˆ«ä¿æŠ¤ä¸¤ä¸ªèµ„æºï¼Œè¿™æ—¶æ˜¯ä¼šäº§ç”Ÿå¹¶å‘å†²çªçš„ã€‚</p><h4 id="ä¸€æŠŠé”ä¿æŠ¤å¤šä¸ªèµ„æº">ä¸€æŠŠé”ä¿æŠ¤å¤šä¸ªèµ„æºğŸª</h4><p>ç»†ç²’åº¦é”ï¼šç”¨ä¸åŒçš„é”å¯¹å—ä¿æŠ¤èµ„æºè¿›è¡Œç²¾ç»†åŒ–ç®¡ç†ï¼Œèƒ½å¤Ÿæå‡æ€§èƒ½ã€‚</p><p>å®ç°ä¸¤å®¢æˆ·è½¬è´¦ï¼š</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Account</span> &#123;<br>  <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> balance;<br>  <span class="hljs-comment">// è½¬è´¦</span><br>  <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">transfer</span><span class="hljs-params">( Account target, <span class="hljs-type">int</span> amt)</span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.balance &gt; amt) &#123;<br>      <span class="hljs-built_in">this</span>.balance -= amt;<br>      target.balance += amt;<br>    &#125;<br>  &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure><p>ä¸Šè¿°æ˜¯ä¸å¯ä»¥çš„ï¼Œå› ä¸ºåªæ˜¯ç»™thisåŠ äº†é”ï¼Œä½†æ˜¯targetå¹¶æœªåŠ é”ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220531144223723.png" /></p><p>æ¯”å¦‚ä¸‹é¢åœºæ™¯ï¼Œ Aã€Bã€C ä¸‰ä¸ªè´¦æˆ·ï¼Œä½™é¢éƒ½æ˜¯ 200å…ƒï¼Œæˆ‘ä»¬ç”¨ä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«æ‰§è¡Œä¸¤ä¸ªè½¬è´¦æ“ä½œï¼šè´¦æˆ· A è½¬ç»™è´¦æˆ· B 100 å…ƒï¼Œè´¦æˆ· Bè½¬ç»™è´¦æˆ· C 100 å…ƒï¼Œæœ€åæˆ‘ä»¬æœŸæœ›çš„ç»“æœåº”è¯¥æ˜¯è´¦æˆ· A çš„ä½™é¢æ˜¯ 100 å…ƒï¼Œè´¦æˆ·B çš„ä½™é¢æ˜¯ 200 å…ƒï¼Œ è´¦æˆ· C çš„ä½™é¢æ˜¯ 300 å…ƒã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220531144334159.png" /></p><p>ä½†æ˜¯ç»“æœæ˜¯ B çš„ä½™é¢ä¸º100æˆ–300ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼šé”èƒ½è¦†ç›–æ‰€æœ‰å—ä¿æŠ¤çš„èµ„æºå³å¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Account</span> &#123;<br>  <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> balance;<br>  <span class="hljs-comment">// è½¬è´¦</span><br>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">transfer</span><span class="hljs-params">(Account target, <span class="hljs-type">int</span> amt)</span>&#123;<br>    <span class="hljs-keyword">synchronized</span>(Account.class) &#123;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.balance &gt; amt) &#123;<br>        <span class="hljs-built_in">this</span>.balance -= amt;<br>        target.balance += amt;<br>      &#125;<br>    &#125;<br>  &#125; <br>&#125;<br></code></pre></div></td></tr></table></figure><p>Account.class æ˜¯æ‰€æœ‰ Account å¯¹è±¡å…±äº«çš„ï¼Œè€Œä¸”è¿™ä¸ªå¯¹è±¡æ˜¯ Javaè™šæ‹Ÿæœºåœ¨åŠ è½½ Account ç±»çš„æ—¶å€™åˆ›å»ºçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ç”¨æ‹…å¿ƒå®ƒçš„å”¯ä¸€æ€§ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220531144932060.png" /></p><p>å¦‚æœèµ„æºä¹‹é—´æ²¡æœ‰å…³ç³»ï¼Œå¾ˆå¥½å¤„ç†ï¼Œæ¯ä¸ªèµ„æºä¸€æŠŠé”å°±å¯ä»¥äº†ã€‚å¦‚æœèµ„æºä¹‹é—´æœ‰å…³è”å…³ç³»ï¼Œå°±è¦é€‰æ‹©ä¸€ä¸ªç²’åº¦æ›´å¤§çš„é”ï¼Œè¿™ä¸ªé”åº”è¯¥èƒ½å¤Ÿè¦†ç›–æ‰€æœ‰ç›¸å…³çš„èµ„æºã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜è¦æ¢³ç†å‡ºæœ‰å“ªäº›è®¿é—®è·¯å¾„ï¼Œæ‰€æœ‰çš„è®¿é—®è·¯å¾„éƒ½è¦è®¾ç½®åˆé€‚çš„é”ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¹¶å‘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŸºç¡€ç®—æ³•æ¨¡æ¿</title>
    <link href="/post/4b9526ee.html"/>
    <url>/post/4b9526ee.html</url>
    
    <content type="html"><![CDATA[<p>å¯¹ä¸€äº›å¸¸è§ç®—æ³•çš„æ¨¡æ¿è¿›è¡Œæ€»ç»“</p><span id="more"></span><h1 id="åŸºç¡€ç®—æ³•æ¨¡æ¿">åŸºç¡€ç®—æ³•æ¨¡æ¿</h1><h2 id="å¿«æ’">å¿«æ’</h2><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">quick_sort</span><span class="hljs-params">(<span class="hljs-type">int</span> q[],<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span>(l &gt;= r) <span class="hljs-keyword">return</span>;<br><br>    <span class="hljs-type">int</span> i=l<span class="hljs-number">-1</span>,j=r+<span class="hljs-number">1</span>,x=q[l+r&gt;&gt;<span class="hljs-number">1</span>];<br><br>    <span class="hljs-keyword">while</span>(i &lt; j) &#123;<br>        <span class="hljs-keyword">do</span> i++; <span class="hljs-keyword">while</span>(q[i]&lt;x);<br>        <span class="hljs-keyword">do</span> j--; <span class="hljs-keyword">while</span>(q[j]&gt;x);<br>        <span class="hljs-keyword">if</span>(i&lt;j) <span class="hljs-built_in">swap</span>(q[i],q[j]);<br>    &#125;<br><br>    <span class="hljs-built_in">quick_sort</span>(q,l,j);<span class="hljs-built_in">quick_sort</span>(q,j+<span class="hljs-number">1</span>,r);<br>&#125;<br></code></pre></div></td></tr></table></figure><h2 id="å½’å¹¶æ’åº">å½’å¹¶æ’åº</h2><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">merge_sort</span><span class="hljs-params">(<span class="hljs-type">int</span> q[],<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r)</span> </span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(l &gt;= r) <span class="hljs-keyword">return</span>;<br><br>    <span class="hljs-type">int</span> mid=l+r&gt;&gt;<span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">merge_sort</span>(q,l,mid); <span class="hljs-built_in">merge_sort</span>(q,mid+<span class="hljs-number">1</span>,r);<br><br>    <span class="hljs-type">int</span> k=<span class="hljs-number">0</span>,i=l,j=mid+<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span>(i &lt;= mid &amp;&amp; j &lt;= r) &#123;<br>        <span class="hljs-keyword">if</span>(q[i] &lt;= q[j]) tmp[k++]=q[i++];<br>        <span class="hljs-keyword">else</span> tmp[k++]=q[j++];<br>    &#125;<br>    <span class="hljs-keyword">while</span>(i &lt;= mid) tmp[k++]=q[i++];<br>    <span class="hljs-keyword">while</span>(j &lt;= r) tmp[k++]=q[j++];<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=l,j=<span class="hljs-number">0</span>;i &lt;= r;i++,j++) q[i]=tmp[j];<br>&#125;<br></code></pre></div></td></tr></table></figure><h2 id="æ•´æ•°äºŒåˆ†">æ•´æ•°äºŒåˆ†</h2><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/5CDE6B2F01A72254A27D853AE08CBD8F.png" /></p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">check</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>&#123;<span class="hljs-comment">/* ... */</span>&#125; <span class="hljs-comment">// æ£€æŸ¥xæ˜¯å¦æ»¡è¶³æŸç§æ€§è´¨</span><br><br><span class="hljs-comment">// åŒºé—´[l, r]è¢«åˆ’åˆ†æˆ[l, mid]å’Œ[mid + 1, r]æ—¶ä½¿ç”¨ï¼š</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">bsearch_1</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">while</span> (l &lt; r)<br>    &#123;<br>        <span class="hljs-type">int</span> mid = l + r &gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">check</span>(mid)) r = mid;    <span class="hljs-comment">// check()åˆ¤æ–­midæ˜¯å¦æ»¡è¶³æ€§è´¨</span><br>        <span class="hljs-keyword">else</span> l = mid + <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> l;<br>&#125;<br><span class="hljs-comment">// åŒºé—´[l, r]è¢«åˆ’åˆ†æˆ[l, mid - 1]å’Œ[mid, r]æ—¶ä½¿ç”¨ï¼š</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">bsearch_2</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">while</span> (l &lt; r)<br>    &#123;<br>        <span class="hljs-type">int</span> mid = l + r + <span class="hljs-number">1</span> &gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">check</span>(mid)) l = mid;<br>        <span class="hljs-keyword">else</span> r = mid - <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> l;<br>&#125;<br></code></pre></div></td></tr></table></figure><h2 id="æµ®ç‚¹æ•°äºŒåˆ†">æµ®ç‚¹æ•°äºŒåˆ†</h2><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">check</span><span class="hljs-params">(<span class="hljs-type">double</span> x)</span> </span>&#123;<span class="hljs-comment">/* ... */</span>&#125; <span class="hljs-comment">// æ£€æŸ¥xæ˜¯å¦æ»¡è¶³æŸç§æ€§è´¨</span><br><br><span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">bsearch_3</span><span class="hljs-params">(<span class="hljs-type">double</span> l, <span class="hljs-type">double</span> r)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">const</span> <span class="hljs-type">double</span> eps = <span class="hljs-number">1e-6</span>;   <span class="hljs-comment">// eps è¡¨ç¤ºç²¾åº¦ï¼Œå–å†³äºé¢˜ç›®å¯¹ç²¾åº¦çš„è¦æ±‚</span><br>    <span class="hljs-keyword">while</span> (r - l &gt; eps)<br>    &#123;<br>        <span class="hljs-type">double</span> mid = (l + r) / <span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">check</span>(mid)) r = mid;<br>        <span class="hljs-keyword">else</span> l = mid;<br>    &#125;<br>    <span class="hljs-keyword">return</span> l;<br>&#125;<br></code></pre></div></td></tr></table></figure><h2 id="é«˜ç²¾åº¦åŠ æ³•">é«˜ç²¾åº¦åŠ æ³•</h2><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">// C = A + B, A &gt;= 0, B &gt;= 0</span><br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">add</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt; &amp;A, vector&lt;<span class="hljs-type">int</span>&gt; &amp;B)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (A.<span class="hljs-built_in">size</span>() &lt; B.<span class="hljs-built_in">size</span>()) <span class="hljs-keyword">return</span> <span class="hljs-built_in">add</span>(B, A);<br><br>    vector&lt;<span class="hljs-type">int</span>&gt; C;<br>    <span class="hljs-type">int</span> t = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; A.<span class="hljs-built_in">size</span>(); i ++ )<br>    &#123;<br>        t += A[i];<br>        <span class="hljs-keyword">if</span> (i &lt; B.<span class="hljs-built_in">size</span>()) t += B[i];<br>        C.<span class="hljs-built_in">push_back</span>(t % <span class="hljs-number">10</span>);<br>        t /= <span class="hljs-number">10</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (t) C.<span class="hljs-built_in">push_back</span>(t);<br>    <span class="hljs-keyword">return</span> C;<br>&#125;<br></code></pre></div></td></tr></table></figure><h2 id="é«˜ç²¾åº¦å‡æ³•">é«˜ç²¾åº¦å‡æ³•</h2><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">// C = A - B, æ»¡è¶³A &gt;= B, A &gt;= 0, B &gt;= 0</span><br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">sub</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt; &amp;A, vector&lt;<span class="hljs-type">int</span>&gt; &amp;B)</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; C;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>, t = <span class="hljs-number">0</span>; i &lt; A.<span class="hljs-built_in">size</span>(); i ++ )<br>    &#123;<br>        t = A[i] - t;<br>        <span class="hljs-keyword">if</span> (i &lt; B.<span class="hljs-built_in">size</span>()) t -= B[i];<br>        C.<span class="hljs-built_in">push_back</span>((t + <span class="hljs-number">10</span>) % <span class="hljs-number">10</span>);<br>        <span class="hljs-keyword">if</span> (t &lt; <span class="hljs-number">0</span>) t = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span> t = <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">while</span> (C.<span class="hljs-built_in">size</span>() &gt; <span class="hljs-number">1</span> &amp;&amp; C.<span class="hljs-built_in">back</span>() == <span class="hljs-number">0</span>) C.<span class="hljs-built_in">pop_back</span>();<br>    <span class="hljs-keyword">return</span> C;<br>&#125;<br></code></pre></div></td></tr></table></figure><h2 id="é«˜ç²¾åº¦ä¹˜æ³•">é«˜ç²¾åº¦ä¹˜æ³•</h2><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">// C = A * b, A &gt;= 0, b &gt;= 0</span><br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">mul</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt; &amp;A, <span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; C;<br><br>    <span class="hljs-type">int</span> t = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; A.<span class="hljs-built_in">size</span>() || t; i ++ )<br>    &#123;<br>        <span class="hljs-keyword">if</span> (i &lt; A.<span class="hljs-built_in">size</span>()) t += A[i] * b;<br>        C.<span class="hljs-built_in">push_back</span>(t % <span class="hljs-number">10</span>);<br>        t /= <span class="hljs-number">10</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">while</span> (C.<span class="hljs-built_in">size</span>() &gt; <span class="hljs-number">1</span> &amp;&amp; C.<span class="hljs-built_in">back</span>() == <span class="hljs-number">0</span>) C.<span class="hljs-built_in">pop_back</span>();<br><br>    <span class="hljs-keyword">return</span> C;<br>&#125;<br></code></pre></div></td></tr></table></figure><h2 id="é«˜ç²¾åº¦é™¤æ³•">é«˜ç²¾åº¦é™¤æ³•</h2><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">// A / b = C ... r, A &gt;= 0, b &gt; 0</span><br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">div</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt; &amp;A, <span class="hljs-type">int</span> b, <span class="hljs-type">int</span> &amp;r)</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; C;<br>    r = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = A.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i -- )<br>    &#123;<br>        r = r * <span class="hljs-number">10</span> + A[i];<br>        C.<span class="hljs-built_in">push_back</span>(r / b);<br>        r %= b;<br>    &#125;<br>    <span class="hljs-built_in">reverse</span>(C.<span class="hljs-built_in">begin</span>(), C.<span class="hljs-built_in">end</span>());<br>    <span class="hljs-keyword">while</span> (C.<span class="hljs-built_in">size</span>() &gt; <span class="hljs-number">1</span> &amp;&amp; C.<span class="hljs-built_in">back</span>() == <span class="hljs-number">0</span>) C.<span class="hljs-built_in">pop_back</span>();<br>    <span class="hljs-keyword">return</span> C;<br>&#125;<br></code></pre></div></td></tr></table></figure><h2 id="ä¸€ç»´å‰ç¼€å’Œ">ä¸€ç»´å‰ç¼€å’Œ</h2><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++">S[i] = a[<span class="hljs-number">1</span>] + a[<span class="hljs-number">2</span>] + ... a[i]<br>a[l] + ... + a[r] = S[r] - S[l - <span class="hljs-number">1</span>]<br></code></pre></div></td></tr></table></figure><h2 id="äºŒç»´å‰ç¼€å’Œ">äºŒç»´å‰ç¼€å’Œ</h2><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/duo-wei-qian-zhui-he.png" style="zoom:50%;" /></p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++">S[i, j] = ç¬¬iè¡Œjåˆ—æ ¼å­å·¦ä¸Šéƒ¨åˆ†æ‰€æœ‰å…ƒç´ çš„å’Œ<br>ä»¥(x1, y1)ä¸ºå·¦ä¸Šè§’ï¼Œ(x2, y2)ä¸ºå³ä¸‹è§’çš„å­çŸ©é˜µçš„å’Œä¸ºï¼š<br>S[x2, y2] - S[x1 - <span class="hljs-number">1</span>, y2] - S[x2, y1 - <span class="hljs-number">1</span>] + S[x1 - <span class="hljs-number">1</span>, y1 - <span class="hljs-number">1</span>]<br></code></pre></div></td></tr></table></figure><h2 id="ä¸€ç»´å·®åˆ†">ä¸€ç»´å·®åˆ†</h2><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/yi-jie-cha-fen.png" style="zoom:50%;" /></p><p>ç»™åŒºé—´[l, r]ä¸­çš„æ¯ä¸ªæ•°åŠ ä¸Šcï¼š <span class="math inline">\(B[l] += c,B[r + 1] -= c\)</span></p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/*</span><br><span class="hljs-comment">å‡å®šaæ•°ç»„æœ€å¼€å§‹éƒ½æ˜¯0ï¼Œé‚£ä¹ˆbæ•°ç»„åˆå§‹æ—¶å°±æ˜¯aæ•°ç»„çš„å·®åˆ†æ•°ç»„äº†ï¼Œå¯¹äºæ¯ä¸€ä¸ªa[i]ï¼Œç›¸å½“äºæ’å…¥äº†ä¸€ä¸ªæ•°ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨insertå‡½æ•°å³å¯ã€‚</span><br><span class="hljs-comment">å½“ç„¶ä¹Ÿå¯ä»¥ä»å·®åˆ†æ•°ç»„çš„å®šä¹‰å‡ºå‘ï¼Œfor(int i=1;i&lt;=n;i) b[i]=a[i]-a[i-1];ç”¨è¿™ä¸€è¡Œæ›¿æ¢ä¸Šä¸€è¡Œï¼Œæ•ˆæœä¸€æ ·ï¼Œåªæ˜¯ä¸Šè¾¹çš„æŠŠaæ•°ç»„å½“æˆå…¨ä¸º0ï¼Œè¯»å…¥çš„a[i]å†æ’å…¥ï¼Œè¿™ä¸€ä¸ªæŠŠè¯»å…¥åçš„å½“åšaæ•°ç»„ã€‚</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>;i &lt;= n;i++) <span class="hljs-built_in">insert</span>(i,i,a[i]);<br><br><span class="hljs-comment">//åœ¨è¿™ä¹‹å‰ï¼Œb[i] å°±æ˜¯å·®åˆ†æ•°ç»„äº†ï¼Œå…¶ä¸­æ¯ä¸€é¡¹ b[i] = a[i] - a[i-1]</span><br><span class="hljs-comment">//åœ¨æ‰§è¡Œè¿™å¥è¯ä¹‹åï¼Œç›¸å½“äºæ˜¯æ±‚æ­¤æ—¶çš„ a[i] ï¼ï¼ï¼</span><br><span class="hljs-comment">//å› ä¸ºæœ€åè¾“å‡ºçš„æ˜¯ a[i]</span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>;i &lt; n;i++) b[i] += b[i<span class="hljs-number">-1</span>];<br></code></pre></div></td></tr></table></figure><h2 id="å·®åˆ†çŸ©é˜µ">å·®åˆ†çŸ©é˜µ</h2><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/er-wei-cha-fen.png" style="zoom:50%"></p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++">ç»™ä»¥(x1, y1)ä¸ºå·¦ä¸Šè§’ï¼Œ(x2, y2)ä¸ºå³ä¸‹è§’çš„å­çŸ©é˜µä¸­çš„æ‰€æœ‰å…ƒç´ åŠ ä¸Šcï¼š<br>S[x1, y1] += c, S[x2 + <span class="hljs-number">1</span>, y1] -= c, S[x1, y2 + <span class="hljs-number">1</span>] -= c, S[x2 + <span class="hljs-number">1</span>, y2 + <span class="hljs-number">1</span>] += c<br></code></pre></div></td></tr></table></figure><h2 id="åŒæŒ‡é’ˆç®—æ³•">åŒæŒ‡é’ˆç®—æ³•</h2><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span>; i &lt; n; i ++ )<br>&#123;<br>    <span class="hljs-keyword">while</span> (j &lt; i &amp;&amp; <span class="hljs-built_in">check</span>(i, j)) j ++ ;<br><br>    <span class="hljs-comment">// å…·ä½“é—®é¢˜çš„é€»è¾‘</span><br>&#125;<br><span class="hljs-comment">/*å¸¸è§é—®é¢˜åˆ†ç±»ï¼š</span><br><span class="hljs-comment">(1) å¯¹äºä¸€ä¸ªåºåˆ—ï¼Œç”¨ä¸¤ä¸ªæŒ‡é’ˆç»´æŠ¤ä¸€æ®µåŒºé—´</span><br><span class="hljs-comment">(2) å¯¹äºä¸¤ä¸ªåºåˆ—ï¼Œç»´æŠ¤æŸç§æ¬¡åºï¼Œæ¯”å¦‚å½’å¹¶æ’åºä¸­åˆå¹¶ä¸¤ä¸ªæœ‰åºåºåˆ—çš„æ“ä½œ*/</span><br></code></pre></div></td></tr></table></figure><h2 id="ä½è¿ç®—">ä½è¿ç®—</h2><p>æ±‚nçš„ç¬¬kä½æ•°å­—: n &gt;&gt; k &amp; 1</p><figure class="highlight markdown"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs markdown">lowbitæ“ä½œè§£é‡Šï¼š<br><br>è®¾  x = 1010...1000<br>åˆ™ -x = ~x+1<br>~x = 0101...0111<br>~x+1 = 0101...1000<br>x&amp;-x = 0000...1000<br>æ­¤æ—¶è¿”å›çš„å°±æ˜¯æœ€ä½ä½ 1<br>è¿”å›nçš„æœ€åä¸€ä½1ï¼šlowbit(n) = n &amp; -n<br></code></pre></div></td></tr></table></figure><h2 id="ç¦»æ•£åŒ–">ç¦»æ•£åŒ–</h2><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++">vector&lt;<span class="hljs-type">int</span>&gt; alls; <span class="hljs-comment">// å­˜å‚¨æ‰€æœ‰å¾…ç¦»æ•£åŒ–çš„å€¼</span><br><span class="hljs-built_in">sort</span>(alls.<span class="hljs-built_in">begin</span>(), alls.<span class="hljs-built_in">end</span>()); <span class="hljs-comment">// å°†æ‰€æœ‰å€¼æ’åº</span><br>alls.<span class="hljs-built_in">erase</span>(<span class="hljs-built_in">unique</span>(alls.<span class="hljs-built_in">begin</span>(), alls.<span class="hljs-built_in">end</span>()), alls.<span class="hljs-built_in">end</span>());   <span class="hljs-comment">// å»æ‰é‡å¤å…ƒç´ </span><br><br><span class="hljs-comment">// äºŒåˆ†æ±‚å‡ºxå¯¹åº”çš„ç¦»æ•£åŒ–çš„å€¼</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> <span class="hljs-comment">// æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºç­‰äºxçš„ä½ç½®</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> l = <span class="hljs-number">0</span>, r = alls.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (l &lt; r)<br>    &#123;<br>        <span class="hljs-type">int</span> mid = l + r &gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (alls[mid] &gt;= x) r = mid;<br>        <span class="hljs-keyword">else</span> l = mid + <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> r + <span class="hljs-number">1</span>; <span class="hljs-comment">// æ˜ å°„åˆ°1, 2, ...n</span><br>&#125;<br><br><span class="hljs-comment">//è‡ªå·±å®ç°uniqueå‡½æ•°</span><br>vector&lt;<span class="hljs-type">int</span>&gt;::<span class="hljs-function">iterator <span class="hljs-title">unique</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt; &amp;a)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; a.<span class="hljs-built_in">size</span>();i++)<br>    &#123;<br>        <span class="hljs-comment">// æˆ–è€… ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ æˆ–è€… æ»¡è¶³ a[i] != a[i-1] </span><br>        <span class="hljs-keyword">if</span>(i == <span class="hljs-number">0</span> || a[i] != a[i<span class="hljs-number">-1</span>]) a[j++] = a[i];<br>    &#125;<br>    <span class="hljs-keyword">return</span> a.<span class="hljs-built_in">begin</span>() + j;<br>&#125;<br><span class="hljs-comment">//è°ƒç”¨çš„æ—¶å€™</span><br>alls.<span class="hljs-built_in">erase</span>(<span class="hljs-built_in">unique</span>(alls),alls.<span class="hljs-built_in">end</span>());<br></code></pre></div></td></tr></table></figure><h2 id="åŒºé—´åˆå¹¶">åŒºé—´åˆå¹¶</h2><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/qu-jian-he-bing.png" style="zoom:50%"></p><figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">// å°†æ‰€æœ‰å­˜åœ¨äº¤é›†çš„åŒºé—´åˆå¹¶</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">merge</span><span class="hljs-params">(vector&lt;PII&gt; &amp;segs)</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;PII&gt; res;<br><br>    <span class="hljs-comment">// ä¸€å®šè®°å¾—è¦å…ˆå¯¹å·¦ç«¯ç‚¹è¿›è¡Œæ’åºï¼ï¼ï¼ï¼ï¼</span><br>    <span class="hljs-built_in">sort</span>(segs.<span class="hljs-built_in">begin</span>(),segs.<span class="hljs-built_in">end</span>());<br><br>    <span class="hljs-comment">// å› ä¸ºæ•°æ®èŒƒå›´æ˜¯ -1e9 ~ 1e9</span><br>    <span class="hljs-comment">// 2e9 ç›¸å½“äºæ˜¯æ— ç©·å¤§</span><br>    <span class="hljs-type">int</span> st=<span class="hljs-number">-2e9</span>,ed=<span class="hljs-number">-2e9</span>;<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> seg : segs)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(ed &lt; seg.first) &#123;<br>            <span class="hljs-keyword">if</span>(st != <span class="hljs-number">-2e9</span>) res.<span class="hljs-built_in">push_back</span>(&#123;st,ed&#125;);<br>            st = seg.first;<br>            ed = seg.second;<br>        &#125;<br>        <span class="hljs-keyword">else</span> ed = <span class="hljs-built_in">max</span>(ed,seg.second);<br>    &#125;<br><br>    <span class="hljs-keyword">if</span>(st != <span class="hljs-number">-2e9</span>) res.<span class="hljs-built_in">push_back</span>(&#123;st,ed&#125;);<br><br>    segs = res;<br>&#125;<br></code></pre></div></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç®—æ³•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•æ¨¡æ¿</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SQLå¿…çŸ¥å¿…ä¼šç¬”è®°ï¼ˆä¸‰ï¼‰</title>
    <link href="/post/5c6fe708.html"/>
    <url>/post/5c6fe708.html</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦å¯¹<ahref="https://time.geekbang.org/column/intro/100029501">SQLå¿…çŸ¥å¿…ä¼š</a>çš„å†…å®¹è¿›è¡Œæ€»ç»“</p><span id="more"></span><h1 id="sqlå¿…çŸ¥å¿…ä¼šç¬”è®°ä¸‰">SQLå¿…çŸ¥å¿…ä¼šç¬”è®°ï¼ˆä¸‰ï¼‰</h1><h3 id="ä»£ä»·ç»Ÿè®¡">ä»£ä»·ç»Ÿè®¡ğŸ“</h3><p>æŸ¥è¯¢ä¼˜åŒ–å™¨çš„ç›®çš„å°±æ˜¯ç”Ÿæˆæœ€ä½³çš„æ‰§è¡Œè®¡åˆ’ï¼Œè€Œç”Ÿæˆæœ€ä½³æ‰§è¡Œè®¡åˆ’çš„ç­–ç•¥é€šå¸¸æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ã€‚</p><ul><li>åŸºäºè§„åˆ™çš„ä¼˜åŒ–å™¨ RBO</li><li>åŸºäºä»£ä»·çš„ä¼˜åŒ–å™¨ CBO</li><li>RBO çš„æ–¹å¼æ›´åƒæ˜¯ä¸€ä¸ªå‡ºç§Ÿè½¦è€å¸æœºï¼Œå‡­å€Ÿè‡ªå·±çš„ç»éªŒæ¥é€‰æ‹©ä» A åˆ° Bçš„è·¯å¾„ã€‚è€Œ CBO æ›´åƒæ˜¯æ‰‹æœºå¯¼èˆªï¼Œé€šè¿‡æ•°æ®é©±åŠ¨ï¼Œæ¥é€‰æ‹©æœ€ä½³çš„æ‰§è¡Œè·¯å¾„ã€‚</li></ul><h3 id="æŸ¥è¯¢ä¼˜åŒ–">æŸ¥è¯¢ä¼˜åŒ–ğŸ‰</h3><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/%E4%B8%8B%E8%BD%BD.png" /></p><ul><li><p>æ…¢æŸ¥è¯¢å¯ä»¥å¸®æˆ‘ä»¬å®šä½æ‰§è¡Œæ…¢çš„ SQL è¯­å¥ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®long_query_time å‚æ•°å®šä¹‰â€œæ…¢â€çš„é˜ˆå€¼ï¼Œå¦‚æœ SQL æ‰§è¡Œæ—¶é—´è¶…è¿‡äº†long_query_timeï¼Œåˆ™ä¼šè®¤ä¸ºæ˜¯æ…¢æŸ¥è¯¢ã€‚å½“æ”¶é›†ä¸Šæ¥è¿™äº›æ…¢æŸ¥è¯¢ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡åˆ†æå·¥å…·å¯¹æ…¢æŸ¥è¯¢æ—¥å¿—è¿›è¡Œåˆ†æã€‚</p></li><li><p>EXPLAIN æŸ¥çœ‹å¯¹åº” SQL è¯­å¥çš„æ‰§è¡Œè®¡åˆ’ï¼Œæˆ–è€…ä½¿ç”¨ show profile æŸ¥çœ‹SQL ä¸­æ¯ä¸€ä¸ªæ­¥éª¤çš„æ—¶é—´æˆæœ¬ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥äº†è§£ SQLæŸ¥è¯¢æ…¢æ˜¯å› ä¸ºæ‰§è¡Œæ—¶é—´é•¿ï¼Œè¿˜æ˜¯ç­‰å¾…æ—¶é—´é•¿ã€‚</p></li><li><p>EXPLAINä¸­typeçš„å«ä¹‰ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220528145128812.png" /></p><ul><li>all æ˜¯æœ€åçš„æƒ…å†µï¼Œå› ä¸ºé‡‡ç”¨äº†å…¨è¡¨æ‰«æçš„æ–¹å¼ã€‚</li><li>index å’Œ all å·®ä¸å¤šï¼Œåªä¸è¿‡ indexå¯¹ç´¢å¼•è¡¨è¿›è¡Œå…¨æ‰«æï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ä¸å†éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œä½†æ˜¯å¼€é”€ä¾ç„¶å¾ˆå¤§ã€‚</li><li>range è¡¨ç¤ºé‡‡ç”¨äº†ç´¢å¼•èŒƒå›´æ‰«æã€‚å°½é‡è®© SQL æŸ¥è¯¢å¯ä»¥ä½¿ç”¨åˆ° rangeè¿™ä¸€çº§åˆ«åŠä»¥ä¸Šçš„ type è®¿é—®æ–¹å¼ã€‚</li><li>index_mergeè¯´æ˜æŸ¥è¯¢åŒæ—¶ä½¿ç”¨äº†ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„ç´¢å¼•ï¼Œæœ€åå–äº†äº¤é›†æˆ–è€…å¹¶é›†ã€‚</li><li>ref ç±»å‹è¡¨ç¤ºé‡‡ç”¨äº†éå”¯ä¸€ç´¢å¼•ï¼Œæˆ–è€…æ˜¯å”¯ä¸€ç´¢å¼•çš„éå”¯ä¸€æ€§å‰ç¼€ã€‚</li><li>eq_refç±»å‹æ˜¯ä½¿ç”¨ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•æ—¶äº§ç”Ÿçš„è®¿é—®æ–¹å¼ï¼Œé€šå¸¸ä½¿ç”¨åœ¨å¤šè¡¨è”æŸ¥ä¸­ã€‚</li><li>constç±»å‹è¡¨ç¤ºæˆ‘ä»¬ä½¿ç”¨äº†ä¸»é”®æˆ–è€…å”¯ä¸€ç´¢å¼•ï¼ˆæ‰€æœ‰çš„éƒ¨åˆ†ï¼‰ä¸å¸¸é‡å€¼è¿›è¡Œæ¯”è¾ƒã€‚<ul><li>const ç±»å‹å’Œ eq_reféƒ½ä½¿ç”¨äº†ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•ï¼Œä¸è¿‡è¿™ä¸¤ä¸ªç±»å‹æœ‰æ‰€åŒºåˆ«ï¼Œconstæ˜¯ä¸å¸¸é‡è¿›è¡Œæ¯”è¾ƒï¼ŒæŸ¥è¯¢æ•ˆç‡ä¼šæ›´å¿«ï¼Œè€Œ eq_ref é€šå¸¸ç”¨äºå¤šè¡¨è”æŸ¥ä¸­ã€‚</li></ul></li><li>system ç±»å‹ä¸€èˆ¬ç”¨äº MyISAM æˆ– Memory è¡¨ï¼Œå±äº constç±»å‹çš„ç‰¹ä¾‹ï¼Œå½“è¡¨åªæœ‰ä¸€è¡Œæ—¶è¿æ¥ç±»å‹ä¸º systemã€‚</li><li>æ•ˆç‡ä»ä½åˆ°é«˜ä¾æ¬¡ä¸º all &lt; index &lt; range &lt; index_merge &lt;ref &lt; eq_ref &lt;const/systemã€‚æˆ‘ä»¬åœ¨æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’çš„æ—¶å€™ï¼Œé€šå¸¸å¸Œæœ›æ‰§è¡Œè®¡åˆ’è‡³å°‘å¯ä»¥ä½¿ç”¨åˆ°range çº§åˆ«ä»¥ä¸Šçš„è¿æ¥æ–¹å¼ï¼Œå¦‚æœåªä½¿ç”¨åˆ°äº† all æˆ–è€… indexè¿æ¥æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä» SQL è¯­å¥å’Œç´¢å¼•è®¾è®¡çš„è§’åº¦ä¸Šè¿›è¡Œæ”¹è¿›ã€‚</li><li>å¦‚æœä¸¤è¡¨å…³è”æŸ¥è¯¢ï¼Œå¯ä»¥è¿™æ ·ç†è§£ï¼š<ol type="1"><li>ref - åŒå±‚å¾ªç¯ï¼Œç›´åˆ°æ‰¾å‡ºæ‰€æœ‰åŒ¹é…ã€‚</li><li>eq_ref -åŒå±‚å¾ªç¯ï¼Œå€ŸåŠ©ç´¢å¼•çš„å”¯ä¸€æ€§ï¼Œæ‰¾åˆ°åŒ¹é…å°±é©¬ä¸Šé€€å‡ºå†…å±‚å¾ªç¯ã€‚</li><li>const: å•å±‚å¾ªç¯ã€‚</li></ol></li></ul></li><li><p>æŸ¥çœ‹å½“å‰ä¼šè¯æ‰€æœ‰å¼€é”€ï¼š<code>show profiles</code>ã€æŸ¥çœ‹ä¸Šä¸€ä¸ªæŸ¥è¯¢çš„å¼€é”€<code>show profile;</code> ã€æŸ¥çœ‹æŒ‡å®šçš„ Query ID çš„å¼€é”€<code>show profile for query ID_num</code> ã€å‘½ä»¤å°†è¢«å¼ƒç”¨ï¼Œå¯ä»¥ä»information_schema ä¸­çš„ profiling æ•°æ®è¡¨è¿›è¡ŒæŸ¥çœ‹ã€‚</p></li></ul><h3 id="ä¸»ä»åŒæ­¥">ä¸»ä»åŒæ­¥ğŸ·</h3><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220529162228714.png" /></p><p>åœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸å°†Redisä½œä¸ºç¼“å­˜ä¸MySQLé…åˆæ¥ä½¿ç”¨ï¼Œå½“æœ‰æ•°æ®è®¿é—®è¯·æ±‚çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šä»ç¼“å­˜ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æœå­˜åœ¨å°±ç›´æ¥å–å‡ºï¼Œå¦‚æœä¸å­˜åœ¨å†è®¿é—®æ•°æ®åº“ï¼Œè¿™æ ·å°±æå‡äº†è¯»å–çš„æ•ˆç‡ï¼Œä¹Ÿå‡å°‘äº†å¯¹åç«¯æ•°æ®åº“çš„è®¿é—®å‹åŠ›ã€‚å¯ä»¥è¯´ä½¿ç”¨Redisè¿™ç§ç¼“å­˜æ¶æ„æ˜¯é«˜å¹¶å‘æ¶æ„ä¸­éå¸¸é‡è¦çš„ä¸€ç¯ã€‚</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹MySQLåšä¸»ä»æ¶æ„å¹¶ä¸”è¿›è¡Œè¯»å†™åˆ†ç¦»ï¼Œè®©ä¸»æœåŠ¡å™¨(Masterï¼‰å¤„ç†å†™è¯·æ±‚ï¼Œä»æœåŠ¡å™¨(Slave)å¤„ç†è¯»è¯·æ±‚ï¼Œè¿™æ ·åŒæ ·å¯ä»¥æå‡æ•°æ®åº“çš„å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚</p><p>ä¸»ä»åŒæ­¥</p><p>å¦‚æœæˆ‘ä»¬çš„ç›®çš„åœ¨äºæå‡æ•°æ®åº“é«˜å¹¶å‘è®¿é—®çš„æ•ˆç‡ï¼Œé‚£ä¹ˆé¦–å…ˆéœ€è¦è€ƒè™‘çš„åº”è¯¥æ˜¯å¦‚ä½•ä¼˜åŒ–SQL å’Œç´¢å¼•ï¼Œè¿™ç§æ–¹å¼ç®€å•æœ‰æ•ˆï¼Œå…¶æ¬¡æ‰æ˜¯é‡‡ç”¨ç¼“å­˜çš„ç­–ç•¥ï¼Œæ¯”å¦‚ä½¿ç”¨Redisï¼Œé€šè¿‡ Redisé«˜æ€§èƒ½çš„ä¼˜åŠ¿å°†çƒ­ç‚¹æ•°æ®ä¿å­˜åœ¨å†…å­˜æ•°æ®åº“ä¸­ï¼Œæå‡è¯»å–çš„æ•ˆç‡ï¼Œæœ€åæ‰æ˜¯å¯¹æ•°æ®åº“é‡‡ç”¨ä¸»ä»æ¶æ„ï¼Œè¿›è¡Œè¯»å†™åˆ†ç¦»ã€‚</p><p>ä½œç”¨ï¼š</p><ul><li><p>æé«˜æ•°æ®åº“çš„ååé‡</p></li><li><p>è¯»å†™åˆ†ç¦»</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸»ä»å¤åˆ¶çš„æ–¹å¼æ¥åŒæ­¥æ•°æ®ï¼Œç„¶åé€šè¿‡è¯»å†™åˆ†ç¦»æé«˜æ•°æ®åº“å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚</p><p>ç®€å•æ¥è¯´å°±æ˜¯åŒä¸€ä»½æ•°æ®è¢«æ”¾åˆ°äº†å¤šä¸ªæ•°æ®åº“ä¸­ï¼Œå…¶ä¸­ä¸€ä¸ªæ•°æ®åº“æ˜¯Masterä¸»åº“ï¼Œå…¶ä½™çš„å¤šä¸ªæ•°æ®åº“æ˜¯Slaveä»åº“ã€‚å½“ä¸»åº“è¿›è¡Œæ›´æ–°çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å°†æ•°æ®å¤åˆ¶åˆ°ä»åº“ä¸­ï¼Œè€Œæˆ‘ä»¬åœ¨å®¢æˆ·ç«¯è¯»å–æ•°æ®çš„æ—¶å€™ï¼Œä¼šä»ä»åº“ä¸­è¿›è¡Œè¯»å–ï¼Œä¹Ÿå°±æ˜¯é‡‡ç”¨è¯»å†™åˆ†ç¦»çš„æ–¹å¼ã€‚äº’è”ç½‘çš„åº”ç”¨å¾€å¾€æ˜¯â€”äº›â€œè¯»å¤šå†™å°‘â€çš„éœ€æ±‚ï¼Œé‡‡ç”¨è¯»å†™åˆ†ç¦»çš„æ–¹å¼ï¼Œå¯ä»¥å®ç°æ›´é«˜çš„å¹¶å‘è®¿é—®ã€‚åŸæœ¬æ‰€æœ‰çš„è¯»å†™å‹åŠ›éƒ½ç”±ä¸€å°æœåŠ¡å™¨æ‰¿æ‹…ï¼Œç°åœ¨æœ‰å¤šä¸ªâ€œå…„å¼Ÿâ€å¸®å¿™å¤„ç†è¯»è¯·æ±‚ï¼Œè¿™æ ·å°±å‡å°‘äº†å¯¹åç«¯å¤§å“¥(Master)çš„å‹åŠ›ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜èƒ½å¯¹ä»æœåŠ¡å™¨è¿›è¡Œè´Ÿè½½å‡è¡¡ï¼Œè®©ä¸åŒçš„è¯»è¯·æ±‚æŒ‰ç…§ç­–ç•¥å‡åŒ€åœ°åˆ†å‘åˆ°ä¸åŒçš„ä»æœåŠ¡å™¨ä¸Šï¼Œè®©è¯»å–æ›´åŠ é¡ºç•…ã€‚è¯»å–é¡ºç•…çš„å¦ä¸€ä¸ªåŸå› ï¼Œå°±æ˜¯å‡å°‘äº†é”è¡¨çš„å½±å“ï¼Œæ¯”å¦‚æˆ‘ä»¬è®©ä¸»åº“è´Ÿè´£å†™ï¼Œå½“ä¸»åº“å‡ºç°å†™é”çš„æ—¶å€™ï¼Œä¸ä¼šå½±å“åˆ°ä»åº“è¿›è¡ŒSELECTçš„è¯»å–ã€‚</p></li><li><p>æ•°æ®å¤‡ä»½</p><p>æˆ‘ä»¬é€šè¿‡ä¸»ä»å¤åˆ¶å°†ä¸»åº“ä¸Šçš„æ•°æ®å¤åˆ¶åˆ°äº†ä»åº“ä¸Šï¼Œç›¸å½“äºæ˜¯ä¸€ç§çƒ­å¤‡ä»½æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸»åº“æ­£å¸¸è¿è¡Œçš„æƒ…å†µä¸‹è¿›è¡Œçš„å¤‡ä»½ï¼Œä¸ä¼šå½±å“åˆ°æœåŠ¡ã€‚</p></li><li><p>é«˜å¯ç”¨æ€§</p><p>æ•°æ®å¤‡ä»½å®é™…ä¸Šæ˜¯ä¸€ç§å†—ä½™çš„æœºåˆ¶ï¼Œé€šè¿‡è¿™ç§å†—ä½™çš„æ–¹å¼å¯ä»¥æ¢å–æ•°æ®åº“çš„é«˜å¯ç”¨æ€§ï¼Œä¹Ÿå°±æ˜¯å½“æœåŠ¡å™¨å‡ºç°æ•…éšœæˆ–å®•æœºçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥åˆ‡æ¢åˆ°ä»æœåŠ¡å™¨ä¸Šï¼Œä¿è¯æœåŠ¡çš„æ­£å¸¸è¿è¡Œã€‚</p></li></ul><p>ä¸»ä»åŒæ­¥åŸç†</p><ul><li><p>ä¸»ä»åŒæ­¥çš„åŸç†ä¸»è¦åŸºäºBinlogæ—¥å¿—è¿›è¡Œæ•°æ®åŒæ­¥ã€‚åœ¨ä¸»ä»å¤åˆ¶è¿‡ç¨‹ä¸­ï¼Œä¼šåŸºäºä¸‰ä¸ªçº¿ç¨‹æ“ä½œï¼Œä¸€ä¸ªä¸»åº“çº¿ç¨‹ï¼Œä¸¤ä¸ªä»åº“çº¿ç¨‹ã€‚ã€ä¸»ä»å¤åˆ¶å°±æ˜¯ä¸»ä»åŒæ­¥ã€‘</p></li><li><p>äºŒè¿›åˆ¶æ—¥å¿—è½¬å‚¨çº¿ç¨‹ï¼ˆBinlog dump threadï¼‰æ˜¯ä¸€ä¸ªä¸»åº“çº¿ç¨‹ã€‚</p><p>å½“ä»åº“çº¿ç¨‹è¿æ¥çš„æ—¶å€™ï¼Œä¸»åº“å¯ä»¥å°†äºŒè¿›åˆ¶æ—¥å¿—å‘é€ç»™ä»åº“ï¼Œå½“ä¸»åº“è¯»å–äº‹ä»¶çš„æ—¶å€™ï¼Œä¼šåœ¨Binlog ä¸ŠåŠ é”ï¼Œè¯»å–å®Œæˆä¹‹åï¼Œå†å°†é”é‡Šæ”¾æ‰ã€‚</p><p>ä»åº“ I/O çº¿ç¨‹ä¼šè¿æ¥åˆ°ä¸»åº“ï¼Œå‘ä¸»åº“å‘é€è¯·æ±‚æ›´æ–° Binlogã€‚è¿™æ—¶ä»åº“çš„ I/Oçº¿ç¨‹å°±å¯ä»¥è¯»å–åˆ°ä¸»åº“çš„äºŒè¿›åˆ¶æ—¥å¿—è½¬å‚¨çº¿ç¨‹å‘é€çš„ Binlogæ›´æ–°éƒ¨åˆ†ï¼Œå¹¶ä¸”æ‹·è´åˆ°æœ¬åœ°å½¢æˆä¸­ç»§æ—¥å¿—ï¼ˆRelay logï¼‰ã€‚</p><p>ä»åº“ SQLçº¿ç¨‹ä¼šè¯»å–ä»åº“ä¸­çš„ä¸­ç»§æ—¥å¿—ï¼Œå¹¶ä¸”æ‰§è¡Œæ—¥å¿—ä¸­çš„äº‹ä»¶ï¼Œä»è€Œå°†ä»åº“ä¸­çš„æ•°æ®ä¸ä¸»åº“ä¿æŒåŒæ­¥ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220529202152025.png" /></p><p>ä¸»ä»åŒæ­¥çš„å†…å®¹å°±æ˜¯äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆBinlogï¼‰ï¼Œå®ƒè™½ç„¶å«äºŒè¿›åˆ¶æ—¥å¿—ï¼Œå®é™…ä¸Šå­˜å‚¨çš„æ˜¯ä¸€ä¸ªåˆä¸€ä¸ªäº‹ä»¶ï¼ˆEventï¼‰ï¼Œè¿™äº›äº‹ä»¶åˆ†åˆ«å¯¹åº”ç€æ•°æ®åº“çš„æ›´æ–°æ“ä½œï¼Œæ¯”å¦‚INSERTã€UPDATEã€DELETE ç­‰ã€‚</p><p>è¿›è¡Œä¸»ä»åŒæ­¥çš„å†…å®¹æ˜¯äºŒè¿›åˆ¶æ—¥å¿—ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨è¿›è¡Œç½‘ç»œä¼ è¾“çš„è¿‡ç¨‹ä¸­å°±ä¸€å®šä¼šå­˜åœ¨å»¶è¿Ÿï¼ˆæ¯”å¦‚500msï¼‰ï¼Œè¿™æ ·å°±å¯èƒ½é€ æˆç”¨æˆ·åœ¨ä»åº“ä¸Šè¯»å–çš„æ•°æ®ä¸æ˜¯æœ€æ–°çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä¸»ä»åŒæ­¥ä¸­çš„æ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜ã€‚æ¯”å¦‚æˆ‘ä»¬å¯¹ä¸€æ¡è®°å½•è¿›è¡Œæ›´æ–°ï¼Œè¿™ä¸ªæ“ä½œæ˜¯åœ¨ä¸»åº“ä¸Šå®Œæˆçš„ï¼Œè€Œåœ¨å¾ˆçŸ­çš„æ—¶é—´å†…ï¼ˆæ¯”å¦‚100msï¼‰åˆå¯¹åŒä¸€ä¸ªè®°å½•è¿›è¡Œäº†è¯»å–ï¼Œè¿™æ—¶å€™ä»åº“è¿˜æ²¡æœ‰å®Œæˆæ•°æ®çš„æ›´æ–°ï¼Œé‚£ä¹ˆæˆ‘ä»¬é€šè¿‡ä»åº“è¯»åˆ°çš„æ•°æ®å°±æ˜¯ä¸€æ¡æ—§çš„è®°å½•ã€‚</p></li></ul><p>è§£å†³ä¸»ä»åŒæ­¥æ•°æ®ä¸€è‡´æ€§é—®é¢˜</p><ul><li><p>å¼‚æ­¥å¤åˆ¶</p><p>å®¢æˆ·ç«¯æäº¤ COMMITä¹‹åä¸éœ€è¦ç­‰ä»åº“è¿”å›ä»»ä½•ç»“æœï¼Œè€Œæ˜¯ç›´æ¥å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ä¸ä¼šå½±å“ä¸»åº“å†™çš„æ•ˆç‡ï¼Œä½†å¯èƒ½ä¼šå­˜åœ¨ä¸»åº“å®•æœºï¼Œè€ŒBinlogè¿˜æ²¡æœ‰åŒæ­¥åˆ°ä»åº“çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯æ­¤æ—¶çš„ä¸»åº“å’Œä»åº“æ•°æ®ä¸ä¸€è‡´ã€‚è¿™æ—¶å€™ä»ä»åº“ä¸­é€‰æ‹©ä¸€ä¸ªä½œä¸ºæ–°ä¸»ï¼Œé‚£ä¹ˆæ–°ä¸»åˆ™å¯èƒ½ç¼ºå°‘åŸæ¥ä¸»æœåŠ¡å™¨ä¸­å·²æäº¤çš„äº‹åŠ¡ã€‚æ‰€ä»¥ï¼Œè¿™ç§å¤åˆ¶æ¨¡å¼ä¸‹çš„æ•°æ®ä¸€è‡´æ€§æ˜¯æœ€å¼±çš„ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/1664bdb81d017359a126030ee08e0a85.png" /></p></li><li><p>åŠåŒæ­¥å¤åˆ¶</p><p>åœ¨å®¢æˆ·ç«¯æäº¤ COMMITä¹‹åä¸ç›´æ¥å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œè€Œæ˜¯ç­‰å¾…è‡³å°‘æœ‰ä¸€ä¸ªä»åº“æ¥æ”¶åˆ°äº†Binlogï¼Œå¹¶ä¸”å†™å…¥åˆ°ä¸­ç»§æ—¥å¿—ä¸­ï¼Œå†è¿”å›ç»™å®¢æˆ·ç«¯ã€‚è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯æé«˜äº†æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå½“ç„¶ç›¸æ¯”äºå¼‚æ­¥å¤åˆ¶æ¥è¯´ï¼Œè‡³å°‘å¤šå¢åŠ äº†ä¸€ä¸ªç½‘ç»œè¿æ¥çš„å»¶è¿Ÿï¼Œé™ä½äº†ä¸»åº“å†™çš„æ•ˆç‡ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/08566325d0933775d13196330596a1a1.jpg" /></p></li><li><p>ç»„å¤åˆ¶ï¼ˆMGRï¼‰</p><p>åŸºäº Paxos åè®®çš„çŠ¶æ€æœºå¤åˆ¶ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/39cc2dd2a96e27dbdef3dc87aa8d15ab.png" /></p><p>é¦–å…ˆæˆ‘ä»¬å°†å¤šä¸ªèŠ‚ç‚¹å…±åŒç»„æˆä¸€ä¸ªå¤åˆ¶ç»„ï¼Œåœ¨æ‰§è¡Œè¯»å†™ï¼ˆRWï¼‰äº‹åŠ¡çš„æ—¶å€™ï¼Œéœ€è¦é€šè¿‡ä¸€è‡´æ€§åè®®å±‚ï¼ˆConsensuså±‚ï¼‰çš„åŒæ„ï¼Œä¹Ÿå°±æ˜¯è¯»å†™äº‹åŠ¡æƒ³è¦è¿›è¡Œæäº¤ï¼Œå¿…é¡»è¦ç»è¿‡ç»„é‡Œâ€œå¤§å¤šæ•°äººâ€ï¼ˆå¯¹åº”NodeèŠ‚ç‚¹ï¼‰çš„åŒæ„ï¼Œå¤§å¤šæ•°æŒ‡çš„æ˜¯åŒæ„çš„èŠ‚ç‚¹æ•°é‡éœ€è¦å¤§äºï¼ˆN/2+1ï¼‰ï¼Œè¿™æ ·æ‰å¯ä»¥è¿›è¡Œæäº¤ï¼Œè€Œä¸æ˜¯åŸå‘èµ·æ–¹ä¸€ä¸ªè¯´äº†ç®—ã€‚è€Œé’ˆå¯¹åªè¯»ï¼ˆROï¼‰äº‹åŠ¡åˆ™ä¸éœ€è¦ç»è¿‡ç»„å†…åŒæ„ï¼Œç›´æ¥COMMIT å³å¯ã€‚</p></li></ul><h3 id="redisç®€ä»‹">Redisç®€ä»‹ğŸ‘»</h3><p>Redisé€Ÿåº¦å¿«çš„åŸå› </p><ul><li>Cè¯­è¨€ç¼–å†™ï¼Œåº•å±‚ä»£ç æ‰§è¡Œæ•ˆç‡é«˜ï¼Œä¾èµ–æ€§ä½ï¼Œè€Œä¸”ç³»ç»Ÿçš„å…¼å®¹æ€§å¥½ï¼Œç¨³å®šæ€§é«˜ã€‚</li><li>åŸºäºå†…å­˜ï¼Œå¯ä»¥é¿å…ç£ç›˜ I/Oã€‚</li><li>æ•°æ®ç»“æ„ç»“æ„ç®€å•ï¼ŒRedis é‡‡ç”¨ Key-Value æ–¹å¼è¿›è¡Œå­˜å‚¨ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨ Hashç»“æ„è¿›è¡Œæ“ä½œï¼Œæ•°æ®çš„æ“ä½œå¤æ‚åº¦ä¸º O(1)ã€‚</li><li>å•è¿›ç¨‹å•çº¿ç¨‹æ¨¡å‹ï¼Œé¿å…äº†ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œä¸å¿…è¦çš„çº¿ç¨‹ä¹‹é—´å¼•èµ·çš„èµ„æºç«äº‰ã€‚</li><li>å¤šè·¯ I/O å¤ç”¨æŠ€æœ¯ã€‚è¿™é‡Œçš„å¤šè·¯æŒ‡çš„æ˜¯å¤šä¸ª socketç½‘ç»œè¿æ¥ï¼Œå¤ç”¨æŒ‡çš„æ˜¯å¤ç”¨åŒä¸€ä¸ªçº¿ç¨‹ã€‚é‡‡ç”¨å¤šè·¯ I/Oå¤ç”¨æŠ€æœ¯çš„å¥½å¤„æ˜¯å¯ä»¥åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­å¤„ç†å¤šä¸ª I/O è¯·æ±‚ï¼Œå°½é‡å‡å°‘ç½‘ç»œ I/Oçš„æ¶ˆè€—ï¼Œæå‡ä½¿ç”¨æ•ˆç‡ã€‚</li></ul><table><colgroup><col style="width: 8%" /><col style="width: 24%" /><col style="width: 66%" /></colgroup><thead><tr class="header"><th style="text-align: center;">æ•°æ®ç±»å‹</th><th style="text-align: center;">å¯ä»¥å­˜å‚¨çš„å€¼</th><th style="text-align: center;">æ“ä½œ</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">string</td><td style="text-align: center;">å­—ç¬¦ä¸²ã€æ•´æ•°æˆ–è€…æµ®ç‚¹æ•°</td><tdstyle="text-align: center;">å¯¹æ•´ä¸ªå­—ç¬¦ä¸²æˆ–è€…å­—ç¬¦ä¸²çš„å…¶ä¸­ä¸€éƒ¨åˆ†æ‰§è¡Œæ“ä½œï¼Œå¯¹æ•´æ•°å’Œæµ®ç‚¹æ•°æ‰§è¡Œè‡ªå¢æˆ–è€…è‡ªå‡æ“ä½œ</td></tr><tr class="even"><td style="text-align: center;">list</td><td style="text-align: center;">åˆ—è¡¨</td><td style="text-align: center;">ä»ä¸¤ç«¯å‹å…¥æˆ–è€…å¼¹å‡ºå…ƒç´ å¯¹å•ä¸ªæˆ–è€…å¤šä¸ªå…ƒç´ è¿›è¡Œä¿®å‰ªï¼Œåªä¿ç•™ä¸€ä¸ªèŒƒå›´å†…çš„å…ƒç´ </td></tr><tr class="odd"><td style="text-align: center;">set</td><td style="text-align: center;">æ— åºé›†åˆ</td><tdstyle="text-align: center;">æ·»åŠ ã€è·å–ã€ç§»é™¤å•ä¸ªå…ƒç´ ï¼Œæ£€æŸ¥ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºé›†åˆä¸­ï¼Œè®¡ç®—äº¤é›†ã€å¹¶é›†ã€å·®é›†ï¼Œ ä»é›†åˆé‡Œé¢éšæœºè·å–å…ƒç´ </td></tr><tr class="even"><td style="text-align: center;">hash</td><td style="text-align: center;">åŒ…å«é”®å€¼å¯¹çš„æ— åºæ•£åˆ—è¡¨</td><tdstyle="text-align: center;">æ·»åŠ ã€è·å–ã€ç§»é™¤å•ä¸ªé”®å€¼å¯¹ï¼Œè·å–æ‰€æœ‰é”®å€¼å¯¹ï¼Œæ£€æŸ¥æŸä¸ªé”®æ˜¯å¦å­˜åœ¨</td></tr><tr class="odd"><td style="text-align: center;">zset</td><td style="text-align: center;">æœ‰åºé›†åˆ</td><td style="text-align: center;">æ·»åŠ ã€è·å–ã€åˆ é™¤å…ƒç´ ï¼Œæ ¹æ®åˆ†å€¼èŒƒå›´æˆ–è€…æˆå‘˜æ¥è·å–å…ƒç´ ï¼Œè®¡ç®—ä¸€ä¸ªé”®çš„æ’å</td></tr></tbody></table><ul><li><p>å­—ç¬¦ä¸²ï¼ˆstringï¼‰ï¼škey-value</p><p><code>set key xxx</code></p><p><code>get key</code></p></li><li><p>åˆ—è¡¨ï¼ˆlistï¼‰ï¼šåŒå‘é“¾è¡¨</p><p><code>lpush listname xxx yyy zzz</code></p><p><code>rpush listname xxx yyy zzz</code></p><p><code>lrange listname start end</code></p></li><li><p>æ— åºé›†åˆï¼ˆsetï¼‰</p><p><code>sadd setname xxx yyy zzz</code></p><p><code>srem setname xxx yyy</code> ã€åˆ é™¤xxxå’Œyyyã€‘</p><p><code>smembers setname</code> ã€è·å–æ‰€æœ‰å…ƒç´ ã€‘</p><p><code>sismember setname xxx</code> ã€åˆ¤æ–­xxxæ˜¯å¦åœ¨setä¸­ã€‘</p></li><li><p>å“ˆå¸Œï¼ˆhashï¼‰ï¼škey-field-value</p><p><code>hset user username zhangfei</code></p><p><code>hget user username</code></p></li><li><p>æœ‰åºé›†åˆï¼ˆzsetï¼‰ï¼šzsetæ˜¯åœ¨é›†åˆçš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ªåˆ†æ•°å±æ€§ï¼Œè¿™ä¸ªå±æ€§åœ¨æ·»åŠ ä¿®æ”¹å…ƒç´ çš„æ—¶å€™å¯ä»¥è¢«æŒ‡å®šã€‚æ¯æ¬¡æŒ‡å®šåï¼Œzsetéƒ½ä¼šæŒ‰ç…§åˆ†æ•°æ¥è¿›è¡Œè‡ªåŠ¨æ’åºï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åœ¨ç»™é›†åˆkey æ·»åŠ  member çš„æ—¶å€™ï¼Œå¯ä»¥æŒ‡å®š scoreã€‚</p><p><code>zadd zsetname score1 xxx score2 yyy</code></p><p><code>zscore zsetname xxx</code></p><p><code>zrem zsetname xxx</code></p><p><code>zrange zsetname start end [WITHSCORES]</code> ã€ä»å°åˆ°å¤§ã€‘</p><p><code>zrevrange zsetname start end [WITHSCORES]</code>ã€ä»å¤§åˆ°å°ã€‘</p></li></ul><p>åŸºäºç›´æ¥è¿æ¥çš„å¼Šç«¯ï¼ŒRedisæä¾›äº†è¿æ¥æ± çš„æœºåˆ¶ï¼Œè¿™ä¸ªæœºåˆ¶å¯ä»¥è®©æˆ‘ä»¬äº‹å…ˆåˆ›å»ºå¥½å¤šä¸ªè¿æ¥ï¼Œå°†å…¶æ”¾åˆ°è¿æ¥æ± ä¸­ï¼Œå½“æˆ‘ä»¬éœ€è¦è¿›è¡ŒRedisæ“ä½œçš„æ—¶å€™å°±ç›´æ¥ä»è¿æ¥æ± ä¸­è·å–ï¼Œå®Œæˆä¹‹åä¹Ÿä¸ä¼šç›´æ¥é‡Šæ”¾æ‰è¿æ¥ï¼Œè€Œæ˜¯å°†å®ƒè¿”å›åˆ°è¿æ¥æ± ä¸­ã€‚è¿æ¥æ± æœºåˆ¶å¯ä»¥é¿å…é¢‘ç¹åˆ›å»ºå’Œé‡Šæ”¾è¿æ¥ï¼Œæå‡æ•´ä½“çš„æ€§èƒ½ã€‚</p><p>åœ¨è¿æ¥æ± çš„å®ä¾‹ä¸­ä¼šæœ‰ä¸¤ä¸ªlistï¼Œä¿å­˜çš„æ˜¯è¿æ¥æ± ä¸­å¯ä»¥ä½¿ç”¨çš„è¿æ¥é›†åˆï¼ˆ<code>_available_connections</code>ï¼‰å’Œæ­£åœ¨ä½¿ç”¨çš„è¿æ¥é›†åˆï¼ˆ<code>_in_use_connections</code>ï¼‰ã€‚</p><p>Redisäº‹åŠ¡ç›¸å…³</p><ul><li><p>Redisä¸æ”¯æŒäº‹åŠ¡çš„å›æ»šæœºåˆ¶ï¼ˆRollbackï¼‰ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€å½“äº‹åŠ¡å‘ç”Ÿäº†é”™è¯¯ï¼ˆåªè¦ä¸æ˜¯è¯­æ³•é”™è¯¯ï¼‰ï¼Œæ•´ä¸ªäº‹åŠ¡ä¾ç„¶ä¼šç»§ç»­æ‰§è¡Œä¸‹å»ï¼Œç›´åˆ°äº‹åŠ¡é˜Ÿåˆ—ä¸­æ‰€æœ‰å‘½ä»¤éƒ½æ‰§è¡Œå®Œæ¯•ã€‚å› ä¸ºæ”¯æŒå›æ»šä¼šå¯¹Redis çš„ç®€å•æ€§å’Œæ€§èƒ½äº§ç”Ÿé‡å¤§å½±å“ã€‚</p></li><li><p>Redis æ˜¯å†…å­˜æ•°æ®åº“ï¼Œä¸åŸºäºæ–‡ä»¶çš„ RDBMSä¸åŒï¼Œé€šå¸¸åªè¿›è¡Œå†…å­˜è®¡ç®—å’Œæ“ä½œï¼Œæ— æ³•ä¿è¯æŒä¹…æ€§ã€‚</p></li><li><p>æŒä¹…åŒ–æ–¹æ³•ï¼š</p><ol type="1"><li><p>RDB</p><p>æŠŠå½“å‰è¿›ç¨‹çš„æ•°æ®ç”Ÿæˆå¿«ç…§ä¿å­˜åˆ°ç£ç›˜ä¸Šï¼Œè§¦å‘ RDBæŒä¹…åŒ–çš„æ–¹å¼åˆ†ä¸ºæ‰‹åŠ¨è§¦å‘å’Œè‡ªåŠ¨è§¦å‘ã€‚å› ä¸ºæŒä¹…åŒ–æ“ä½œä¸å‘½ä»¤æ“ä½œä¸æ˜¯åŒæ­¥è¿›è¡Œçš„ï¼Œæ‰€ä»¥æ— æ³•ä¿è¯äº‹åŠ¡çš„æŒä¹…æ€§ã€‚</p></li><li><p>AOF</p><p>é‡‡ç”¨æ—¥å¿—çš„å½¢å¼è®°å½•æ¯ä¸ªå†™æ“ä½œï¼Œå¼¥è¡¥äº† RDBåœ¨æ•°æ®ä¸€è‡´æ€§ä¸Šçš„ä¸è¶³ï¼Œä½†æ˜¯é‡‡ç”¨ AOFæ¨¡å¼ï¼Œå°±æ„å‘³ç€æ¯æ¡æ‰§è¡Œå‘½ä»¤éƒ½éœ€è¦å†™å…¥æ–‡ä»¶ä¸­ï¼Œä¼šå¤§å¤§é™ä½ Redisçš„è®¿é—®æ€§èƒ½ã€‚å¯ç”¨ AOF æ¨¡å¼éœ€è¦æ‰‹åŠ¨å¼€å¯ï¼Œæœ‰ 3 ç§ä¸åŒçš„é…ç½®æ–¹å¼ï¼Œé»˜è®¤ä¸ºeverysecï¼Œä¹Ÿå°±æ˜¯æ¯ç§’é’ŸåŒæ­¥ä¸€æ¬¡ã€‚å…¶æ¬¡è¿˜æœ‰ always å’Œ noæ¨¡å¼ï¼Œåˆ†åˆ«ä»£è¡¨åªè¦æœ‰æ•°æ®å‘ç”Ÿä¿®æ”¹å°±ä¼šå†™å…¥ AOFæ–‡ä»¶ï¼Œä»¥åŠç”±æ“ä½œç³»ç»Ÿå†³å®šä»€ä¹ˆæ—¶å€™è®°å½•åˆ° AOF æ–‡ä»¶ä¸­ã€‚</p></li></ol></li><li><p>å‘½ä»¤</p><ol type="1"><li>MULTIï¼šå¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼›</li><li>EXECï¼šäº‹åŠ¡æ‰§è¡Œï¼Œå°†ä¸€æ¬¡æ€§æ‰§è¡Œäº‹åŠ¡å†…çš„æ‰€æœ‰å‘½ä»¤ï¼›</li><li>DISCARDï¼šå–æ¶ˆäº‹åŠ¡ï¼›</li><li>WATCHï¼šç›‘è§†ä¸€ä¸ªæˆ–å¤šä¸ªé”®ï¼Œå¦‚æœäº‹åŠ¡æ‰§è¡Œå‰æŸä¸ªé”®å‘ç”Ÿäº†æ”¹åŠ¨ï¼Œé‚£ä¹ˆäº‹åŠ¡ä¹Ÿä¼šè¢«æ‰“æ–­ï¼›</li><li>UNWATCHï¼šå–æ¶ˆ WATCH å‘½ä»¤å¯¹æ‰€æœ‰é”®çš„ç›‘è§†ã€‚</li></ol></li><li><p>Redis å®ç°äº‹åŠ¡æ˜¯åŸºäº COMMAND é˜Ÿåˆ—ï¼Œå¦‚æœ Redisæ²¡æœ‰å¼€å¯äº‹åŠ¡ï¼Œé‚£ä¹ˆä»»ä½•çš„ COMMAND éƒ½ä¼šç«‹å³æ‰§è¡Œå¹¶è¿”å›ç»“æœã€‚å¦‚æœ Rediså¼€å¯äº†äº‹åŠ¡ï¼ŒCOMMAND å‘½ä»¤ä¼šæ”¾åˆ°é˜Ÿåˆ—ä¸­ï¼Œå¹¶ä¸”è¿”å›æ’é˜Ÿçš„çŠ¶æ€QUEUEDï¼Œåªæœ‰è°ƒç”¨ EXECï¼Œæ‰ä¼šæ‰§è¡Œ COMMAND é˜Ÿåˆ—ä¸­çš„å‘½ä»¤ã€‚</p></li><li><p>MULTI åä¸èƒ½å†æ‰§è¡Œ WATCH å‘½ä»¤</p></li><li><p>å¦‚æœåœ¨æ‰§è¡Œå‘½ä»¤è¿‡ç¨‹ä¸­æœ‰è¯­æ³•é”™è¯¯ï¼ŒRedisä¹Ÿä¼šæŠ¥é”™ï¼Œæ•´ä¸ªäº‹åŠ¡ä¹Ÿä¸ä¼šè¢«æ‰§è¡Œï¼ŒRedisä¼šå¿½ç•¥è¿è¡Œæ—¶å‘ç”Ÿçš„é”™è¯¯ï¼Œä¸ä¼šå½±å“åˆ°åé¢çš„æ‰§è¡Œã€‚</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#å¼€å¯äº‹åŠ¡</span></span><br>127.0.0.1:6379&gt; multi <br>OK<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#æ·»åŠ å‘½ä»¤å…¥é˜Ÿ</span></span><br>127.0.0.1:6379&gt; set k1 v1 <br>QUEUED<br>127.0.0.1:6379&gt; set k2 v2<br>QUEUED<br>127.0.0.1:6379&gt; set k3 v3 <br>QUEUED<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#æç¤ºç¼–è¯‘å‹å¼‚å¸¸</span></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#ä»£ç è¯­æ³•å‡ºç°é”™è¯¯</span></span><br>127.0.0.1:6379&gt; getset k3<br>(error) ERR wrong number of arguments for &#x27;getset&#x27; command<br>127.0.0.1:6379&gt; set k4 v4 <br>QUEUED<br>127.0.0.1:6379&gt; set k5 v5<br>QUEUED<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#æäº¤äº‹åŠ¡</span></span><br>127.0.0.1:6379&gt; exec<br>(error) EXECABORT Transaction discarded because of previous errors.<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#å°è¯•è·å–å€¼</span></span><br>127.0.0.1:6379&gt; get k1 <br>(nil)<br>127.0.0.1:6379&gt; get k2 <br>(nil)<br>127.0.0.1:6379&gt; <br></code></pre></div></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#å¼€å¯äº‹åŠ¡</span></span><br>127.0.0.1:6379&gt; multi <br>OK<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#æ·»åŠ å‘½ä»¤å…¥é˜Ÿ</span></span><br>127.0.0.1:6379&gt; set v1 sss<br>QUEUED<br>127.0.0.1:6379&gt; incr v1 <br>QUEUED<br>127.0.0.1:6379&gt; set k2 v2 <br>QUEUED<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#æ‰§è¡Œäº‹åŠ¡</span></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#é€»è¾‘å¼‚å¸¸çš„å‘½ä»¤ä¸è¢«æ‰§è¡Œ,å…¶ä»–å‘½ä»¤æ­£å¸¸æ‰§è¡Œ</span></span><br>127.0.0.1:6379&gt; exec<br>1) OK<br>2) (error) ERR value is not an integer or out of range<br>3) OK<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#å°è¯•è·å–å€¼</span></span><br>127.0.0.1:6379&gt; get k1<br>(nil)<br>127.0.0.1:6379&gt; get k2<br>&quot;v2&quot;<br>127.0.0.1:6379&gt; <br></code></pre></div></td></tr></table></figure></li><li><p>åœ¨ Redisä¸­ä¸å­˜åœ¨æ‚²è§‚é”ï¼Œäº‹åŠ¡å¤„ç†è¦è€ƒè™‘åˆ°å¹¶å‘è¯·æ±‚çš„æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ WATCH+MULTIçš„æ–¹å¼æ¥å®ç°ä¹è§‚é”ï¼Œå¦‚æœç›‘è§†çš„ KEYæ²¡æœ‰å‘ç”Ÿå˜åŒ–åˆ™å¯ä»¥é¡ºåˆ©æ‰§è¡Œäº‹åŠ¡ï¼Œå¦åˆ™è¯´æ˜äº‹åŠ¡çš„å®‰å…¨æ€§å·²ç»å—åˆ°äº†ç ´åï¼ŒæœåŠ¡å™¨å°±ä¼šæ”¾å¼ƒæ‰§è¡Œè¿™ä¸ªäº‹åŠ¡ï¼Œç›´æ¥å‘å®¢æˆ·ç«¯è¿”å›ç©ºå›å¤ï¼ˆnilï¼‰ï¼Œäº‹åŠ¡æ‰§è¡Œå¤±è´¥åï¼Œæˆ‘ä»¬å¯ä»¥é‡æ–°è¿›è¡Œå°è¯•ã€‚</p></li></ul><p>Redisä½¿ç”¨Lua</p><ul><li>Lua æ˜¯ä¸€ä¸ªå°å·§çš„è„šæœ¬è¯­è¨€ï¼Œé‡‡ç”¨æ ‡å‡† C è¯­è¨€ç¼–å†™ï¼Œä¸€ä¸ªå®Œæ•´çš„ Luaè§£æå™¨å¤§å°åªæœ‰ 200Kã€‚å®ƒå¯ä»¥åµŒå…¥åˆ°å„ç§åº”ç”¨ç¨‹åºä¸­ï¼Œæä¾›çµæ´»çš„æ‰©å±•å’Œå®šåˆ¶åŠŸèƒ½ã€‚</li><li><code>EVAL script numkeys key [key ...] arg [arg ...]</code><ol type="1"><li>scriptï¼Œä»£è¡¨çš„æ˜¯ Lua çš„è„šæœ¬å†…å®¹ã€‚</li><li>numkeysï¼Œä»£è¡¨åç»­å‚æ•° key çš„ä¸ªæ•°ã€‚</li><li>key å°±æ˜¯æˆ‘ä»¬è¦æ“ä½œçš„é”®ï¼Œå¯ä»¥æ˜¯å¤šä¸ªé”®ã€‚æˆ‘ä»¬åœ¨ Luaè„šæœ¬ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™äº›keyï¼Œç›´æ¥é€šè¿‡<code>KEYS[1]</code>ã€<code>KEYS[2]</code>æ¥è·å–ï¼Œé»˜è®¤ä¸‹æ ‡æ˜¯ä»1 å¼€å§‹ã€‚</li><li>argï¼Œè¡¨ç¤ºä¼ å…¥åˆ° Lua è„šæœ¬ä¸­çš„å‚æ•°ï¼Œå°±åƒè°ƒç”¨å‡½æ•°ä¼ å…¥çš„å‚æ•°ä¸€æ ·ã€‚åœ¨ Luaè„šæœ¬ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>ARGV[1]</code>ã€<code>ARGV[2]</code>æ¥è¿›è¡Œè·å–ï¼ŒåŒæ ·é»˜è®¤ä¸‹æ ‡ä»1 å¼€å§‹ã€‚</li></ol></li><li>åœ¨å‘½ä»¤ä¸­è°ƒç”¨ Luaè„šæœ¬ï¼š<code>redis-cli --eval lua_file key1 key2 , arg1 arg2 arg3</code></li></ul><p>Redis VS MongoDB</p><ul><li>Redis æ˜¯ Key-Valueæ•°æ®åº“ï¼Œæ•°æ®å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼ŒæŸ¥è¯¢å’Œå†™å…¥éƒ½æ˜¯åœ¨å†…å­˜ä¸­è¿›è¡Œæ“ä½œã€‚MongoDBé¢å‘æ–‡æ¡£æ•°æ®åº“ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œæ˜¯éå…³ç³»å‹æ•°æ®åº“ä¸­æœ€åƒ RDBMSçš„ï¼Œå¤„ç†å¢åˆ æ”¹æŸ¥ä¹Ÿå¯ä»¥å¢åŠ æ¡ä»¶ã€‚</li><li>Redis å°†æ•°æ®æ”¾åœ¨å†…å­˜ä¸­ï¼Œé€šè¿‡ RDB æˆ–è€… AOF æ–¹å¼è¿›è¡ŒæŒä¹…åŒ–ã€‚è€Œ MongoDBå®é™…ä¸Šæ˜¯å°†æ•°æ®å­˜æ”¾åœ¨ç£ç›˜ä¸Šçš„ï¼Œåªæ˜¯é€šè¿‡ mmapè°ƒç”¨ï¼Œå°†æ•°æ®æ˜ å°„åˆ°å†…å­˜ä¸­ï¼Œå¯ä»¥å°† mmap ç†è§£ä¸ºåŠ é€Ÿçš„æ–¹å¼ã€‚</li><li>å°† MongoDB å½’ä¸ºæ•°æ®åº“ï¼Œè€Œå°† Redis å½’ä¸ºç¼“å­˜ã€‚</li><li>Rediså°±åƒä¸€æ¶é£æœºï¼ŒæŸ¥è¯¢ä»¥åŠå†™å…¥æ€§èƒ½æä½³ï¼Œä½†æ˜¯å­˜å‚¨çš„æ•°æ®è§„æ¨¡æœ‰é™ã€‚MongoDBå°±åƒé«˜é“ï¼Œåœ¨å¤„ç†è´§ç‰©ï¼ˆæ•°æ®ï¼‰çš„åŠŸèƒ½ä¸Šå¼ºäº Redisï¼ŒåŒæ—¶èƒ½æ‰¿è½½çš„æ•°æ®é‡è¿œé«˜äºRedisï¼Œä½†æ˜¯æŸ¥è¯¢åŠå†™å…¥çš„æ•ˆç‡ä¸åŠ Redisã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®åº“</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>gitç¬”è®°</title>
    <link href="/post/d9283bc6.html"/>
    <url>/post/d9283bc6.html</url>
    
    <content type="html"><![CDATA[<p>ä¸å†è¿‡å¤šèµ˜è¿°ä¸€äº›gitçš„åŸºç¡€ï¼Œä¸»è¦è®°å½•ä¸€äº›å¸¸ç”¨çš„å†…å®¹ã€‚</p><span id="more"></span><h1 id="gitç¬”è®°">gitç¬”è®°</h1><h3 id="é‡å‘½å">é‡å‘½åğŸš²</h3><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">git mv æ—§åç§° æ–°åç§°<br></code></pre></div></td></tr></table></figure><h3 id="log">logğŸ¦”</h3><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">è®©æ¯æ¬¡commitçš„<span class="hljs-built_in">log</span>å˜ä¸ºä¸€è¡Œ</span><br>git log --oneline<br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºç¦»å½“å‰æœ€è¿‘çš„3æ¬¡commitçš„<span class="hljs-built_in">log</span></span><br>git log -n3<br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºæ‰€æœ‰<span class="hljs-built_in">log</span></span><br>git log --all<br><span class="hljs-meta prompt_"># </span><span class="language-bash">ä»¥å›¾ç¤ºçš„å½¢å¼æ˜¾ç¤º<span class="hljs-built_in">log</span></span><br>git log --graph<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ³¨ï¼šä¸Šè¿°å››ç§å¯ä»¥ç»„åˆèµ·æ¥ä½¿ç”¨</span><br></code></pre></div></td></tr></table></figure><h3 id="gitåˆ†æ">.gitåˆ†æğŸœï¸</h3><p>æˆ‘ä»¬æ¯ä¸€æ¬¡åˆ›å»ºä½¿ç”¨gitæ—¶ï¼Œéƒ½è¦å…ˆä½¿ç”¨<code>git init</code>ç”Ÿæˆä¸€ä¸ª<code>.git</code> æ–‡ä»¶</p><p>ä¸»è¦åˆ†æä»¥ä¸‹æ–‡ä»¶ï¼šHEADã€configã€refsã€objects</p><ul><li>HEAD</li></ul><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">cat</span> HEAD</span><br>ref: refs/heads/master<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">HEADæ ‡è¯†å½“å‰HEADæŒ‡é’ˆæŒ‡å‘çš„ä½ç½®</span><br></code></pre></div></td></tr></table></figure><ul><li><p>config</p><p><code>config</code> æ–‡ä»¶ä¸­ä¿å­˜ä¸€äº›é…ç½®ä¿¡æ¯</p></li><li><p>refs</p><p>refsä¸­æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼šheadså’Œtags</p><ul><li><p>headså­˜æ”¾å½“å‰æ‰€æœ‰çš„åˆ†æ”¯ï¼ˆå¼€å‘ç©ºé—´ï¼‰</p></li><li><p>tagså­˜æ”¾å½“å‰æ‰€æœ‰çš„é‡Œç¨‹ç¢‘ï¼ˆå¼€å‘èŠ‚ç‚¹ï¼‰</p></li></ul></li><li><p>objects</p><p>æ¯”å¦‚ä¸‹é¢åœºæ™¯ï¼Œå¯ä»¥å‘ç°objectsé‡Œå­˜æ”¾ç€å¯¹è±¡çš„å“ˆå¸Œå€¼ï¼š</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">ls</span></span><br>2d/  4b/  7a/  7e/  info/  pack/<br><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">cd</span> 2d</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">ls</span></span><br>af48b0ad1bb55884b00ab716f96985bd0aa25c<br><span class="hljs-meta prompt_">$ </span><span class="language-bash">git cat-file -t 2daf48b0ad1bb55884b00ab716f96985bd0aa25c</span><br>commit<br></code></pre></div></td></tr></table></figure><ul><li>gitæŸ¥çœ‹å¯¹è±¡ç±»å‹å’Œå†…å®¹ï¼š</li></ul><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">git cat-file -t(çœ‹ç±»å‹) å“ˆå¸Œå€¼ <br>git cat-file -p(çœ‹å†…å®¹) å“ˆå¸Œå€¼<br></code></pre></div></td></tr></table></figure><h3 id="gitæ–‡ä»¶ç»„ç»‡æ¨¡å¼">gitæ–‡ä»¶ç»„ç»‡æ¨¡å¼ğŸ¤¹ğŸ»</h3><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220526002402886.png" style="zoom:50%;" /></p><p>ä¸€ä¸ªcommitåªå¯¹åº”ä¸€æ£µæ ‘ï¼Œæ–‡ä»¶å¤¹æ˜¯ä¸€æ£µæ ‘ï¼Œblobæ˜¯æ–‡ä»¶ï¼Œblobåªçœ‹å†…å®¹ä¸çœ‹æ–‡ä»¶åï¼Œåªè¦æ–‡ä»¶å†…å®¹ç›¸åŒå°±æ˜¯ä¸€ä¸ªblobã€‚</p><h3 id="commitæ“ä½œ">commitæ“ä½œâšœï¸</h3><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">ä¿®æ”¹commitçš„message</span><br>git rebase -i å“ˆå¸Œå€¼ <br><span class="hljs-meta prompt_"># </span><span class="language-bash">ä¿®æ”¹å¯¹åº”çš„pickä¸ºr</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">åˆå¹¶commitæŒ‡ä»¤</span><br>git rebase -i å“ˆå¸Œå€¼ <br><span class="hljs-meta prompt_"># </span><span class="language-bash">ä¿®æ”¹å¯¹åº”çš„pickä¸ºs</span><br></code></pre></div></td></tr></table></figure><h3 id="å·®å¼‚æ¯”è¾ƒ">å·®å¼‚æ¯”è¾ƒğŸª‚</h3><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">æ¯”è¾ƒHEADå’Œæš‚å­˜åŒºå·®å¼‚:</span><br>git diff --cached<br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ¯”è¾ƒå·¥ä½œåŒºå’Œæš‚å­˜åŒºå·®å¼‚:</span><br>git diff<br>git diff -- æ–‡ä»¶å<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å¦‚æœHEADå’Œæš‚å­˜åŒºéƒ½å˜äº†</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å˜æ›´æš‚å­˜åŒºå†…å®¹ï¼Œä½¿å…¶å’ŒHEADä¸€è‡´:</span><br>git reset HEAD <br><span class="hljs-meta prompt_"># </span><span class="language-bash">æˆ–è€…</span><br>git reset HEAD -- æ–‡ä»¶å1 æ–‡ä»¶å2 ...<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å¦‚æœå·¥ä½œåŒºå’Œæš‚å­˜åŒºéƒ½å˜äº†</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å˜æ›´å·¥ä½œåŒºå†…å®¹ï¼Œä½¿å…¶å’Œæš‚å­˜åŒºä¸€è‡´:</span> <br>git checkout -- æ–‡ä»¶å<br><span class="hljs-meta prompt_"># </span><span class="language-bash">å˜æ›´æš‚å­˜åŒºå†…å®¹ï¼Œä½¿å…¶å’Œå·¥ä½œåŒºä¸€è‡´:</span><br>git reset HEAD <br><span class="hljs-meta prompt_"># </span><span class="language-bash">æˆ–è€…</span><br>git reset HEAD -- æ–‡ä»¶å1 æ–‡ä»¶å2 ...<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ¶ˆé™¤æœ€è¿‘å‡ æ¬¡commit</span><br>git reset --hard å“ˆå¸Œå€¼<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶é—´å·®å¼‚</span><br>git diff branch1 branch2 <br><span class="hljs-meta prompt_"># </span><span class="language-bash">æˆ–è€…</span><br>git diff branch1 branch2 -- æ–‡ä»¶å<br></code></pre></div></td></tr></table></figure><h3 id="ä¿å­˜å½“å‰çŠ¶æ€">ä¿å­˜å½“å‰çŠ¶æ€ğŸ¤´ğŸ»</h3><figure class="highlight avrasm"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs avrasm"><span class="hljs-meta"># ä¿å­˜å½“å‰çŠ¶æ€ï¼Œå¹¶ä¸”æ¢å¤åˆ°ä¸Šä¸€æ¬¡commitçš„æ—¶å€™</span><br>git stash<br><span class="hljs-meta"># æŸ¥çœ‹å½“å‰stash</span><br>git stash list<br><span class="hljs-meta"># æ¢å¤ï¼Œä½†ä¸å¼¹å‡º(git stash listä¸ä¼šåˆ é™¤)</span><br>git stash apply<br><span class="hljs-meta"># æ¢å¤ï¼Œä½†å¼¹å‡º(git stash listä¼šåˆ é™¤)</span><br>git stash <span class="hljs-keyword">pop</span><br></code></pre></div></td></tr></table></figure><h3 id="gitignoreç”¨æ³•">.gitignoreç”¨æ³•ğŸ¦¹ğŸ»</h3><p>åœ¨.gitignoreä¸­å†™å…¥ç›¸åº”æ ¼å¼ï¼Œåˆ™gitä¸ä¼šå°†å…¶è¿›è¡Œç®¡ç†ï¼Œä¸¾ä¸ªä¾‹å­ï¼šJavaçš„.gitignoreæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">Compiled class file</span><br>*.class<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">Log file</span><br>*.log<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">BlueJ files</span><br>*.ctxt<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">Mobile Tools <span class="hljs-keyword">for</span> Java (J2ME)</span><br>.mtj.tmp/<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">Package Files <span class="hljs-comment">#</span></span><br>*.jar<br>*.war<br>*.nar<br>*.ear<br>*.zip<br>*.tar.gz<br>*.rar<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">virtual machine crash logs, see http://www.java.com/en/download/help/error_hotspot.xml</span><br>hs_err_pid*<br>replay_pid*<br></code></pre></div></td></tr></table></figure><h3 id="å¼€å‘æµç¨‹">å¼€å‘æµç¨‹ğŸ‘‘</h3><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">åœ¨githubå»ºç«‹ä»“åº“</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">ä¸è¿œç«¯å»ºç«‹è¿æ¥</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">è¿™é‡Œçš„originå¯ä»¥éšæ„èµ·å</span><br>git remote add origin xxx/xxx.git<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">åœ¨æœ¬åœ°è¿›è¡Œä»£ç ç¼–å†™</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">ä»æœ¬åœ°è¿›è¡Œpush</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">1. å¦‚æœpushæ‰€æœ‰åˆ†æ”¯</span><br>git push origin --all<br><span class="hljs-meta prompt_"># </span><span class="language-bash">2. å¦‚æœpushä¸€ä¸ªåˆ†æ”¯ï¼ˆä»¥masteråˆ†æ”¯ä¸ºä¾‹ï¼‰</span><br>git push origin master<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å¦‚æœè¦æ˜¯æŠ¥é”™</span><br> ! [rejected]        master -&gt; master (fetch first)<br>error: failed to push some refs to &#x27;github.com:xxx/xxx.git&#x27;<br>hint: Updates were rejected because the remote contains work that you do<br>hint: not have locally. This is usually caused by another repository pushing<br>hint: to the same ref. You may want to first integrate the remote changes<br>hint: (e.g., &#x27;git pull ...&#x27;) before pushing again.<br>hint: See the &#x27;Note about fast-forwards&#x27; in &#x27;git push --help&#x27; for details.<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">è¯´æ˜è¿œç«¯æœ¬èº«å°±æœ‰å†…å®¹ï¼ˆå¯èƒ½æ˜¯åˆ›å»ºä»“åº“æ—¶å€™åˆ›å»ºäº†READMEã€gitignoreã€licenseä¹‹ç±»çš„ï¼‰</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ­¤æ—¶éœ€è¦å…ˆpullæˆ–è€…å…ˆfetch+merge</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">1. pull</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">2. fetch+merge</span><br>git fetch origin<br>git merge --allow-unrelated-histories origin/master<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ­¤æ—¶å†è¿›è¡Œpushå³å¯</span><br>git push origin --all(master)<br></code></pre></div></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å¦‚æœè¦æ˜¯å¤šäººåä½œå¼€å‘ï¼Œä¸€äººä¸€ä¸ªåˆ†æ”¯</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">è¿œç«¯å·²ç»å»ºç«‹äº†å¤šä¸ªåˆ†æ”¯ï¼Œæ¯”å¦‚æˆ‘è¦åšçš„åˆ†æ”¯åä¸º mybranch</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-built_in">clone</span>è¿œç«¯ä»“åº“</span><br>git clone xxx/xxx.git<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å½“å‰æ‰€æœ‰åˆ†æ”¯(æ˜¾ç¤ºæœ¬åœ°å’Œè¿œç«¯)</span><br>git branch -av<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">åˆ›å»ºå¹¶åˆ‡æ¢åˆ°ä¸€ä¸ªè‡ªå·±çš„åˆ†æ”¯</span><br>git checkout -b xxx/xxx(è‡ªå·±æœ¬åœ°åˆ†æ”¯å) origin/mybranch<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æœ¬åœ°è¿›è¡Œä»£ç ç¼–å†™</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æäº¤ä»£ç å³å¯</span><br>git add -u<br>git commit -m&quot;xxx&quot;<br>git push<br></code></pre></div></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">ä¸åŒäººä¿®æ”¹ä¸åŒæ–‡ä»¶</span><br>git pull<br><span class="hljs-meta prompt_"># </span><span class="language-bash">æœ¬åœ°è¿›è¡Œä»£ç ç¼–å†™</span><br>git push<br><span class="hljs-meta prompt_"># </span><span class="language-bash">æŠ¥é”™</span><br>git fetch origin<br><span class="hljs-meta prompt_"># </span><span class="language-bash">å’Œå½“å‰è¿œç«¯çš„mybranchè¿›è¡Œåˆå¹¶</span><br>git merge origin/mybrach<br>git push<br><span class="hljs-meta prompt_"># </span><span class="language-bash">æˆåŠŸpush</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">ä¸åŒäººä¿®æ”¹ç›¸åŒæ–‡ä»¶ä¸åŒåŒºåŸŸ</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">åŒä¸Š</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">git merge å¯ä»¥è‡ªåŠ¨è¿›è¡Œåˆå¹¶</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">ä¸åŒäººä¿®æ”¹ç›¸åŒæ–‡ä»¶ç›¸åŒåŒºåŸŸ</span><br>git pull<br><span class="hljs-meta prompt_"># </span><span class="language-bash">æœ¬åœ°è¿›è¡Œä»£ç ç¼–å†™</span><br>git push<br><span class="hljs-meta prompt_"># </span><span class="language-bash">æŠ¥é”™</span><br>git pull<br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ‰“å¼€æœ‰é—®é¢˜çš„æ–‡ä»¶ï¼Œgitç”¨&gt;&gt;&gt;&gt;HEADä¹‹ç±»çš„ç¬¦å·æ ‡è¯†å‡ºäº†å†²çªçš„åœ°æ–¹ï¼Œè¿›è¡Œä¿®æ”¹å³å¯</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æäº¤ä»£ç å³å¯</span><br>git add -u<br>git commit -m&quot;xxx&quot;<br>git push<br></code></pre></div></td></tr></table></figure><p>å¦‚æœå’Œè¿œç«¯å‘ç”Ÿäº†å†²çªï¼ˆæœ¬åœ°ç¼–å†™ä»£ç ågit push æŠ¥é”™ï¼‰ï¼Œå¯ä»¥å…ˆè¿›è¡Œgitpull ï¼Œå¦‚æœgitå¯ä»¥å¸®åŠ©ä½ æ¥ä¿®å¤ï¼Œæ‰“å¼€ç›¸åº”æ–‡ä»¶ï¼Œgitä¼šæ ‡è¯†å‡ºå†²çªçš„åœ°æ–¹ï¼›å¦‚æœgitä¸èƒ½å¸®åŠ©ä½ ä¿®å¤ï¼Œåˆ™å¯ä»¥gitstatusï¼Œå¯ä»¥çœ‹åˆ°å½“å‰çŠ¶æ€ï¼Œä½ å¯ä»¥å’Œå…¶ä»–äººåå•†ï¼Œç„¶åä¸€ä¸ªä¸€ä¸ªæ–‡ä»¶è¿›è¡Œ gitadd æˆ– git rmå³å¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SQLå¿…çŸ¥å¿…ä¼šç¬”è®°ï¼ˆäºŒï¼‰</title>
    <link href="/post/1171445a.html"/>
    <url>/post/1171445a.html</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦å¯¹<ahref="https://time.geekbang.org/column/intro/100029501">SQLå¿…çŸ¥å¿…ä¼š</a>çš„å†…å®¹è¿›è¡Œæ€»ç»“</p><span id="more"></span><h1 id="sqlå¿…çŸ¥å¿…ä¼šç¬”è®°äºŒ">SQLå¿…çŸ¥å¿…ä¼šç¬”è®°ï¼ˆäºŒï¼‰</h1><h3 id="ç´¢å¼•">ç´¢å¼•ğŸ³</h3><ul><li><p>ç´¢å¼•çš„ä»·å€¼æ˜¯å¸®æˆ‘ä»¬ä»æµ·é‡æ•°æ®ä¸­æ‰¾åˆ°æƒ³è¦çš„æ•°æ®ï¼Œå¦‚æœæ•°æ®é‡å°‘ï¼Œé‚£ä¹ˆæ˜¯å¦ä½¿ç”¨ç´¢å¼•å¯¹ç»“æœçš„å½±å“å¹¶ä¸å¤§ã€‚å¦å¤–ï¼Œå½“æ•°æ®é‡å¤åº¦å¤§ï¼Œæ¯”å¦‚é«˜äº10% çš„æ—¶å€™ï¼Œä¹Ÿä¸éœ€è¦å¯¹è¿™ä¸ªå­—æ®µä½¿ç”¨ç´¢å¼•ã€‚</p></li><li><p>ä»åŠŸèƒ½é€»è¾‘ä¸Šè¯´ï¼Œç´¢å¼•ä¸»è¦æœ‰ 4ç§ï¼Œåˆ†åˆ«æ˜¯æ™®é€šç´¢å¼•ã€å”¯ä¸€ç´¢å¼•ã€ä¸»é”®ç´¢å¼•å’Œå…¨æ–‡ç´¢å¼•ã€‚</p><p>æ™®é€šç´¢å¼•æ˜¯åŸºç¡€çš„ç´¢å¼•ï¼Œæ²¡æœ‰ä»»ä½•çº¦æŸï¼Œä¸»è¦ç”¨äºæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</p><p>å”¯ä¸€ç´¢å¼•å°±æ˜¯åœ¨æ™®é€šç´¢å¼•çš„åŸºç¡€ä¸Šå¢åŠ äº†æ•°æ®å”¯ä¸€æ€§çš„çº¦æŸï¼Œåœ¨ä¸€å¼ æ•°æ®è¡¨é‡Œå¯ä»¥æœ‰å¤šä¸ªå”¯ä¸€ç´¢å¼•ã€‚</p><p>ä¸»é”®ç´¢å¼•åœ¨å”¯ä¸€ç´¢å¼•çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸ä¸ºç©ºçš„çº¦æŸï¼Œä¹Ÿå°±æ˜¯ NOTNULL+UNIQUEï¼Œä¸€å¼ è¡¨é‡Œæœ€å¤šåªæœ‰ä¸€ä¸ªä¸»é”®ç´¢å¼•ã€‚</p><p>å…¨æ–‡ç´¢å¼•ç”¨çš„ä¸å¤šï¼ŒMySQLè‡ªå¸¦çš„å…¨æ–‡ç´¢å¼•åªæ”¯æŒè‹±æ–‡ã€‚æˆ‘ä»¬é€šå¸¸å¯ä»¥é‡‡ç”¨ä¸“é—¨çš„å…¨æ–‡æœç´¢å¼•æ“ï¼Œæ¯”å¦‚ES(ElasticSearch)å’Œ Solrã€‚</p></li><li><p>æŒ‰ç…§ç‰©ç†å®ç°æ–¹å¼ï¼Œç´¢å¼•å¯ä»¥åˆ†ä¸º 2ç§ï¼šèšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•ã€‚æˆ‘ä»¬ä¹ŸæŠŠéèšé›†ç´¢å¼•ç§°ä¸ºäºŒçº§ç´¢å¼•æˆ–è€…è¾…åŠ©ç´¢å¼•ã€‚</p><p>èšé›†ç´¢å¼•å¯ä»¥æŒ‰ç…§ä¸»é”®æ¥æ’åºå­˜å‚¨æ•°æ®ï¼Œè¿™æ ·åœ¨æŸ¥æ‰¾è¡Œçš„æ—¶å€™éå¸¸æœ‰æ•ˆã€‚èšé›†ç´¢å¼•æŒ‡è¡¨ä¸­æ•°æ®è¡ŒæŒ‰ç´¢å¼•çš„æ’åºæ–¹å¼è¿›è¡Œå­˜å‚¨ï¼Œå¯¹æŸ¥æ‰¾è¡Œå¾ˆæœ‰æ•ˆã€‚åªæœ‰å½“è¡¨åŒ…å«èšé›†ç´¢å¼•æ—¶ï¼Œè¡¨å†…çš„æ•°æ®è¡Œæ‰ä¼šæŒ‰æ‰¾ç´¢å¼•åˆ—çš„å€¼åœ¨ç£ç›˜ä¸Šè¿›è¡Œç‰©ç†æ’åºå’Œå­˜å‚¨ã€‚æ¯ä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªèšé›†ç´¢å¼•ï¼Œå› ä¸ºæ•°æ®è¡Œæœ¬èº«åªèƒ½æŒ‰ä¸€ä¸ªé¡ºåºå­˜å‚¨ã€‚</p><p>åœ¨æ•°æ®åº“ç³»ç»Ÿä¼šæœ‰å•ç‹¬çš„å­˜å‚¨ç©ºé—´å­˜æ”¾éèšé›†ç´¢å¼•ï¼Œè¿™äº›ç´¢å¼•é¡¹æ˜¯æŒ‰ç…§é¡ºåºå­˜å‚¨çš„ï¼Œä½†ç´¢å¼•é¡¹æŒ‡å‘çš„å†…å®¹æ˜¯éšæœºå­˜å‚¨çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ç³»ç»Ÿä¼šè¿›è¡Œä¸¤æ¬¡æŸ¥æ‰¾ï¼Œç¬¬ä¸€æ¬¡å…ˆæ‰¾åˆ°ç´¢å¼•ï¼Œç¬¬äºŒæ¬¡æ‰¾åˆ°ç´¢å¼•å¯¹åº”çš„ä½ç½®å–å‡ºæ•°æ®è¡Œã€‚éèšé›†ç´¢å¼•ä¸ä¼šæŠŠç´¢å¼•æŒ‡å‘çš„å†…å®¹åƒèšé›†ç´¢å¼•ä¸€æ ·ç›´æ¥æ”¾åˆ°ç´¢å¼•çš„åé¢ï¼Œè€Œæ˜¯ç»´æŠ¤å•ç‹¬çš„ç´¢å¼•è¡¨ï¼ˆåªç»´æŠ¤ç´¢å¼•ï¼Œä¸ç»´æŠ¤ç´¢å¼•æŒ‡å‘çš„æ•°æ®ï¼‰ï¼Œä¸ºæ•°æ®æ£€ç´¢æä¾›æ–¹ä¾¿ã€‚</p><ol type="1"><li>èšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜å‚¨çš„å°±æ˜¯æˆ‘ä»¬çš„æ•°æ®è®°å½•ï¼Œéèšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯æ•°æ®ä½ç½®ã€‚éèšé›†ç´¢å¼•ä¸ä¼šå½±å“æ•°æ®è¡¨çš„ç‰©ç†å­˜å‚¨é¡ºåºã€‚</li><li>ä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªèšé›†ç´¢å¼•ï¼Œå› ä¸ºåªèƒ½æœ‰ä¸€ç§æ’åºå­˜å‚¨çš„æ–¹å¼ï¼Œä½†å¯ä»¥æœ‰å¤šä¸ªéèšé›†ç´¢å¼•ï¼Œä¹Ÿå°±æ˜¯å¤šä¸ªç´¢å¼•ç›®å½•æä¾›æ•°æ®æ£€ç´¢ã€‚</li><li>ä½¿ç”¨èšé›†ç´¢å¼•çš„æ—¶å€™ï¼Œæ•°æ®çš„æŸ¥è¯¢æ•ˆç‡é«˜ï¼Œä½†å¦‚æœå¯¹æ•°æ®è¿›è¡Œæ’å…¥ï¼Œåˆ é™¤ï¼Œæ›´æ–°ç­‰æ“ä½œï¼Œæ•ˆç‡ä¼šæ¯”éèšé›†ç´¢å¼•ä½ã€‚</li></ol></li><li><p>æŒ‰ç…§å­—æ®µä¸ªæ•°è¿›è¡Œåˆ’åˆ†ï¼Œç´¢å¼•å¯ä»¥åˆ†æˆå•ä¸€ç´¢å¼•å’Œè”åˆç´¢å¼•ã€‚</p><p>ç´¢å¼•åˆ—ä¸ºä¸€åˆ—æ—¶ä¸ºå•ä¸€ç´¢å¼•ï¼›å¤šä¸ªåˆ—ç»„åˆåœ¨ä¸€èµ·åˆ›å»ºçš„ç´¢å¼•å«åšè”åˆç´¢å¼•ã€‚</p><p>è”åˆç´¢å¼•å­˜åœ¨<strong>æœ€å·¦åŒ¹é…åŸåˆ™</strong>ï¼Œä¹Ÿå°±æ˜¯æŒ‰ç…§æœ€å·¦ä¼˜å…ˆçš„æ–¹å¼è¿›è¡Œç´¢å¼•çš„åŒ¹é…ã€‚å³å¦‚æœè®¾ç½®ç´¢å¼•ä¸º(x,y,z)ï¼Œè€Œæˆ‘çš„æŸ¥è¯¢æ¡ä»¶æ˜¯yï¼ˆä¸ä¸(x,y,z) æœ€å·¦åŒ¹é…ï¼‰ï¼Œæ­¤æ—¶è”åˆæŸ¥è¯¢å°±ä¼šå¤±æ•ˆã€‚</p><p>æŸ¥è¯¢â€œz=7 AND y=8 AND x=9â€çš„æ—¶å€™ï¼Œå¦‚æœä¸‰ä¸ªå­—æ®µ xã€yã€zåœ¨æ¡ä»¶æŸ¥è¯¢çš„æ—¶å€™æ˜¯ä¹±åºçš„ï¼Œä½†é‡‡ç”¨çš„æ˜¯ç­‰å€¼æŸ¥è¯¢ï¼ˆ=ï¼‰æˆ–è€…æ˜¯ IN æŸ¥è¯¢ï¼Œé‚£ä¹ˆMySQL çš„ä¼˜åŒ–å™¨å¯ä»¥è‡ªåŠ¨å¸®æˆ‘ä»¬è°ƒæ•´ä¸ºå¯ä»¥ä½¿ç”¨è”åˆç´¢å¼•çš„å½¢å¼ã€‚</p><p>å½“æˆ‘ä»¬æŸ¥è¯¢â€œx=9 AND y&gt;8 AND z=7â€çš„æ—¶å€™ï¼Œå¦‚æœå»ºç«‹äº† (x,y,z)é¡ºåºçš„ç´¢å¼•ï¼Œè¿™æ—¶å€™ z æ˜¯ç”¨ä¸ä¸Šç´¢å¼•çš„ã€‚è¿™æ˜¯å› ä¸º MySQLåœ¨åŒ¹é…è”åˆç´¢å¼•æœ€å·¦å‰ç¼€çš„æ—¶å€™ï¼Œå¦‚æœé‡åˆ°äº†èŒƒå›´æŸ¥è¯¢ï¼Œæ¯”å¦‚ï¼ˆ&lt;ï¼‰ï¼ˆ&gt;ï¼‰å’Œbetween ç­‰ï¼Œå°±ä¼šåœæ­¢åŒ¹é…ã€‚ç´¢å¼•åˆ—æœ€å¤šä½œç”¨äºä¸€ä¸ªèŒƒå›´åˆ—ï¼Œå¯¹äºåé¢çš„ Zæ¥è¯´ï¼Œå°±æ²¡æ³•ä½¿ç”¨åˆ°ç´¢å¼•äº†ã€‚</p></li><li><p>Hashç´¢å¼• VS B+ç´¢å¼•ï¼š</p><ol type="1"><li>Hash ç´¢å¼•ä¸èƒ½è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ï¼Œè€Œ B+ æ ‘å¯ä»¥ã€‚è¿™æ˜¯å› ä¸º Hashç´¢å¼•æŒ‡å‘çš„æ•°æ®æ˜¯æ— åºçš„ï¼Œè€Œ B+ æ ‘çš„å¶å­èŠ‚ç‚¹æ˜¯ä¸ªæœ‰åºçš„é“¾è¡¨ã€‚</li><li>Hashç´¢å¼•ä¸æ”¯æŒè”åˆç´¢å¼•çš„æœ€å·¦ä¾§åŸåˆ™ï¼ˆå³è”åˆç´¢å¼•çš„éƒ¨åˆ†ç´¢å¼•æ— æ³•ä½¿ç”¨ï¼‰ï¼Œè€Œ B+æ ‘å¯ä»¥ã€‚å¯¹äºè”åˆç´¢å¼•æ¥è¯´ï¼ŒHash ç´¢å¼•åœ¨è®¡ç®— Hashå€¼çš„æ—¶å€™æ˜¯å°†ç´¢å¼•é”®åˆå¹¶åå†ä¸€èµ·è®¡ç®— Hash å€¼ï¼Œæ‰€ä»¥ä¸ä¼šé’ˆå¯¹æ¯ä¸ªç´¢å¼•å•ç‹¬è®¡ç®—Hashå€¼ã€‚å› æ­¤å¦‚æœç”¨åˆ°è”åˆç´¢å¼•çš„ä¸€ä¸ªæˆ–è€…å‡ ä¸ªç´¢å¼•æ—¶ï¼Œè”åˆç´¢å¼•æ— æ³•è¢«åˆ©ç”¨ã€‚</li><li>Hash ç´¢å¼•ä¸æ”¯æŒ ORDER BY æ’åºï¼Œå› ä¸º Hashç´¢å¼•æŒ‡å‘çš„æ•°æ®æ˜¯æ— åºçš„ï¼Œå› æ­¤æ— æ³•èµ·åˆ°æ’åºä¼˜åŒ–çš„ä½œç”¨ï¼Œè€Œ B+æ ‘ç´¢å¼•æ•°æ®æ˜¯æœ‰åºçš„ï¼Œå¯ä»¥èµ·åˆ°å¯¹è¯¥å­—æ®µ ORDER BYæ’åºä¼˜åŒ–çš„ä½œç”¨ã€‚åŒç†ï¼Œæˆ‘ä»¬ä¹Ÿæ— æ³•ç”¨ Hash ç´¢å¼•è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ï¼Œè€Œ B+ æ ‘ä½¿ç”¨LIKE è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢çš„æ—¶å€™ï¼ŒLIKE åé¢å‰æ¨¡ç³ŠæŸ¥è¯¢ï¼ˆæ¯”å¦‚ %å¼€å¤´ï¼‰çš„è¯å°±å¯ä»¥èµ·åˆ°ä¼˜åŒ–ä½œç”¨ã€‚</li></ol><p>å¯¹äºç­‰å€¼æŸ¥è¯¢æ¥è¯´ï¼Œé€šå¸¸ Hashç´¢å¼•çš„æ•ˆç‡æ›´é«˜ï¼Œä¸è¿‡ä¹Ÿå­˜åœ¨ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯ç´¢å¼•åˆ—çš„é‡å¤å€¼å¦‚æœå¾ˆå¤šï¼Œæ•ˆç‡å°±ä¼šé™ä½ã€‚è¿™æ˜¯å› ä¸ºé‡åˆ°Hashå†²çªæ—¶ï¼Œéœ€è¦éå†æ¡¶ä¸­çš„è¡ŒæŒ‡é’ˆæ¥è¿›è¡Œæ¯”è¾ƒï¼Œæ‰¾åˆ°æŸ¥è¯¢çš„å…³é”®å­—ï¼Œéå¸¸è€—æ—¶ã€‚</p><p>B+ æ ‘ç´¢å¼•çš„ä½¿ç”¨é¢ä¼šæ›´å¹¿ï¼Œä¸è¿‡ä¹Ÿæœ‰ä¸€äº›åœºæ™¯é‡‡ç”¨ Hashç´¢å¼•æ•ˆç‡æ›´é«˜ï¼Œæ¯”å¦‚åœ¨é”®å€¼å‹ï¼ˆKey-Valueï¼‰æ•°æ®åº“ä¸­ï¼ŒRedis å­˜å‚¨çš„æ ¸å¿ƒå°±æ˜¯Hash è¡¨ã€‚MySQL ä¸­çš„ Memory å­˜å‚¨å¼•æ“æ”¯æŒ Hashå­˜å‚¨ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ç”¨åˆ°æŸ¥è¯¢çš„ä¸´æ—¶è¡¨æ—¶ï¼Œå°±å¯ä»¥é€‰æ‹© Memoryå­˜å‚¨å¼•æ“ï¼ŒæŠŠæŸä¸ªå­—æ®µè®¾ç½®ä¸º Hash ç´¢å¼•ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µï¼Œè¿›è¡Œ Hashè®¡ç®—ä¹‹åé•¿åº¦å¯ä»¥ç¼©çŸ­åˆ°å‡ ä¸ªå­—èŠ‚ã€‚å½“å­—æ®µçš„é‡å¤åº¦ä½ï¼Œè€Œä¸”ç»å¸¸éœ€è¦è¿›è¡Œç­‰å€¼æŸ¥è¯¢çš„æ—¶å€™ï¼Œé‡‡ç”¨Hash ç´¢å¼•æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ MySQL çš„ InnoDB å­˜å‚¨å¼•æ“è¿˜æœ‰ä¸ªâ€œè‡ªé€‚åº” Hashç´¢å¼•â€çš„åŠŸèƒ½ï¼Œå°±æ˜¯å½“æŸä¸ªç´¢å¼•å€¼ä½¿ç”¨éå¸¸é¢‘ç¹çš„æ—¶å€™ï¼Œå®ƒä¼šåœ¨ B+æ ‘ç´¢å¼•çš„åŸºç¡€ä¸Šå†åˆ›å»ºä¸€ä¸ª Hash ç´¢å¼•ï¼Œè¿™æ ·è®© B+ æ ‘ä¹Ÿå…·å¤‡äº† Hashç´¢å¼•çš„ä¼˜ç‚¹ã€‚</p></li><li><p>é€‚åˆåˆ›å»ºç´¢å¼•çš„æƒ…å†µï¼š</p><ul><li>å­—æ®µçš„æ•°å€¼æœ‰å”¯ä¸€æ€§çš„é™åˆ¶ï¼Œæ¯”å¦‚ç”¨æˆ·å</li><li>é¢‘ç¹ä½œä¸º WHERE æŸ¥è¯¢æ¡ä»¶çš„å­—æ®µï¼Œå°¤å…¶åœ¨æ•°æ®è¡¨å¤§çš„æƒ…å†µä¸‹</li><li>éœ€è¦ç»å¸¸ GROUP BY å’Œ ORDER BY çš„åˆ—ï¼Œå¦‚æœåŒæ—¶æœ‰ï¼Œå»ºç«‹è”åˆç´¢å¼•ã€‚</li><li>UPDATEã€DELETE çš„ WHEREæ¡ä»¶åˆ—ï¼Œä¸€èˆ¬ä¹Ÿéœ€è¦åˆ›å»ºç´¢å¼•ï¼ˆæ›´æ–°åˆ—ä¸WHEREæ¡ä»¶åˆ—ä¸æ˜¯ä¸€åˆ—ï¼‰</li><li>DISTINCT å­—æ®µéœ€è¦åˆ›å»ºç´¢å¼•</li><li>åšå¤šè¡¨ JOIN è¿æ¥æ“ä½œæ—¶ï¼Œåˆ›å»ºç´¢å¼•éœ€è¦æ³¨æ„ä»¥ä¸‹çš„åŸåˆ™<ul><li>è¿æ¥è¡¨çš„æ•°é‡å°½é‡ä¸è¦è¶…è¿‡ 3 å¼ </li><li>å¯¹ WHERE æ¡ä»¶åˆ›å»ºç´¢å¼•</li><li>å¯¹ç”¨äºè¿æ¥çš„å­—æ®µåˆ›å»ºç´¢å¼•ï¼Œå¹¶ä¸”è¯¥å­—æ®µåœ¨å¤šå¼ è¡¨ä¸­çš„ç±»å‹å¿…é¡»ä¸€è‡´</li></ul></li></ul></li><li><p>ä¸èƒ½åˆ›å»ºç´¢å¼•çš„æƒ…å†µï¼š</p><ul><li>WHERE æ¡ä»¶ï¼ˆåŒ…æ‹¬ GROUP BYã€ORDERBYï¼‰é‡Œç”¨ä¸åˆ°çš„å­—æ®µä¸éœ€è¦åˆ›å»ºç´¢å¼•</li><li>å¦‚æœè¡¨è®°å½•å¤ªå°‘ï¼Œæ¯”å¦‚å°‘äº 1000 ä¸ªï¼Œé‚£ä¹ˆæ˜¯ä¸éœ€è¦åˆ›å»ºç´¢å¼•çš„</li><li>å­—æ®µä¸­å¦‚æœæœ‰å¤§é‡é‡å¤æ•°æ®ï¼Œä¹Ÿä¸ç”¨åˆ›å»ºç´¢å¼•</li><li>é¢‘ç¹æ›´æ–°çš„å­—æ®µä¸ä¸€å®šè¦åˆ›å»ºç´¢å¼•</li></ul></li><li><p>ç´¢å¼•å¤±æ•ˆï¼š</p><ul><li>ç´¢å¼•è¿›è¡Œäº†è¡¨è¾¾å¼è®¡ç®—ï¼Œåˆ™ä¼šå¤±æ•ˆ</li><li>å¯¹ç´¢å¼•ä½¿ç”¨å‡½æ•°ï¼Œä¹Ÿä¼šé€ æˆå¤±æ•ˆ</li><li>åœ¨ WHERE å­å¥ä¸­ï¼Œå¦‚æœåœ¨ OR å‰çš„æ¡ä»¶åˆ—è¿›è¡Œäº†ç´¢å¼•ï¼Œè€Œåœ¨ ORåçš„æ¡ä»¶åˆ—æ²¡æœ‰è¿›è¡Œç´¢å¼•ï¼Œé‚£ä¹ˆç´¢å¼•ä¼šå¤±æ•ˆã€‚</li><li>å½“æˆ‘ä»¬ä½¿ç”¨ LIKE è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢çš„æ—¶å€™ï¼Œåé¢ä¸èƒ½æ˜¯ %</li><li>ç´¢å¼•åˆ—ä¸ NULL æˆ–è€… NOT NULL è¿›è¡Œåˆ¤æ–­çš„æ—¶å€™ä¹Ÿä¼šå¤±æ•ˆ</li><li>åœ¨ä½¿ç”¨è”åˆç´¢å¼•çš„æ—¶å€™è¦æ³¨æ„æœ€å·¦åŸåˆ™</li></ul></li><li><p>ç´¢å¼•ç‰‡æ˜¯ SQLæŸ¥è¯¢è¯­å¥åœ¨æ‰§è¡Œä¸­éœ€è¦æ‰«æçš„ä¸€ä¸ªç´¢å¼•ç‰‡æ®µï¼Œæ ¹æ®åŒ…å«çš„åŒ¹é…åˆ—çš„æ•°é‡ä¸åŒï¼Œå°†ç´¢å¼•åˆ†æˆçª„ç´¢å¼•ï¼ˆæ¯”å¦‚åŒ…å«ç´¢å¼•åˆ—æ•°ä¸º1 æˆ– 2ï¼‰å’Œå®½ç´¢å¼•ï¼ˆåŒ…å«çš„ç´¢å¼•åˆ—æ•°å¤§äº2ï¼‰ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œæ¯ä¸ªéèšé›†ç´¢å¼•ä¿å­˜çš„æ•°æ®éƒ½ä¼šå­˜å‚¨ä¸»é”®å€¼ï¼Œç„¶åé€šè¿‡ä¸»é”®å€¼ï¼Œæ¥å›è¡¨æŸ¥æ‰¾ç›¸åº”çš„æ•°æ®ï¼Œå› æ­¤æ¯ä¸ªç´¢å¼•éƒ½ç›¸å½“äºåŒ…æ‹¬äº†ä¸»é”®ã€‚ã€æ‰€ä»¥å¦‚æœæ˜¯éèšé›†ç´¢å¼•çª„ç´¢å¼•å’Œå®½ç´¢å¼•åœ¨è®¡ç®—æ—¶éœ€è¦+1ã€‘</p></li><li><p>å›è¡¨æŒ‡çš„å°±æ˜¯æ•°æ®åº“æ ¹æ®ç´¢å¼•æ‰¾åˆ°äº†æ•°æ®è¡Œä¹‹åï¼Œè¿˜éœ€è¦é€šè¿‡ä¸»é”®å†æ¬¡åˆ°æ•°æ®è¡¨ä¸­è¯»å–æ•°æ®çš„æƒ…å†µã€‚</p></li><li><p>å®½ç´¢å¼•å¯ä»¥é¿å…å›è¡¨çš„æƒ…å†µå‘ç”Ÿï¼Œé€šè¿‡å®½ç´¢å¼•å°† SELECTä¸­éœ€è¦ç”¨åˆ°çš„åˆ—ï¼ˆä¸»é”®åˆ—å¯ä»¥é™¤å¤–ï¼‰éƒ½è®¾ç½®åœ¨å®½ç´¢å¼•ä¸­ï¼Œè¿™æ ·å°±é¿å…äº†å›è¡¨æ‰«æçš„æƒ…å†µï¼Œä»è€Œæå‡SQL æŸ¥è¯¢æ•ˆç‡ã€‚</p></li><li><p>è¿‡æ»¤å› å­ï¼šåœ¨ WHEREæ¡ä»¶è¯­å¥ä¸­ï¼Œæ¯ä¸ªæ¡ä»¶éƒ½ç§°ä¸ºä¸€ä¸ªè°“è¯ï¼Œè°“è¯çš„é€‰æ‹©æ€§ä¹Ÿç­‰äºæ»¡è¶³è¿™ä¸ªæ¡ä»¶åˆ—çš„è®°å½•æ•°é™¤ä»¥æ€»è®°å½•æ•°çš„æ¯”ä¾‹ã€‚è”åˆè¿‡æ»¤å› å­æœ‰æ›´é«˜çš„è¿‡æ»¤èƒ½åŠ›ï¼Œè¿™é‡Œè¿˜éœ€è¦æ³¨æ„ä¸€ä¸ªæ¡ä»¶ï¼Œé‚£å°±æ˜¯æ¡ä»¶åˆ—çš„å…³è”æ€§åº”è¯¥å°½é‡ç›¸äº’ç‹¬ç«‹ï¼Œå¦åˆ™å¦‚æœåˆ—ä¸åˆ—ä¹‹é—´å…·æœ‰ç›¸å…³æ€§ï¼Œè”åˆè¿‡æ»¤å› å­çš„èƒ½åŠ›å°±ä¼šä¸‹é™å¾ˆå¤šã€‚</p></li><li><p>è¿‡æ»¤å› å­å†³å®šäº†ç´¢å¼•ç‰‡çš„å¤§å°ï¼ˆæ³¨æ„è¿™é‡Œä¸æ˜¯çª„ç´¢å¼•å’Œå®½ç´¢å¼•ï¼‰ï¼Œè¿‡æ»¤å› å­çš„æ¡ä»¶è¿‡æ»¤èƒ½åŠ›è¶Šå¼ºï¼Œæ»¡è¶³æ¡ä»¶çš„è®°å½•æ•°å°±è¶Šå°‘ï¼ŒSQLæŸ¥è¯¢éœ€è¦æ‰«æçš„ç´¢å¼•ç‰‡ä¹Ÿå°±è¶Šå°ã€‚</p></li><li><p>ä½¿å¾—SQLæŸ¥è¯¢æ•ˆç‡æœ€å¤§åŒ–çš„è®¾è®¡ï¼ˆä¸‰æ˜Ÿç´¢å¼•ï¼‰ï¼š</p><ol type="1"><li>åœ¨ WHEREæ¡ä»¶è¯­å¥ä¸­ï¼Œæ‰¾åˆ°æ‰€æœ‰ç­‰å€¼è°“è¯ä¸­çš„æ¡ä»¶åˆ—ï¼Œå°†å®ƒä»¬ä½œä¸ºç´¢å¼•ç‰‡ä¸­çš„å¼€å§‹åˆ—ï¼›ï¼ˆæœ€å°åŒ–ç¢ç‰‡ï¼Œè¿‡æ»¤å› å­é™ä½ï¼‰</li><li>å°† GROUP BY å’Œ ORDER BYä¸­çš„åˆ—åŠ å…¥åˆ°ç´¢å¼•ä¸­ï¼›ï¼ˆé¿å…æ’åºï¼Œç´¢å¼•è‡ªå¸¦æ’åºï¼‰</li><li>å°† SELECT å­—æ®µä¸­å‰©ä½™çš„åˆ—åŠ å…¥åˆ°ç´¢å¼•ç‰‡ä¸­ã€‚ï¼ˆé¿å…å›è¡¨ï¼‰</li></ol></li><li><p>ä¸‰æ˜Ÿç´¢å¼•çš„å¼Šç«¯ï¼š</p><ul><li>é‡‡ç”¨ä¸‰æ˜Ÿç´¢å¼•ä¼šè®©ç´¢å¼•ç‰‡å˜å®½ï¼Œè¿™æ ·æ¯ä¸ªé¡µèƒ½å¤Ÿå­˜å‚¨çš„ç´¢å¼•æ•°æ®å°±ä¼šå˜å°‘ï¼Œä»è€Œå¢åŠ äº†é¡µåŠ è½½çš„æ•°é‡ã€‚</li><li>å¢åŠ äº†ç´¢å¼•ç»´æŠ¤çš„æˆæœ¬ã€‚</li></ul></li><li><p>è‡ªé€‚åº” Hash ç´¢å¼•ï¼ˆç³»ç»Ÿä¼šæ ¹æ®æƒ…å†µè‡ªåŠ¨å®Œæˆï¼‰</p><p>å¦‚æœæŸä¸ªæ•°æ®ç»å¸¸è¢«è®¿é—®ï¼Œå½“æ»¡è¶³ä¸€å®šæ¡ä»¶çš„æ—¶å€™ï¼Œå°±ä¼šå°†è¿™ä¸ªæ•°æ®é¡µçš„åœ°å€å­˜æ”¾åˆ°Hash è¡¨ä¸­ã€‚è¿™æ ·ä¸‹æ¬¡æŸ¥è¯¢çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç›´æ¥æ‰¾åˆ°è¿™ä¸ªé¡µé¢çš„æ‰€åœ¨ä½ç½®ã€‚</p><p>è‡ªé€‚åº” Hashç´¢å¼•åªä¿å­˜çƒ­æ•°æ®ï¼ˆç»å¸¸è¢«ä½¿ç”¨åˆ°çš„æ•°æ®ï¼‰ï¼Œå¹¶éå…¨è¡¨æ•°æ®ã€‚å› æ­¤æ•°æ®é‡å¹¶ä¸ä¼šå¾ˆå¤§ï¼Œå› æ­¤è‡ªé€‚åº”Hash ä¹Ÿæ˜¯å­˜æ”¾åˆ°ç¼“å†²æ± ä¸­ï¼Œè¿™æ ·ä¹Ÿè¿›ä¸€æ­¥æå‡äº†æŸ¥æ‰¾æ•ˆç‡ã€‚</p><p>InnoDB ä¸­çš„è‡ªé€‚åº” Hash ç›¸å½“äºâ€œç´¢å¼•çš„ç´¢å¼•â€ï¼Œé‡‡ç”¨ Hash ç´¢å¼•å­˜å‚¨çš„æ˜¯ B+æ ‘ç´¢å¼•ä¸­çš„é¡µé¢çš„åœ°å€ã€‚é‡‡ç”¨è‡ªé€‚åº” Hash ç´¢å¼•ç›®çš„æ˜¯æ–¹ä¾¿æ ¹æ® SQLçš„æŸ¥è¯¢æ¡ä»¶åŠ é€Ÿå®šä½åˆ°å¶å­èŠ‚ç‚¹ï¼Œç‰¹åˆ«æ˜¯å½“ B+ æ ‘æ¯”è¾ƒæ·±çš„æ—¶å€™ï¼Œé€šè¿‡è‡ªé€‚åº”Hash ç´¢å¼•å¯ä»¥æ˜æ˜¾æé«˜æ•°æ®çš„æ£€ç´¢æ•ˆç‡ã€‚</p></li></ul><h3 id="æ•°æ®åº“å­˜å‚¨ç»“æ„">æ•°æ®åº“å­˜å‚¨ç»“æ„ğŸ‘</h3><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220527162015622.png" /></p><ul><li><p>ä¸€ä¸ªé¡µä¸­å¯ä»¥å­˜å‚¨å¤šä¸ªè¡Œè®°å½•ï¼Œæ•°æ®åº“ç®¡ç†å­˜å‚¨ç©ºé—´çš„åŸºæœ¬å•ä½æ˜¯é¡µã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220527162603016.png" /></p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220527165533715.png" /></p><ul><li>åœ¨æ–‡ä»¶å¤´ä¸­æœ‰ä¸¤ä¸ªå­—æ®µï¼Œåˆ†åˆ«æ˜¯ FIL_PAGE_PREV å’ŒFIL_PAGE_NEXTï¼Œå®ƒä»¬çš„ä½œç”¨ç›¸å½“äºæŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘ä¸Šä¸€ä¸ªæ•°æ®é¡µå’Œä¸‹ä¸€ä¸ªæ•°æ®é¡µã€‚<strong>è¿æ¥èµ·æ¥çš„é¡µç›¸å½“äºä¸€ä¸ªåŒå‘çš„é“¾è¡¨</strong>ï¼Œéœ€è¦è¯´æ˜çš„æ˜¯é‡‡ç”¨é“¾è¡¨çš„ç»“æ„è®©æ•°æ®é¡µä¹‹é—´ä¸éœ€è¦æ˜¯ç‰©ç†ä¸Šçš„è¿ç»­ï¼Œè€Œæ˜¯é€»è¾‘ä¸Šçš„è¿ç»­ã€‚</li><li>æ–‡ä»¶å°¾çš„æ ¡éªŒæ–¹å¼å°±æ˜¯é‡‡ç”¨ Hash ç®—æ³•è¿›è¡Œæ ¡éªŒã€‚</li><li>å½“æœ‰æ–°çš„è®°å½•æ’å…¥æ—¶ï¼Œä¼šä»ç©ºé—²ç©ºé—´ä¸­è¿›è¡Œåˆ†é…ç”¨äºå­˜å‚¨æ–°è®°å½•</li></ul><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220527170207669.png" /></p><ul><li><p>é¡µç›®å½•èµ·åˆ°äº†è®°å½•çš„ç´¢å¼•ä½œç”¨ï¼Œåœ¨é¡µä¸­ï¼Œ<strong>è®°å½•æ˜¯ä»¥å•å‘é“¾è¡¨çš„å½¢å¼è¿›è¡Œå­˜å‚¨çš„</strong>ã€‚åœ¨é¡µç›®å½•ä¸­æä¾›äº†äºŒåˆ†æŸ¥æ‰¾çš„æ–¹å¼ï¼Œç”¨æ¥æé«˜è®°å½•çš„æ£€ç´¢æ•ˆç‡ã€‚</p><ol type="1"><li>å°†æ‰€æœ‰çš„è®°å½•åˆ†æˆå‡ ä¸ªç»„ï¼Œè¿™äº›è®°å½•åŒ…æ‹¬æœ€å°è®°å½•å’Œæœ€å¤§è®°å½•ï¼Œä½†ä¸åŒ…æ‹¬æ ‡è®°ä¸ºâ€œå·²åˆ é™¤â€çš„è®°å½•ã€‚</li><li>ç¬¬ 1 ç»„ï¼Œä¹Ÿå°±æ˜¯æœ€å°è®°å½•æ‰€åœ¨çš„åˆ†ç»„åªæœ‰ 1ä¸ªè®°å½•ï¼›æœ€åä¸€ç»„ï¼Œå°±æ˜¯æœ€å¤§è®°å½•æ‰€åœ¨çš„åˆ†ç»„ï¼Œä¼šæœ‰ 1-8æ¡è®°å½•ï¼›å…¶ä½™çš„ç»„è®°å½•æ•°é‡åœ¨ 4-8 æ¡ä¹‹é—´ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œé™¤äº†ç¬¬ 1ç»„ï¼ˆæœ€å°è®°å½•æ‰€åœ¨ç»„ï¼‰ä»¥å¤–ï¼Œå…¶ä½™ç»„çš„è®°å½•æ•°ä¼šå°½é‡å¹³åˆ†ã€‚</li><li>åœ¨æ¯ä¸ªç»„ä¸­æœ€åä¸€æ¡è®°å½•çš„å¤´ä¿¡æ¯ä¸­ä¼šå­˜å‚¨è¯¥ç»„ä¸€å…±æœ‰å¤šå°‘æ¡è®°å½•ï¼Œä½œä¸ºn_owned å­—æ®µã€‚</li><li>é¡µç›®å½•ç”¨æ¥å­˜å‚¨æ¯ç»„æœ€åä¸€æ¡è®°å½•çš„åœ°å€åç§»é‡ï¼Œè¿™äº›åœ°å€åç§»é‡ä¼šæŒ‰ç…§å…ˆåé¡ºåºå­˜å‚¨èµ·æ¥ï¼Œæ¯ç»„çš„åœ°å€åç§»é‡ä¹Ÿè¢«ç§°ä¹‹ä¸ºæ§½ï¼ˆslotï¼‰ï¼Œæ¯ä¸ªæ§½ç›¸å½“äºæŒ‡é’ˆæŒ‡å‘äº†ä¸åŒç»„çš„æœ€åä¸€ä¸ªè®°å½•ã€‚</li></ol><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220527180809501.png" /></p><p>é¡µç›®å½•å­˜å‚¨çš„æ˜¯æ§½ï¼Œæ§½ç›¸å½“äºåˆ†ç»„è®°å½•çš„ç´¢å¼•ã€‚æˆ‘ä»¬é€šè¿‡æ§½æŸ¥æ‰¾è®°å½•ï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨åšäºŒåˆ†æŸ¥æ‰¾ã€‚é€šè¿‡å¯¹æ§½ä»æœ€å°åˆ°æœ€å¤§è®°å½•è¿›è¡Œç¼–å·ï¼Œåˆ’å®šäºŒåˆ†æ³•çš„æŸ¥è¯¢èŒƒå›´ï¼Œå¹¶æŒ‰ç…§ï¼ˆlow+highï¼‰/2çš„æ§½ä¸­æå–æ•°æ®ä¸éœ€æŸ¥è¯¢æ•°æ®æ¯”å¯¹ï¼Œåˆ¤å®šä¸‹ä¸€æ­¥çš„æœ€ä½æœ€é«˜å€¼ï¼Œå¦‚æœï¼ç›®å‰æ§½ä¸­æ•°æ®ï¼Œåˆ™ä¸‹ä¸€æ­¥lowä¸ºå½“å‰æ§½çš„åºå·ï¼Œhighä¸ºæœ€å¤§è®°å½•çš„æ§½åºå·ï¼Œå¦‚æœ&lt;ç›®å‰æ§½ä¸­æ•°æ®ï¼Œåˆ™åä¹‹ã€‚ä»è€Œé€æ­¥é€¼è¿‘ï¼Œæœ€ç»ˆå®šä½åˆ°éœ€æŸ¥è¯¢æ•°æ®å¯¹åº”æ§½ã€‚</p></li></ul></li><li><p>åŒºï¼ˆExtentï¼‰æ˜¯æ¯”é¡µå¤§ä¸€çº§çš„å­˜å‚¨ç»“æ„ï¼Œåœ¨ InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œä¸€ä¸ªåŒºä¼šåˆ†é… 64 ä¸ªè¿ç»­çš„é¡µã€‚å› ä¸º InnoDB ä¸­çš„é¡µå¤§å°é»˜è®¤æ˜¯16KBï¼Œæ‰€ä»¥ä¸€ä¸ªåŒºçš„å¤§å°æ˜¯ 64*16KB=1MBã€‚</p></li><li><p>æ®µï¼ˆSegmentï¼‰ç”±ä¸€ä¸ªæˆ–å¤šä¸ªåŒºç»„æˆï¼ŒåŒºåœ¨æ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸€ä¸ªè¿ç»­åˆ†é…çš„ç©ºé—´ï¼ˆåœ¨InnoDB ä¸­æ˜¯è¿ç»­çš„ 64ä¸ªé¡µï¼‰ï¼Œä¸è¿‡åœ¨æ®µä¸­ä¸è¦æ±‚åŒºä¸åŒºä¹‹é—´æ˜¯ç›¸é‚»çš„ã€‚æ®µæ˜¯æ•°æ®åº“ä¸­çš„åˆ†é…å•ä½ï¼Œä¸åŒç±»å‹çš„æ•°æ®åº“å¯¹è±¡ä»¥ä¸åŒçš„æ®µå½¢å¼å­˜åœ¨ã€‚å½“æˆ‘ä»¬åˆ›å»ºæ•°æ®è¡¨ã€ç´¢å¼•çš„æ—¶å€™ï¼Œå°±ä¼šç›¸åº”åˆ›å»ºå¯¹åº”çš„æ®µï¼Œæ¯”å¦‚åˆ›å»ºä¸€å¼ è¡¨æ—¶ä¼šåˆ›å»ºä¸€ä¸ªè¡¨æ®µï¼Œåˆ›å»ºä¸€ä¸ªç´¢å¼•æ—¶ä¼šåˆ›å»ºä¸€ä¸ªç´¢å¼•æ®µã€‚</p></li><li><p>è¡¨ç©ºé—´ï¼ˆTablespaceï¼‰æ˜¯ä¸€ä¸ªé€»è¾‘å®¹å™¨ï¼Œè¡¨ç©ºé—´å­˜å‚¨çš„å¯¹è±¡æ˜¯æ®µï¼Œåœ¨ä¸€ä¸ªè¡¨ç©ºé—´ä¸­å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ®µï¼Œä½†æ˜¯ä¸€ä¸ªæ®µåªèƒ½å±äºä¸€ä¸ªè¡¨ç©ºé—´ã€‚æ•°æ®åº“ç”±ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ç©ºé—´ç»„æˆï¼Œè¡¨ç©ºé—´ä»ç®¡ç†ä¸Šå¯ä»¥åˆ’åˆ†ä¸ºç³»ç»Ÿè¡¨ç©ºé—´ã€ç”¨æˆ·è¡¨ç©ºé—´ã€æ’¤é”€è¡¨ç©ºé—´ã€ä¸´æ—¶è¡¨ç©ºé—´ç­‰ã€‚</p></li><li><p>åœ¨ä¸€æ£µ B+æ ‘ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªé¡µï¼Œæ¯æ¬¡æ–°å»ºèŠ‚ç‚¹çš„æ—¶å€™ï¼Œå°±ä¼šç”³è¯·ä¸€ä¸ªé¡µç©ºé—´ã€‚åŒä¸€å±‚ä¸Šçš„èŠ‚ç‚¹ä¹‹é—´ï¼Œé€šè¿‡é¡µçš„ç»“æ„æ„æˆä¸€ä¸ªåŒå‘çš„é“¾è¡¨ï¼ˆé¡µæ–‡ä»¶å¤´ä¸­çš„ä¸¤ä¸ªæŒ‡é’ˆå­—æ®µï¼‰ã€‚éå¶å­èŠ‚ç‚¹ï¼ŒåŒ…æ‹¬äº†å¤šä¸ªç´¢å¼•è¡Œï¼Œæ¯ä¸ªç´¢å¼•è¡Œé‡Œå­˜å‚¨ç´¢å¼•é”®å’ŒæŒ‡å‘ä¸‹ä¸€å±‚é¡µé¢çš„é¡µé¢æŒ‡é’ˆã€‚æœ€åæ˜¯å¶å­èŠ‚ç‚¹ï¼Œå®ƒå­˜å‚¨äº†å…³é”®å­—å’Œè¡Œè®°å½•ï¼Œåœ¨èŠ‚ç‚¹å†…éƒ¨ï¼ˆä¹Ÿå°±æ˜¯é¡µç»“æ„çš„å†…éƒ¨ï¼‰è®°å½•ä¹‹é—´æ˜¯ä¸€ä¸ªå•å‘çš„é“¾è¡¨ï¼Œä½†æ˜¯å¯¹è®°å½•è¿›è¡ŒæŸ¥æ‰¾ï¼Œåˆ™å¯ä»¥é€šè¿‡é¡µç›®å½•é‡‡ç”¨äºŒåˆ†æŸ¥æ‰¾çš„æ–¹å¼æ¥è¿›è¡Œã€‚</p></li></ul><h3 id="ç¼“å†²æ± ">ç¼“å†²æ± ğŸŒ¸</h3><p>ç£ç›˜ I/Oéœ€è¦æ¶ˆè€—çš„æ—¶é—´å¾ˆå¤šï¼Œè€Œåœ¨å†…å­˜ä¸­è¿›è¡Œæ“ä½œï¼Œæ•ˆç‡åˆ™ä¼šé«˜å¾ˆå¤šï¼Œä¸ºäº†èƒ½è®©æ•°æ®è¡¨æˆ–è€…ç´¢å¼•ä¸­çš„æ•°æ®éšæ—¶è¢«æˆ‘ä»¬æ‰€ç”¨ï¼ŒDBMSä¼šç”³è¯·å ç”¨å†…å­˜æ¥ä½œä¸ºæ•°æ®ç¼“å†²æ± ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥è®©ç£ç›˜æ´»åŠ¨æœ€å°åŒ–ï¼Œä»è€Œå‡å°‘ä¸ç£ç›˜ç›´æ¥è¿›è¡ŒI/O çš„æ—¶é—´ã€‚è¦çŸ¥é“ï¼Œè¿™ç§ç­–ç•¥å¯¹æå‡ SQLè¯­å¥çš„æŸ¥è¯¢æ€§èƒ½æ¥è¯´è‡³å…³é‡è¦ã€‚å¦‚æœç´¢å¼•çš„æ•°æ®åœ¨ç¼“å†²æ± é‡Œï¼Œé‚£ä¹ˆè®¿é—®çš„æˆæœ¬å°±ä¼šé™ä½å¾ˆå¤šã€‚</p><p>ç¼“å†²æ± ç®¡ç†å™¨ä¼šå°½é‡å°†ç»å¸¸ä½¿ç”¨çš„æ•°æ®ä¿å­˜èµ·æ¥ï¼Œåœ¨æ•°æ®åº“è¿›è¡Œé¡µé¢è¯»æ“ä½œçš„æ—¶å€™ï¼Œé¦–å…ˆä¼šåˆ¤æ–­è¯¥é¡µé¢æ˜¯å¦åœ¨ç¼“å†²æ± ä¸­ï¼Œå¦‚æœå­˜åœ¨å°±ç›´æ¥è¯»å–ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå°±ä¼šé€šè¿‡å†…å­˜æˆ–ç£ç›˜å°†é¡µé¢å­˜æ”¾åˆ°ç¼“å†²æ± ä¸­å†è¿›è¡Œè¯»å–ã€‚</p><p>å½“æˆ‘ä»¬å¯¹æ•°æ®åº“ä¸­çš„è®°å½•è¿›è¡Œä¿®æ”¹çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šä¿®æ”¹ç¼“å†²æ± ä¸­é¡µé‡Œé¢çš„è®°å½•ä¿¡æ¯ï¼Œç„¶åæ•°æ®åº“ä¼šä»¥ä¸€å®šçš„é¢‘ç‡åˆ·æ–°åˆ°ç£ç›˜ä¸Šã€‚æ³¨æ„å¹¶ä¸æ˜¯æ¯æ¬¡å‘ç”Ÿæ›´æ–°æ“ä½œï¼Œéƒ½ä¼šç«‹åˆ»è¿›è¡Œç£ç›˜å›å†™ã€‚ç¼“å†²æ± ä¼šé‡‡ç”¨ä¸€ç§å«åšcheckpointçš„æœºåˆ¶å°†æ•°æ®å›å†™åˆ°ç£ç›˜ä¸Šï¼Œè¿™æ ·åšçš„å¥½å¤„å°±æ˜¯æå‡äº†æ•°æ®åº“çš„æ•´ä½“æ€§èƒ½ã€‚</p><p>å¦‚æœç¼“å†²æ± ä¸­æ²¡æœ‰è¯¥é¡µæ•°æ®ï¼Œè¯»å–æ•°æ®æ–¹å¼ï¼š</p><ul><li><p>å†…å­˜è¯»å–</p><p>å¦‚æœè¯¥æ•°æ®å­˜åœ¨äºå†…å­˜ä¸­ï¼Œç›´æ¥è¯»å–å³å¯ã€‚ã€1msã€‘</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220527192120706.png" /></p></li><li><p>éšæœºè¯»å–</p><p>å¦‚æœæ•°æ®æ²¡æœ‰åœ¨å†…å­˜ä¸­ï¼Œå°±éœ€è¦åœ¨ç£ç›˜ä¸Šå¯¹è¯¥é¡µè¿›è¡ŒæŸ¥æ‰¾ã€‚ã€10msã€‘</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220527192220693.png" /></p></li><li><p>é¡ºåºè¯»å–</p><p>æ‰¹é‡è¯»å–ï¼Œå› ä¸ºæˆ‘ä»¬è¯·æ±‚çš„æ•°æ®åœ¨ç£ç›˜ä¸Šå¾€å¾€éƒ½æ˜¯ç›¸é‚»å­˜å‚¨çš„ï¼Œé¡ºåºè¯»å–å¯ä»¥å¸®æˆ‘ä»¬æ‰¹é‡è¯»å–é¡µé¢ï¼Œè¿™æ ·çš„è¯ï¼Œä¸€æ¬¡æ€§åŠ è½½åˆ°ç¼“å†²æ± ä¸­å°±ä¸éœ€è¦å†å¯¹å…¶ä»–é¡µé¢å•ç‹¬è¿›è¡Œç£ç›˜I/O æ“ä½œäº†ã€‚</p></li></ul><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220528151618933.png" /></p><p>ç¼“å†²æ± çš„ä½œç”¨å°±æ˜¯æå‡ I/Oæ•ˆç‡ï¼Œè€Œæˆ‘ä»¬è¿›è¡Œè¯»å–æ•°æ®çš„æ—¶å€™å­˜åœ¨ä¸€ä¸ªâ€œå±€éƒ¨æ€§åŸç†â€ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä½¿ç”¨äº†ä¸€äº›æ•°æ®ï¼Œå¤§æ¦‚ç‡è¿˜ä¼šä½¿ç”¨å®ƒå‘¨å›´çš„ä¸€äº›æ•°æ®ï¼Œå› æ­¤é‡‡ç”¨â€œé¢„è¯»â€çš„æœºåˆ¶æå‰åŠ è½½ï¼Œå¯ä»¥å‡å°‘æœªæ¥å¯èƒ½çš„ç£ç›˜I/O æ“ä½œã€‚</p><p>æŸ¥çœ‹SQLè¯­å¥æŸ¥è¯¢æˆæœ¬ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">è¿›è¡ŒæŸ¥è¯¢</span><br><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">SELECT name FROM student <span class="hljs-built_in">where</span> <span class="hljs-built_in">id</span>=1;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹SQLè¯­å¥æŸ¥è¯¢æˆæœ¬</span><br><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">SHOW STATUS LIKE <span class="hljs-string">&#x27;last_query_cost&#x27;</span>;</span><br></code></pre></div></td></tr></table></figure><h3 id="é”">é”ğŸ¸</h3><ul><li><p>æŒ‰ç…§é”ç²’åº¦åˆ’åˆ†ï¼š</p><ul><li>è¡Œé”</li><li>é¡µé”</li><li>è¡¨é”</li></ul><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220528094225897.png" /></p></li><li><p>ä»æ•°æ®åº“ç®¡ç†çš„è§’åº¦å¯¹é”è¿›è¡Œåˆ’åˆ†</p><ul><li>å…±äº«é” åŠ é”ï¼š <code>LOCK TABLE product_comment READ;</code> è§£é”ï¼š<code>UNLOCK TABLE;</code> ç»™æŸä¸€è¡ŒåŠ é”ï¼š<code>SELECT * FROM product_comment WHERE user_id = 912178 LOCK IN SHARE MODE</code></li><li>æ’å®ƒé” åŠ é”ï¼š <code>LOCK TABLE product_comment WRITE;</code> è§£é”ï¼š<code>UNLOCK TABLE;</code> ç»™æŸä¸€è¡ŒåŠ é”ï¼š<code>SELECT * FROM product_comment WHERE user_id = 912178 FOR UPDATE;</code></li><li>æ„å‘é”ï¼Œç®€å•æ¥è¯´å°±æ˜¯ç»™æ›´å¤§ä¸€çº§åˆ«çš„ç©ºé—´ç¤ºæ„é‡Œé¢æ˜¯å¦å·²ç»ä¸Šè¿‡é”ã€‚å¦‚æœæˆ‘ä»¬ç»™æŸä¸€è¡Œæ•°æ®åŠ ä¸Šäº†æ’å®ƒé”ï¼Œæ•°æ®åº“ä¼šè‡ªåŠ¨ç»™æ›´å¤§ä¸€çº§çš„ç©ºé—´ï¼Œæ¯”å¦‚æ•°æ®é¡µæˆ–æ•°æ®è¡¨åŠ ä¸Šæ„å‘é”ï¼Œå‘Šè¯‰å…¶ä»–äººè¿™ä¸ªæ•°æ®é¡µæˆ–æ•°æ®è¡¨å·²ç»æœ‰äººä¸Šè¿‡æ’å®ƒé”äº†ï¼Œè¿™æ ·å½“å…¶ä»–äººæƒ³è¦è·å–æ•°æ®è¡¨æ’å®ƒé”çš„æ—¶å€™ï¼Œåªéœ€è¦äº†è§£æ˜¯å¦æœ‰äººå·²ç»è·å–äº†è¿™ä¸ªæ•°æ®è¡¨çš„æ„å‘æ’ä»–é”å³å¯ã€‚å¦‚æœäº‹åŠ¡æƒ³è¦è·å¾—æ•°æ®è¡¨ä¸­æŸäº›è®°å½•çš„å…±äº«é”ï¼Œå°±éœ€è¦åœ¨æ•°æ®è¡¨ä¸Šæ·»åŠ æ„å‘å…±äº«é”ã€‚åŒç†ï¼Œäº‹åŠ¡æƒ³è¦è·å¾—æ•°æ®è¡¨ä¸­æŸäº›è®°å½•çš„æ’ä»–é”ï¼Œå°±éœ€è¦åœ¨æ•°æ®è¡¨ä¸Šæ·»åŠ æ„å‘æ’ä»–é”ã€‚è¿™æ—¶ï¼Œæ„å‘é”ä¼šå‘Šè¯‰å…¶ä»–äº‹åŠ¡å·²ç»æœ‰äººé”å®šäº†è¡¨ä¸­çš„æŸäº›è®°å½•ï¼Œä¸èƒ½å¯¹æ•´ä¸ªè¡¨è¿›è¡Œå…¨è¡¨æ‰«æã€‚</li><li>å½“æœ‰å¤šä¸ªäº‹åŠ¡å¯¹åŒä¸€æ•°æ®è·å¾—è¯»é”çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‡ºç°æ­»é”çš„æƒ…å†µã€‚</li><li>é¿å…æ­»é”çš„æ–¹æ³•ï¼š<ol type="1"><li>å¦‚æœäº‹åŠ¡æ¶‰åŠå¤šä¸ªè¡¨ï¼Œæ“ä½œæ¯”è¾ƒå¤æ‚ï¼Œé‚£ä¹ˆå¯ä»¥å°½é‡ä¸€æ¬¡é”å®šæ‰€æœ‰çš„èµ„æºï¼Œè€Œä¸æ˜¯é€æ­¥æ¥è·å–ï¼Œè¿™æ ·å¯ä»¥å‡å°‘æ­»é”å‘ç”Ÿçš„æ¦‚ç‡ï¼›</li><li>å¦‚æœäº‹åŠ¡éœ€è¦æ›´æ–°æ•°æ®è¡¨ä¸­çš„å¤§éƒ¨åˆ†æ•°æ®ï¼Œæ•°æ®è¡¨åˆæ¯”è¾ƒå¤§ï¼Œè¿™æ—¶å¯ä»¥é‡‡ç”¨é”å‡çº§çš„æ–¹å¼ï¼Œæ¯”å¦‚å°†è¡Œçº§é”å‡çº§ä¸ºè¡¨çº§é”ï¼Œä»è€Œå‡å°‘æ­»é”äº§ç”Ÿçš„æ¦‚ç‡ï¼›</li><li>ä¸åŒäº‹åŠ¡å¹¶å‘è¯»å†™å¤šå¼ æ•°æ®è¡¨ï¼Œå¯ä»¥çº¦å®šè®¿é—®è¡¨çš„é¡ºåºï¼Œé‡‡ç”¨ç›¸åŒçš„é¡ºåºé™ä½æ­»é”å‘ç”Ÿçš„æ¦‚ç‡ã€‚</li></ol></li></ul></li><li><p>ä»ç¨‹åºå‘˜çš„è§’åº¦è¿›è¡Œåˆ’åˆ†</p><ul><li><p>ä¹è§‚é”</p><p>ä¹è§‚é”ï¼ˆOptimisticLockingï¼‰è®¤ä¸ºå¯¹åŒä¸€æ•°æ®çš„å¹¶å‘æ“ä½œä¸ä¼šæ€»å‘ç”Ÿï¼Œå±äºå°æ¦‚ç‡äº‹ä»¶ï¼Œä¸ç”¨æ¯æ¬¡éƒ½å¯¹æ•°æ®ä¸Šé”ï¼Œä¹Ÿå°±æ˜¯ä¸é‡‡ç”¨æ•°æ®åº“è‡ªèº«çš„é”æœºåˆ¶ï¼Œè€Œæ˜¯é€šè¿‡ç¨‹åºæ¥å®ç°ã€‚åœ¨ç¨‹åºä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ç‰ˆæœ¬å·æœºåˆ¶æˆ–è€…æ—¶é—´æˆ³æœºåˆ¶å®ç°ã€‚</p><ul><li><p>ç‰ˆæœ¬å·æœºåˆ¶</p><p>åœ¨è¡¨ä¸­è®¾è®¡ä¸€ä¸ªç‰ˆæœ¬å­—æ®µ versionï¼Œç¬¬ä¸€æ¬¡è¯»çš„æ—¶å€™ï¼Œä¼šè·å– versionå­—æ®µçš„å–å€¼ã€‚ç„¶åå¯¹æ•°æ®è¿›è¡Œæ›´æ–°æˆ–åˆ é™¤æ“ä½œæ—¶ï¼Œä¼šæ‰§è¡Œ<code>UPDATE ... SET version=version+1 WHERE version=version</code>ã€‚æ­¤æ—¶å¦‚æœå·²ç»æœ‰äº‹åŠ¡å¯¹è¿™æ¡æ•°æ®è¿›è¡Œäº†æ›´æ”¹ï¼Œä¿®æ”¹å°±ä¸ä¼šæˆåŠŸã€‚</p></li><li><p>æ—¶é—´æˆ³æœºåˆ¶</p><p>åœ¨æ›´æ–°æäº¤çš„æ—¶å€™ï¼Œå°†å½“å‰æ•°æ®çš„æ—¶é—´æˆ³å’Œæ›´æ–°ä¹‹å‰å–å¾—çš„æ—¶é—´æˆ³è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸¤è€…ä¸€è‡´åˆ™æ›´æ–°æˆåŠŸï¼Œå¦åˆ™å°±æ˜¯ç‰ˆæœ¬å†²çªã€‚</p></li></ul></li><li><p>æ‚²è§‚é”</p><p>æ‚²è§‚é”ï¼ˆPessimisticLockingï¼‰ä¹Ÿæ˜¯ä¸€ç§æ€æƒ³ï¼Œå¯¹æ•°æ®è¢«å…¶ä»–äº‹åŠ¡çš„ä¿®æ”¹æŒä¿å®ˆæ€åº¦ï¼Œä¼šé€šè¿‡æ•°æ®åº“è‡ªèº«çš„é”æœºåˆ¶æ¥å®ç°ï¼Œä»è€Œä¿è¯æ•°æ®æ“ä½œçš„æ’å®ƒæ€§ã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220528100720437.png" /></p></li><li><p>ä¹è§‚é”é€‚åˆè¯»æ“ä½œå¤šçš„åœºæ™¯ï¼Œç›¸å¯¹æ¥è¯´å†™çš„æ“ä½œæ¯”è¾ƒå°‘ã€‚å®ƒçš„ä¼˜ç‚¹åœ¨äºç¨‹åºå®ç°ï¼Œä¸å­˜åœ¨æ­»é”é—®é¢˜ï¼Œä¸è¿‡é€‚ç”¨åœºæ™¯ä¹Ÿä¼šç›¸å¯¹ä¹è§‚ï¼Œå› ä¸ºå®ƒé˜»æ­¢ä¸äº†é™¤äº†ç¨‹åºä»¥å¤–çš„æ•°æ®åº“æ“ä½œã€‚</p></li><li><p>æ‚²è§‚é”é€‚åˆå†™æ“ä½œå¤šçš„åœºæ™¯ï¼Œå› ä¸ºå†™çš„æ“ä½œå…·æœ‰æ’å®ƒæ€§ã€‚é‡‡ç”¨æ‚²è§‚é”çš„æ–¹å¼ï¼Œå¯ä»¥åœ¨æ•°æ®åº“å±‚é¢é˜»æ­¢å…¶ä»–äº‹åŠ¡å¯¹è¯¥æ•°æ®çš„æ“ä½œæƒé™ï¼Œé˜²æ­¢è¯»- å†™å’Œå†™ - å†™çš„å†²çªã€‚</p></li><li><p>ä¹è§‚é”å’Œæ‚²è§‚é”å¹¶ä¸æ˜¯é”ï¼Œè€Œæ˜¯é”çš„è®¾è®¡æ€æƒ³ã€‚</p></li></ul></li></ul><h3 id="mvcc">MVCCğŸ—ï¸</h3><ul><li><p>MVCCæ˜¯é€šè¿‡æ•°æ®è¡Œçš„å¤šä¸ªç‰ˆæœ¬ç®¡ç†æ¥å®ç°æ•°æ®åº“çš„å¹¶å‘æ§åˆ¶ï¼Œç®€å•æ¥è¯´å®ƒçš„æ€æƒ³å°±æ˜¯ä¿å­˜æ•°æ®çš„å†å²ç‰ˆæœ¬ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ¯”è¾ƒç‰ˆæœ¬å·å†³å®šæ•°æ®æ˜¯å¦æ˜¾ç¤ºå‡ºæ¥ï¼Œè¯»å–æ•°æ®çš„æ—¶å€™ä¸éœ€è¦åŠ é”ä¹Ÿå¯ä»¥ä¿è¯äº‹åŠ¡çš„éš”ç¦»æ•ˆæœã€‚</p><p>MVCCç”¨åœ¨å·²æäº¤è¯»å’Œå¯é‡å¤è¯»çš„éš”ç¦»çº§åˆ«ä¸‹ã€‚</p><p>é€šè¿‡ MVCC å¯ä»¥è§£å†³ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p><ol type="1"><li>è¯»å†™ä¹‹é—´é˜»å¡çš„é—®é¢˜ï¼Œé€šè¿‡ MVCCå¯ä»¥è®©è¯»å†™äº’ç›¸ä¸é˜»å¡ï¼Œå³è¯»ä¸é˜»å¡å†™ï¼Œå†™ä¸é˜»å¡è¯»ï¼Œè¿™æ ·å°±å¯ä»¥æå‡äº‹åŠ¡å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚</li><li>é™ä½äº†æ­»é”çš„æ¦‚ç‡ã€‚è¿™æ˜¯å› ä¸º MVCCé‡‡ç”¨äº†ä¹è§‚é”çš„æ–¹å¼ï¼Œè¯»å–æ•°æ®æ—¶å¹¶ä¸éœ€è¦åŠ é”ï¼Œå¯¹äºå†™æ“ä½œï¼Œä¹Ÿåªé”å®šå¿…è¦çš„è¡Œã€‚</li><li>è§£å†³ä¸€è‡´æ€§è¯»çš„é—®é¢˜ã€‚ä¸€è‡´æ€§è¯»ä¹Ÿè¢«ç§°ä¸ºå¿«ç…§è¯»ï¼Œå½“æˆ‘ä»¬æŸ¥è¯¢æ•°æ®åº“åœ¨æŸä¸ªæ—¶é—´ç‚¹çš„å¿«ç…§æ—¶ï¼Œåªèƒ½çœ‹åˆ°è¿™ä¸ªæ—¶é—´ç‚¹ä¹‹å‰äº‹åŠ¡æäº¤æ›´æ–°çš„ç»“æœï¼Œè€Œä¸èƒ½çœ‹åˆ°è¿™ä¸ªæ—¶é—´ç‚¹ä¹‹åäº‹åŠ¡æäº¤çš„æ›´æ–°ç»“æœã€‚</li></ol><p>å¿«ç…§è¯»ï¼šå¿«ç…§è¯»è¯»å–çš„æ˜¯å¿«ç…§æ•°æ®ã€‚ä¸åŠ é”çš„ç®€å•çš„ SELECTéƒ½å±äºå¿«ç…§è¯»ã€‚</p><p>å½“å‰è¯»ï¼šå½“å‰è¯»è¯»å–æœ€æ–°æ•°æ®ï¼Œè€Œä¸æ˜¯å†å²ç‰ˆæœ¬çš„æ•°æ®ã€‚åŠ é”çš„SELECTï¼Œæˆ–è€…å¯¹æ•°æ®è¿›è¡Œå¢åˆ æ”¹éƒ½ä¼šè¿›è¡Œå½“å‰è¯»ã€‚</p><p>InnoDBä¸­MVCCçš„å®ç°ï¼š</p><ul><li><p>äº‹åŠ¡ç‰ˆæœ¬å·ï¼šæ¯å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œæˆ‘ä»¬éƒ½ä¼šä»æ•°æ®åº“ä¸­è·å¾—ä¸€ä¸ªäº‹åŠ¡IDï¼ˆä¹Ÿå°±æ˜¯äº‹åŠ¡ç‰ˆæœ¬å·ï¼‰ï¼Œè¿™ä¸ªäº‹åŠ¡ ID æ˜¯è‡ªå¢é•¿çš„ï¼Œé€šè¿‡ IDå¤§å°ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ¤æ–­äº‹åŠ¡çš„æ—¶é—´é¡ºåºã€‚</p></li><li><p>InnoDBçš„å¶å­æ®µå­˜å‚¨äº†æ•°æ®é¡µï¼Œæ•°æ®é¡µä¸­ä¿å­˜äº†è¡Œè®°å½•ï¼Œè€Œåœ¨è¡Œè®°å½•ä¸­æœ‰ä¸€äº›é‡è¦çš„éšè—å­—æ®µï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><ol type="1"><li>db_row_idï¼šéšè—çš„è¡ŒIDï¼Œç”¨æ¥ç”Ÿæˆé»˜è®¤èšé›†ç´¢å¼•ã€‚å¦‚æœæˆ‘ä»¬åˆ›å»ºæ•°æ®è¡¨çš„æ—¶å€™æ²¡æœ‰æŒ‡å®šèšé›†ç´¢å¼•ï¼Œè¿™æ—¶InnoDB å°±ä¼šç”¨è¿™ä¸ªéšè— IDæ¥åˆ›å»ºèšé›†ç´¢å¼•ã€‚é‡‡ç”¨èšé›†ç´¢å¼•çš„æ–¹å¼å¯ä»¥æå‡æ•°æ®çš„æŸ¥æ‰¾æ•ˆç‡ã€‚</li><li>db_trx_idï¼šæ“ä½œè¿™ä¸ªæ•°æ®çš„äº‹åŠ¡IDï¼Œä¹Ÿå°±æ˜¯æœ€åä¸€ä¸ªå¯¹è¯¥æ•°æ®è¿›è¡Œæ’å…¥æˆ–æ›´æ–°çš„äº‹åŠ¡ IDã€‚</li><li>db_roll_ptrï¼šå›æ»šæŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯æŒ‡å‘è¿™ä¸ªè®°å½•çš„ Undo Log ä¿¡æ¯ã€‚</li></ol><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220528110000422.png" /></p></li><li><p>Undo Log ï¼šInnoDB å°†è¡Œè®°å½•å¿«ç…§ä¿å­˜åœ¨äº† Undo Logé‡Œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å›æ»šæ®µä¸­æ‰¾åˆ°å®ƒä»¬</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220528110224364.png" /></p><p>å›æ»šæŒ‡é’ˆå°†æ•°æ®è¡Œçš„æ‰€æœ‰å¿«ç…§è®°å½•éƒ½é€šè¿‡é“¾è¡¨çš„ç»“æ„ä¸²è”äº†èµ·æ¥ï¼Œæ¯ä¸ªå¿«ç…§çš„è®°å½•éƒ½ä¿å­˜äº†å½“æ—¶çš„db_trx_idï¼Œä¹Ÿæ˜¯é‚£ä¸ªæ—¶é—´ç‚¹æ“ä½œè¿™ä¸ªæ•°æ®çš„äº‹åŠ¡IDã€‚è¿™æ ·å¦‚æœæˆ‘ä»¬æƒ³è¦æ‰¾å†å²å¿«ç…§ï¼Œå°±å¯ä»¥é€šè¿‡éå†å›æ»šæŒ‡é’ˆçš„æ–¹å¼è¿›è¡ŒæŸ¥æ‰¾ã€‚</p></li><li><p>Read Viewï¼šåœ¨ MVCCæœºåˆ¶ä¸­ï¼Œå¤šä¸ªäº‹åŠ¡å¯¹åŒä¸€ä¸ªè¡Œè®°å½•è¿›è¡Œæ›´æ–°ä¼šäº§ç”Ÿå¤šä¸ªå†å²å¿«ç…§ï¼Œè¿™äº›å†å²å¿«ç…§ä¿å­˜åœ¨Undo Logé‡Œã€‚å¦‚æœä¸€ä¸ªäº‹åŠ¡æƒ³è¦æŸ¥è¯¢è¿™ä¸ªè¡Œè®°å½•ï¼Œéœ€è¦è¯»å–å“ªä¸ªç‰ˆæœ¬çš„è¡Œè®°å½•å‘¢ï¼Ÿè¿™æ—¶å°±éœ€è¦ç”¨åˆ°Read View äº†ï¼Œå®ƒå¸®æˆ‘ä»¬è§£å†³äº†è¡Œçš„å¯è§æ€§é—®é¢˜ã€‚Read Viewä¿å­˜äº†å½“å‰äº‹åŠ¡å¼€å¯æ—¶æ‰€æœ‰æ´»è·ƒï¼ˆè¿˜æ²¡æœ‰æäº¤ï¼‰çš„äº‹åŠ¡åˆ—è¡¨ï¼Œæ¢ä¸ªè§’åº¦ä½ å¯ä»¥ç†è§£ä¸ºRead View ä¿å­˜äº†ä¸åº”è¯¥è®©è¿™ä¸ªäº‹åŠ¡çœ‹åˆ°çš„å…¶ä»–çš„äº‹åŠ¡ ID åˆ—è¡¨ã€‚</p><p>Read View ä¸­çš„å‡ ä¸ªé‡è¦å±æ€§ï¼š</p><ol type="1"><li>trx_idsï¼Œç³»ç»Ÿå½“å‰æ­£åœ¨æ´»è·ƒçš„äº‹åŠ¡ ID é›†åˆã€‚</li><li>low_limit_idï¼Œæ´»è·ƒçš„äº‹åŠ¡ä¸­æœ€å¤§çš„äº‹åŠ¡ IDã€‚</li><li>up_limit_idï¼Œæ´»è·ƒçš„äº‹åŠ¡ä¸­æœ€å°çš„äº‹åŠ¡ IDã€‚</li><li>creator_trx_idï¼Œåˆ›å»ºè¿™ä¸ª Read View çš„äº‹åŠ¡ IDã€‚</li></ol><p>å‡è®¾å½“å‰æœ‰äº‹åŠ¡ creator_trx_id æƒ³è¦è¯»å–æŸä¸ªè¡Œè®°å½•ï¼Œè¿™ä¸ªè¡Œè®°å½•çš„äº‹åŠ¡ IDä¸º trx_idï¼Œé‚£ä¹ˆä¼šå‡ºç°ä»¥ä¸‹å‡ ç§æƒ…å†µã€‚</p><p>å¦‚æœ trx_id &lt; æ´»è·ƒçš„æœ€å°äº‹åŠ¡IDï¼ˆup_limit_idï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªè¡Œè®°å½•åœ¨è¿™äº›æ´»è·ƒçš„äº‹åŠ¡åˆ›å»ºä¹‹å‰å°±å·²ç»æäº¤äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡Œè®°å½•å¯¹è¯¥äº‹åŠ¡æ˜¯å¯è§çš„ã€‚</p><p>å¦‚æœ trx_id &gt; æ´»è·ƒçš„æœ€å¤§äº‹åŠ¡IDï¼ˆlow_limit_idï¼‰ï¼Œè¿™è¯´æ˜è¯¥è¡Œè®°å½•åœ¨è¿™äº›æ´»è·ƒçš„äº‹åŠ¡åˆ›å»ºä¹‹åæ‰åˆ›å»ºï¼Œé‚£ä¹ˆè¿™ä¸ªè¡Œè®°å½•å¯¹å½“å‰äº‹åŠ¡ä¸å¯è§ã€‚</p><p>å¦‚æœ up_limit_id &lt; trx_id &lt;low_limit_idï¼Œè¯´æ˜è¯¥è¡Œè®°å½•æ‰€åœ¨çš„äº‹åŠ¡ trx_id åœ¨ç›®å‰ creator_trx_idè¿™ä¸ªäº‹åŠ¡åˆ›å»ºçš„æ—¶å€™ï¼Œå¯èƒ½è¿˜å¤„äºæ´»è·ƒçš„çŠ¶æ€ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨ trx_idsé›†åˆä¸­è¿›è¡Œéå†ï¼Œå¦‚æœ trx_id å­˜åœ¨äº trx_ids é›†åˆä¸­ï¼Œè¯æ˜è¿™ä¸ªäº‹åŠ¡ trx_idè¿˜å¤„äºæ´»è·ƒçŠ¶æ€ï¼Œä¸å¯è§ã€‚å¦åˆ™ï¼Œå¦‚æœ trx_id ä¸å­˜åœ¨äº trx_idsé›†åˆä¸­ï¼Œè¯æ˜äº‹åŠ¡ trx_id å·²ç»æäº¤äº†ï¼Œè¯¥è¡Œè®°å½•å¯è§ã€‚</p></li><li><p>å½“æŸ¥è¯¢ä¸€æ¡è®°å½•çš„æ—¶å€™ï¼Œç³»ç»Ÿå¦‚ä½•é€šè¿‡å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶æŠ€æœ¯æ‰¾åˆ°å®ƒï¼š</p><ol type="1"><li>é¦–å…ˆè·å–äº‹åŠ¡è‡ªå·±çš„ç‰ˆæœ¬å·ï¼Œä¹Ÿå°±æ˜¯äº‹åŠ¡ IDï¼›</li><li>è·å– Read Viewï¼›</li><li>æŸ¥è¯¢å¾—åˆ°çš„æ•°æ®ï¼Œç„¶åä¸ Read View ä¸­çš„äº‹åŠ¡ç‰ˆæœ¬å·è¿›è¡Œæ¯”è¾ƒï¼›</li><li>å¦‚æœä¸ç¬¦åˆ Read View è§„åˆ™ï¼Œå°±éœ€è¦ä» Undo Log ä¸­è·å–å†å²å¿«ç…§ï¼›</li><li>æœ€åè¿”å›ç¬¦åˆè§„åˆ™çš„æ•°æ®ã€‚</li></ol></li><li><p>MVCC æ˜¯é€šè¿‡ Undo Log + Read View è¿›è¡Œæ•°æ®è¯»å–ï¼ŒUndo Logä¿å­˜äº†å†å²å¿«ç…§ï¼Œè€Œ Read Viewè§„åˆ™å¸®æˆ‘ä»¬åˆ¤æ–­å½“å‰ç‰ˆæœ¬çš„æ•°æ®æ˜¯å¦å¯è§ã€‚</p></li><li><p>åœ¨éš”ç¦»çº§åˆ«ä¸ºè¯»å·²æäº¤ï¼ˆRead Commitï¼‰æ—¶ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸­çš„æ¯ä¸€æ¬¡ SELECTæŸ¥è¯¢éƒ½ä¼šè·å–ä¸€æ¬¡ Read Viewã€‚è¿™æ—¶å¦‚æœ Read Viewä¸åŒï¼Œå°±å¯èƒ½äº§ç”Ÿä¸å¯é‡å¤è¯»æˆ–è€…å¹»è¯»çš„æƒ…å†µã€‚</p></li><li><p>å½“éš”ç¦»çº§åˆ«ä¸ºå¯é‡å¤è¯»çš„æ—¶å€™ï¼Œå°±é¿å…äº†ä¸å¯é‡å¤è¯»ï¼Œè¿™æ˜¯å› ä¸ºä¸€ä¸ªäº‹åŠ¡åªåœ¨ç¬¬ä¸€æ¬¡SELECT çš„æ—¶å€™ä¼šè·å–ä¸€æ¬¡ Read Viewï¼Œè€Œåé¢æ‰€æœ‰çš„ SELECT éƒ½ä¼šå¤ç”¨è¿™ä¸ª ReadViewã€‚</p><p>ä½†æ˜¯å¦‚æœåœ¨ä¸¤ä¸ªå¿«ç…§è¯»ä¹‹é—´å­˜åœ¨ä¸€ä¸ªå½“å‰è¯»ï¼Œå¯èƒ½ä¹Ÿä¼šå‡ºç°å¹»è¯»çš„æƒ…å†µã€‚</p></li></ul><p>InnoDB è§£å†³å¹»è¯»æ–¹æ³•ï¼š</p><ul><li><p>åœ¨å¯é‡å¤è¯»çš„æƒ…å†µä¸‹ï¼ŒInnoDB å¯ä»¥é€šè¿‡ Next-Key é” +MVCCæ¥è§£å†³å¹»è¯»é—®é¢˜ã€‚</p></li><li><p>å¿«ç…§è¯»ç”¨MVCCï¼Œå½“å‰è¯»ç”¨Next-Keyã€‚</p></li><li><p>InnoDB ä¸‰ç§è¡Œé”çš„æ–¹å¼ï¼š</p><ol type="1"><li>è®°å½•é”ï¼šé’ˆå¯¹å•ä¸ªè¡Œè®°å½•æ·»åŠ é”ã€‚</li><li>é—´éš™é”ï¼ˆGapLockingï¼‰ï¼šå¯ä»¥å¸®æˆ‘ä»¬é”ä½ä¸€ä¸ªèŒƒå›´ï¼ˆç´¢å¼•ä¹‹é—´çš„ç©ºéš™ï¼‰ï¼Œä½†ä¸åŒ…æ‹¬è®°å½•æœ¬èº«ã€‚é‡‡ç”¨é—´éš™é”çš„æ–¹å¼å¯ä»¥é˜²æ­¢å¹»è¯»æƒ…å†µçš„äº§ç”Ÿã€‚</li><li>Next-Key é”ï¼šå¸®æˆ‘ä»¬é”ä½ä¸€ä¸ªèŒƒå›´ï¼ŒåŒæ—¶é”å®šè®°å½•æœ¬èº«ï¼Œç›¸å½“äºé—´éš™é” +è®°å½•é”ï¼Œå¯ä»¥è§£å†³å¹»è¯»çš„é—®é¢˜ã€‚</li></ol></li><li><p>åœ¨è¯»å·²æäº¤çš„æƒ…å†µä¸‹ï¼ŒInnoDBåªé‡‡ç”¨è®°å½•é”ï¼Œä¸èƒ½è§£å†³å¹»è¯»é—®é¢˜ã€‚</p></li><li><p>å¯¹æ¯”ï¼š</p><p>è¯»å·²æäº¤ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220528113304621.png" /></p><p>å‡ºç°å¹»è¯»ï¼šäº‹åŠ¡Aä¼šè¯»åˆ°æ–°æ’å…¥çš„æ•°æ®ï¼Œæ˜¯å› ä¸ºè¿™é‡Œä½¿ç”¨äº†è®°å½•é”ï¼Œåªé”ä½äº†å•æ¡è®°å½•</p><p>å¯é‡å¤è¯»ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220528113413860.png" /></p><p>è¿™æ˜¯å› ä¸ºé‡‡ç”¨äº† Next-Key é”ï¼Œä¼šå°† height&gt;2.08çš„èŒƒå›´éƒ½è¿›è¡Œé”å®šï¼Œå°±æ— æ³•æ’å…¥ç¬¦åˆè¿™ä¸ªèŒƒå›´çš„æ•°æ®äº†ã€‚ç„¶åäº‹åŠ¡ Aé‡æ–°è¿›è¡Œæ¡ä»¶èŒƒå›´çš„æŸ¥è¯¢ï¼Œå°±ä¸ä¼šå‡ºç°å¹»è¯»çš„æƒ…å†µã€‚</p></li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®åº“</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SQLå¿…çŸ¥å¿…ä¼šç¬”è®°ï¼ˆä¸€ï¼‰</title>
    <link href="/post/2167a882.html"/>
    <url>/post/2167a882.html</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦å¯¹<ahref="https://time.geekbang.org/column/intro/100029501">SQLå¿…çŸ¥å¿…ä¼š</a>çš„å†…å®¹è¿›è¡Œæ€»ç»“</p><span id="more"></span><h1 id="sqlå¿…çŸ¥å¿…ä¼šç¬”è®°ä¸€">SQLå¿…çŸ¥å¿…ä¼šç¬”è®°ï¼ˆä¸€ï¼‰</h1><h3 id="sqlè¯­è¨€åˆ†ç±»">SQLè¯­è¨€åˆ†ç±»ğŸ¥¡</h3><ol type="1"><li>DDLï¼Œè‹±æ–‡å«åš Data DefinitionLanguageï¼Œä¹Ÿå°±æ˜¯æ•°æ®å®šä¹‰è¯­è¨€ï¼Œå®ƒç”¨æ¥å®šä¹‰æˆ‘ä»¬çš„æ•°æ®åº“å¯¹è±¡ï¼ŒåŒ…æ‹¬æ•°æ®åº“ã€æ•°æ®è¡¨å’Œåˆ—ã€‚é€šè¿‡ä½¿ç”¨DDLï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºï¼Œåˆ é™¤å’Œä¿®æ”¹æ•°æ®åº“å’Œè¡¨ç»“æ„ã€‚</li><li>DMLï¼Œè‹±æ–‡å«åš Data ManipulationLanguageï¼Œæ•°æ®æ“ä½œè¯­è¨€ï¼Œæˆ‘ä»¬ç”¨å®ƒæ“ä½œå’Œæ•°æ®åº“ç›¸å…³çš„è®°å½•ï¼Œæ¯”å¦‚å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹æ•°æ®è¡¨ä¸­çš„è®°å½•ã€‚</li><li>DCLï¼Œè‹±æ–‡å«åš Data ControlLanguageï¼Œæ•°æ®æ§åˆ¶è¯­è¨€ï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥å®šä¹‰è®¿é—®æƒé™å’Œå®‰å…¨çº§åˆ«ã€‚</li><li>DQLï¼Œè‹±æ–‡å«åš Data QueryLanguageï¼Œæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼Œæˆ‘ä»¬ç”¨å®ƒæŸ¥è¯¢æƒ³è¦çš„è®°å½•ï¼Œå®ƒæ˜¯ SQLè¯­è¨€çš„é‡ä¸­ä¹‹é‡ã€‚åœ¨å®é™…çš„ä¸šåŠ¡ä¸­ï¼Œæˆ‘ä»¬ç»å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯åœ¨å’ŒæŸ¥è¯¢æ‰“äº¤é“ï¼Œå› æ­¤å­¦ä¼šç¼–å†™æ­£ç¡®ä¸”é«˜æ•ˆçš„æŸ¥è¯¢è¯­å¥ï¼Œæ˜¯å­¦ä¹ çš„é‡ç‚¹ã€‚</li></ol><h3 id="å¤§å°å†™é—®é¢˜">å¤§å°å†™é—®é¢˜ğŸŒµ</h3><ol type="1"><li>è¡¨åã€è¡¨åˆ«åã€å­—æ®µåã€å­—æ®µåˆ«åç­‰éƒ½å°å†™ï¼›</li><li>SQL ä¿ç•™å­—ã€å‡½æ•°åã€ç»‘å®šå˜é‡ç­‰éƒ½å¤§å†™ã€‚</li></ol><p>Oracleæ‰§è¡ŒSQLè¯­å¥è¿‡ç¨‹</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202205231433971.png" /></p><p>å…±äº«æ± ï¼ˆShared Poolï¼‰æ˜¯ä¸€å—å†…å­˜æ± ï¼Œæœ€ä¸»è¦çš„ä½œç”¨æ˜¯ç¼“å­˜ SQLè¯­å¥å’Œè¯¥è¯­å¥çš„æ‰§è¡Œè®¡åˆ’ã€‚Oracle é€šè¿‡æ£€æŸ¥å…±äº«æ± æ˜¯å¦å­˜åœ¨ SQLè¯­å¥çš„æ‰§è¡Œè®¡åˆ’ï¼Œæ¥åˆ¤æ–­è¿›è¡Œè½¯è§£æï¼Œè¿˜æ˜¯ç¡¬è§£æã€‚é‚£è½¯è§£æå’Œç¡¬è§£æåˆè¯¥æ€ä¹ˆç†è§£å‘¢ï¼Ÿ</p><p>åœ¨å…±äº«æ± ä¸­ï¼ŒOracle é¦–å…ˆå¯¹ SQL è¯­å¥è¿›è¡Œ Hash è¿ç®—ï¼Œç„¶åæ ¹æ® Hashå€¼åœ¨åº“ç¼“å­˜ï¼ˆLibrary Cacheï¼‰ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœå­˜åœ¨ SQLè¯­å¥çš„æ‰§è¡Œè®¡åˆ’ï¼Œå°±ç›´æ¥æ‹¿æ¥æ‰§è¡Œï¼Œç›´æ¥è¿›å…¥â€œæ‰§è¡Œå™¨â€çš„ç¯èŠ‚ï¼Œè¿™å°±æ˜¯è½¯è§£æã€‚</p><p>å¦‚æœæ²¡æœ‰æ‰¾åˆ° SQL è¯­å¥å’Œæ‰§è¡Œè®¡åˆ’ï¼ŒOracleå°±éœ€è¦åˆ›å»ºè§£ææ ‘è¿›è¡Œè§£æï¼Œç”Ÿæˆæ‰§è¡Œè®¡åˆ’ï¼Œè¿›å…¥â€œä¼˜åŒ–å™¨â€è¿™ä¸ªæ­¥éª¤ï¼Œè¿™å°±æ˜¯ç¡¬è§£æã€‚</p><p>è¦é¿å…ç¡¬è§£æï¼Œå°½é‡ä½¿ç”¨è½¯è§£æã€‚åœ¨ Oracleä¸­ï¼Œç»‘å®šå˜é‡æ˜¯å®ƒçš„ä¸€å¤§ç‰¹è‰²ã€‚ç»‘å®šå˜é‡å°±æ˜¯åœ¨ SQLè¯­å¥ä¸­ä½¿ç”¨å˜é‡ï¼Œé€šè¿‡ä¸åŒçš„å˜é‡å–å€¼æ¥æ”¹å˜ SQLçš„æ‰§è¡Œç»“æœã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯èƒ½æå‡è½¯è§£æçš„å¯èƒ½æ€§ï¼Œä¸è¶³ä¹‹å¤„åœ¨äºå¯èƒ½ä¼šå¯¼è‡´ç”Ÿæˆçš„æ‰§è¡Œè®¡åˆ’ä¸å¤Ÿä¼˜åŒ–ï¼Œå¹¶ä¸”ä½¿ç”¨åŠ¨æ€SQL çš„æ–¹å¼ï¼Œå› ä¸ºå‚æ•°ä¸åŒï¼Œä¼šå¯¼è‡´ SQLçš„æ‰§è¡Œæ•ˆç‡ä¸åŒï¼Œå› æ­¤æ˜¯å¦éœ€è¦ç»‘å®šå˜é‡è¿˜éœ€è¦è§†æƒ…å†µè€Œå®šã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs mysql">select * from player where player_id = 10001;<br>=&gt;<br>select * from player where player_id := player_id;<br></code></pre></div></td></tr></table></figure><h3 id="mysqlæ‰§è¡Œsqlè¯­å¥è¿‡ç¨‹">MYSQLæ‰§è¡ŒSQLè¯­å¥è¿‡ç¨‹ğŸµï¸</h3><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202205231438888.png" style="zoom:80%;" /></p><p>SQLå±‚ç»“æ„ï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202205231449401.png"  style="zoom:67%;" /></p><p>å› ä¸ºæŸ¥è¯¢ç¼“å­˜å¾€å¾€æ•ˆç‡ä¸é«˜ï¼Œæ‰€ä»¥åœ¨ MySQL 8.0 ä¹‹åå°±æŠ›å¼ƒäº†ç¼“å­˜æŸ¥è¯¢ã€‚</p><p>MySQLçš„å­˜å‚¨å¼•æ“é‡‡ç”¨äº†æ’ä»¶çš„å½¢å¼ï¼Œæ¯ä¸ªå­˜å‚¨å¼•æ“éƒ½é¢å‘ä¸€ç§ç‰¹å®šçš„æ•°æ®åº“åº”ç”¨ç¯å¢ƒã€‚åŒæ—¶å¼€æºçš„MySQL è¿˜å…è®¸å¼€å‘äººå‘˜è®¾ç½®è‡ªå·±çš„å­˜å‚¨å¼•æ“ã€‚</p><p><strong>ä¸åŒçš„ DBMS çš„ SQLçš„æ‰§è¡ŒåŸç†æ˜¯ç›¸é€šçš„</strong>ï¼Œåªæ˜¯åœ¨ä¸åŒçš„è½¯ä»¶ä¸­ï¼Œå„æœ‰å„çš„å®ç°è·¯å¾„ã€‚</p><h3 id="è®¾è®¡æ•°æ®è¡¨åŸåˆ™">è®¾è®¡æ•°æ®è¡¨åŸåˆ™ğŸ¥’</h3><p>ä¸‰å°‘ä¸€å¤š</p><ol type="1"><li>æ•°æ®è¡¨çš„ä¸ªæ•°è¶Šå°‘è¶Šå¥½</li><li>æ•°æ®è¡¨ä¸­çš„å­—æ®µä¸ªæ•°è¶Šå°‘è¶Šå¥½</li><li>æ•°æ®è¡¨ä¸­è”åˆä¸»é”®çš„å­—æ®µä¸ªæ•°è¶Šå°‘è¶Šå¥½</li><li>ä½¿ç”¨ä¸»é”®å’Œå¤–é”®è¶Šå¤šè¶Šå¥½</li></ol><h3 id="å¸¸è§çº¦æŸ">å¸¸è§çº¦æŸğŸ¥¶</h3><p>ä¸»é”®çº¦æŸã€å¤–é”®çº¦æŸã€å”¯ä¸€æ€§çº¦æŸã€éç©ºçº¦æŸã€CHECKçº¦æŸã€DEFAULTçº¦æŸ</p><h3 id="selectè¯­å¥">SELECTè¯­å¥ğŸ¥</h3><ul><li>DISTINCT éœ€è¦æ”¾åˆ°æ‰€æœ‰åˆ—åçš„å‰é¢ã€DISTINCTå…¶å®æ˜¯å¯¹åé¢æ‰€æœ‰åˆ—åçš„ç»„åˆè¿›è¡Œå»é‡</li><li><code>SELECT ... FROM ... WHERE ... GROUP BY ... HAVING ... ORDER BY ...</code></li><li>æ‰§è¡Œé¡ºåºï¼š<code>FROM(åŒ…æ‹¬join) &gt; WHERE &gt; GROUP BY &gt; HAVING &gt; SELECT çš„å­—æ®µ &gt; DISTINCT &gt; ORDER BY &gt; LIMIT</code></li><li>åœ¨ SELECTè¯­å¥æ‰§è¡Œè¿™äº›æ­¥éª¤çš„æ—¶å€™ï¼Œæ¯ä¸ªæ­¥éª¤éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªè™šæ‹Ÿè¡¨ï¼Œç„¶åå°†è¿™ä¸ªè™šæ‹Ÿè¡¨ä¼ å…¥ä¸‹ä¸€ä¸ªæ­¥éª¤ä¸­ä½œä¸ºè¾“å…¥ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›æ­¥éª¤éšå«åœ¨SQL çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯¹äºæˆ‘ä»¬æ¥è¯´æ˜¯ä¸å¯è§çš„ã€‚</li><li>åœ¨ MySQL InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œ<code>COUNT(*)</code>å’Œ<code>COUNT(1)</code>éƒ½æ˜¯å¯¹æ‰€æœ‰ç»“æœè¿›è¡Œ<code>COUNT</code>ã€‚å¦‚æœæœ‰WHERE å­å¥ï¼Œåˆ™æ˜¯å¯¹æ‰€æœ‰ç¬¦åˆç­›é€‰æ¡ä»¶çš„æ•°æ®è¡Œè¿›è¡Œç»Ÿè®¡ï¼›å¦‚æœæ²¡æœ‰ WHEREå­å¥ï¼Œåˆ™æ˜¯å¯¹æ•°æ®è¡¨çš„æ•°æ®è¡Œæ•°è¿›è¡Œç»Ÿè®¡ã€‚</li><li><code>COUNT(*) = COUNT(1) &gt; COUNT(å­—æ®µ)</code></li><li>å¦‚æœè¦ç»Ÿè®¡<code>COUNT(*)</code>ï¼Œå°½é‡åœ¨æ•°æ®è¡¨ä¸Šå»ºç«‹äºŒçº§ç´¢å¼•ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é‡‡ç”¨<code>key_len</code>å°çš„äºŒçº§ç´¢å¼•è¿›è¡Œæ‰«æï¼Œè¿™æ ·å½“æˆ‘ä»¬ä½¿ç”¨<code>SELECT COUNT(*)</code>çš„æ—¶å€™æ•ˆç‡å°±ä¼šæå‡ï¼Œæœ‰æ—¶å€™å¯ä»¥æå‡å‡ å€ç”šè‡³æ›´é«˜ã€‚</li><li>å‡½æ•°ï¼š</li></ul><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202205231610483.png" style="zoom:67%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202205231610988.png" style="zoom:67%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202205231610043.png" style="zoom:67%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202205231610814.png" style="zoom:67%;" /></p><ul><li><p>æ—¥æœŸæ ¼å¼ï¼š<code>"yy-mm-dd hh-mm-ss"</code>ä¸¾ä¾‹ï¼š<code>"2022-05-23 16:08:45"</code></p></li><li><p><code>SELECT EXTRACT(YEAR FROM '2022-05-23')</code>ï¼Œè¿è¡Œç»“æœä¸º<code>2022</code></p></li><li><p><code>SELECT CAST(123.123 AS DECIMAL(8,2))</code>ï¼Œè¿è¡Œç»“æœä¸º<code>123.12</code> ï¼Œ<code>DECIMAL(8,2)</code>ä»£è¡¨çš„æ˜¯ç²¾åº¦ä¸º 8ä½ï¼ˆæ•´æ•°åŠ å°æ•°ä½æ•°æœ€å¤šä¸º 8 ä½ï¼‰ï¼Œå°æ•°ä½æ•°ä¸º 2 ä½çš„æ•°æ®ç±»å‹</p></li><li><p><code>SELECT COALESCE(null,1,2)</code>ï¼Œè¿è¡Œç»“æœä¸º<code>1</code></p></li><li><p><code>WHERE DATE(birthdate)&gt;'2022-05-23'</code>è¿™æ ·æ‰æ˜¯æ­£ç¡®çš„ï¼Œä¸èƒ½ç›´æ¥æ¯”è¾ƒæ—¶é—´</p></li><li><p>MAX å’Œ MINå‡½æ•°ä¹Ÿå¯ä»¥ç”¨äºå­—ç¬¦ä¸²ç±»å‹æ•°æ®çš„ç»Ÿè®¡ï¼Œå¦‚æœæ˜¯è‹±æ–‡å­—æ¯ï¼Œåˆ™æŒ‰ç…§ Aâ€”Zçš„é¡ºåºæ’åˆ—ï¼Œè¶Šå¾€åï¼Œæ•°å€¼è¶Šå¤§ã€‚å¦‚æœæ˜¯æ±‰å­—åˆ™æŒ‰ç…§å…¨æ‹¼æ‹¼éŸ³è¿›è¡Œæ’åˆ—ï¼š<code>SELECT MIN(CONVERT(name USING gbk)),MAX(CONVERT(name USING gbk)) FROM heros</code></p></li><li><p>å»æ‰é‡å¤æ“ä½œå†ä½¿ç”¨èšé›†å‡½æ•°ï¼š<code>SELECT ROUND(AVG(DISTINCT hp_max), 2) FROM heros</code></p></li><li><p>å½“æŸ¥è¯¢å­—æ®µè¿›è¡Œäº†ç´¢å¼•æ—¶ï¼Œä¸»è¡¨ A å¤§äºä»è¡¨ Bï¼Œä½¿ç”¨ INå­æŸ¥è¯¢æ•ˆç‡æ›´é«˜ï¼›ç›¸åä¸»è¡¨ A å°äºä»è¡¨ B æ—¶ï¼Œä½¿ç”¨ EXISTS å­æŸ¥è¯¢æ•ˆç‡æ›´é«˜</p><figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs mysql">SELECT * FROM A WHERE cc IN (SELECT cc FROM B)<br><br>SELECT * FROM A WHERE EXIST (SELECT cc FROM B WHERE B.cc=A.cc)<br></code></pre></div></td></tr></table></figure><p>å¦‚æœè¡¨Aå¤§äºè¡¨Bï¼ŒINå¯ä»¥ä½¿ç”¨è¡¨Bçš„ç´¢å¼•ï¼›å¦‚æœè¡¨Bå¤§äºè¡¨Aï¼ŒEXISTå¯ä»¥ä½¿ç”¨è¡¨Açš„ç´¢å¼•</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs mysql">SELECT player_id, a.team_id FROM player as a, team as b WHERE a.team_id = b.team_id<br><br># ç­‰ä»·äº<br><br>SELECT player_id, a.team_id FROM player as a NATURAL JOIN team <br><br># ç­‰ä»·äº<br><br>SELECT player_id,a.team_id FROM player as a JOIN team ON a.team_id = team.team_id<br><br># ç­‰ä»·äº<br><br>SELECT player_id, a.team_id FROM player as a JOIN team USING(team_id)<br></code></pre></div></td></tr></table></figure><ul><li>ç¬›å¡å°”ç§¯ï¼š <code>CROSS JOIN</code></li></ul><h3 id="å­˜å‚¨è¿‡ç¨‹">å­˜å‚¨è¿‡ç¨‹ğŸ‘‹ğŸ»</h3><figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs mysql">DELIMITER //<br>CREATE PROCEDURE `add_num`(IN n INT)<br>BEGIN<br>       DECLARE i INT;<br>       DECLARE sum INT;<br>       <br>       SET i = 1;<br>       SET sum = 0;<br>       WHILE i &lt;= n DO<br>              SET sum = sum + i;<br>              SET i = i +1;<br>       END WHILE;<br>       SELECT sum;<br>END //<br>DELIMITER ;<br></code></pre></div></td></tr></table></figure><p>ä¸Šè¿°æ˜¯ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹ï¼Œæˆ‘æ‰§è¡Œ <code>CALL add_num(100)</code>ï¼Œä¾¿å¯ä»¥å¾—åˆ°5050çš„ç­”æ¡ˆ</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20220525091804568.png" style="zoom:67%;" /></p><p>æµæ§åˆ¶è¯­å¥ï¼š</p><ul><li><p>BEGINâ€¦ENDï¼šBEGINâ€¦ENDä¸­é—´åŒ…å«äº†å¤šä¸ªè¯­å¥ï¼Œæ¯ä¸ªè¯­å¥éƒ½ä»¥ï¼ˆ;ï¼‰å·ä¸ºç»“æŸç¬¦ã€‚</p></li><li><p>DECLAREï¼šDECLARE ç”¨æ¥å£°æ˜å˜é‡ï¼Œä½¿ç”¨çš„ä½ç½®åœ¨äº BEGINâ€¦ENDè¯­å¥ä¸­é—´ï¼Œè€Œä¸”éœ€è¦åœ¨å…¶ä»–è¯­å¥ä½¿ç”¨ä¹‹å‰è¿›è¡Œå˜é‡çš„å£°æ˜ã€‚</p></li><li><p>SETï¼šèµ‹å€¼è¯­å¥ï¼Œç”¨äºå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ã€‚</p></li><li><p>SELECTâ€¦INTOï¼šæŠŠä»æ•°æ®è¡¨ä¸­æŸ¥è¯¢çš„ç»“æœå­˜æ”¾åˆ°å˜é‡ä¸­ï¼Œä¹Ÿå°±æ˜¯ä¸ºå˜é‡èµ‹å€¼ã€‚</p></li><li><p>IFâ€¦THENâ€¦ENDIFï¼šæ¡ä»¶åˆ¤æ–­è¯­å¥ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨ IFâ€¦THENâ€¦ENDIF ä¸­ä½¿ç”¨ELSE å’Œ ELSEIF æ¥è¿›è¡Œæ¡ä»¶åˆ¤æ–­ã€‚</p></li><li><p>CASEï¼šCASE è¯­å¥ç”¨äºå¤šæ¡ä»¶çš„åˆ†æ”¯åˆ¤æ–­ï¼Œä½¿ç”¨çš„è¯­æ³•æ˜¯ä¸‹é¢è¿™æ ·çš„ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs mysql">CASE <br>WHEN expression1 THEN ...<br>WHEN expression2 THEN ...<br>...<br>    ELSE <br>    --ELSE è¯­å¥å¯ä»¥åŠ ï¼Œä¹Ÿå¯ä»¥ä¸åŠ ã€‚åŠ çš„è¯ä»£è¡¨çš„æ‰€æœ‰æ¡ä»¶éƒ½ä¸æ»¡è¶³æ—¶é‡‡ç”¨çš„æ–¹å¼ã€‚<br>END<br></code></pre></div></td></tr></table></figure></li><li><p>LOOPã€LEAVE å’Œ ITERATEï¼šLOOP æ˜¯å¾ªç¯è¯­å¥ï¼Œä½¿ç”¨ LEAVEå¯ä»¥è·³å‡ºå¾ªç¯ï¼Œä½¿ç”¨ ITERATEåˆ™å¯ä»¥è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯ã€‚å¦‚æœä½ æœ‰é¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹è¯­è¨€çš„ä½¿ç”¨ç»éªŒï¼Œä½ å¯ä»¥æŠŠLEAVE ç†è§£ä¸º BREAKï¼ŒæŠŠ ITERATE ç†è§£ä¸ºCONTINUEã€‚</p></li><li><p>REPEATâ€¦UNTILâ€¦ENDREPEATï¼šè¿™æ˜¯ä¸€ä¸ªå¾ªç¯è¯­å¥ï¼Œé¦–å…ˆä¼šæ‰§è¡Œä¸€æ¬¡å¾ªç¯ï¼Œç„¶ååœ¨ UNTILä¸­è¿›è¡Œè¡¨è¾¾å¼çš„åˆ¤æ–­ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶å°±é€€å‡ºï¼Œå³ ENDREPEATï¼›å¦‚æœæ¡ä»¶ä¸æ»¡è¶³ï¼Œåˆ™ä¼šå°±ç»§ç»­æ‰§è¡Œå¾ªç¯ï¼Œç›´åˆ°æ»¡è¶³é€€å‡ºæ¡ä»¶ä¸ºæ­¢ã€‚</p></li><li><p>WHILEâ€¦DOâ€¦END WHILEï¼šè¿™ä¹Ÿæ˜¯å¾ªç¯è¯­å¥ï¼Œå’Œ REPEATå¾ªç¯ä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªè¯­å¥éœ€è¦å…ˆè¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶å°±è¿›è¡Œå¾ªç¯ï¼Œå¦‚æœä¸æ»¡è¶³æ¡ä»¶å°±é€€å‡ºå¾ªç¯ã€‚</p></li></ul><h3 id="äº‹åŠ¡">äº‹åŠ¡ğŸ¯</h3><p>åŸå­æ€§æ˜¯åŸºç¡€ï¼Œéš”ç¦»æ€§æ˜¯æ‰‹æ®µï¼Œä¸€è‡´æ€§æ˜¯çº¦æŸæ¡ä»¶ï¼Œè€ŒæŒä¹…æ€§æ˜¯æˆ‘ä»¬çš„ç›®çš„ã€‚</p><p>MySQL ä¸­ completion_type å‚æ•°çš„ä½œç”¨ï¼š</p><ul><li><p>completion=0ï¼Œè¿™æ˜¯é»˜è®¤æƒ…å†µã€‚ä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬æ‰§è¡Œ COMMITçš„æ—¶å€™ä¼šæäº¤äº‹åŠ¡ï¼Œåœ¨æ‰§è¡Œä¸‹ä¸€ä¸ªäº‹åŠ¡æ—¶ï¼Œè¿˜éœ€è¦æˆ‘ä»¬ä½¿ç”¨ START TRANSACTIONæˆ–è€… BEGIN æ¥å¼€å¯ã€‚</p></li><li><p>completion=1ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå½“æˆ‘ä»¬æäº¤äº‹åŠ¡åï¼Œç›¸å½“äºæ‰§è¡Œäº† COMMITANDCHAINï¼Œä¹Ÿå°±æ˜¯å¼€å¯ä¸€ä¸ªé“¾å¼äº‹åŠ¡ï¼Œå³å½“æˆ‘ä»¬æäº¤äº‹åŠ¡ä¹‹åä¼šå¼€å¯ä¸€ä¸ªç›¸åŒéš”ç¦»çº§åˆ«çš„äº‹åŠ¡ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs mysql">CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;<br>BEGIN;<br>INSERT INTO test SELECT &#x27;å…³ç¾½&#x27;;<br>COMMIT;<br>BEGIN;<br>INSERT INTO test SELECT &#x27;å¼ é£&#x27;;<br>INSERT INTO test SELECT &#x27;å¼ é£&#x27;;<br>ROLLBACK;<br>SELECT * FROM test;<br><br># ç»“æœæ˜¯ å…³ç¾½<br># ä¸Šè¿°ç»“æœæ˜¯å› ä¸ºROLLBACKåˆ°ä¸Šä¸€æ¬¡COMMITçš„åœ°æ–¹<br><br>CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;<br>BEGIN;<br>INSERT INTO test SELECT &#x27;å…³ç¾½&#x27;;<br>COMMIT;<br>INSERT INTO test SELECT &#x27;å¼ é£&#x27;;<br>INSERT INTO test SELECT &#x27;å¼ é£&#x27;;<br>ROLLBACK;<br>SELECT * FROM test;<br><br># ç»“æœæ˜¯ å…³ç¾½ã€å¼ é£<br># ä¸Šè¿°ç»“æœæ˜¯å› ä¸ºä¸¤æ¡â€˜å¼ é£â€™çš„æ’å…¥æ“ä½œçš„äº‹åŠ¡éƒ½æ˜¯è‡ªåŠ¨æäº¤ï¼Œç›¸å½“äºä¸¤ä¸ªäº‹åŠ¡ï¼ŒROLLBACKå¹¶æ²¡æœ‰èµ·ä½œç”¨<br><br>CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;<br>SET @@completion_type = 1;<br>BEGIN;<br>INSERT INTO test SELECT &#x27;å…³ç¾½&#x27;;<br>COMMIT;<br>INSERT INTO test SELECT &#x27;å¼ é£&#x27;;<br>INSERT INTO test SELECT &#x27;å¼ é£&#x27;;<br>ROLLBACK;<br>SELECT * FROM test;<br><br># ç»“æœæ˜¯ å…³ç¾½<br># ä¸Šè¿°ç»“æœæ˜¯å› ä¸ºè®¾ç½®completion_typeï¼Œä»¥ä¸‹æ‰€æœ‰æŒ‡ä»¤éƒ½åœ¨ä¸€ä¸ªé“¾å¼äº‹åŠ¡ä¸­ï¼Œä¸¤æ¡â€˜å¼ é£â€™çš„æ’å…¥æ“ä½œæ˜¯åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­<br></code></pre></div></td></tr></table></figure></li><li><p>completion=2ï¼Œè¿™ç§æƒ…å†µä¸‹ COMMIT=COMMIT ANDRELEASEï¼Œä¹Ÿå°±æ˜¯å½“æˆ‘ä»¬æäº¤åï¼Œä¼šè‡ªåŠ¨ä¸æœåŠ¡å™¨æ–­å¼€è¿æ¥ã€‚</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs mysql">CREATE TABLE test(name varchar(255), PRIMARY KEY (name)) ENGINE=InnoDB;<br>BEGIN;<br>INSERT INTO test SELECT &#x27;å…³ç¾½&#x27;;<br>BEGIN;<br>INSERT INTO test SELECT &#x27;å¼ é£&#x27;;<br>INSERT INTO test SELECT &#x27;å¼ é£&#x27;;<br>INSERT INTO test SELECT &#x27;åˆ˜å¤‡&#x27;;<br>COMMIT;<br>SELECT * FROM test;<br><br># ç»“æœæ˜¯ å…³ç¾½ã€å¼ é£ã€åˆ˜å¤‡<br># ä¸Šè¿°ç»“æœè¯´æ˜äº‹åŠ¡ä¸­å¦‚æœæœ‰é”™è¯¯ï¼Œå¦‚æœæ‰§è¡ŒCOMMITï¼Œä¼šå°†äº‹åŠ¡ä¸­æ­£ç¡®çš„éƒ¨åˆ†è¿›è¡Œæ‰§è¡Œ<br></code></pre></div></td></tr></table></figure><p>äº‹åŠ¡å¹¶å‘å­˜åœ¨å¼‚å¸¸</p><ul><li>è„è¯»ï¼šè¯»åˆ°äº†å…¶ä»–äº‹åŠ¡è¿˜æ²¡æœ‰æäº¤çš„æ•°æ®ã€‚</li><li>ä¸å¯é‡å¤è¯»ï¼šå¯¹æŸæ•°æ®è¿›è¡Œè¯»å–ï¼Œå‘ç°ä¸¤æ¬¡è¯»å–çš„ç»“æœä¸åŒï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰è¯»åˆ°ç›¸åŒçš„å†…å®¹ã€‚è¿™æ˜¯å› ä¸ºæœ‰å…¶ä»–äº‹åŠ¡å¯¹è¿™ä¸ªæ•°æ®åŒæ—¶è¿›è¡Œäº†ä¿®æ”¹æˆ–åˆ é™¤ã€‚</li><li>å¹»è¯»ï¼šäº‹åŠ¡ A æ ¹æ®æ¡ä»¶æŸ¥è¯¢å¾—åˆ°äº† N æ¡æ•°æ®ï¼Œä½†æ­¤æ—¶äº‹åŠ¡ Bæ›´æ”¹æˆ–è€…å¢åŠ äº† M æ¡ç¬¦åˆäº‹åŠ¡ A æŸ¥è¯¢æ¡ä»¶çš„æ•°æ®ï¼Œè¿™æ ·å½“äº‹åŠ¡ Aå†æ¬¡è¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™å‘ç°ä¼šæœ‰ N+M æ¡æ•°æ®ï¼Œäº§ç”Ÿäº†å¹»è¯»ã€‚</li></ul><p>æ³¨ï¼š</p><ul><li>ä¸å¯é‡å¤è¯»æ˜¯åŒä¸€æ¡è®°å½•çš„å†…å®¹è¢«ä¿®æ”¹äº†ï¼Œé‡ç‚¹åœ¨äºUPDATEæˆ–DELETE</li><li>å¹»è¯»æ˜¯æŸ¥è¯¢æŸä¸€ä¸ªèŒƒå›´çš„æ•°æ®è¡Œå˜å¤šäº†æˆ–è€…å°‘äº†ï¼Œé‡ç‚¹åœ¨äºINSERT</li></ul><h3 id="æ¸¸æ ‡">æ¸¸æ ‡â˜ƒï¸</h3><figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs mysql">CREATE PROCEDURE `calc_hp_max`()<br>BEGIN<br>       -- åˆ›å»ºæ¥æ”¶æ¸¸æ ‡çš„å˜é‡<br>       DECLARE hp INT;  <br> <br>       -- åˆ›å»ºæ€»æ•°å˜é‡ <br>       DECLARE hp_sum INT DEFAULT 0;<br>       -- åˆ›å»ºç»“æŸæ ‡å¿—å˜é‡  <br>       DECLARE done INT DEFAULT false;<br>       -- 1. å®šä¹‰æ¸¸æ ‡     <br>       DECLARE cur_hero CURSOR FOR SELECT hp_max FROM heros;<br>       -- æŒ‡å®šæ¸¸æ ‡å¾ªç¯ç»“æŸæ—¶çš„è¿”å›å€¼  <br>       DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = true;  <br>       <br>       -- 2. å¼€å¯æ¸¸æ ‡<br>       OPEN cur_hero;<br>       read_loop:LOOP<br>       -- 3. ä»æ¸¸æ ‡ä¸­å–å¾—æ•°æ®<br>       FETCH cur_hero INTO hp;<br>       -- åˆ¤æ–­æ¸¸æ ‡çš„å¾ªç¯æ˜¯å¦ç»“æŸ  <br>       IF done THEN  <br>           LEAVE read_loop;<br>       END IF; <br>       <br>       SET hp_sum = hp_sum + hp;<br>       END LOOP;<br>       -- 4. å…³é—­æ¸¸æ ‡<br>       CLOSE cur_hero;<br>       SELECT hp_sum;<br>       -- 5. é‡Šæ”¾æ¸¸æ ‡<br>       DEALLOCATE PREPARE cur_hero;<br>END<br></code></pre></div></td></tr></table></figure><p>æ¸¸æ ‡å®é™…ä¸Šæ˜¯é¢å‘è¿‡ç¨‹çš„æ€ç»´æ–¹å¼ï¼Œä¸é¢å‘é›†åˆçš„æ€ç»´æ–¹å¼ä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œæ¸¸æ ‡æ›´åŠ å…³æ³¨â€œå¦‚ä½•æ‰§è¡Œâ€ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ¸¸æ ‡æ›´åŠ ç²¾ç»†ã€çµæ´»åœ°æŸ¥è¯¢å’Œç®¡ç†æƒ³è¦çš„æ•°æ®è¡Œã€‚</p><h3 id="æ•°æ®åº“è°ƒä¼˜">æ•°æ®åº“è°ƒä¼˜ğŸ¥‚</h3><p>ä»ä»¥ä¸‹ç»´åº¦è¿›è¡Œåˆ†æï¼š</p><ul><li><p>é€‰æ‹©é€‚åˆçš„ DBMS</p></li><li><p>ä¼˜åŒ–è¡¨è®¾è®¡</p><ol type="1"><li>è¡¨ç»“æ„è¦å°½é‡éµå¾ªç¬¬ä¸‰èŒƒå¼çš„åŸåˆ™ã€‚è¿™æ ·å¯ä»¥è®©æ•°æ®ç»“æ„æ›´åŠ æ¸…æ™°è§„èŒƒï¼Œå‡å°‘å†—ä½™å­—æ®µï¼ŒåŒæ—¶ä¹Ÿå‡å°‘äº†åœ¨æ›´æ–°ï¼Œæ’å…¥å’Œåˆ é™¤æ•°æ®æ—¶ç­‰å¼‚å¸¸æƒ…å†µçš„å‘ç”Ÿã€‚</li><li>å¦‚æœåˆ†ææŸ¥è¯¢åº”ç”¨æ¯”è¾ƒå¤šï¼Œå°¤å…¶æ˜¯éœ€è¦è¿›è¡Œå¤šè¡¨è”æŸ¥çš„æ—¶å€™ï¼Œå¯ä»¥é‡‡ç”¨åèŒƒå¼è¿›è¡Œä¼˜åŒ–ã€‚åèŒƒå¼é‡‡ç”¨ç©ºé—´æ¢æ—¶é—´çš„æ–¹å¼ï¼Œé€šè¿‡å¢åŠ å†—ä½™å­—æ®µæé«˜æŸ¥è¯¢çš„æ•ˆç‡ã€‚</li><li>è¡¨å­—æ®µçš„æ•°æ®ç±»å‹é€‰æ‹©ï¼Œå…³ç³»åˆ°äº†æŸ¥è¯¢æ•ˆç‡çš„é«˜ä½ä»¥åŠå­˜å‚¨ç©ºé—´çš„å¤§å°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœå­—æ®µå¯ä»¥é‡‡ç”¨æ•°å€¼ç±»å‹å°±ä¸è¦é‡‡ç”¨å­—ç¬¦ç±»å‹ï¼›å­—ç¬¦é•¿åº¦è¦å°½å¯èƒ½è®¾è®¡å¾—çŸ­ä¸€äº›ã€‚é’ˆå¯¹å­—ç¬¦ç±»å‹æ¥è¯´ï¼Œå½“ç¡®å®šå­—ç¬¦é•¿åº¦å›ºå®šæ—¶ï¼Œå°±å¯ä»¥é‡‡ç”¨CHAR ç±»å‹ï¼›å½“é•¿åº¦ä¸å›ºå®šæ—¶ï¼Œé€šå¸¸é‡‡ç”¨ VARCHAR ç±»å‹ã€‚</li></ol></li><li><p>ä¼˜åŒ–é€»è¾‘æŸ¥è¯¢</p><ol type="1"><li>EXISTS å­æŸ¥è¯¢å’Œ INå­æŸ¥è¯¢çš„æ—¶å€™ï¼Œä¼šæ ¹æ®å°è¡¨é©±åŠ¨å¤§è¡¨çš„åŸåˆ™é€‰æ‹©é€‚åˆçš„å­æŸ¥è¯¢</li><li>åœ¨ WHEREå­å¥ä¸­ä¼šå°½é‡é¿å…å¯¹å­—æ®µè¿›è¡Œå‡½æ•°è¿ç®—ï¼Œå®ƒä»¬ä¼šè®©å­—æ®µçš„ç´¢å¼•å¤±æ•ˆ</li></ol></li><li><p>ä¼˜åŒ–ç‰©ç†æŸ¥è¯¢ï¼ˆç´¢å¼•ï¼‰</p><ol type="1"><li>å¦‚æœæ•°æ®é‡å¤åº¦é«˜ï¼Œå°±ä¸éœ€è¦åˆ›å»ºç´¢å¼•ã€‚é€šå¸¸åœ¨é‡å¤åº¦è¶…è¿‡ 10%çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä¸åˆ›å»ºè¿™ä¸ªå­—æ®µçš„ç´¢å¼•ã€‚æ¯”å¦‚æ€§åˆ«è¿™ä¸ªå­—æ®µï¼ˆå–å€¼ä¸ºç”·å’Œå¥³ï¼‰ã€‚</li><li>è¦æ³¨æ„ç´¢å¼•åˆ—çš„ä½ç½®å¯¹ç´¢å¼•ä½¿ç”¨çš„å½±å“ã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨ WHEREå­å¥ä¸­å¯¹ç´¢å¼•å­—æ®µè¿›è¡Œäº†è¡¨è¾¾å¼çš„è®¡ç®—ï¼Œä¼šé€ æˆè¿™ä¸ªå­—æ®µçš„ç´¢å¼•å¤±æ•ˆã€‚</li><li>è¦æ³¨æ„è”åˆç´¢å¼•å¯¹ç´¢å¼•ä½¿ç”¨çš„å½±å“ã€‚æˆ‘ä»¬åœ¨åˆ›å»ºè”åˆç´¢å¼•çš„æ—¶å€™ä¼šå¯¹å¤šä¸ªå­—æ®µåˆ›å»ºç´¢å¼•ï¼Œè¿™æ—¶ç´¢å¼•çš„é¡ºåºå°±å¾ˆé‡è¦äº†ã€‚æ¯”å¦‚æˆ‘ä»¬å¯¹å­—æ®µx, y, z åˆ›å»ºäº†ç´¢å¼•ï¼Œé‚£ä¹ˆé¡ºåºæ˜¯ (x,y,z) è¿˜æ˜¯(z,y,x)ï¼Œåœ¨æ‰§è¡Œçš„æ—¶å€™å°±ä¼šå­˜åœ¨å·®åˆ«ã€‚</li><li>è¦æ³¨æ„å¤šä¸ªç´¢å¼•å¯¹ç´¢å¼•ä½¿ç”¨çš„å½±å“ã€‚ç´¢å¼•ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œå› ä¸ºæ¯ä¸ªç´¢å¼•éƒ½éœ€è¦å­˜å‚¨ç©ºé—´ï¼Œç´¢å¼•å¤šä¹Ÿå°±æ„å‘³ç€éœ€è¦æ›´å¤šçš„å­˜å‚¨ç©ºé—´ã€‚æ­¤å¤–ï¼Œè¿‡å¤šçš„ç´¢å¼•ä¹Ÿä¼šå¯¼è‡´ä¼˜åŒ–å™¨åœ¨è¿›è¡Œè¯„ä¼°çš„æ—¶å€™å¢åŠ äº†ç­›é€‰å‡ºç´¢å¼•çš„è®¡ç®—æ—¶é—´ï¼Œå½±å“è¯„ä¼°çš„æ•ˆç‡ã€‚</li></ol></li><li><p>ä½¿ç”¨ Redis æˆ– Memcached ä½œä¸ºç¼“å­˜</p><p>å°†å¸¸ç”¨çš„æ•°æ®ç›´æ¥æ”¾åˆ°å†…å­˜ä¸­ï¼Œå°±ä¼šå¤§å¹…æå‡æŸ¥è¯¢çš„æ•ˆç‡</p><p>é€šå¸¸æˆ‘ä»¬å¯¹äºæŸ¥è¯¢å“åº”è¦æ±‚é«˜çš„åœºæ™¯ï¼ˆå“åº”æ—¶é—´çŸ­ï¼Œååé‡å¤§ï¼‰ï¼Œå¯ä»¥è€ƒè™‘å†…å­˜æ•°æ®åº“ï¼Œæ¯•ç«Ÿæœ¯ä¸šæœ‰ä¸“æ”»ã€‚ä¼ ç»Ÿçš„RDBMSéƒ½æ˜¯å°†æ•°æ®å­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šï¼Œè€Œå†…å­˜æ•°æ®åº“åˆ™å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼ŒæŸ¥è¯¢èµ·æ¥è¦å¿«å¾—å¤šã€‚ä¸è¿‡ä½¿ç”¨ä¸åŒçš„å·¥å…·ï¼Œä¹Ÿå¢åŠ äº†å¼€å‘äººå‘˜çš„ä½¿ç”¨æˆæœ¬ã€‚</p></li><li><p>åº“çº§ä¼˜åŒ–</p><p>å¦‚æœè¯»å’Œå†™çš„ä¸šåŠ¡é‡éƒ½å¾ˆå¤§ï¼Œå¹¶ä¸”å®ƒä»¬éƒ½åœ¨åŒä¸€ä¸ªæ•°æ®åº“æœåŠ¡å™¨ä¸­è¿›è¡Œæ“ä½œï¼Œé‚£ä¹ˆæ•°æ®åº“çš„æ€§èƒ½å°±ä¼šå‡ºç°ç“¶é¢ˆï¼Œè¿™æ—¶ä¸ºäº†æå‡ç³»ç»Ÿçš„æ€§èƒ½ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨è¯»å†™åˆ†ç¦»çš„æ–¹å¼é™ä½ä¸»æ•°æ®åº“çš„è´Ÿè½½ï¼Œæ¯”å¦‚ç”¨ä¸»æ•°æ®åº“ï¼ˆmasterï¼‰å®Œæˆå†™æ“ä½œï¼Œç”¨ä»æ•°æ®åº“ï¼ˆslaveï¼‰å®Œæˆè¯»æ“ä½œã€‚</p><p>å½“æ•°æ®é‡çº§è¾¾åˆ°äº¿çº§ä»¥ä¸Šæ—¶ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦æŠŠä¸€ä¸ªæ•°æ®åº“åˆ‡æˆå¤šä»½ï¼Œæ”¾åˆ°ä¸åŒçš„æ•°æ®åº“æœåŠ¡å™¨ä¸Šï¼Œå‡å°‘å¯¹å•ä¸€æ•°æ®åº“æœåŠ¡å™¨çš„è®¿é—®å‹åŠ›ã€‚</p><p><strong>é‡‡ç”¨å‚ç›´åˆ†è¡¨çš„å½¢å¼ï¼Œå°±æ˜¯å°†ä¸€å¼ æ•°æ®è¡¨åˆ†æ‹†æˆå¤šå¼ è¡¨ï¼Œé‡‡ç”¨æ°´å¹³åˆ†è¡¨çš„æ–¹å¼ï¼Œå°±æ˜¯å°†å•å¼ æ•°æ®é‡å¤§çš„è¡¨æŒ‰ç…§æŸä¸ªå±æ€§ç»´åº¦åˆ†æˆä¸åŒçš„å°è¡¨ã€‚</strong></p><p>å¦‚æœæ•°æ®åº“ä¸­çš„æ•°æ®è¡¨è¿‡å¤šï¼Œå¯ä»¥é‡‡ç”¨å‚ç›´åˆ†åº“çš„æ–¹å¼ï¼Œå°†å…³è”çš„æ•°æ®è¡¨éƒ¨ç½²åœ¨ä¸€ä¸ªæ•°æ®åº“ä¸Šã€‚å¦‚æœæ•°æ®è¡¨ä¸­çš„åˆ—è¿‡å¤šï¼Œå¯ä»¥é‡‡ç”¨å‚ç›´åˆ†è¡¨çš„æ–¹å¼ï¼Œå°†æ•°æ®è¡¨åˆ†æ‹†æˆå¤šå¼ ï¼ŒæŠŠç»å¸¸ä¸€èµ·ä½¿ç”¨çš„åˆ—æ”¾åˆ°åŒä¸€å¼ è¡¨é‡Œã€‚</p><p>å¦‚æœæ•°æ®è¡¨ä¸­çš„æ•°æ®è¾¾åˆ°äº†äº¿çº§ä»¥ä¸Šï¼Œå¯ä»¥è€ƒè™‘æ°´å¹³åˆ‡åˆ†ï¼Œå°†å¤§çš„æ•°æ®è¡¨åˆ†æ‹†æˆä¸åŒçš„å­è¡¨ï¼Œæ¯å¼ è¡¨ä¿æŒç›¸åŒçš„è¡¨ç»“æ„ã€‚</p></li></ul><p>æ€»ç»“ï¼š</p><ul><li>é€‰æ‹©æ¯”åŠªåŠ›æ›´é‡è¦</li><li>æŠŠ SQL æŸ¥è¯¢ä¼˜åŒ–åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œé€»è¾‘æŸ¥è¯¢ä¼˜åŒ–å’Œç‰©ç†æŸ¥è¯¢ä¼˜åŒ–</li><li>é€šè¿‡å¤–æ´æ¥å¢å¼ºæ•°æ®åº“çš„æ€§èƒ½</li></ul><h3 id="åèŒƒå¼è®¾è®¡">åèŒƒå¼è®¾è®¡ğŸŒš</h3><p>è¶Šé«˜é˜¶çš„èŒƒå¼å¾—åˆ°çš„æ•°æ®è¡¨è¶Šå¤šï¼Œæ•°æ®å†—ä½™åº¦è¶Šä½ã€‚ä½†æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨è®¾è®¡æ•°æ®è¡¨çš„æ—¶å€™ï¼Œè¿˜éœ€è¦ä¸ºäº†æ€§èƒ½å’Œè¯»å–æ•ˆç‡è¿åèŒƒå¼åŒ–çš„åŸåˆ™ã€‚åèŒƒå¼å°±æ˜¯ç›¸å¯¹èŒƒå¼åŒ–è€Œè¨€çš„ï¼Œæ¢å¥è¯è¯´ï¼Œå°±æ˜¯å…è®¸å°‘é‡çš„å†—ä½™ï¼Œé€šè¿‡ç©ºé—´æ¥æ¢æ—¶é—´ã€‚</p><p>åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä¸€äº›å†—ä½™ä¿¡æ¯ï¼Œæ¯”å¦‚è®¢å•ä¸­çš„æ”¶è´§äººä¿¡æ¯ï¼ŒåŒ…æ‹¬å§“åã€ç”µè¯å’Œåœ°å€ç­‰ã€‚æ¯æ¬¡å‘ç”Ÿçš„è®¢å•æ”¶è´§ä¿¡æ¯éƒ½å±äºå†å²å¿«ç…§ï¼Œéœ€è¦è¿›è¡Œä¿å­˜ï¼Œä½†ç”¨æˆ·å¯ä»¥éšæ—¶ä¿®æ”¹è‡ªå·±çš„ä¿¡æ¯ï¼Œè¿™æ—¶ä¿å­˜è¿™äº›å†—ä½™ä¿¡æ¯æ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚<strong>å½“å†—ä½™ä¿¡æ¯æœ‰ä»·å€¼æˆ–è€…èƒ½å¤§å¹…åº¦æé«˜æŸ¥è¯¢æ•ˆç‡çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥é‡‡å–åèŒƒå¼çš„ä¼˜åŒ–ã€‚æ­¤å¤–åèŒƒå¼ä¼˜åŒ–ä¹Ÿå¸¸ç”¨åœ¨æ•°æ®ä»“åº“çš„è®¾è®¡ä¸­</strong>ï¼Œå› ä¸ºæ•°æ®ä»“åº“é€šå¸¸å­˜å‚¨å†å²æ•°æ®ï¼Œå¯¹å¢åˆ æ”¹çš„å®æ—¶æ€§è¦æ±‚ä¸å¼ºï¼Œå¯¹å†å²æ•°æ®çš„åˆ†æéœ€æ±‚å¼ºã€‚è¿™æ—¶é€‚å½“å…è®¸æ•°æ®çš„å†—ä½™åº¦ï¼Œæ›´æ–¹ä¾¿è¿›è¡Œæ•°æ®åˆ†æã€‚</p><p>æ•°æ®ä»“åº“ VS æ•°æ®åº“ï¼š</p><ol type="1"><li>æ•°æ®åº“è®¾è®¡çš„ç›®çš„åœ¨äºæ•è·æ•°æ®ï¼Œè€Œæ•°æ®ä»“åº“è®¾è®¡çš„ç›®çš„åœ¨äºåˆ†ææ•°æ®ï¼›</li><li>æ•°æ®åº“å¯¹æ•°æ®çš„å¢åˆ æ”¹å®æ—¶æ€§è¦æ±‚å¼ºï¼Œéœ€è¦å­˜å‚¨åœ¨çº¿çš„ç”¨æˆ·æ•°æ®ï¼Œè€Œæ•°æ®ä»“åº“å­˜å‚¨çš„ä¸€èˆ¬æ˜¯å†å²æ•°æ®ï¼›</li><li>æ•°æ®åº“è®¾è®¡éœ€è¦å°½é‡é¿å…å†—ä½™ï¼Œä½†ä¸ºäº†æé«˜æŸ¥è¯¢æ•ˆç‡ä¹Ÿå…è®¸ä¸€å®šçš„å†—ä½™åº¦ï¼Œè€Œæ•°æ®ä»“åº“åœ¨è®¾è®¡ä¸Šæ›´åå‘é‡‡ç”¨åèŒƒå¼è®¾è®¡ã€‚</li></ol>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®åº“</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®åº“æœŸæœ«æ€»ç»“</title>
    <link href="/post/48d4ae84.html"/>
    <url>/post/48d4ae84.html</url>
    
    <content type="html"><![CDATA[<h1 id="æ•°æ®åº“ç³»ç»ŸæœŸæœ«æ€»ç»“">æ•°æ®åº“ç³»ç»ŸæœŸæœ«æ€»ç»“</h1><p>ä¸»è¦é’ˆå¯¹æ•°æ®åº“ç³»ç»ŸæœŸæœ«å¤ä¹ ä¸­çš„ä¸€äº›é‡ç‚¹è¿›è¡Œå½’çº³æ€»ç»“</p><span id="more"></span><h3 id="æ•°æ®åº“ç³»ç»Ÿæ¦‚è¿°">æ•°æ®åº“ç³»ç»Ÿæ¦‚è¿°ğŸ²</h3><ul><li><p>ä¸‰çº§æ¨¡å¼ï¼š</p><ul><li>å¤–æ¨¡å¼ã€ç”¨æˆ·æ¨¡å¼ã€å­æ¨¡å¼ã€å±€éƒ¨æ¨¡å¼ã€ï¼ˆè§†å›¾ï¼‰</li><li>é€»è¾‘æ¨¡å¼ã€æ¦‚å¿µæ¨¡å¼ã€å…¨å±€æ¨¡å¼ã€ï¼ˆæ¨¡å¼ï¼‰</li><li>å†…æ¨¡å¼ã€ç‰©ç†æ¨¡å¼ã€å­˜å‚¨æ¨¡å¼</li></ul></li><li><p>ä¸¤å±‚æ˜ åƒï¼š</p><ul><li>E-C ï¼š å¤– â†’ é€»è¾‘</li><li>C-I ï¼š é€»è¾‘ â†’ å†…</li></ul></li><li><p>ä¸¤ä¸ªç‹¬ç«‹æ€§ï¼š</p><ul><li>é€»è¾‘æ•°æ®ç‹¬ç«‹æ€§ï¼šå½“é€»è¾‘æ¨¡å¼æ”¹å˜ï¼Œä¸ç”¨æ”¹å¤–æ¨¡å¼ï¼Œæ”¹ E-I å³å¯</li><li>ç‰©ç†æ•°æ®ç‹¬ç«‹æ€§ï¼šå½“å†…æ¨¡å¼æ”¹å˜ï¼Œä¸ç”¨æ”¹é€»è¾‘æ¨¡å¼ï¼Œæ”¹ C-I å³å¯</li></ul></li><li><p>æ¨¡å¼ï¼šå¯¹æ•°æ®çš„æŠ½è±¡</p></li><li><p>æ¨¡å‹ï¼šå¯¹æ¨¡å¼çš„æŠ½è±¡</p></li></ul><h3 id="å…³ç³»æ•°æ®æ¨¡å‹">å…³ç³»æ•°æ®æ¨¡å‹ğŸ¦´</h3><ul><li>ä¸»å±æ€§ï¼šåŒ…å«åœ¨ä»»æ„ä¸€ä¸ª<strong>å€™é€‰ç </strong>ä¸­çš„å±æ€§</li><li>ä¸»ç ï¼šå€™é€‰ç ä¸­çš„ä¸€ä¸ª</li><li>ä¸¤ä¸ªå…³ç³»é€šå¸¸æ˜¯é€šè¿‡<strong>å¤–ç </strong>è”ç³»èµ·æ¥çš„</li><li><span class="math inline">\(\sigma\)</span> æ“ä½œçš„ä¼˜å…ˆçº§ï¼š é &gt;<span class="math inline">\(\wedge\)</span> &gt; <spanclass="math inline">\(\vee\)</span></li><li><span class="math inline">\(\pi\)</span> æ“ä½œè‡ªå¸¦å»é‡</li><li>å®Œæ•´æ€§ï¼š<ul><li>å®ä½“å®Œæ•´æ€§ï¼šä¸»ç ä¸èƒ½ä¸ºç©º</li><li>å‚æ•°å®Œæ•´æ€§ï¼šå¤–ç å¿…é¡»æœ‰å¯¹åº”å€¼æˆ–ç©ºå€¼</li><li>ç”¨æˆ·è‡ªå®šä¹‰å®Œæ•´æ€§</li></ul></li><li><spanclass="math inline">\(\theta\)</span>è¿æ¥<strong>ä¸ä¼šå»é‡</strong>ã€ç­‰å€¼è¿æ¥<strong>ä¸ä¼šå»é‡</strong>ã€è‡ªç„¶è¿æ¥<strong>ä¼šå»é‡</strong></li><li>é‡å‘½åï¼š<span class="math inline">\(\rho\)</span></li><li><span class="math inline">\(R Ã· S=\pi_{R-S}(R)-\pi_{R-S}((\pi_{R-S}(R)Ã—S)-R)\)</span></li><li>å¤–è¿æ¥æ˜¯ä¸ºäº†é˜²æ­¢åœ¨è¿æ¥ï¼ˆ<spanclass="math inline">\(\theta\)</span>è¿æ¥ï¼‰æ“ä½œåä¼šå‡ºç°å…ƒç»„æ•°æ®çš„ä¸¢å¤±çš„æƒ…å†µï¼ˆç©ºå€¼ï¼‰</li><li>å…³ç³»æ¼”ç®—ï¼š<span class="math inline">\(\{ t|P(t)\}\)</span>ï¼ŒPæ˜¯ä¸€ä¸ªè°“è¯­</li><li>ä¼˜å…ˆçº§ï¼š ( ) &gt; <span class="math inline">\(\theta\)</span> &gt;<span class="math inline">\(\exists\)</span> &gt; <spanclass="math inline">\(\forall\)</span> &gt; é &gt; <spanclass="math inline">\(\wedge\)</span> &gt; <spanclass="math inline">\(\vee\)</span> ï¼ˆè¿™é‡Œçš„ <spanclass="math inline">\(\theta\)</span> æ˜¯æŒ‡æ¯”è¾ƒè¿ç®—ç¬¦ï¼‰</li><li>å…³ç³»åŸŸæ¼”ç®—ï¼š<span class="math inline">\(\{ &lt;x_1,x_2...x_n&gt; |P(x_1,x_2...x_n) \}\)</span></li></ul><h3 id="sql">SQLğŸ¦</h3><ul><li><p><code>insert into table_name values (a,b,c)</code></p></li><li><p><code>insert into table_name å­æŸ¥è¯¢</code></p></li><li><p><code>asc</code>ä¸ºå‡åºï¼ˆé»˜è®¤ï¼‰ï¼Œ<code>desc</code>ä¸ºé™åº</p></li><li><p><code>update table_name set a=b where c=d</code></p></li><li><div class="hljs code-wrapper"><pre class="mysql"><code>  select å­—æ®µåˆ—è¡¨[å­—æ®µåˆ«å]   from æ•°æ®æº  [whereæ¡ä»¶å­—å¥]  [group by å­—å¥]  [having å­—å¥]  [order by å­—å¥]  [limit å­—å¥]</code></pre></div></li><li><p>è¡¨è¾¾å¼ (not) in å­æŸ¥è¯¢</p></li><li><p>å­æŸ¥è¯¢åªèƒ½å¤–å±‚å‘å†…å±‚ä¼ å‚æ•°</p></li><li><p>è¡¨è¾¾å¼ <span class="math inline">\(\theta\ some/all\)</span>å­æŸ¥è¯¢</p></li><li><p>in <span class="math inline">\(\leftrightarrow\)</span>=someã€not in <span class="math inline">\(\leftrightarrow\)</span>&lt;&gt;all</p></li><li><p>å­æŸ¥è¯¢ union (all) / intersect (all) / except (all) ï¼Œå…¶ä¸­å¸¦æœ‰<strong>all ä¸åˆ é™¤é‡å¤å…ƒç»„</strong></p></li><li><p>ä»»ä½•<strong>æ²¡æœ‰å‡ºç°</strong>åœ¨groupbyå­å¥ä¸­çš„å±æ€§å¦‚æœå‡ºç°åœ¨selectå­å¥ä¸­çš„è¯ï¼Œå®ƒ<strong>åªèƒ½å‡ºç°åœ¨èšé›†å‡½æ•°çš„å†…éƒ¨</strong>ï¼Œå¦åˆ™è¿™æ ·çš„æŸ¥è¯¢å°±æ˜¯é”™è¯¯çš„</p></li><li><p>åªæœ‰ COUNT ä¸å¿½ç•¥ null</p></li><li><p><span class="math inline">\(from\ table_{name1}\ (natural)\inner\ join / left\ outer\ join / right\ outer\ join / full\ outer\join\ table_{name2}\ (on ...)\)</span></p></li><li><p><span class="math inline">\(create\ view\ view_{name}\as\)</span> å­æŸ¥è¯¢</p></li><li><p>ä¸èƒ½æ›´æ–°çš„viewï¼š</p><ul><li>select ç›®æ ‡åˆ—åŒ…å«èšé›†å‡½æ•°</li><li>select å­å¥ä½¿ç”¨distinct</li><li>åŒ…å«group by</li><li>åŒ…å«ç»ç®—æœ¯è¡¨è¾¾å¼è®¡ç®—å‡ºçš„åˆ—</li><li>ç”±å•ä¸ªè¡¨çš„åˆ—ç»„æˆä½†æœªåŒ…å«ä¸»é”®</li></ul></li></ul><h3 id="æ¦‚å¿µæ•°æ®åº“è®¾è®¡">æ¦‚å¿µæ•°æ®åº“è®¾è®¡ğŸª‚</h3><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202205201502437.png" /></p><h3 id="é€»è¾‘æ•°æ®åº“è®¾è®¡">é€»è¾‘æ•°æ®åº“è®¾è®¡ğŸš</h3><ul><li><span class="math inline">\(armstrongå…¬ç†\)</span>ï¼š<ul><li><span class="math inline">\(Y\subseteq X \subseteq U,åˆ™X â†’Y\)</span></li><li><span class="math inline">\(X \rightarrow Y \in F.Z \subseteq U,åˆ™XZ\rightarrow YZ\)</span></li><li><span class="math inline">\(X \rightarrow Y,Y \rightarrow Z,åˆ™X\rightarrow Z\)</span></li><li><span class="math inline">\(X \rightarrow Y,X\rightarrowZ,åˆ™X\rightarrow YZ\)</span></li><li><span class="math inline">\(X\rightarrow Y,WY\rightarrowZ,åˆ™XW\rightarrow Z\)</span></li><li>$XY,Z Y,åˆ™XZ $</li></ul></li><li>æœ€å°è¦†ç›–ï¼ˆæœ€å°ä¾èµ–é›†ï¼‰è®¡ç®—ï¼š<ul><li>å°†Fä¸­çš„ä»»æ„å‡½æ•°ä¾èµ– <span class="math inline">\(X â†’Y\)</span>æ›¿æ¢ä¸ºå³éƒ¨ä»…åŒ…å«ä¸€ä¸ªå±æ€§çš„å‡½æ•°ä¾èµ–</li><li>åˆ é™¤å·¦éƒ¨çš„å†—ä½™å±æ€§</li><li>åˆ é™¤å†—ä½™å‡½æ•°ä¾èµ–</li></ul></li><li>NFæ€»ç»“<ul><li>1NF ä¿è¯åˆ†é‡ä¸å¯åˆ†</li><li>2NFä¿è¯åªæœ‰ä¸»é”®æ‰èƒ½æ¨å‡ºå…¶ä»–ï¼Œæ¶ˆé™¤éä¸»å±æ€§å¯¹<strong>å€™é€‰é”®</strong>çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–</li><li>3NF æ¶ˆé™¤éä¸»å±æ€§å¯¹<strong>å€™é€‰é”®</strong>çš„ä¼ é€’å‡½æ•°ä¾èµ–</li><li>BCNFä¿è¯ä¸»å±æ€§å®Œå…¨å‡½æ•°ä¾èµ–äº<strong>å€™é€‰é”®</strong>ã€æˆ–è€…æ»¡è¶³1NFå¹¶ä¸”æœ€å°è¦†ç›–çš„å·¦éƒ¨éƒ½æ˜¯<strong>å€™é€‰é”®</strong></li></ul></li><li>è¯†åˆ«æ— æŸè¿æ¥åˆ†è§£ï¼šç”»è¡¨æ ¼</li><li>è¯†åˆ«å‡½æ•°ä¾èµ–ä¿æŒï¼šå‡½æ•°ä¾èµ–çš„å¹¶é›†æ˜¯å¦å¯ä»¥è¦†ç›–F</li><li>å…³ç³»æ¨¡å¼åˆ†è§£ä¸º3NFï¼šå°†æ¯ä¸€ä¸ªå‡½æ•°ä¾èµ–å•ç‹¬ç»„æˆä¸€ä¸ªå…³ç³»ï¼Œç„¶åæŠŠå·¦éƒ¨ç›¸åŒçš„è¿›è¡Œåˆå¹¶ã€ä¿æŒä¾èµ–ã€‘</li><li>å…³ç³»æ¨¡å¼åˆ†è§£ä¸ºBCNFï¼šå°†å·¦ä¾§ä¸å«å€™é€‰é”®çš„å‡½æ•°ä¾èµ–å•ç‹¬ç»„æˆä¸€ä¸ªå…³ç³»ï¼Œå°†åŒ…å«å€™é€‰é”®çš„ç»„æˆä¸€å…³ç³»ã€æ— æŸè¿æ¥ã€‘</li></ul><h3 id="ç‰©ç†æ•°æ®åº“è®¾è®¡">ç‰©ç†æ•°æ®åº“è®¾è®¡ğŸ¥¡</h3><ul><li>ç´¢å¼•æ–‡ä»¶ç»„ç»‡æ–¹å¼ï¼š<ul><li>æ’åºç´¢å¼•æ–‡ä»¶</li><li>æ•£åˆ—ç´¢å¼•æ–‡ä»¶</li></ul></li><li><span class="math inline">\(create\ index\ index_{name}\ on\table_{name}(a,b,c)\)</span></li><li>ç¨ å¯†ç´¢å¼• VS ç¨€ç–ç´¢å¼•<ul><li>ç¨ å¯†ç´¢å¼•ï¼šç´¢å¼•æ–‡ä»¶ä¸­åŒ…å«äº†ä¸»æ–‡ä»¶å¯¹åº”å­—æ®µçš„æ‰€æœ‰ä¸åŒå€¼</li><li>ç¨€ç–ç´¢å¼•ï¼šç´¢å¼•æ–‡ä»¶ä¸­åŒ…å«äº†ä¸»æ–‡ä»¶å¯¹åº”å­—æ®µçš„éƒ¨åˆ†ä¸åŒå€¼</li></ul></li><li>ä¸»ç´¢å¼• VS è¾…åŠ©ç´¢å¼•<ul><li>ä¸»ç´¢å¼•é€šå¸¸æ˜¯å¯¹æ¯ä¸€å­˜å‚¨å—æœ‰ä¸€ä¸ªç´¢å¼•é¡¹ï¼ˆç¨€ç–ç´¢å¼•ï¼‰</li><li>è¾…åŠ©ç´¢å¼•æ˜¯ç¨ å¯†ç´¢å¼•</li><li>ä¸€ä¸ªä¸»æ–‡ä»¶ä»…å¯ä»¥æœ‰ä¸€ä¸ªä¸»ç´¢å¼•ï¼Œä½†å¯ä»¥æœ‰å¤šä¸ªè¾…åŠ©ç´¢å¼•</li><li>ä¸»ç´¢å¼•é€šå¸¸å»ºç«‹äºä¸»ç /æ’åºç ä¸Šé¢ï¼›è¾…åŠ©ç´¢å¼•å»ºç«‹äºå…¶ä»–å±æ€§ä¸Šé¢</li><li>ä¸»ç´¢å¼•å¯ä»¥é‡æ–°ç»„ç»‡ä¸»æ–‡ä»¶æ•°æ®ï¼Œä½†è¾…åŠ©ç´¢å¼•ä¸èƒ½æ”¹å˜ä¸»æ–‡ä»¶æ•°æ®</li></ul></li><li>èšç°‡ç´¢å¼• VS éèšç°‡ç´¢å¼•<ul><li>èšç°‡ç´¢å¼•ï¼šç´¢å¼•ä¸­é‚»è¿‘çš„è®°å½•åœ¨ä¸»æ–‡ä»¶ä¸­ä¹Ÿæ˜¯ä¸´è¿‘å­˜å‚¨çš„</li><li>éèšç°‡ç´¢å¼•ï¼šç´¢å¼•ä¸­é‚»è¿‘çš„è®°å½•åœ¨ä¸»æ–‡ä»¶ä¸­ä¸ä¸€å®šæ˜¯é‚»è¿‘å­˜å‚¨çš„</li><li>ä¸»ç´¢å¼•æ˜¯èšç°‡ç´¢å¼•ã€è¾…åŠ©ç´¢å¼•æ˜¯éèšç°‡ç´¢å¼•</li></ul></li></ul><h3 id="æ•°æ®åº“å­˜å‚¨">æ•°æ®åº“å­˜å‚¨ğŸª¢</h3><ul><li>CPU åˆ° ä¸»å­˜ä¹‹é—´æŒ‰å­˜å‚¨å­—è®¿é—®ï¼Œä¸»å­˜ åˆ° å¤–å­˜ä¹‹é—´æŒ‰å—/IOè®¿é—®</li><li>æ“ä½œç³»ç»Ÿå¯¹æ•°æ®ç»„ç»‡ï¼šFATï¼ˆæ–‡ä»¶åˆ†é…è¡¨ï¼‰ -- ç›®å½•ï¼ˆæ–‡ä»¶å¤¹ï¼‰ --ç£ç›˜å—/ç°‡</li><li>æ•°æ®åº“ä¸­è¡¨æ‰€å ç£ç›˜å—çš„åˆ†é…æ–¹æ³•ï¼š<ul><li>è¿ç»­åˆ†é… ã€è®¿é—®å›°éš¾ã€‘</li><li>é“¾æ¥åˆ†é… ã€è®¿é—®é€Ÿåº¦æ…¢ã€‘</li><li>æŒ‰ç°‡åˆ†é… (ç°‡æ˜¯è‹¥å¹²è¿ç»­çš„ç£ç›˜å—,ç°‡ä¹‹é—´é æŒ‡é’ˆè¿æ¥)</li><li>ç´¢å¼•åˆ†é…(ç´¢å¼•å—ä¸­å­˜æ”¾æŒ‡å‘å®é™…dataå—çš„æŒ‡Â­é’ˆ)</li></ul></li><li>ï¼ˆä¸»ï¼‰æ–‡ä»¶ç»„ç»‡æ–¹æ³•ï¼š<ul><li>æ— åºè®°å½•æ–‡ä»¶ï¼ˆå †æ–‡ä»¶ï¼‰ï¼šæ•°æ®åº“é‡ç»„æ˜¯é€šè¿‡ç§»èµ°è¢«åˆ é™¤çš„è®°å½•ä½¿æœ‰æ•ˆè®°å½•è¿ç»­å­˜æ”¾ï¼Œä»è€Œå›æ”¶é‚£äº›ç”±åˆ é™¤è®°å½•è€Œäº§ç”Ÿçš„æœªåˆ©ç”¨ç©ºé—´</li><li>æœ‰åºè®°å½•æ–‡ä»¶ï¼ˆæ’åºæ–‡ä»¶ï¼‰ï¼šæ•°æ®åº“é‡ç»„æ˜¯å°†æº¢å‡ºæ–‡ä»¶åˆå¹¶åˆ°ä¸»æ–‡ä»¶ä¸­ï¼Œå¹¶æ¢å¤ä¸»æ–‡ä»¶ä¸­çš„è®°å½•é¡ºåº</li><li>æ•£åˆ—æ–‡ä»¶</li><li>èšç°‡æ–‡ä»¶</li></ul></li></ul><h3 id="ç´¢å¼•ç»“æ„">ç´¢å¼•ç»“æ„ğŸ§†</h3><ul><li><p>B+æ ‘</p><ul><li>æ’å…¥ï¼šåˆ†è£‚</li><li>åˆ†è£‚åå¢åŠ çˆ¶èŠ‚ç‚¹ä¸­çš„æŒ‡é’ˆå’Œé”®ï¼ˆå³èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå€¼ï¼‰</li><li>åˆ é™¤ï¼šåˆå¹¶</li><li>åˆå¹¶ååˆ é™¤çˆ¶èŠ‚ç‚¹ä¸­çš„æŒ‡é’ˆå’Œé”®</li></ul></li><li><p>å¯æ‰©å±•æ•£åˆ—ï¼šæ¯æ¬¡å¢åŠ ä¸¤å€</p></li><li><p>çº¿æ€§æ•£åˆ—</p><ul><li><p>ä½æ˜¯ä»å³ç«¯ï¼ˆä½ä½ï¼‰å¼€å§‹å–</p></li><li><p>nï¼šå½“å‰çš„æ¡¶æ•°ã€rï¼šå½“å‰æ•£åˆ—è¡¨ä¸­çš„è®°å½•æ€»æ•°ã€è¦æ±‚r&lt;=1.7n</p></li><li><table><tbody><tr class="odd"><td style="text-align: center;">0</td><td style="text-align: center;">00</td><td style="text-align: center;">00</td><td style="text-align: center;">000</td><td style="text-align: center;">000</td><td style="text-align: center;">...</td></tr><tr class="even"><td style="text-align: center;">1</td><td style="text-align: center;">01</td><td style="text-align: center;">01</td><td style="text-align: center;">001</td><td style="text-align: center;">001</td><td style="text-align: center;">...</td></tr><tr class="odd"><td style="text-align: center;"></td><td style="text-align: center;">10</td><td style="text-align: center;">10</td><td style="text-align: center;">010</td><td style="text-align: center;">010</td><td style="text-align: center;">...</td></tr><tr class="even"><td style="text-align: center;"></td><td style="text-align: center;"></td><td style="text-align: center;">11</td><td style="text-align: center;">011</td><td style="text-align: center;">011</td><td style="text-align: center;">...</td></tr><tr class="odd"><td style="text-align: center;"></td><td style="text-align: center;"></td><td style="text-align: center;"></td><td style="text-align: center;">100</td><td style="text-align: center;">100</td><td style="text-align: center;">...</td></tr><tr class="even"><td style="text-align: center;"></td><td style="text-align: center;"></td><td style="text-align: center;"></td><td style="text-align: center;"></td><td style="text-align: center;">101</td><td style="text-align: center;">...</td></tr><tr class="odd"><td style="text-align: center;"></td><td style="text-align: center;"></td><td style="text-align: center;"></td><td style="text-align: center;"></td><td style="text-align: center;"></td><td style="text-align: center;">...</td></tr></tbody></table></li></ul></li></ul><h3 id="æŸ¥è¯¢æ‰§è¡Œ">æŸ¥è¯¢æ‰§è¡ŒğŸ‘º</h3><ul><li><p>è¿æ¥</p><ul><li>M â‰¥ 3ï¼ˆè€ƒè™‘è¾“å‡ºï¼‰<ul><li><span class="math inline">\(B_R+B_R Ã— B_S\)</span></li></ul></li><li>$M â‰¥ B_R+B_S $<ul><li><span class="math inline">\(B_R+B_S\)</span></li></ul></li><li><span class="math inline">\(M &gt; B_Rï¼ŒB_Sâ‰¥B_R\)</span><ul><li><span class="math inline">\(B_R+B_S\)</span></li></ul></li><li><span class="math inline">\(B_Sâ‰¥Mï¼ŒB_Râ‰¥M\)</span><ul><li><span class="math inline">\(\frac{B_RB_S}{M-2} + B_S\)</span>ï¼ˆè€ƒè™‘è¾“å‡ºï¼‰</li></ul></li><li>æ’åº<ul><li><span class="math inline">\(3 B(R) + 3 B(S)\)</span></li><li><span class="math inline">\(B(R) + B(S) â‰¤ M^2\)</span></li></ul></li><li>å“ˆå¸Œ<ul><li><span class="math inline">\(3 B(R) + 3 B(S)\)</span></li><li><span class="math inline">\(B(R) + B(S) â‰¤ (M-1)^2\)</span></li></ul></li><li>ç´¢å¼•<ul><li>èšç°‡ç´¢å¼•<ul><li><span class="math inline">\(B(R) + T(R)\left \lceil\frac{B(S)}{V(S,K)} \right \rceil\)</span></li><li><span class="math inline">\(M â‰¥ 2\)</span> ï¼ˆè€ƒè™‘è¾“å‡ºï¼‰</li></ul></li><li>éèšç°‡ç´¢å¼•<ul><li><span class="math inline">\(B(R) +\frac{T(R)T(S)}{V(S,K)}\)</span></li><li><span class="math inline">\(M â‰¥ 2\)</span> ï¼ˆè€ƒè™‘è¾“å‡ºï¼‰</li></ul></li></ul></li></ul></li><li><p>å»é‡ï¼ˆæŠ•å½±ï¼‰</p><ul><li>ä¸€è¶Ÿæ‰«æ<ul><li><span class="math inline">\(B(R)\)</span></li><li><span class="math inline">\(B(\delta(R))â‰¤M\)</span></li></ul></li><li>æ’åº<ul><li><span class="math inline">\(3 B(R)\)</span></li><li><span class="math inline">\(B(R) â‰¤ M^2\)</span></li></ul></li><li>å“ˆå¸Œ<ul><li><span class="math inline">\(3 B(R)\)</span></li><li><span class="math inline">\(B(R) â‰¤ (M-1)^2\)</span></li></ul></li></ul></li><li><p>åˆ†ç»„</p><ul><li>ä¸€è¶Ÿæ‰«æ<ul><li><span class="math inline">\(B(R)\)</span></li><li>æ‰€æœ‰åˆ†ç»„å¯åœ¨å†…å­˜ä¸­å®Œæ•´ä¿å­˜</li></ul></li><li>æ’åº<ul><li><span class="math inline">\(3 B(R)\)</span></li><li><span class="math inline">\(B(R) â‰¤ M^2\)</span></li></ul></li><li>å“ˆå¸Œ<ul><li><span class="math inline">\(3 B(R)\)</span></li><li><span class="math inline">\(B(R) â‰¤ (M-1)^2\)</span></li></ul></li></ul></li><li><p>æ’åº</p><ul><li><span class="math inline">\(3 B(R)\)</span> ã€ä¸è€ƒè™‘å†™å›ã€‘ã€ <spanclass="math inline">\(4 B(R)\)</span> ã€è€ƒè™‘å†™å›ã€‘</li></ul></li><li><p>å¹¶ã€å·®ã€äº¤</p><ul><li><p>é›†åˆä¸Šæ“ä½œéœ€è¦å»é‡ã€åŒ…ä¸Šæ“ä½œä¸ç”¨å»é‡</p></li><li><p>ä¸€è¶Ÿæ‰«æ</p><ul><li><span class="math inline">\(B(R)+B(S)\)</span></li><li><span class="math inline">\(min(B(R),B(S)) â‰¤ M-1\)</span></li></ul></li><li><p>æ’åº</p><ul><li><span class="math inline">\(3 B(R) + 3 B(S)\)</span></li><li><span class="math inline">\(B(R) + B(S) â‰¤ M^2\)</span></li></ul></li><li><p>å“ˆå¸Œ</p><ul><li><span class="math inline">\(3 B(R) + 3 B(S)\)</span></li><li><span class="math inline">\(B(R) + B(S) â‰¤ (M-1)^2\)</span></li></ul></li></ul></li><li><p>é€‰æ‹©</p><ul><li>æ‰«æ<ul><li><span class="math inline">\(B(R)\)</span></li><li><span class="math inline">\(M â‰¥ 2\)</span> ï¼ˆè€ƒè™‘è¾“å‡ºï¼‰</li></ul></li><li>å“ˆå¸Œ<ul><li><span class="math inline">\(\left \lceil \frac{B(R)}{V(R,K)} \right\rceil\)</span></li><li><span class="math inline">\(M â‰¥ 2\)</span> ï¼ˆè€ƒè™‘è¾“å‡ºï¼‰</li></ul></li><li>ç´¢å¼•<ul><li>èšç°‡ç´¢å¼•<ul><li><span class="math inline">\(\left \lceil \frac{B(R)}{V(R,K)} \right\rceil\)</span></li><li><span class="math inline">\(M â‰¥ 2\)</span> ï¼ˆè€ƒè™‘è¾“å‡ºï¼‰</li></ul></li><li>éèšç°‡ç´¢å¼•<ul><li><span class="math inline">\(\left \lceil \frac{T(R)}{V(R,K)} \right\rceil\)</span></li><li><span class="math inline">\(M â‰¥ 2\)</span> ï¼ˆè€ƒè™‘è¾“å‡ºï¼‰</li></ul></li></ul></li></ul></li></ul><h3 id="æŸ¥è¯¢ä¼˜åŒ–">æŸ¥è¯¢ä¼˜åŒ–ğŸ¤¡</h3><ul><li>é€»è¾‘æŸ¥è¯¢ä¼˜åŒ–ï¼š<ul><li>æŠŠå½¢å¦‚<span class="math inline">\(\sigma_{F_1 \wedge F_2 \wedge...\wedge F_n }(E)\)</span>çš„é€‰æ‹©è¡¨è¾¾å¼å˜æˆä¸²æ¥å½¢å¼<spanclass="math inline">\(\sigma_{F_1}(\sigma_{F_2}(...(\sigma_{F_n}(E)))\)</span></li><li>å°†<span class="math inline">\(\sigma\)</span> ç§»åŠ¨åˆ°æ ‘åº•</li><li>å°†<span class="math inline">\(\pi\)</span>ç§»åŠ¨åˆ°åº•éƒ¨ï¼Œè‹¥æ˜¯å¯¹æŸè¡¨è¾¾å¼çš„æ‰€æœ‰å±æ€§è¿›è¡Œçš„ï¼Œåˆ™åˆ å»</li><li>å°†<span class="math inline">\(\sigma\)</span> å’Œ<spanclass="math inline">\(\pi\)</span> ç»„åˆä¸º<spanclass="math inline">\(\sigma\)</span> åè·Ÿ<spanclass="math inline">\(\pi\)</span> æˆ–å•ä¸ªçš„å½¢å¼</li></ul></li><li>ç‰©ç†æŸ¥è¯¢ä¼˜åŒ–ï¼š<ul><li>æŒæ¡ <span class="math inline">\(\pi\)</span> ã€<spanclass="math inline">\(\sigma_{A=c}\)</span> ã€<spanclass="math inline">\(\sigma_{A&lt;c}\)</span> ã€<spanclass="math inline">\(and\)</span> ã€<spanclass="math inline">\(or\)</span> ã€è‡ªç„¶è¿æ¥çš„ä»£ä»·ä¼°è®¡</li></ul></li></ul><h3 id="å¹¶å‘æ§åˆ¶">å¹¶å‘æ§åˆ¶ğŸ“®</h3><ul><li><p>æ‰€æœ‰éš”ç¦»çº§åˆ«å‡å¯ä»¥è§£å†³ä¸¢å¤±ä¿®æ”¹é—®é¢˜</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202205201127663.png"/></p><table><thead><tr class="header"><th style="text-align: center;">éš”ç¦»çº§åˆ«</th><th style="text-align: center;">è„è¯»</th><th style="text-align: center;">ä¸å¯é‡å¤è¯»</th><th style="text-align: center;">å¹»è¯»</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">è¯»æœªæäº¤</td><td style="text-align: center;">âˆš</td><td style="text-align: center;">âˆš</td><td style="text-align: center;">âˆš</td></tr><tr class="even"><td style="text-align: center;">è¯»å·²æäº¤</td><td style="text-align: center;">Ã—</td><td style="text-align: center;">âˆš</td><td style="text-align: center;">âˆš</td></tr><tr class="odd"><td style="text-align: center;">å¯é‡å¤è¯»</td><td style="text-align: center;">Ã—</td><td style="text-align: center;">Ã—</td><td style="text-align: center;">âˆš</td></tr><tr class="even"><td style="text-align: center;">å¯ä¸²è¡ŒåŒ–</td><td style="text-align: center;">Ã—</td><td style="text-align: center;">Ã—</td><td style="text-align: center;">Ã—</td></tr></tbody></table></li><li><p>åˆ¤æ–­å†²çªå¯ä¸²è¡ŒåŒ–è°ƒåº¦ï¼šç”»å›¾ï¼Œåˆ¤æ–­æœ‰æ— ç¯</p></li><li><p>Xï¼ˆæ’ä»–ï¼‰é”ã€Sï¼ˆè¯»å†™ï¼‰é”ã€Uï¼ˆæ›´æ–°ï¼‰é”ã€Iï¼ˆå¢é‡ï¼‰é”</p></li><li><p>ä¸¤æ®µé”åè®®</p><ul><li>è¯»å†™æ•°æ®ä¹‹å‰è¦è·å¾—é”ã€‚æ¯ä¸ªäº‹åŠ¡ä¸­æ‰€æœ‰å°é”è¯·æ±‚å…ˆäºä»»ä½•ä¸€ä¸ªè§£é”è¯·æ±‚</li><li>ä¸¤é˜¶æ®µï¼šåŠ é”æ®µï¼Œè§£é”æ®µã€‚åŠ é”æ®µä¸­ä¸èƒ½æœ‰è§£é”æ“ä½œï¼Œè§£é”æ®µä¸­ä¸èƒ½æœ‰åŠ é”æ“ä½œ</li></ul></li><li><p>å¦‚æœä¸€ç»„äº‹åŠ¡ä¸­æ¯ä¸ªäº‹åŠ¡éƒ½åœ¨ç­‰å¾…å…¶ä»–äº‹åŠ¡é‡Šæ”¾é”ï¼Œåˆ™è¿™ç»„äº‹åŠ¡å½¢æˆæ­»é”</p></li><li><p>äº‹åŠ¡äº§ç”Ÿæ­»é”å½“ä¸”ä»…å½“ç­‰å¾…å›¾ä¸­æœ‰ç¯</p></li></ul><h3 id="æ•…éšœæ¢å¤">æ•…éšœæ¢å¤ğŸš¢</h3><ul><li><p>æ•…éšœåŠå…¶è§£å†³æ–¹æ³•ï¼š</p><ul><li>äº‹åŠ¡æ•…éšœï¼šredoã€undoäº‹åŠ¡</li><li>ç³»ç»Ÿæ•…éšœï¼šè¿è¡Œæ—¥å¿—ï¼Œä»æ£€æŸ¥ç‚¹å¼€å§‹æ¢å¤<ul><li>æ£€æŸ¥ç‚¹è¡¨å¾äº†:åœ¨æ£€æŸ¥ç‚¹ä¹‹å‰å†…å­˜ä¸­æ•°æ®ä¸ä»‹è´¨ä¸­æ•°æ®æ˜¯ä¿æŒä¸€è‡´çš„</li></ul></li><li>ä»‹è´¨æ•…éšœï¼šå‰¯æœ¬</li></ul></li><li><p>ç¼“å†²åŒºå¤„ç†ç­–ç•¥</p><ul><li>Force:å†…å­˜ä¸­çš„æ•°æ®æœ€æ™šåœ¨commitçš„æ—¶å€™å†™å…¥ç£ç›˜</li><li>Noforce:å†…å­˜ä¸­çš„æ•°æ®å¯ä»¥ä¸€ç›´ä¿ç•™ï¼Œåœ¨commitä¹‹åè¿‡ä¸€æ®µæ—¶é—´å†å†™å…¥ç£ç›˜ã€‚(æ­¤æ—¶åœ¨ç³»ç»Ÿå´©æºƒçš„æ—¶å€™å¯èƒ½è¿˜æ²¡å†™å…¥åˆ°ç£ç›˜ï¼Œéœ€è¦redo)</li><li>No steal:ä¸å…è®¸åœ¨äº‹åŠ¡commitä¹‹å‰æŠŠå†…å­˜ä¸­çš„æ•°æ®å†™å…¥ç£ç›˜</li><li>Steal:å…è®¸åœ¨äº‹åŠ¡commitä¹‹å‰æŠŠå†…å­˜ä¸­çš„æ•°æ®å†™å…¥ç£ç›˜ã€‚(æ­¤æ—¶è‹¥ç³»ç»Ÿåœ¨commitä¹‹å‰å´©æºƒæ—¶ï¼Œå·²ç»æœ‰æ•°æ®å†™å…¥åˆ°ç£ç›˜äº†ï¼Œè¦æ¢å¤åˆ°å´©æºƒå‰çš„çŠ¶æ€ï¼Œéœ€è¦Undo)</li><li>ä¸€èˆ¬é€‰ç”¨ Steal + No force</li></ul></li><li><p>undoæ—¥å¿—ï¼š</p><ul><li>&lt;T,X,v&gt;ä¸­vä¸ºxçš„æ—§å€¼</li><li>å…ˆOUTPUTå†COMMIT</li></ul></li><li><p>redoæ—¥å¿—ï¼š</p><ul><li>&lt;T,X,v&gt;ä¸­vä¸ºxçš„æ–°å€¼</li><li>å…ˆCOMMITå†OUTPUT</li></ul></li><li><p>æ£€æŸ¥ç‚¹</p><ul><li><p><code>&lt;begin checkpoint (T1,T2...Tn)&gt;</code></p><p><code>...</code></p><p><code>&lt;end checkpoint&gt;</code></p><p>redo ä» <code>begin checkpoint</code>å¼€å§‹æ‰«æ</p><p>undo æ‰«æåˆ°T1ï¼ŒT2 ... Tn ä¸­æœ€æ—©çš„äº‹åŠ¡ Tiçš„æ—¥å¿—è®°å½•<code>&lt;Ti , begin&gt;</code>ä¸ºæ­¢</p></li></ul></li><li><p>ä¸€èˆ¬ä½¿ç”¨ &lt;T,X,u,v&gt;ï¼Œå…¶ä¸­æ—§å€¼ä¸ºuï¼Œæ–°å€¼ä¸ºv</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>è¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®åº“</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸€ä¸ªAESåŠ å¯†ç®—æ³•çš„å·¥å…·ç±»</title>
    <link href="/post/abbb7a99.html"/>
    <url>/post/abbb7a99.html</url>
    
    <content type="html"><![CDATA[<h1id="ä¸€ä¸ªaesåŠ å¯†ç®—æ³•çš„å·¥å…·ç±»android">ä¸€ä¸ªAESåŠ å¯†ç®—æ³•çš„å·¥å…·ç±»ï¼ˆAndroidï¼‰</h1><p>æˆ‘æƒ³è¦å®ç°å¯¹ä¸€ä¸ªå­—ç¬¦ä¸²ç”¨AESåŠ å¯†ç®—æ³•è¿›è¡ŒåŠ å¯†ï¼Œè§£å¯†çš„æ“ä½œï¼Œæœ¬æ¥ä»¥ä¸ºå¾ˆå®¹æ˜“ï¼Œä½†æ˜¯ç½‘ä¸Šæ‰¾åˆ°å¾ˆå¤šéƒ½æ˜¯ä¸èƒ½ç”¨çš„ï¼Œä¸‹é¢è¿™ä»½ä»£ç äº²æµ‹å¯ç”¨ï¼Œäºæ˜¯è®°å½•ä¹‹ã€‚</p><span id="more"></span><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">import</span> android.util.Base64;<br><span class="hljs-keyword">import</span> android.util.Log;<br><br><span class="hljs-keyword">import</span> java.nio.charset.Charset;<br><span class="hljs-keyword">import</span> java.nio.charset.StandardCharsets;<br><span class="hljs-keyword">import</span> javax.crypto.Cipher;<br><span class="hljs-keyword">import</span> javax.crypto.spec.SecretKeySpec;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AESUtils</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TAG</span> <span class="hljs-operator">=</span> AESUtils.class.getSimpleName();<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é‡‡ç”¨AESåŠ å¯†ç®—æ³•</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">KEY_ALGORITHM</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;AES&quot;</span>;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å­—ç¬¦ç¼–ç (ç”¨å“ªä¸ªéƒ½å¯ä»¥ï¼Œè¦æ³¨æ„new String()é»˜è®¤ä½¿ç”¨UTF-8ç¼–ç  getBytes()é»˜è®¤ä½¿ç”¨ISO8859-1ç¼–ç )</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Charset</span> <span class="hljs-variable">CHARSET_UTF8</span> <span class="hljs-operator">=</span> StandardCharsets.UTF_8;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åŠ è§£å¯†ç®—æ³•/å·¥ä½œæ¨¡å¼/å¡«å……æ–¹å¼</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">CIPHER_ALGORITHM</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;AES/ECB/PKCS5Padding&quot;</span>;<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">secretKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;0123456789abcdef&quot;</span>; <span class="hljs-comment">//è¿™é‡Œåªè¦æ˜¯16ä½å­—ç¬¦å³å¯</span><br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * AES åŠ å¯†</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> data      å¾…åŠ å¯†å†…å®¹</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> è¿”å›Base64è½¬ç åçš„åŠ å¯†æ•°æ®</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">encrypt</span><span class="hljs-params">(String data)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// åˆ›å»ºAESç§˜é’¥</span><br>            <span class="hljs-type">SecretKeySpec</span> <span class="hljs-variable">secretKeySpec</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SecretKeySpec</span>(secretKey.getBytes(CHARSET_UTF8), KEY_ALGORITHM);<br>            <span class="hljs-comment">// åˆ›å»ºå¯†ç å™¨</span><br>            <span class="hljs-type">Cipher</span> <span class="hljs-variable">cipher</span> <span class="hljs-operator">=</span> Cipher.getInstance(CIPHER_ALGORITHM);<br>            <span class="hljs-comment">// åˆå§‹åŒ–åŠ å¯†å™¨</span><br>            cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec);<br>            <span class="hljs-type">byte</span>[] encryptByte = cipher.doFinal(data.getBytes(CHARSET_UTF8));<br>            <span class="hljs-comment">// å°†åŠ å¯†ä»¥åçš„æ•°æ®è¿›è¡Œ Base64 ç¼–ç </span><br>            <span class="hljs-keyword">return</span> base64Encode(encryptByte);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            handleException(<span class="hljs-string">&quot;encrypt&quot;</span>, e);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * AES è§£å¯†</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> base64Data åŠ å¯†çš„å¯†æ–‡ Base64 å­—ç¬¦ä¸²</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">decrypt</span><span class="hljs-params">(String base64Data)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">byte</span>[] data = base64Decode(base64Data);<br>            <span class="hljs-comment">// åˆ›å»ºAESç§˜é’¥</span><br>            <span class="hljs-type">SecretKeySpec</span> <span class="hljs-variable">secretKeySpec</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SecretKeySpec</span>(secretKey.getBytes(CHARSET_UTF8), KEY_ALGORITHM);<br>            <span class="hljs-comment">// åˆ›å»ºå¯†ç å™¨</span><br>            <span class="hljs-type">Cipher</span> <span class="hljs-variable">cipher</span> <span class="hljs-operator">=</span> Cipher.getInstance(CIPHER_ALGORITHM);<br>            <span class="hljs-comment">// åˆå§‹åŒ–è§£å¯†å™¨</span><br>            cipher.init(Cipher.DECRYPT_MODE, secretKeySpec);<br>            <span class="hljs-comment">// æ‰§è¡Œè§£å¯†æ“ä½œ</span><br>            <span class="hljs-type">byte</span>[] result = cipher.doFinal(data);<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(result, CHARSET_UTF8);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            handleException(<span class="hljs-string">&quot;decrypt&quot;</span>, e);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å°† å­—èŠ‚æ•°ç»„ è½¬æ¢æˆ Base64 ç¼–ç </span><br><span class="hljs-comment">     * ç”¨Base64.DEFAULTæ¨¡å¼ä¼šå¯¼è‡´åŠ å¯†çš„textä¸‹é¢å¤šä¸€è¡Œï¼ˆåœ¨åº”ç”¨ä¸­æ˜¾ç¤ºæ˜¯è¿™æ ·ï¼‰</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">base64Encode</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] data)</span> &#123;<br>        <span class="hljs-keyword">return</span> Base64.encodeToString(data, Base64.NO_WRAP);<br>    &#125;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å°† Base64 å­—ç¬¦ä¸² è§£ç æˆ å­—èŠ‚æ•°ç»„</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">byte</span>[] base64Decode(String data) &#123;<br>        <span class="hljs-keyword">return</span> Base64.decode(data, Base64.NO_WRAP);<br>    &#125;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å¤„ç†å¼‚å¸¸</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleException</span><span class="hljs-params">(String methodName, Exception e)</span> &#123;<br>        e.printStackTrace();<br>        Log.e(TAG, methodName + <span class="hljs-string">&quot;----&gt;&quot;</span> + e);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>é¡¹ç›®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AESåŠ å¯†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç¼–è¯‘åŸç†æœŸæœ«æ€»ç»“</title>
    <link href="/post/e5a09991.html"/>
    <url>/post/e5a09991.html</url>
    
    <content type="html"><![CDATA[<h1 id="ç¼–è¯‘åŸç†æœŸæœ«æ€»ç»“">ç¼–è¯‘åŸç†æœŸæœ«æ€»ç»“</h1><p>ä¸»è¦é’ˆå¯¹ç¼–è¯‘åŸç†æœŸæœ«å¤ä¹ ä¸­çš„ä¸€äº›é‡ç‚¹è¿›è¡Œå½’çº³æ€»ç»“</p><span id="more"></span><h3id="firsté›†followé›†selecté›†è®¡ç®—">FIRSTé›†ã€FOLLOWé›†ã€SELECTé›†è®¡ç®—ğŸƒ</h3><p>FIRSTé›†ï¼š</p><ul><li>FIRSTé›†ä¸­æ˜¯å¯ä»¥æœ‰<span class="math inline">\(\xi\)</span>çš„</li><li>å¦‚æœé‡åˆ° <span class="math inline">\(E â†’ aF\)</span>ä¹‹ç±»çš„ï¼ŒFIRST(E)ä¸­åŠ å…¥a</li><li>å¦‚æœé‡åˆ° <span class="math inline">\(E â†’ FT\)</span>ä¹‹ç±»çš„ï¼ŒFIRST(E)ä¸­åŠ å…¥FIRST(F)ä¸­å†…å®¹ï¼Œå¦‚æœ <span class="math inline">\(Fâ†’ \xi\)</span> ï¼Œåˆ™FIRST(E)ä¸­åŠ å…¥FIRST(T)ä¸­å†…å®¹ï¼Œå¯ä»¥ä¸€ç›´å¾€åé¡ºå»¶è‡³æŸä¸€ä¸ªç»ˆç»“ç¬¦æˆ–FIRSTé›†ä¸­æ²¡æœ‰<spanclass="math inline">\(\xi\)</span> çš„éç»ˆç»“ç¬¦</li></ul><p>FOLLOWé›†ï¼š</p><ul><li>FOLLOWé›†ä¸­æ²¡æœ‰ <span class="math inline">\(\xi\)</span></li><li>å…ˆåœ¨å¼€å§‹ç¬¦å· S çš„FOLLOWä¸­åŠ å…¥ <spanclass="math inline">\(\$\)</span></li><li>å¦‚æœé‡åˆ° $ ... â†’ FT$ ä¹‹ç±»çš„ï¼ŒFOLLOW(F)ä¸­åŠ å…¥ FIRST(T)-<spanclass="math inline">\(\xi\)</span></li><li>å¦‚æœé‡åˆ° $ ... â†’ Fa$ ä¹‹ç±»çš„ï¼ŒFOLLOW(F)ä¸­åŠ å…¥a</li><li>å¦‚æœé‡åˆ° <span class="math inline">\(E â†’ ...T\)</span>ä¹‹ç±»çš„ï¼ŒFOLLOW(T)ä¸­åŠ å…¥FOLLOW(E)</li></ul><p>SELECTé›†ï¼š</p><ul><li>è®¡ç®—SELECTé›†æ—¶ï¼Œè¦æŠŠæ‰€æœ‰çš„è¯­å¥æ‹†æˆä¸å« | çš„å½¢å¼</li><li>å¦‚æœé‡åˆ° <span class="math inline">\(E â†’T\)</span>ä¹‹ç±»çš„ï¼Œå¦‚æœFIRST(T)ä¸åŒ…å« <spanclass="math inline">\(\xi\)</span> ï¼Œåˆ™SELECT=FIRST(T)ï¼Œå¦‚æœFIRST(T)åŒ…å«<span class="math inline">\(\xi\)</span> ï¼Œåˆ™SELECT=(FIRST(T)- <spanclass="math inline">\(\xi\ ) \cup\)</span> FOLLOW(E)</li></ul><h3 id="llæ–‡æ³•å’Œlræ–‡æ³•çš„åˆ¤å®šæ¡ä»¶">LLæ–‡æ³•å’ŒLRæ–‡æ³•çš„åˆ¤å®šæ¡ä»¶ğŸš€</h3><ul><li>LLæ–‡æ³• æ–‡æ³•Gæ˜¯LL(1)çš„ï¼Œå½“ä¸”ä»…å½“Gçš„ä»»æ„ä¸¤ä¸ªå…·æœ‰ç›¸åŒå·¦éƒ¨çš„äº§ç”Ÿå¼A â†’ Î±| Î² æ»¡è¶³æ¡ä»¶ï¼š<ol type="1"><li>æ–‡æ³•ä¸å«å·¦é€’å½’ï¼ˆå³ä¸å­˜åœ¨ç»ˆç»“ç¬¦aä½¿å¾—Î±å’ŒÎ²éƒ½èƒ½å¤Ÿæ¨å¯¼å‡ºä»¥aå¼€å¤´çš„ä¸²ï¼‰</li><li>Î±å’ŒÎ²è‡³å¤šæœ‰ä¸€ä¸ªèƒ½æ¨å¯¼å‡ºÎµ</li><li>å¦‚æœ Î² <span class="math inline">\(\Rightarrow ^ *\)</span>Îµï¼Œåˆ™FIRST(Î±) âˆ© FOLLOW(A) =Î¦ï¼›å¦‚æœ Î± <spanclass="math inline">\(\Rightarrow ^ *\)</span> Îµï¼Œåˆ™FIRST(Î²) âˆ© FOLLOW(A)=Î¦ï¼›</li></ol></li><li>LRæ–‡æ³•<ul><li><p>LR(0)æ–‡æ³•</p><p>å¦‚æœæ–‡æ³•å¯¹åº”çš„è‡ªåŠ¨æœºä¸­ä¸å­˜åœ¨<code>ç§»è¿›-å½’çº¦å†²çª</code>å’Œ<code>å½’çº¦-å½’çº¦å†²çª</code>åˆ™ä¸ºLR(0)æ–‡æ³•ã€‚æ¢å¥è¯è¯´LR(0)æ–‡æ³•åˆ†æä¸èƒ½è§£å†³è¿™ä¸¤ç§å†²çªï¼Œæ‰€ä»¥èŒƒå›´æœ€å°ã€‚ç§»è¿›-å½’çº¦å†²çªå°±æ˜¯åœ¨åŒä¸€ä¸ªé¡¹é›†æ—ä¸­åŒæ—¶å‡ºç°äº†å¯ä»¥ç§»è¿›çš„äº§ç”Ÿå¼å’Œå¯ä»¥å½’çº¦çš„äº§ç”Ÿå¼ã€‚å½’çº¦-å½’çº¦å†²çªç±»ä¼¼ã€‚</p></li><li><p>SLRæ–‡æ³•</p><p>SLRæ–‡æ³•ä¸­è¿˜æ˜¯å­˜åœ¨<code>å½’çº¦-å½’çº¦å†²çª</code>å’Œå­˜åœ¨<code>ç§»è¿›-å½’çº¦å†²çª</code>ï¼Œä½†æ˜¯å¦‚æœå¯ä»¥ç”¨FOLLOWé›†è§£å†³åˆ™æ˜¯SLRæ–‡æ³•ã€‚æ¢å¥è¯è¯´ï¼ŒSLRæ–‡æ³•åˆ†æè¿‡ç¨‹ä¹Ÿä¸ä¸€å®šèƒ½è§£å†³è¿™ä¸¤ç§å†²çªã€‚ç”¨FOLLOWé›†æ¥å¤„ç†å‡ºç°äº†<code>å½’çº¦-è§„çº¦å†²çª</code>æˆ–<code>ç§»è¿›-å½’çº¦å†²çª</code>çš„ä¸¤æ¡äº§ç”Ÿå¼ï¼Œå¦‚æœå…¶FOLLOWé›†ç›¸äº¤ä¸ºç©ºåˆ™ä¸ºSLRæ–‡æ³•ï¼Œåä¹‹ä¸æ˜¯ã€‚</p></li><li><p>LR(1)æ–‡æ³•</p><p>é¢˜ç›®å‡ºç°çš„åŸºæœ¬éƒ½æ˜¯LR(1)æ–‡æ³•</p></li><li><p>LALRæ–‡æ³•</p><p>LALRæ–‡æ³•ä¸­å­˜åœ¨<code>å½’çº¦-å½’çº¦å†²çª</code>ã€‚</p></li></ul></li></ul><h3 id="èµ‹å€¼è¯­å¥ç¿»è¯‘">èµ‹å€¼è¯­å¥ç¿»è¯‘ğŸ¦Š</h3><ul><li><p>if-else-thenè¯­å¥ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs markdown">if x&gt;1<br>then x=0<br>else x=2<br></code></pre></div></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs markdown">nif x&gt;1 goto n+2<br>n+1goto n+4<br>n+2x=0<br>n+3goto n+5<br>n+4x=2<br>n+5...<br></code></pre></div></td></tr></table></figure></li><li><p>whileè¯­å¥ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs markdown">while i&gt;0<br>do i=i+1<br></code></pre></div></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs markdown">nif i&gt;0 goto n+2<br>n+1goto n+5<br>n+2t=i+1<br>n+3i=t<br>n+4goto n<br>n+5...<br></code></pre></div></td></tr></table></figure></li><li><p>é€»è¾‘è¿ç®—ç¬¦</p><figure class="highlight markdown"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs markdown">if ( x&lt;100 || x&gt;200 &amp;&amp; x!=y )<br><span class="hljs-code">x=0;</span><br></code></pre></div></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs markdown">nif x&lt;100 goto n+6 <br>n+1goto n+2<br>n+2if x &gt; 200 goto n+4<br>n+3goto n+7 <br>n+4if x!=y goto n+6<br>n+5goto n+7<br>n+6x=0<br>n+7...<br></code></pre></div></td></tr></table></figure></li></ul><h3 id="æ§åˆ¶è¯­å¥çš„sdtå›å¡«">æ§åˆ¶è¯­å¥çš„<code>SDT</code>&amp;å›å¡«â›„</h3><p>æ§åˆ¶æµè¯­å¥ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs markdown">1if B then S1<br>2if B then S1 else S2<br>3while B S1<br></code></pre></div></td></tr></table></figure><p>å¸ƒå°”è¡¨è¾¾å¼</p><figure class="highlight markdown"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs markdown">1B1 or B2<br>2B1 and B2<br>3not B<br>4(B)<br>5E1 relop E2<br>6true<br>7false<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202205052245722.png" alt="æ§åˆ¶æµè¯­å¥SDT" style="zoom:75%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202205052245278.png" alt="å¸ƒå°”è¡¨è¾¾å¼SDT" style="zoom:75%;" /></p><p>æ§åˆ¶æµSDTç¼–å†™ï¼š</p><ul><li>åˆ†ææ¯ä¸€ä¸ªéç»ˆç»“ç¬¦ä¹‹å‰ï¼š<ul><li>å…ˆè®¡ç®—ç»§æ‰¿å±æ€§</li><li>å†è§‚å¯Ÿä»£ç ç»“æ„å›¾ä¸­è¯¥éç»ˆç»“ç¬¦å¯¹åº”çš„æ–¹æ¡†é¡¶éƒ¨æ˜¯å¦æœ‰<code>å¯¼å…¥ç®­å¤´</code>ã€‚å¦‚æœæœ‰ï¼Œè°ƒç”¨<code>label()</code>å‡½æ•°</li></ul></li><li>ä¸Šä¸€ä¸ªä»£ç æ¡†æ‰§è¡Œå®Œ<code>ä¸é¡ºåºæ‰§è¡Œ</code>ä¸‹ä¸€ä¸ªä»£ç æ¡†æ—¶ï¼Œç”Ÿæˆä¸€æ¡<code>æ˜¾å¼è·³è½¬</code>æŒ‡ä»¤</li><li>æœ‰<code>è‡ªä¸‹è€Œä¸Šçš„ç®­å¤´</code>æ—¶ï¼Œè®¾ç½®<code>begin</code>å±æ€§ã€‚ä¸”å®šä¹‰å<code>ç›´æ¥è°ƒç”¨label( )å‡½æ•°</code>ç»‘å®šåœ°å€</li></ul><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202205052148748.png" alt="æ§åˆ¶æµè¯­å¥å›å¡«" style="zoom:80%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202205052146083.png" alt="å¸ƒå°”è¡¨è¾¾å¼çš„å›å¡«" style="zoom:67%;" /></p><p>å›å¡«SDTç¼–å†™ï¼š</p><ul><li>æ–‡æ³•æ”¹é€ <ul><li>åœ¨listç®­å¤´æŒ‡å‘çš„ä½ç½®è®¾ç½®æ ‡è®°éç»ˆç»“ç¬¦M</li></ul></li><li>åœ¨äº§ç”Ÿå¼æœ«å°¾çš„è¯­ä¹‰åŠ¨ä½œä¸­<ul><li>è®¡ç®—ç»¼åˆå±æ€§</li><li>è°ƒç”¨backpatch ( )å‡½æ•°å›å¡«å„ä¸ªlist</li></ul></li></ul><p>æ³¨ï¼šä¸Šè¿°è¯­å¥çš„<strong>ä»£ç ç»“æ„å›¾</strong>éå¸¸é‡è¦</p><h3 id="æ•°æ®æµåˆ†ææŠ€æœ¯">æ•°æ®æµåˆ†ææŠ€æœ¯ğŸª†</h3><h4 id="åˆ°è¾¾å®šå€¼åˆ†æ">åˆ°è¾¾å®šå€¼åˆ†æğŸ‘¨ğŸ»â€ğŸš€</h4><p>å¯¹ <spanclass="math inline">\(d_i\)</span>è¿›è¡Œåˆ†æï¼Œgenæ˜¯æœ¬åŸºæœ¬å—ä¸­çš„æ‰€æœ‰ <spanclass="math inline">\(d_i\)</span>ï¼Œkillæ˜¯ä¸åœ¨æœ¬åŸºæœ¬å—å†…ï¼Œä½†æ˜¯å’Œæœ¬åŸºæœ¬å—å†…<span class="math inline">\(d_i\)</span>å·¦éƒ¨ç›¸åŒçš„<spanclass="math inline">\(d_j\)</span></p><p><span class="math inline">\(IN(B)=\cup OUT(B)\)</span></p><p><span class="math inline">\(OUT(B)=gen \cup (IN(B)-kill)\)</span></p><p>ç”¨é€”ï¼š</p><ol type="1"><li>å¾ªç¯ä¸å˜è®¡ç®—æ£€æµ‹</li><li>å¸¸é‡åˆå¹¶</li><li>åˆ¤å®šå˜é‡xåœ¨pç‚¹ä¸Šæ˜¯å¦æœªç»å®šå€¼è¢«å¼•ç”¨</li></ol><h4 id="æ´»è·ƒå˜é‡åˆ†æ">æ´»è·ƒå˜é‡åˆ†æğŸ‘‘</h4><p>å¯¹æ¯ä¸€ä¸ªåŸºæœ¬å—å†…çš„å˜é‡è¿›è¡Œåˆ†æï¼Œuseæ˜¯å³éƒ¨ä¸­ç”¨åˆ°çš„ç¬¦å·ï¼Œdefæ˜¯å·¦éƒ¨ä¸­ç¬¦å·ï¼Œè‹¥useå’Œdefæœ‰äº¤é›†ï¼Œæ”¾åœ¨useé‡Œ</p><p><span class="math inline">\(OUT(B)=\cup IN(B)\)</span></p><p><span class="math inline">\(IN(B)=use \cup (OUT(B)-def)\)</span></p><p>æ³¨æ„ï¼šæ´»è·ƒå˜é‡åˆ†æä»<spanclass="math inline">\(B_n\)</span>å¼€å§‹åˆ†æ</p><p>ç”¨é€”ï¼š</p><ol type="1"><li>åˆ é™¤æ— ç”¨èµ‹å€¼</li><li>ä¸ºåŸºæœ¬å—åˆ†é…å¯„å­˜å™¨</li></ol><h4 id="å¯ç”¨è¡¨è¾¾å¼åˆ†æ">å¯ç”¨è¡¨è¾¾å¼åˆ†æğŸ¦„</h4><p>å¯¹æ¯ä¸€ä¸ª<code>z=x op y</code>è¿™ç±»çš„è¡¨è¾¾å¼è¿›è¡Œåˆ†æï¼Œå…ˆæ‰¾å‡ºæ‰€æœ‰çš„<code>x op y</code>ï¼Œè®°ä½œSã€‚</p><p>é‡åˆ° z = x op y ï¼Œe_genå…ˆåŠ å…¥x op y,ç„¶ååˆ æ‰æ‰€æœ‰å«æœ‰zçš„è¡¨è¾¾å¼ï¼›e_killå…ˆåˆ æ‰x op yï¼Œç„¶ååŠ å…¥æ‰€æœ‰Sä¸­å«æœ‰zçš„è¡¨è¾¾å¼ã€‚</p><p><span class="math inline">\(IN(B)=\cap OUT(B)\)</span></p><p><span class="math inline">\(OUT(B)=e_{gen} \cup(IN(B)-e_{kill})\)</span></p><p>ç”¨é€”ï¼š</p><ol type="1"><li>æ¶ˆé™¤å…¨å±€å…¬å…±å­è¡¨è¾¾å¼</li><li>å¤åˆ¶ä¼ æ’­</li></ol><h3 id="æ¦‚å¿µæ€»ç»“ä¸»è¦é’ˆå¯¹é€‰å¡«">æ¦‚å¿µæ€»ç»“ï¼ˆä¸»è¦é’ˆå¯¹é€‰å¡«ï¼‰ğŸ¼</h3><h4 id="ç»ªè®º">ç»ªè®ºğŸ˜¶â€ğŸŒ«ï¸</h4><ul><li>é¢„å¤„ç† <span class="math inline">\(\rightarrow\)</span> ç¼–è¯‘ <spanclass="math inline">\(\rightarrow\)</span> æ±‡ç¼– <spanclass="math inline">\(\rightarrow\)</span> é“¾æ¥ <spanclass="math inline">\(\rightarrow\)</span> ç›®æ ‡æœºå™¨ä»£ç </li><li>ç¼–è¯‘ï¼šå°†é«˜çº§è¯­è¨€ç¿»è¯‘æˆæ±‡ç¼–è¯­è¨€æˆ–æœºå™¨è¯­è¨€çš„è¿‡ç¨‹</li><li>è¯æ³•åˆ†æä¸­ tokenï¼š&lt;ç§åˆ«ç ï¼Œå±æ€§å€¼&gt;ã€è¯­æ³•åˆ†ææ„é€ <strong>è¯­æ³•åˆ†ææ ‘</strong>ã€è¯­ä¹‰åˆ†ææ”¶é›†æ ‡è¯†ç¬¦çš„å±æ€§ä¿¡æ¯<strong>å»ºç«‹ç¬¦å·è¡¨å’Œè¯­ä¹‰æ£€æŸ¥</strong></li></ul><h4 id="è¯­è¨€åŠå…¶æ–‡æ³•">è¯­è¨€åŠå…¶æ–‡æ³•ğŸ»â€â„ï¸</h4><ul><li><p>å¯¹äº <span class="math inline">\(\alpha\ \rightarrow\\beta\)</span></p><ul><li>1å‹æ–‡æ³• -- ä¸Šä¸‹æ–‡æœ‰å…³æ–‡æ³•ï¼š<span class="math inline">\(|\alpha|\ â‰¤\|\beta|\)</span></li><li>2å‹æ–‡æ³• -- ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•ï¼š<span class="math inline">\(\alpha\ \in\V_Nï¼ŒA\rightarrow \beta\)</span></li><li>3å‹æ–‡æ³• -- æ­£åˆ™æ–‡æ³•ï¼š<ul><li>å³çº¿æ€§æ–‡æ³•<span class="math inline">\(A\rightarrow wB\)</span> æˆ–<span class="math inline">\(A \rightarrow w\)</span><br /></li><li>å³çº¿æ€§æ–‡æ³•<span class="math inline">\(A\rightarrow Bw\)</span> æˆ–<span class="math inline">\(A \rightarrow w\)</span></li></ul></li></ul></li><li><p>çŸ­è¯­å’Œç›´æ¥çŸ­è¯­ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202205180933517.png" /></p></li></ul><h4 id="è¯æ³•åˆ†æ">è¯æ³•åˆ†æğŸ’</h4><ul><li>é”™è¯¯æ¢å¤ï¼ˆææ…Œæ¨¡å¼ï¼‰ï¼šä»å‰©ä½™çš„è¾“å…¥ä¸­ä¸æ–­åˆ é™¤å­—ç¬¦ï¼Œç›´åˆ°è¯æ³•åˆ†æå™¨èƒ½å¤Ÿåœ¨å‰©ä½™è¾“å…¥çš„å¼€å¤´å‘ç°ä¸€ä¸ªæ­£ç¡®çš„å­—ç¬¦ä¸ºæ­¢</li></ul><h4 id="è¯­æ³•åˆ†æ">è¯­æ³•åˆ†æğŸ‘»</h4><ul><li>æœ€å³æ¨å¯¼ï¼ˆè§„èŒƒæ¨å¯¼ï¼‰<spanclass="math inline">\(\Leftrightarrow\)</span> æœ€å·¦è§„çº¦<spanclass="math inline">\(\Leftrightarrow\)</span>æœ€å³å¥å‹ï¼ˆè§„èŒƒå¥å‹ï¼‰</li><li>LL(1)æ–‡æ³•ä¸éœ€è¦å›æº¯ï¼Œæ˜¯ä¸€ç§ç¡®å®šçš„è‡ªé¡¶å‘ä¸‹åˆ†ææ–¹æ³•ï¼ˆé¢„æµ‹åˆ†ææ³•ï¼‰</li><li>é¢„æµ‹åˆ†æä¸­é”™è¯¯æ¢å¤ï¼ˆææ…Œæ¨¡å¼ï¼‰ï¼šå¿½ç•¥è¾“å…¥ä¸­çš„ä¸€äº›ç¬¦å·ï¼Œç›´åˆ°è¾“å…¥ä¸­å‡ºç°ç”±è®¾è®¡è€…é€‰å®šçš„åŒæ­¥è¯æ³•å•å…ƒé›†åˆä¸­çš„æŸä¸ªè¯æ³•å•å…ƒï¼Œå°†FOLLOWé›†ä¸­å…ƒç´ è®¾ç½®ä¸º<span class="math inline">\(synch\)</span><ul><li>å¦‚æœæ˜¯ç©ºï¼šå¿½ç•¥</li><li>å¦‚æœæ˜¯ <span class="math inline">\(synch\)</span>ï¼Œå¼¹å‡ºæ ˆé¡¶éç»ˆç»“ç¬¦</li><li>å¦‚æœæ˜¯ç»ˆç»“ç¬¦ä¸åŒ¹é…ï¼Œå¼¹å‡ºç»ˆç»“ç¬¦</li></ul></li><li>é¢„æµ‹åˆ†ææ³•å®ç°æ­¥éª¤ï¼š<ol type="1"><li>æ„é€ æ–‡æ³•</li><li>æ”¹é€ æ–‡æ³•ï¼šæ¶ˆé™¤äºŒä¹‰æ€§ã€æ¶ˆé™¤å·¦é€’å½’ã€æ¶ˆé™¤å›æº¯</li><li>æ±‚æ¯ä¸ªå˜é‡çš„FIRSTé›†å’ŒFOLLOWé›†ï¼Œä»è€Œæ±‚å¾—æ¯ä¸ªå€™é€‰å¼çš„SELECTé›†</li><li>æ£€æŸ¥æ˜¯ä¸æ˜¯ LL(1) æ–‡æ³•ã€‚è‹¥æ˜¯ï¼Œæ„é€ é¢„æµ‹åˆ†æè¡¨</li><li>å¯¹äºé€’å½’çš„é¢„æµ‹åˆ†æï¼Œæ ¹æ®é¢„æµ‹åˆ†æè¡¨ä¸ºæ¯ä¸€ä¸ªéç»ˆç»“ç¬¦ç¼–å†™ä¸€ä¸ªè¿‡ç¨‹ï¼›å¯¹äºéé€’å½’çš„é¢„æµ‹åˆ†æï¼Œå®ç°è¡¨é©±åŠ¨çš„é¢„æµ‹åˆ†æç®—æ³•</li></ol></li><li>æ¯æ¬¡è§„çº¦çš„ç¬¦å·ä¸²ç§°ä¸ºâ€œå¥æŸ„â€ï¼Œå¥æŸ„æ˜¯å¥å‹çš„æœ€å·¦ç›´æ¥çŸ­è¯­</li><li>LRåˆ†æä¸­é”™è¯¯æ¢å¤<ul><li>ææ…Œæ¨¡å¼ï¼šä¸¢å¼ƒè¾“å…¥ç¬¦å·</li><li>çŸ­è¯­å±‚æ¬¡</li></ul></li></ul><h4 id="è¯­æ³•åˆ¶å¯¼ç¿»è¯‘">è¯­æ³•åˆ¶å¯¼ç¿»è¯‘ğŸ</h4><ul><li><p>SDDæ˜¯å¯¹CFGçš„æ¨å¹¿</p></li><li><p><strong>æ³¨é‡Šåˆ†ææ ‘</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰å±æ€§å€¼çš„åˆ†ææ ‘</p></li><li><p>ç»ˆç»“ç¬¦åªèƒ½æœ‰ç»¼åˆå±æ€§</p></li><li><p>ä¸€ä¸ªæ²¡æœ‰å‰¯ä½œç”¨çš„SDDç§°ä¸ºå±æ€§æ–‡æ³•</p></li><li><p>S-SDDå¯ä»¥æŒ‰ç…§è‡ªåº•å‘ä¸Šé¡ºåºè®¡ç®—å±æ€§å€¼å¹¶ä¸”å®ç°</p></li><li><p>å¦‚æœ S-SDDçš„åŸºæœ¬æ–‡æ³•å¯ä»¥ä½¿ç”¨LRåˆ†ææŠ€æœ¯ï¼Œé‚£ä¹ˆå®ƒçš„SDTå¯ä»¥åœ¨LRè¯­æ³•åˆ†æä¸­å®ç°</p></li><li><p>æ‰©å±•æ ˆï¼š</p><table><thead><tr class="header"><th style="text-align: center;">çŠ¶æ€</th><th style="text-align: center;">ç¬¦å·</th><th style="text-align: center;">å±æ€§</th></tr></thead><tbody></tbody></table></li><li><p>å¦‚æœL-SDDçš„åŸºæœ¬æ–‡æ³•å¯ä»¥ä½¿ç”¨LLåˆ†ææŠ€æœ¯ã€LLæ–‡æ³•åˆ¤å®šã€‘ï¼Œé‚£ä¹ˆå®ƒçš„SDTå¯ä»¥åœ¨LLæˆ–LRè¯­æ³•åˆ†æä¸­å®ç°</p></li><li><p>å¦‚æœé€‰ç”¨éé€’å½’LLå®ç°ï¼Œæ‰©å±•è¯­æ³•åˆ†ææ ˆï¼š</p><table><thead><tr class="header"><th style="text-align: center;">action</th><th style="text-align: center;">A</th><th style="text-align: center;">Asyn</th></tr></thead><tbody></tbody></table><p>Açš„ç»§æ‰¿å±æ€§åœ¨Aä¸­</p></li><li><p>å¦‚æœé€‰ç”¨é€’å½’LLå®ç°ï¼šç»§æ‰¿å±æ€§æ˜¯å½¢å‚ï¼Œç»¼åˆå±æ€§çš„è¿”å›å€¼</p></li></ul><h4 id="ä¸­é—´ä»£ç ç”Ÿæˆ">ä¸­é—´ä»£ç ç”ŸæˆğŸ§</h4><ul><li>å±€éƒ¨å˜é‡å­˜å‚¨åˆ†é…ï¼šå¯¹äºå£°æ˜è¯­å¥ï¼Œä»ç±»å‹è¡¨è¾¾å¼å¯ä»¥çŸ¥é“è¯¥ç±»å‹<strong>åœ¨è¿è¡Œæ—¶åˆ»æ‰€éœ€çš„å­˜å‚¨å•å…ƒæ•°é‡</strong>ç§°ä¸ºç±»å‹çš„å®½åº¦ã€‚åœ¨<strong>ç¼–è¯‘æ—¶åˆ»</strong>ï¼Œå¯ä»¥ä½¿ç”¨ç±»å‹çš„å®½åº¦ä¸ºæ¯ä¸€ä¸ªåå­—<strong>åˆ†é…ä¸€ä¸ªç›¸å¯¹åœ°å€</strong>ã€‚åå­—çš„ç±»å‹å’Œç›¸å¯¹åœ°å€ä¿¡æ¯ä¿å­˜åœ¨ç›¸åº”çš„ç¬¦å·è¡¨è®°å½•ä¸­</li><li>é€»è¾‘è¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼šnot &gt; and &gt; or</li></ul><h4 id="è¿è¡Œå­˜å‚¨åˆ†é…">è¿è¡Œå­˜å‚¨åˆ†é…ğŸ‘½</h4><ul><li><p>æ´»åŠ¨è®°å½•ç»“æ„ï¼š</p><table><tbody><tr class="odd"><td style="text-align: center;">å®å‚</td><td style="text-align: center;"></td></tr><tr class="even"><td style="text-align: center;">è¿”å›å€¼</td><td style="text-align: center;"></td></tr><tr class="odd"><td style="text-align: center;">æ§åˆ¶é“¾</td><td style="text-align: center;"></td></tr><tr class="even"><td style="text-align: center;">è®¿é—®é“¾</td><td style="text-align: center;">è®¿é—®å­˜æ”¾äºå…¶ä»–æ´»åŠ¨è®°å½•çš„éå±€éƒ¨æ•°æ®</td></tr><tr class="odd"><td style="text-align: center;">ä¿å­˜çš„æœºå™¨çŠ¶æ€</td><td style="text-align: center;">è¿”å›åœ°å€å’Œå¯„å­˜å™¨ä¸­å†…å®¹</td></tr><tr class="even"><td style="text-align: center;">å±€éƒ¨å˜é‡</td><td style="text-align: center;">è¯¥è¿‡ç¨‹ä¸­å£°æ˜çš„æ•°æ®</td></tr><tr class="odd"><td style="text-align: center;">ä¸´æ—¶å˜é‡</td><td style="text-align: center;"></td></tr></tbody></table></li><li><p>æ ˆå¼å­˜å‚¨åˆ†é…å¯ä»¥ä¿è¯å®ƒçš„éå±€éƒ¨å˜é‡çš„ç›¸å¯¹åœ°å€æ€»æ˜¯å›ºå®šçš„ï¼Œå’Œè¿‡ç¨‹è°ƒç”¨åºåˆ—æ— å…³</p></li><li><p>æ´»åŠ¨æ ‘ï¼šç”¨æ¥æè¿°ç¨‹åºè¿è¡ŒæœŸé—´æ§åˆ¶è¿›å…¥å’Œç¦»å¼€å„ä¸ªæ´»åŠ¨æƒ…å†µçš„æ ‘</p></li><li><p>æ¯ä¸ªæ´»è·ƒçš„æ´»åŠ¨éƒ½æœ‰ä¸€ä¸ªä½äºæ§åˆ¶æ ˆä¸­çš„æ´»åŠ¨è®°å½•</p></li><li><p>å½“ä¸€ä¸ªè¿‡ç¨‹æ˜¯é€’å½’çš„æ—¶å€™ï¼Œå¸¸å¸¸ä¼šæœ‰è¯¥è¿‡ç¨‹çš„å¤šä¸ªæ´»åŠ¨è®°å½•åŒæ—¶å‡ºç°åœ¨æ ˆä¸­</p></li><li><p>top_spæŒ‡å‘æ´»åŠ¨è®°å½•ä¸­å±€éƒ¨æ•°æ®å¼€å§‹çš„ä½ç½®</p></li></ul><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202205181113824.png" alt="" style="zoom:67%;" /></p><ul><li>ç¬¦å·è¡¨ä½œç”¨ï¼šè¾…åŠ©ä»£ç ç”Ÿæˆã€ä¸€è‡´æ€§æ£€æŸ¥</li></ul><h4 id="ä»£ç ä¼˜åŒ–">ä»£ç ä¼˜åŒ–ğŸ‡</h4><ul><li>æœªç»å£°æ˜é”™è¯¯æ˜¯è¯­ä¹‰åˆ†ææ£€æµ‹å‡ºçš„ï¼ˆè¿˜æœ‰é‡å¤å®šå€¼ï¼‰ï¼›æœªç»å®šå€¼æ˜¯æ•°æ®æµåˆ†ææ£€æµ‹å‡ºçš„</li></ul><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202205181145527.png" alt="" style="zoom:67%;" /></p><h4 id="ä»£ç ç”Ÿæˆ">ä»£ç ç”ŸæˆğŸŒ</h4><ul><li>ä»£ç ç”Ÿæˆå™¨ä¸»è¦ä»»åŠ¡ï¼š<ul><li>æŒ‡ä»¤é€‰æ‹©</li><li>å¯„å­˜å™¨åˆ†é…å’ŒæŒ‡æ´¾</li><li>æŒ‡ä»¤æ’åº</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202205181204936.png" alt="" style="zoom:67%;" /></p>]]></content>
    
    
    <categories>
      
      <category>è¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç¼–è¯‘åŸç†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è½¯ä»¶è¿‡ç¨‹ä¸å·¥å…·</title>
    <link href="/post/f6d9959d.html"/>
    <url>/post/f6d9959d.html</url>
    
    <content type="html"><![CDATA[<p>å¯¹è½¯ä»¶å·¥ç¨‹ä¸å·¥å…·è¯¾ç¨‹çš„ä¸»è¦å†…å®¹è¿›è¡Œæ€»ç»“</p><span id="more"></span><h1 id="è½¯ä»¶è¿‡ç¨‹ä¸å·¥å…·">è½¯ä»¶è¿‡ç¨‹ä¸å·¥å…·</h1><h2 id="æ¦‚è¿°">1.æ¦‚è¿°ğŸ¥¡</h2><h3 id="è½¯ä»¶çš„åŸºæœ¬æ¦‚å¿µ">1.1 è½¯ä»¶çš„åŸºæœ¬æ¦‚å¿µ</h3><ul><li>1.1.1 ä»€ä¹ˆæ˜¯è½¯ä»¶<ul><li>è½¯ä»¶ï¼šä¸€ç»„å¯¹è±¡æˆ–é¡¹ç›®æ‰€å½¢æˆçš„ä¸€ä¸ªâ€œé…ç½®â€ï¼Œç”±<strong>ç¨‹åºã€æ–‡æ¡£å’Œæ•°æ®</strong>æ„æˆã€‚</li><li>â€œå˜åŒ–â€æ˜¯æ°¸æ’çš„ä¸»é¢˜</li></ul></li><li>1.1.2 è½¯ä»¶çš„å‘å±•<ul><li>é¢å‘æ„ä»¶çš„è½¯ä»¶ = æ„ä»¶ + æ¡†æ¶</li><li>é¢å‘æœåŠ¡çš„è½¯ä»¶ = æœåŠ¡ + æ¶ˆæ¯ + æ€»çº¿</li></ul></li></ul><h3 id="è½¯ä»¶å·¥ç¨‹çš„åŸºæœ¬æ¦‚å¿µ">1.2 è½¯ä»¶å·¥ç¨‹çš„åŸºæœ¬æ¦‚å¿µ</h3><ul><li>1.2.1 è½¯ä»¶å·¥ç¨‹äº§ç”Ÿçš„å†å²æ ¹æº</li><li>1.2.2 è½¯ä»¶å·¥ç¨‹çš„åŸºæœ¬æ¦‚å¿µ</li><li>1.2.3 è½¯ä»¶å·¥ç¨‹çš„çŸ¥è¯†ä½“ç³»</li></ul><h3 id="è½¯ä»¶å·¥ç¨‹å·¥å…·">1.3 è½¯ä»¶å·¥ç¨‹å·¥å…·</h3><ul><li>1.3.1 CASEå·¥å…·</li></ul><h2 id="è½¯ä»¶è¿‡ç¨‹æ ¸å¿ƒæ€æƒ³">2.è½¯ä»¶è¿‡ç¨‹æ ¸å¿ƒæ€æƒ³ğŸ˜¶â€ğŸŒ«ï¸</h2><h3 id="è½¯ä»¶å·¥ç¨‹çš„æœ¬è´¨ä¸åŒæŠ½è±¡å±‚æ¬¡ä¹‹é—´çš„æ˜ å°„ä¸è½¬æ¢">2.1è½¯ä»¶å·¥ç¨‹çš„æœ¬è´¨ï¼šä¸åŒæŠ½è±¡å±‚æ¬¡ä¹‹é—´çš„æ˜ å°„ä¸è½¬æ¢</h3><ul><li><p>ä»»ä½•è½¯ä»¶ç³»ç»Ÿå¼€å‘çš„å…±åŒæœ¬è´¨åœ¨äºï¼š<strong>ä»ç°å®ç©ºé—´çš„éœ€æ±‚åˆ°è®¡ç®—æœºç©ºé—´çš„è½¯ä»¶ä»£ç ä¹‹é—´çš„æ˜ å°„ä¸è½¬æ¢</strong></p></li><li><p>å•æ­¥æ˜ å°„ä¸å¤šæ­¥æ˜ å°„</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202204251337499.png" /></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œé»‘è‰²è™šçº¿æ˜¯æ­£ç¡®çš„å®ç°é€”å¾„ï¼Œçº¢è‰²æ˜¯å®é™…çš„å®ç°é€”å¾„ï¼ˆå•æ­¥æ˜ å°„ï¼‰ï¼Œè“è‰²ä¹Ÿæ˜¯å®é™…çš„å®ç°é€”å¾„ï¼ˆå¤šæ­¥æ˜ å°„ï¼‰</p><ul><li>è½¯ä»¶å·¥ç¨‹æœ¬è´¨ï¼šç”¨ä¸¥æ ¼çš„è§„èŒƒå’Œç®¡ç†æ‰‹æ®µæ¥ç¼©å°åå·®ï¼Œé€šè¿‡ç‰ºç‰²â€œæ—¶é—´â€æ¥æé«˜â€œè´¨é‡â€</li></ul></li><li><p>è½¯ä»¶å·¥ç¨‹çš„ä¸¤ä¸ªæ˜ å°„</p><ul><li>æ¦‚å¿µæ˜ å°„ï¼šé—®é¢˜ç©ºé—´çš„æ¦‚å¿µä¸è§£ç©ºé—´çš„æ¨¡å‹åŒ–æ¦‚å¿µä¹‹é—´çš„æ˜ å°„<ul><li>â€œå­¦ç”Ÿâ€ <span class="math inline">\(\rightarrow Class Student (No,Name, Dept, Grade)\)</span></li></ul></li><li>ä¸šåŠ¡é€»è¾‘æ˜ å°„ï¼šé—®é¢˜ç©ºé—´çš„å¤„ç†é€»è¾‘ä¸è§£ç©ºé—´å¤„ç†é€»è¾‘ä¹‹é—´çš„æ˜ å°„<ul><li>è®¡ç®—æŸç­å­¦ç”Ÿå¹³å‡åˆ†æ•°â†’</li></ul></li></ul><figure class="highlight c"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c"><span class="hljs-type">double</span> <span class="hljs-title function_">calculateAverageScore</span> <span class="hljs-params">(Struct [] scores)</span> <br>&#123;<br>    æ£€ç´¢;<br>    è®¡ç®—å¹³å‡åˆ†ç®—æ³•;<br>&#125;<br></code></pre></div></td></tr></table></figure></li><li><p>è½¯ä»¶å·¥ç¨‹ï¼šä¸åŒæŠ½è±¡å±‚æ¬¡ä¹‹é—´çš„æ˜ å°„è¿‡ç¨‹</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251337315.png" style="zoom:70%;" /></p><p>ç°å®ç©ºé—´çš„éœ€æ±‚<span class="math inline">\(\rightarrow\)</span>éœ€æ±‚è§„çº¦<span class="math inline">\(\rightarrow\)</span> è®¾è®¡è§„çº¦<spanclass="math inline">\(\rightarrow\)</span> ä»£ç </p></li></ul><h3 id="è½¯ä»¶å·¥ç¨‹æ‰€å…³æ³¨çš„ç›®æ ‡">2.2 è½¯ä»¶å·¥ç¨‹æ‰€å…³æ³¨çš„ç›®æ ‡</h3><ul><li><p>è½¯ä»¶å·¥ç¨‹æ‰€å…³æ³¨çš„å¯¹è±¡</p><ul><li><p>äº§å“ï¼šå„ä¸ªæŠ½è±¡å±‚æ¬¡çš„äº§å‡ºç‰©</p></li><li><p>è¿‡ç¨‹ï¼šåœ¨å„ä¸ªæŠ½è±¡å±‚æ¬¡ä¹‹é—´è¿›è¡Œæ˜ å°„å’Œè½¬æ¢</p><p>â€œäº§å“ä¸è¿‡ç¨‹äºŒç›¸æ€§â€ï¼šè¦æŠŠäºŒè€…ç»“åˆèµ·æ¥å»è€ƒè™‘ï¼Œè€Œä¸èƒ½å¿½ç•¥å…¶ä¸­ä»»ä½•ä¸€æ–¹</p></li></ul></li><li><p>è½¯ä»¶å·¥ç¨‹æ‰€å…³æ³¨çš„ç›®æ ‡</p><ol type="1"><li>åŠŸèƒ½æ€§éœ€æ±‚ï¼šè½¯ä»¶æ‰€å®ç°çš„åŠŸèƒ½è¾¾åˆ°å®ƒçš„è®¾è®¡è§„èŒƒå’Œæ»¡è¶³ç”¨æˆ·éœ€æ±‚çš„ç¨‹åº¦<ul><li>å®Œå¤‡æ€§ã€æ­£ç¡®æ€§ï¼ˆæè¿°è½¯ä»¶åœ¨éœ€æ±‚èŒƒå›´ä¹‹å†…çš„è¡Œä¸ºï¼‰ã€å¥å£®æ€§ï¼ˆæè¿°è½¯ä»¶åœ¨éœ€æ±‚èŒƒå›´ä¹‹å¤–çš„è¡Œä¸ºï¼‰ã€å¯é æ€§</li></ul></li><li>éåŠŸèƒ½æ€§éœ€æ±‚ï¼šç³»ç»Ÿèƒ½å¤Ÿå®Œæˆæ‰€æœŸæœ›çš„å·¥ä½œçš„æ€§èƒ½ä¸è´¨é‡<ul><li>æ•ˆç‡ã€å¯ç”¨æ€§ã€å¯ç»´æŠ¤æ€§ã€å¯ç§»æ¤æ€§ã€æ¸…æ™°æ€§ã€å®‰å…¨æ€§ã€å…¼å®¹æ€§ã€ç»æµæ€§ã€å•†ä¸šè´¨é‡</li></ul></li><li>ä¸åŒç›®æ ‡ä¹‹é—´çš„å…³ç³»ï¼šæŠ˜ä¸­</li></ol></li></ul><h3 id="è½¯ä»¶å¼€å‘ä¸­çš„å¤šè§’è‰²">2.3 è½¯ä»¶å¼€å‘ä¸­çš„å¤šè§’è‰²</h3><h3 id="è½¯ä»¶å·¥ç¨‹-æœ€ä½³å®è·µ">2.4 è½¯ä»¶å·¥ç¨‹ = æœ€ä½³å®è·µ</h3><p><del>ï¼ˆå½“ä½ æŠŠæ‰€æœ‰é”™è¯¯éƒ½çŠ¯è¿‡ä¹‹åï¼Œä½ å°±æ˜¯æ­£ç¡®çš„äº†ï¼‰</del></p><h3 id="è½¯ä»¶å·¥ç¨‹çš„å››ä¸ªæ ¸å¿ƒç†è®ºæ¦‚å¿µ">2.5 è½¯ä»¶å·¥ç¨‹çš„å››ä¸ªæ ¸å¿ƒç†è®ºæ¦‚å¿µ</h3><ul><li>åˆ†æ²»</li><li>å¤ç”¨</li><li>æŠ˜ä¸­</li><li>æ¼”åŒ–<ul><li>è½¯ä»¶ç³»ç»Ÿåœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­é¢ä¸´å„ç§å˜åŒ–</li><li>å¯ä¿®æ”¹æ€§ã€å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§</li></ul></li></ul><h2 id="è½¯ä»¶è¿‡ç¨‹æ¨¡å‹">3.è½¯ä»¶è¿‡ç¨‹æ¨¡å‹ğŸ“®</h2><h3 id="è½¯ä»¶è¿‡ç¨‹">3.1 è½¯ä»¶è¿‡ç¨‹</h3><ul><li><p>é»‘ç›’è¿‡ç¨‹å’Œç™½ç›’è¿‡ç¨‹</p><p>å°†æ•´ä¸ªè½¯ä»¶å¼€å‘è¿‡ç¨‹çœ‹æˆä¸€ä¸ªé»‘ç›’ï¼Œè€Œåœ¨å®é™…è½¯ä»¶å¼€å‘ä¸­è¦åœ¨é»‘ç›’ä¸­ç•™å‡ºç™½ç›’è¿›è¡Œåé¦ˆï¼ˆ<spanclass="math inline">\(feedback\)</span>ï¼‰</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251337643.png"  style="zoom:80%;" /></p></li></ul><h3 id="å…¸å‹è½¯ä»¶è¿‡ç¨‹æ¨¡å‹">3.2 å…¸å‹è½¯ä»¶è¿‡ç¨‹æ¨¡å‹</h3><h4 id="ç€‘å¸ƒæ¨¡å‹">3.2.1 ç€‘å¸ƒæ¨¡å‹</h4><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251337802.png" style="zoom:80%;" /></p><p>è¿‡ç¨‹ï¼šä»ä¸Šä¸€é¡¹æ´»åŠ¨æ¥æ”¶è¯¥é¡¹æ´»åŠ¨çš„å·¥ä½œå¯¹è±¡ä½œä¸ºè¾“å…¥ï¼Œåˆ©ç”¨è¿™ä¸€è¾“å…¥å®æ–½è¯¥é¡¹æ´»åŠ¨åº”å®Œæˆçš„å†…å®¹ç»™å‡ºè¯¥é¡¹æ´»åŠ¨çš„å·¥ä½œæˆæœï¼Œå¹¶ä½œä¸ºè¾“å‡ºä¼ ç»™ä¸‹ä¸€é¡¹æ´»åŠ¨ã€‚åŒæ—¶è¯„å®¡è¯¥é¡¹æ´»åŠ¨çš„å®æ–½ï¼Œè‹¥ç¡®è®¤ï¼Œåˆ™ç»§ç»­ä¸‹ä¸€é¡¹æ´»åŠ¨ï¼›å¦åˆ™è¿”å›å‰é¢ï¼Œç”šè‡³æ›´å‰é¢çš„æ´»åŠ¨ï¼ˆä½†æ˜¯è¿™ç§å›æº¯éå¸¸å›°éš¾ï¼‰</p><p>æ¯ä¸ªé˜¶æ®µéƒ½æœ‰é‡Œç¨‹ç¢‘å’Œæäº¤ç‰©ã€‚</p><ul><li>ä¼˜ç‚¹ï¼šè¿½æ±‚æ•ˆç‡ã€èƒ½å¤Ÿé€æ­¥ç¨³å®šçš„ä½¿é¡¹ç›®å‘å‰å‘å±•</li><li>ç¼ºç‚¹ï¼šè¿‡äºç†æƒ³åŒ–ã€å¿«é€Ÿå»ºç«‹èµ·æ¥çš„ç³»ç»Ÿç»“æ„å¯èƒ½ä¼šåœ¨åç»­çš„æŒç»­æ›´æ”¹ä¸­å¯¼è‡´è½¯ä»¶è´¨é‡ä½ä¸‹ã€å®¢æˆ·åªæœ‰åœ¨æœ«æœŸæ‰èƒ½å¾—åˆ°å¯æ‰§è¡Œç¨‹åº</li><li>é€‚åˆåœºæ™¯ï¼šè½¯ä»¶é¡¹ç›®è¾ƒå°ï¼Œå„æ¨¡å—é—´æ¥å£å®šä¹‰éå¸¸æ¸…æ™°ï¼›éœ€æ±‚åœ¨é¡¹ç›®å¼€å§‹ä¹‹å‰å·²ç»è¢«å…¨é¢çš„äº†è§£ï¼Œäº§å“çš„å®šä¹‰éå¸¸ç¨³å®šï¼›éœ€æ±‚åœ¨å¼€å‘ä¸­ä¸å¤ªå¯èƒ½å‘ç”Ÿé‡å¤§æ”¹å˜</li></ul><p>ç€‘å¸ƒæ¨¡å‹å¤ªç†æƒ³åŒ–ï¼Œå¤ªå•çº¯ï¼Œå·²ä¸å†é€‚åˆç°ä»£çš„è½¯ä»¶å¼€å‘æ¨¡å¼ï¼Œåœ¨å¤§å‹ç³»ç»Ÿå¼€å‘ä¸­å·²ç»å¾ˆå°‘ä½¿ç”¨ã€‚</p><h4 id="å¢é‡è¿‡ç¨‹æ¨¡å‹">3.2.2 å¢é‡è¿‡ç¨‹æ¨¡å‹</h4><p>æ— é¡»ç­‰åˆ°æ‰€æœ‰éœ€æ±‚éƒ½å‡ºæ¥æ‰è¿›è¡Œå¼€å‘ï¼Œåªè¦æŸä¸ªéœ€æ±‚çš„æ ¸å¿ƒéƒ¨åˆ†å‡ºæ¥ï¼Œå³å¯è¿›è¡Œå¼€å‘ï¼›å¯èƒ½è¿«åˆ‡éœ€è¦ä¸ºç”¨æˆ·è¿…é€Ÿæä¾›ä¸€å¥—åŠŸèƒ½æœ‰é™çš„è½¯ä»¶äº§å“ï¼Œç„¶ååœ¨åç»­ç‰ˆæœ¬ä¸­å†ç»†åŒ–å’Œæ‰©å±•åŠŸèƒ½ã€‚</p><ul><li><p>å¢é‡æ¨¡å‹</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251337609.png" style="zoom:60%;" /></p><p><strong>æœ¬è´¨ï¼šä»¥è¿­ä»£çš„æ–¹å¼è¿ç”¨ç€‘å¸ƒæ¨¡å‹</strong></p><p>å½“ä½¿ç”¨å¢é‡æ¨¡å‹æ—¶ï¼Œ<strong>ç¬¬1ä¸ªå¢é‡å¾€å¾€æ˜¯æ ¸å¿ƒçš„äº§å“</strong>ï¼Œå³ç¬¬1ä¸ªå¢é‡å®ç°äº†åŸºæœ¬çš„éœ€æ±‚ï¼Œä½†å¾ˆå¤šè¡¥å……çš„ç‰¹å¾è¿˜æ²¡æœ‰å‘å¸ƒã€‚å®¢æˆ·å¯¹æ¯ä¸€ä¸ªå¢é‡çš„ä½¿ç”¨å’Œè¯„ä¼°éƒ½ä½œä¸ºä¸‹ä¸€ä¸ªå¢é‡å‘å¸ƒçš„æ–°ç‰¹å¾å’ŒåŠŸèƒ½ï¼Œè¿™ä¸ªè¿‡ç¨‹åœ¨æ¯ä¸€ä¸ªå¢é‡å‘å¸ƒåä¸æ–­é‡å¤ï¼Œç›´åˆ°äº§ç”Ÿäº†æœ€ç»ˆçš„å®Œå–„äº§å“ã€‚<strong>å¢é‡æ¨¡å‹å¼ºè°ƒæ¯ä¸€ä¸ªå¢é‡å‡å‘å¸ƒä¸€ä¸ªå¯æ“ä½œçš„äº§å“ã€‚</strong></p><figure class="highlight markdown"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs markdown">ä¾‹ï¼šå¼€å‘ä¸€ä¸ªç±»ä¼¼äºWordçš„å­—å¤„ç†è½¯ä»¶<br><span class="hljs-code">å¢é‡1ï¼šæä¾›åŸºæœ¬çš„æ–‡ä»¶ç®¡ç†ã€ç¼–è¾‘å’Œæ–‡æ¡£ç”ŸæˆåŠŸèƒ½</span><br><span class="hljs-code">å¢é‡2ï¼šæä¾›é«˜çº§çš„æ–‡æ¡£ç¼–è¾‘åŠŸèƒ½</span><br><span class="hljs-code">å¢é‡3ï¼šå®ç°æ‹¼å†™å’Œè¯­æ³•æ£€æŸ¥åŠŸèƒ½</span><br><span class="hljs-code">å¢é‡4ï¼šå®Œæˆé«˜çº§çš„é¡µé¢æ’ç‰ˆåŠŸèƒ½</span><br></code></pre></div></td></tr></table></figure><ul><li>ä¼˜ç‚¹ï¼šèƒ½å¤Ÿå¿«é€Ÿæ¨å‡ºè½¯ä»¶äº§å“ï¼Œæ»¡è¶³å®¢æˆ·éœ€æ±‚ï¼Œå¯¹å®¢æˆ·æœ‰ä¸€å®šçš„é•‡å®šä½œç”¨ã€ä¸ç”¨ä¸€ä¸‹å­æŠ•å…¥å¤ªå¤šèµ„æºã€‚çµæ´»æ€§æ¯”è¾ƒé«˜</li><li>ç¼ºç‚¹ï¼šç”±äºè½¯ä»¶å…¶ä»–æ„ä»¶æ˜¯åæœŸåŠ å…¥çš„ï¼Œå®¹æ˜“å¯¼è‡´ç”±äºæ„ä»¶ä¹‹é—´çš„ä¸ç¨³å®šä»è€Œä½¿ç³»ç»Ÿå´©æºƒã€‚</li></ul></li><li><p>å¿«é€Ÿåº”ç”¨ç¨‹åºå¼€å‘(RAD)</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251337170.png" style="zoom:80%;" /></p><ul><li>ä¼˜ç‚¹ï¼š<strong>ä¾§é‡äºçŸ­å¼€å‘å‘¨æœŸ</strong>ï¼ˆä¸€èˆ¬ä¸º60~90å¤©ï¼‰çš„å¢é‡è¿‡ç¨‹æ¨¡å‹ï¼Œæ˜¯ç€‘å¸ƒæ¨¡å‹çš„é«˜é€Ÿå˜ä½“ï¼Œé€šè¿‡<strong>åŸºäºæ„ä»¶çš„æ„å»ºæ–¹æ³•</strong>å®ç°å¿«é€Ÿå¼€å‘ï¼›<strong>å¤šä¸ªå›¢é˜Ÿå¹¶è¡Œè¿›è¡Œå¼€å‘</strong>ï¼Œä½†å¯åŠ¨æ—¶é—´æœ‰å…ˆåï¼Œå…ˆå¯åŠ¨å›¢é˜Ÿçš„æäº¤ç‰©å°†ä½œä¸ºåå¯åŠ¨å›¢é˜Ÿçš„è¾“å…¥</li><li>ç¼ºç‚¹ï¼š</li><li><strong>éœ€è¦å¤§é‡çš„äººåŠ›èµ„æº</strong>æ¥åˆ›å»ºå¤šä¸ªç›¸å¯¹ç‹¬ç«‹çš„RADå›¢é˜Ÿï¼›å¦‚æœ<strong>æ²¡æœ‰åœ¨çŸ­æ—¶é—´å†…ä¸ºæ€¥é€Ÿå®Œæˆæ•´ä¸ªç³»ç»Ÿåšå¥½å‡†å¤‡</strong>ï¼ŒRADé¡¹ç›®å°†ä¼šå¤±è´¥ï¼›å¦‚æœ<strong>ç³»ç»Ÿä¸èƒ½è¢«åˆç†çš„æ¨¡å—åŒ–</strong>ï¼ŒRADå°†ä¼šå¸¦æ¥å¾ˆå¤šé—®é¢˜ï¼›<strong>æŠ€æœ¯é£é™©å¾ˆé«˜çš„æƒ…å†µä¸‹</strong>ï¼ˆé‡‡ç”¨å¾ˆå¤šæ–°æŠ€æœ¯ã€è½¯ä»¶éœ€ä¸å…¶ä»–å·²æœ‰è½¯ä»¶å»ºç«‹é›†æˆç­‰ç­‰ï¼‰ï¼Œä¸å®œé‡‡ç”¨RAD</li></ul></li><li><p>å¢é‡æ¨¡å‹å’ŒRADæ¨¡å‹åŒºåˆ«ï¼šå¢é‡æ¨¡å‹è¦æ±‚åæ¥çš„å¢é‡ä¸èƒ½å¯¹ä¹‹å‰çš„ç³»ç»Ÿç»“æ„è¿›è¡Œç ´å</p></li></ul><h4 id="æ¼”åŒ–è¿‡ç¨‹æ¨¡å‹">3.2.3 æ¼”åŒ–è¿‡ç¨‹æ¨¡å‹</h4><p>éœ€æ±‚çš„å˜æ›´é¢‘ç¹ï¼Œè¦æ±‚åœ¨éå¸¸çŸ­çš„æœŸé™å†…å®ç°ï¼Œä»¥å……åˆ†æ»¡è¶³å®¢æˆ·/ç”¨æˆ·è¦æ±‚ã€åŠæ—¶æŠ•å…¥å¸‚åœº</p><p>æœ¬è´¨ï¼šå¾ªç¯ã€åå¤ã€ä¸æ–­è°ƒæ•´å½“å‰ç³»ç»Ÿä»¥é€‚åº”éœ€æ±‚å˜åŒ–</p><p>ç”±äºæ„å»ºäº§å“æ‰€éœ€çš„å‘¨æœŸæ•°æ®ä¸ç¡®å®šï¼Œç»™é¡¹ç›®ç®¡ç†å¸¦æ¥å›°éš¾ï¼›æ¼”åŒ–é€Ÿåº¦å¤ªå¿«ï¼Œé¡¹ç›®é™·å…¥æ··ä¹±ï¼›æ¼”åŒ–é€Ÿåº¦å¤ªæ…¢ï¼Œå½±å“ç”Ÿäº§ç‡ï¼›ä¸ºè¿½æ±‚è½¯ä»¶çš„é«˜è´¨é‡è€Œç‰ºç‰²äº†å¼€å‘é€Ÿåº¦ã€çµæ´»æ€§å’Œå¯æ‰©å±•æ€§</p><ul><li><p>å¿«é€ŸåŸå‹æ³•</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251337551.png" style="zoom:80%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251337539.png" style="zoom:80%;" /></p><ul><li><p>åŸå‹çš„åˆ†ç±»</p><ul><li><p>æŠ›å¼ƒå¼åŸå‹</p><p>æœ€åˆçš„åŸå‹åœ¨å®Œæˆå¹¶å¾—åˆ°ç”¨æˆ·è®¤å¯ä¹‹åï¼Œå°†ä¸ä¼šä½œä¸ºäº¤ä»˜ç»™ç”¨æˆ·çš„æœ€ç»ˆç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯è¢«æŠ›å¼ƒï¼Œå…¶ç›®çš„åªæ˜¯ä¸ºäº†æ”¶é›†ä¸éªŒè¯éœ€æ±‚</p><p><strong>è¯¥ç±»åŸå‹æ˜¯ä¸å¯æ‰§è¡Œçš„</strong></p></li><li><p>æ¼”åŒ–å¼æ¨¡å‹</p><p>æœ€åˆæ„é€ çš„åŸå‹å°†å…·å¤‡è¾ƒé«˜çš„è´¨é‡ï¼ŒåŒ…å«äº†ç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œç„¶åé€šè¿‡æ”¶é›†éœ€æ±‚å¯¹å…¶è¿›è¡Œä¸æ–­çš„æ”¹å–„å’Œç²¾åŒ–</p><p><strong>è¯¥ç±»åŸå‹æ˜¯å¯æ‰§è¡Œçš„ï¼Œå°†æˆä¸ºæœ€ç»ˆç³»ç»Ÿçš„ä¸€éƒ¨åˆ†</strong></p></li></ul></li><li><p>ä¼˜ç‚¹ï¼šæé«˜å’Œæ”¹å–„å®¢æˆ·/ç”¨æˆ·çš„å‚ä¸ç¨‹åº¦ï¼Œæœ€å¤§ç¨‹åº¦çš„å“åº”ç”¨æˆ·éœ€æ±‚çš„å˜åŒ–</p></li><li><p>ç¼ºç‚¹ï¼šè®¾è®¡åŸå‹æ—¶æœªè€ƒè™‘æ•´ä½“è½¯ä»¶è´¨é‡å’Œé•¿æœŸçš„å¯ç»´æŠ¤æ€§ï¼Œç³»ç»Ÿç»“æ„è¾ƒå·®ï¼›æ··æ·†åŸå‹ç³»ç»Ÿå’Œæœ€ç»ˆç³»ç»Ÿï¼›é¢å¤–çš„å¼€å‘è´¹ç”¨</p></li></ul></li><li><p>èºæ—‹æ¨¡å‹</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251337809.png" style="zoom:70%;" /></p><p>åˆ¶å®šè®¡åˆ’<span class="math inline">\(\rightarrow\)</span>é£é™©åˆ†æ<span class="math inline">\(\rightarrow\)</span>å®æ–½å·¥ç¨‹<spanclass="math inline">\(\rightarrow\)</span>å®¢æˆ·è¯„ä»·<spanclass="math inline">\(\rightarrow\)</span>åˆ¶å®šè®¡åˆ’<spanclass="math inline">\(\rightarrow\)</span>...</p><figure class="highlight markdown"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs markdown">ä¾‹ï¼š<br>ç¬¬1åœˆï¼šå¼€å‘å‡ºäº§å“çš„è§„æ ¼è¯´æ˜<br>ç¬¬2åœˆï¼šå¼€å‘äº§å“çš„åŸå‹ç³»ç»Ÿ<br>ç¬¬3~nåœˆï¼šä¸æ–­çš„è¿­ä»£ï¼Œå¼€å‘ä¸åŒçš„è½¯ä»¶ç‰ˆæœ¬<br>æ ¹æ®æ¯åœˆäº¤ä»˜åç”¨æˆ·çš„åé¦ˆæ¥è°ƒæ•´é¢„ç®—ã€è¿›åº¦ã€éœ€è¦è¿­ä»£çš„æ¬¡æ•°<br></code></pre></div></td></tr></table></figure><p><strong>ä¸å¢é‡ã€RADç­‰çš„æœ€å¤§åŒºåˆ«åœ¨äºé‡è§†é£é™©è¯„ä¼°</strong></p><ul><li>å‡ºå‘ç‚¹ï¼šå¼€å‘è¿‡ç¨‹ä¸­åŠæ—¶è¯†åˆ«å’Œåˆ†æé£é™©ï¼Œå¹¶é‡‡å–é€‚å½“æªæ–½ä»¥æ¶ˆé™¤æˆ–å‡å°‘é£é™©å¸¦æ¥çš„å±å®³</li><li>ä¼˜ç‚¹ï¼šç»“åˆäº†åŸå‹çš„è¿­ä»£æ€§è´¨ä¸ç€‘å¸ƒæ¨¡å‹çš„ç³»ç»Ÿæ€§å’Œå¯æ§æ€§ï¼Œæ˜¯ä¸€ç§<strong>é£é™©é©±åŠ¨å‹çš„è¿‡ç¨‹æ¨¡å‹</strong></li><li>ç¼ºç‚¹ï¼šå‘¨æœŸé•¿ï¼Œæˆæœ¬é«˜ï¼Œè½¯ä»¶å¼€å‘äººå‘˜åº”è¯¥æ“…é•¿å¯»æ‰¾å¯èƒ½çš„é£é™©</li></ul></li></ul><h4 id="å…¶ä»–è¿‡ç¨‹æ¨¡å‹">3.2.4 å…¶ä»–è¿‡ç¨‹æ¨¡å‹</h4><ul><li>å½¢å¼åŒ–è¿‡ç¨‹</li><li>è½¯ä»¶å¤ç”¨è¿‡ç¨‹</li></ul><h3 id="æ¡ˆä¾‹åˆ†æ">3.3 æ¡ˆä¾‹åˆ†æ</h3><h2 id="æ•æ·æ–¹æ³•ä¸è¿‡ç¨‹">4.æ•æ·æ–¹æ³•ä¸è¿‡ç¨‹ğŸ‘</h2><h4 id="æ•æ·è¿‡ç¨‹æ¨¡å‹">4.1 æ•æ·è¿‡ç¨‹æ¨¡å‹</h4><p>å¼€å‘è¿‡ç¨‹ä¸­<strong>â€œå˜åŒ–â€</strong>æ˜¯æ— å¤„ä¸åœ¨çš„ï¼Œè¦å°†<strong>â€œå˜åŒ–â€</strong>çš„æ„è¯†è´¯ç©¿åœ¨æ¯ä¸€é¡¹å¼€å‘æ´»åŠ¨ä¸­ã€‚</p><p><strong>â€œå°æ­¥å¿«è·‘ï¼ŒåŠæ—¶åé¦ˆâ€</strong></p><p>æœ¬è´¨ï¼š<strong>ä»¥å¿«é€Ÿçš„å¢é‡å’Œè¿­ä»£æ–¹å¼è¿›è¡Œè½¯ä»¶å¼€å‘</strong></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251337761.png" style="zoom:75%;" /></p><p>æ•æ·è¿‡ç¨‹ä¸­æœ€é‡è¦çš„å› ç´ ï¼š<strong>äºº</strong></p><h4 id="æé™ç¼–ç¨‹xp">4.2 æé™ç¼–ç¨‹(XP)</h4><p>planning(ç”¨æˆ·æ•…äº‹User story) â†’ design(æµ‹è¯•é©±åŠ¨çš„å¼€å‘TDD) â†’coding(ç»“å¯¹ç¼–ç¨‹Pair programming) â†’ test(æŒç»­é›†æˆContinuousinstegration)</p><ul><li><p>XP planning</p><p>ç”¨æˆ·æ•…äº‹ï¼š<strong>å®¢æˆ·</strong>ä¸ºç”¨æˆ·æ•…äº‹æŒ‡å®š<strong>ä¼˜å…ˆçº§</strong>ï¼Œ<strong>XPå›¢é˜Ÿ</strong>ä¸ºç”¨æˆ·æ•…äº‹æŒ‡å®š<strong>æˆæœ¬</strong></p><p>å°†è‹¥å¹²ä¸ªç”¨æˆ·æ•…äº‹æŒ‡å®šä¸º<strong>ä¸‹ä¸€æ¬¡å‘å¸ƒçš„å¢é‡</strong></p><p>è§„åˆ’<strong>æ•´ä½“è¿›åº¦</strong></p></li><li><p>XP design</p><p>éµå¾ª<span class="math inline">\(KIS(Keep\ It\Simple)\)</span>åŸåˆ™</p><p>è®¾è®¡æ¨¡å‹ï¼šé¢å‘å¯¹è±¡æ–¹æ³•ï¼Œ<spanclass="math inline">\(CRC\)</span>å¡ç‰‡</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251337682.png" style="zoom:70%;" /></p><p>é‡åˆ°å›°éš¾é—®é¢˜ï¼šåˆ›å»ºåŸå‹</p><p>å¯¹è®¾è®¡æ–¹æ¡ˆä¸æ–­<strong>é‡æ„</strong></p></li><li><p>XP coding &amp; test</p><p>æµ‹è¯•é©±åŠ¨çš„å¼€å‘<span class="math inline">\((TDD):\)</span></p><ul><li><p>ç¼–ç å‰è®¾è®¡<strong>å•å…ƒæµ‹è¯•ç”¨ä¾‹</strong></p></li><li><p><strong>ç»“å¯¹ç¼–ç¨‹</strong></p><ul><li><p>é©¾é©¶å‘˜ï¼šæ§åˆ¶é”®ç›˜è¾“å…¥çš„äºº</p></li><li><p>é¢†èˆªå‘˜ï¼šèµ·åˆ°é¢†èˆªï¼Œæé†’çš„ä½œç”¨</p></li><li><p>é©¾é©¶å‘˜å’Œé¢†èˆªå‘˜ä¸æ–­è½®æ¢è§’è‰²ï¼Œä¸å®œè¿ç»­å·¥ä½œè¶…è¿‡ä¸€å°æ—¶ï¼›é¢†èˆªå‘˜è¦æ§åˆ¶æ—¶é—´</p></li><li><p>ä¸»åŠ¨å‚ä¸ã€åªæœ‰æ°´å¹³ä¸Šçš„å·®è·ï¼Œæ²¡æœ‰çº§åˆ«ä¸Šçš„å·®å¼‚</p></li><li><p>ç¨‹åºå„æ–¹é¢çš„è´¨é‡å–å†³äº<strong>ä¸€å¯¹ç¨‹åºå‘˜ä¸­å„æ–¹é¢æ°´å¹³è¾ƒé«˜çš„é‚£ä¸€ä½</strong></p></li></ul></li></ul></li></ul><p>ä½•ä»¥è°“â€œæé™â€ï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251337950.png" style="zoom:80%;" /></p><h4 id="scrum">4.3 Scrum</h4><p>æ•´ä¸ªå¼€å‘è¿‡ç¨‹ç”±è‹¥å¹²ä¸ªçŸ­çš„è¿­ä»£å‘¨æœŸç»„æˆï¼Œä¸€ä¸ªçŸ­çš„è¿­ä»£å‘¨æœŸç§°ä¸ºä¸€ä¸ª<spanclass="math inline">\(Sprint\)</span>ï¼Œæ¯ä¸ª<spanclass="math inline">\(Sprint\)</span>çš„å»ºè®®é•¿åº¦æ˜¯2åˆ°4å‘¨</p><p>ä½¿ç”¨äº§å“åˆ—è¡¨<span class="math inline">\(Product\Backlog\)</span>æ¥ç®¡ç†éœ€æ±‚ï¼Œäº§å“åˆ—è¡¨<span class="math inline">\(Product\Backlog\)</span>æ˜¯ä¸€ä¸ªæŒ‰ç…§å•†ä¸šä»·å€¼æ’åºçš„éœ€æ±‚åˆ—è¡¨ï¼Œåˆ—è¡¨æ¡ç›®çš„ä½“ç°å½¢å¼é€šå¸¸ä¸ºç”¨æˆ·æ•…äº‹</p><p>å…ˆå¼€å‘å¯¹äºç”¨æˆ·å…·æœ‰è¾ƒé«˜ä»·å€¼çš„éœ€æ±‚</p><p>åœ¨<span class="math inline">\(Sprint\)</span>ä¸­ï¼Œ<spanclass="math inline">\(Scrum\)</span>å›¢é˜Ÿä»äº§å“åˆ—è¡¨<spanclass="math inline">\(Product\Backlog\)</span>ä¸­æŒ‘é€‰æœ€é«˜ä¼˜å…ˆçº§çš„éœ€æ±‚è¿›è¡Œå¼€å‘ï¼›æŒ‘é€‰çš„éœ€æ±‚åœ¨<spanclass="math inline">\(Sprint\)</span>è®¡åˆ’ä¼šè®®ä¸Šç»è¿‡è®¨è®ºã€åˆ†æå’Œä¼°ç®—å¾—åˆ°ç›¸åº”çš„ä»»åŠ¡åˆ—è¡¨(<spanclass="math inline">\(Sprint\ backlog\)</span>)</p><p>åœ¨æ¯ä¸ªè¿­ä»£ç»“æŸæ—¶ï¼Œ<spanclass="math inline">\(Scrum\)</span>å›¢é˜Ÿå°†æäº¤æ½œåœ¨å¯äº¤ä»˜çš„äº§å“å¢é‡</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20211210103202604.png" style="zoom:60%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251338325.png" style="zoom:55%;" /></p><p><span class="math inline">\(Scrum\)</span>ä¸­çš„å…­é¡¹æ´»åŠ¨</p><ul><li><span class="math inline">\(Sprint\)</span>(å†²åˆº)ï¼šä»£è¡¨ä¸€ä¸ª1-4å‘¨çš„è¿­ä»£</li><li>å‘å¸ƒè®¡åˆ’ä¼šè®®<span class="math inline">\((Release\ Planning\Meeting)\rightarrow\ Product\ Backlog\)</span></li><li><span class="math inline">\(Sprint\)</span>è®¡åˆ’ä¼šè®®<spanclass="math inline">\((Sprint\ Planning\ Meeting) \rightarrow\ Sprint\Backlog\)</span></li><li>æ¯æ—¥ç«™ä¼š<span class="math inline">\((Daily\ Scrum\Meeting)\)</span></li><li><span class="math inline">\(Sprint\)</span>è¯„å®¡ä¼š<spanclass="math inline">\((Sprint\ Review\ Meeting)\)</span></li><li><span class="math inline">\(Sprint\)</span>å›é¡¾ä¼šè®®<spanclass="math inline">\((Sprint\ Retrospective\ Meeting)\)</span></li></ul><p>æ¯æ—¥ç«™ä¼šï¼š</p><ul><li>æˆ‘æ˜¨å¤©åšäº†ä»€ä¹ˆ<span class="math inline">\((What\ have\ you\ done\since\ yesterday? )\)</span></li><li>æˆ‘ä»Šå¤©è¦åšä»€ä¹ˆ<span class="math inline">\((What\ are\ you\ planning\to\ do\ today? )\)</span></li><li>æˆ‘ç¢°åˆ°äº†å“ªäº›é—®é¢˜<span class="math inline">\((Do\ you\ have\ any\problems\ that\ would\ prevent\ you\ from\ accomplishing\ your\ goal\?)\)</span></li></ul><p><span class="math inline">\(Sprint\ Burndown\chart\)</span>ï¼šç‡ƒå°½å›¾ï¼Œç”¨äºè¡¨ç¤ºå‰©ä½™å·¥ä½œé‡çš„å·¥ä½œå›¾è¡¨ï¼Œç”±æ¨ªè½´ï¼ˆXï¼‰å’Œçºµè½´ï¼ˆYï¼‰ç»„æˆï¼Œæ¨ªè½´è¡¨ç¤ºæ—¶é—´ï¼Œçºµè½´è¡¨ç¤ºå·¥ä½œé‡ã€‚è¿™ç§å›¾è¡¨å¯ä»¥ç›´è§‚çš„é¢„æµ‹ä½•æ—¶å·¥ä½œå°†å…¨éƒ¨å®Œæˆã€‚</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251338703.png" style="zoom:60%;" /></p><h4 id="ä¸ä¼ ç»Ÿå¼€å‘è¿‡ç¨‹æ¨¡å‹çš„å¯¹æ¯”">4.4 ä¸ä¼ ç»Ÿå¼€å‘è¿‡ç¨‹æ¨¡å‹çš„å¯¹æ¯”</h4><ul><li>ç€‘å¸ƒæ¨¡å‹<ul><li>å°†å…¨éƒ¨éœ€æ±‚ä»¥æ•´ä½“æ–¹å¼å‘å‰æ¨è¿›ï¼Œæ— è¿­ä»£<br /></li><li>åŸºæœ¬æ¨¡å‹</li></ul></li><li>å¢é‡æ¨¡å‹<ul><li>å°†éœ€æ±‚åˆ†æˆå¤šä»½ï¼Œä¸²è¡Œæ¨è¿›ï¼Œæ— è¿­ä»£</li><li>ä¸²è¡Œçš„ç€‘å¸ƒ</li></ul></li><li>RADæ¨¡å‹<ul><li>å°†éœ€æ±‚åˆ†æˆå¤šä»½ï¼Œå¹¶è¡Œæ¨è¿›ï¼Œæ— è¿­ä»£</li><li>å¹¶è¡Œçš„ç€‘å¸ƒ</li></ul></li><li>åŸå‹æ¨¡å‹<ul><li>è¿­ä»£</li><li>åŸºæœ¬æ¨¡å‹</li></ul></li><li>èºæ—‹æ¨¡å‹<ul><li>æŒ‰ç€‘å¸ƒé˜¶æ®µåˆ’åˆ†ï¼Œå„é˜¶æ®µåˆ†åˆ«è¿­ä»£(åŸå‹+é£é™©åˆ†æ)</li><li>åŸå‹+ç€‘å¸ƒ</li></ul></li><li>æ•æ·æ¨¡å‹<ul><li>å°†éœ€æ±‚åˆ†æˆå°½é‡å°çš„ç¢ç‰‡ï¼Œä»¥ç¢ç‰‡ä¸ºå•ä½è¿›è¡Œé«˜é€Ÿè¿­ä»£</li><li>å¢é‡+è¿­ä»£</li></ul></li></ul><h4 id="æ•æ·æ¡ˆä¾‹åˆ†æ">4.5 æ•æ·æ¡ˆä¾‹åˆ†æ</h4><h4 id="æ€»ç»“">4.6æ€»ç»“</h4><ul><li><span class="math inline">\(XP\)</span>ä¸<spanclass="math inline">\(Scrum\)</span>åŒºåˆ«<ul><li>è¿­ä»£é•¿åº¦çš„ä¸åŒã€‚<span class="math inline">\(XP\)</span>çš„ä¸€ä¸ª<spanclass="math inline">\(Sprint\)</span>çš„è¿­ä»£é•¿åº¦å¤§è‡´ä¸º1~2å‘¨, è€Œ<spanclass="math inline">\(Scrum\)</span>çš„è¿­ä»£é•¿åº¦ä¸€èˆ¬ä¸º 2~ 4å‘¨ã€‚</li><li>åœ¨è¿­ä»£ä¸­, æ˜¯å¦å…è®¸ä¿®æ”¹éœ€æ±‚ã€‚<spanclass="math inline">\(XP\)</span>åœ¨ä¸€ä¸ªè¿­ä»£ä¸­ï¼Œå¦‚æœä¸€ä¸ªç”¨æˆ·æ•…äº‹è¿˜æ²¡æœ‰å®ç°ï¼Œåˆ™å¯ä»¥è€ƒè™‘ç”¨å¦å¤–çš„éœ€æ±‚å°†å…¶æ›¿æ¢ï¼Œ æ›¿æ¢çš„åŸåˆ™æ˜¯éœ€æ±‚å®ç°çš„æ—¶é—´é‡æ˜¯ç›¸ç­‰çš„ã€‚è€Œ<spanclass="math inline">\(Scrum\)</span>æ˜¯ä¸å…è®¸è¿™æ ·åšçš„ï¼Œä¸€æ—¦è¿­ä»£å¼€å·¥ä¼šå®Œæ¯•,ä»»ä½•éœ€æ±‚éƒ½ä¸å…è®¸æ·»åŠ è¿›æ¥ï¼Œå¹¶æœ‰<span class="math inline">\(Scrum\Master\)</span>ä¸¥æ ¼æŠŠå…³ï¼Œä¸å…è®¸å¼€å‘å›¢é˜Ÿæ”¶åˆ°å¹²æ‰°ã€‚</li><li>åœ¨è¿­ä»£ä¸­ï¼Œç”¨æˆ·æ•…äº‹æ˜¯å¦ä¸¥æ ¼æŒ‰ç…§ä¼˜å…ˆçº§åˆ«æ¥å®ç°ã€‚<spanclass="math inline">\(XP\)</span>æ˜¯åŠ¡å¿…è¦éµå®ˆä¼˜å…ˆçº§åˆ«çš„ã€‚ ä½†<spanclass="math inline">\(Scrum\)</span>åœ¨è¿™ç‚¹åšå¾—å¾ˆçµæ´»ï¼Œå¯ä»¥ä¸æŒ‰ç…§ä¼˜å…ˆçº§åˆ«æ¥åšã€‚</li><li>è½¯ä»¶çš„å®æ–½è¿‡ç¨‹ä¸­ï¼Œæ˜¯å¦é‡‡ç”¨ä¸¥æ ¼çš„å·¥ç¨‹æ–¹æ³•ï¼Œä¿è¯è¿›åº¦æˆ–è€…è´¨é‡ã€‚<spanclass="math inline">\(Scrum\)</span>æ²¡æœ‰å¯¹è½¯ä»¶çš„æ•´ä¸ªå®æ–½è¿‡ç¨‹å¼€å‡ºä¸¥æ ¼å·¥ç¨‹å®è·µçš„å¤„æ–¹ï¼Œè¦æ±‚å¼€å‘è€…è‡ªè§‰ä¿è¯ï¼›ä½†<spanclass="math inline">\(XP\)</span>å¯¹æ•´ä¸ªæµç¨‹æ–¹æ³•å®šä¹‰éå¸¸ä¸¥æ ¼ï¼Œè§„å®šéœ€è¦é‡‡ç”¨<spanclass="math inline">\(TDD\)</span>,è‡ªåŠ¨æµ‹è¯•ï¼Œç»“å¯¹ç¼–ç¨‹ï¼Œç®€å•è®¾è®¡ï¼Œé‡æ„ç­‰çº¦æŸå›¢é˜Ÿçš„è¡Œä¸ºã€‚</li></ul></li></ul><h2 id="è½¯ä»¶é¡¹ç›®ç®¡ç†">5.è½¯ä»¶é¡¹ç›®ç®¡ç†ğŸ¦„</h2><p>è½¯ä»¶é¡¹ç›®çš„ç‰¹å¾ï¼š</p><ul><li>ä¸å¯è§æ€§</li><li>ä¸ç¡®å®šæ€§</li><li>å¤šå˜åŒ–æ€§</li><li>é«˜æŠ€èƒ½åŠå…¶é«˜æµé€šæ€§</li></ul><h4 id="è½¯ä»¶é¡¹ç›®ç®¡ç†çš„æ¡ˆä¾‹">5.1 è½¯ä»¶é¡¹ç›®ç®¡ç†çš„æ¡ˆä¾‹</h4><p>è½¯ä»¶é¡¹ç›®ç®¡ç†çš„<span class="math inline">\(4P\)</span></p><ul><li>äººå‘˜</li><li>äº§å“</li><li>è¿‡ç¨‹</li><li>é¡¹ç›®</li></ul><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251338571.png"/></p><h4 id="äººå‘˜people">5.2 äººå‘˜(People)</h4><p>è½¯ä»¶å¼€å‘å›¢é˜Ÿçš„ç»„ç»‡æ–¹å¼ï¼š</p><ul><li>ä¸€çªèœ‚æ¨¡å¼</li><li>ä¸»æ²»åŒ»å¸ˆæ¨¡å¼<ul><li>æ˜æ˜Ÿæ¨¡å¼</li></ul></li><li>ç¤¾åŒºæ¨¡å¼<ul><li>å¼€æºé¡¹ç›®</li></ul></li><li>äº¤å“ä¹å›¢æ¨¡å¼<ul><li>â€œå·¥å‚â€ <span class="math inline">\(\rightarrow\)</span>â€œè§„æ ¼ä¸¥æ ¼â€</li></ul></li><li>çˆµå£«ä¹æ¨¡å¼<ul><li>ç±»ä¼¼äºä¸€ç¾¤å¤©æ‰æ„æˆçš„æ•æ·å›¢é˜Ÿ<spanclass="math inline">\(\rightarrow\)</span>â€œåŠŸå¤«åˆ°å®¶â€</li></ul></li><li>åŠŸèƒ½å›¢é˜Ÿæ¨¡å¼</li><li>å®˜åƒšæ¨¡å¼</li></ul><p>å¤§å‹é¡¹ç›®çš„æŠ€æœ¯ç®¡ç†ç»„ç»‡ç»“æ„</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251338920.png" style="zoom:80%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251338516.png"  style="zoom:80%;" /></p><h4 id="äº§å“product">5.3 äº§å“(Product)</h4><p>ç¡®å®šè½¯ä»¶èŒƒå›´<span class="math inline">\(\rightarrow\)</span>åˆ†æ²»</p><p>äº§å“ç»“æ„åˆ†è§£<span class="math inline">\(PBS\)</span></p><ul><li>é€šè¿‡åˆ†å±‚çš„æ ‘å‹ç»“æ„æ¥å®šä¹‰å’Œç»„ç»‡<strong>é¡¹ç›®èŒƒå›´å†…çš„æ‰€æœ‰äº§å‡ºç‰©(äº§å“)</strong>ï¼Œè‡ªé¡¶å‘ä¸‹ï¼Œé€çº§ç»†åˆ†</li></ul><h4 id="è¿‡ç¨‹process">5.4 è¿‡ç¨‹(Process)</h4><p>é€‰æ‹©åˆé€‚çš„è½¯ä»¶è¿‡ç¨‹æ¨¡å‹<spanclass="math inline">\(\rightarrow\)</span>æ ¹æ®æ‰€é€‰çš„è¿‡ç¨‹æ¨¡å‹ï¼Œå¯¹å…¶è¿›è¡Œé€‚åº”æ€§ä¿®æ”¹<spanclass="math inline">\(\rightarrow\)</span>ç¡®å®šè¿‡ç¨‹ä¸­æ‰€åŒ…å«çš„å·¥ä½œä»»åŠ¡åˆ—è¡¨</p><p>å·¥ä½œç»“æ„åˆ†è§£<span class="math inline">\(WBS\)</span></p><ul><li>é€šè¿‡åˆ†å±‚çš„æ ‘å‹ç»“æ„æ¥å®šä¹‰å’Œç»„ç»‡<strong>å·¥ä½œä»»åŠ¡ä¹‹é—´çš„åˆ†è§£å…³ç³»</strong>ï¼Œè‡ªé¡¶å‘ä¸‹ï¼Œé€çº§ç»†åˆ†</li></ul><h4 id="é¡¹ç›®project">5.5 é¡¹ç›®(Project)</h4><p><span class="math inline">\(W^{5}HH\)</span>åŸåˆ™</p><ul><li><span class="math inline">\(Why\)</span> ä¸ºä»€ä¹ˆè¦å¼€å‘è¿™ä¸ªç³»ç»Ÿï¼Ÿ</li><li><span class="math inline">\(What\)</span> å°†è¦åšä»€ä¹ˆï¼Ÿ</li><li><span class="math inline">\(When\)</span> ä»€ä¹ˆæ—¶å€™åšï¼Ÿ</li><li><span class="math inline">\(Who\)</span> æŸåŠŸèƒ½ç”±è°æ¥åšï¼Ÿ</li><li><span class="math inline">\(Where\)</span> æœºæ„ç»„ç»‡ä½äºä½•å¤„ï¼Ÿ</li><li><span class="math inline">\(How\)</span>å¦‚ä½•å®ŒæˆæŠ€æœ¯ä¸ç®¡ç†å·¥ä½œï¼Ÿ</li><li><span class="math inline">\(How\ much\)</span>å„ç§èµ„æºåˆ†åˆ«éœ€è¦å¤šå°‘ï¼Ÿ</li></ul><h4 id="å¯è¡Œæ€§åˆ†æä¸ä¼°ç®—">5.6 å¯è¡Œæ€§åˆ†æä¸ä¼°ç®—</h4><h4 id="é¡¹ç›®è¿›åº¦è®¡åˆ’ä¸ç›‘æ§">5.7 é¡¹ç›®è¿›åº¦è®¡åˆ’ä¸ç›‘æ§</h4><p>ç”˜ç‰¹å›¾ï¼›æè¿°ä»»åŠ¡çš„è¿›åº¦å®‰æ’</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251338913.png" style="zoom:80%;" /></p><p>ä¸‹å›¾æ˜¯ä¸€å¼ é¡¹ç›®è¿›åº¦è·Ÿè¸ªç”˜ç‰¹å›¾ï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251338810.png" style="zoom:80%;" /></p><p><span class="math inline">\(T_{x}\)</span>æ ‡è¯†<spanclass="math inline">\(task\)</span>ï¼Œ<spanclass="math inline">\(M_{x}\)</span>æ ‡è¯†é‡Œç¨‹ç¢‘ï¼Œç™½è‰²æ ‡è¯†å„é¡¹ç›®è®¡åˆ’å¼€å§‹/ç»“æŸæ—¥æœŸï¼Œç™½è‰²+ è“è‰²æ ‡è¯†å„é¡¹ç›®å®é™…å¼€å§‹/ç»“æŸæ—¥æœŸã€‚</p><p><spanclass="math inline">\(XP/Scrum\)</span>æ•æ·å¼€å‘ä¸­çš„è¿›åº¦è®¡åˆ’ä¸ç›‘æ§</p><ul><li><p>ä»¥â€œè¿­ä»£â€ä¸ºå•ä½ï¼šæ¯æ¬¡è¿­ä»£åŒ…å«å¤šå°‘ä¸ªç”¨æˆ·æ•…äº‹æˆ–ç”¨ä¾‹</p></li><li><p>æ¯æ¬¡è¿­ä»£ä¸º30å¤©å·¦å³</p></li><li><p>é’ˆå¯¹æ¯ä¸ªç”¨æˆ·æ•…äº‹ï¼Œå›¢é˜Ÿæˆå‘˜è”åˆä¼°ç®—å’Œåå•†å¼€å‘ä»£ä»·(æ—¶é—´)</p></li><li><p>ä½¿ç”¨ä»»åŠ¡å¢™(<span class="math inline">\(Task\Board\)</span>)/ç‡ƒå°½å›¾(<span class="math inline">\(Burndown\Chart\)</span>)ç­‰ä½œä¸ºè¿›åº¦ç›‘æ§å·¥å…·ï¼Œè¯„ä¼°è¿­ä»£çš„å½“å‰è¿›å±•æƒ…å†µ</p></li></ul><h2 id="è½¯ä»¶æ¼”åŒ–ä¸é…ç½®ç®¡ç†">6.è½¯ä»¶æ¼”åŒ–ä¸é…ç½®ç®¡ç†ğŸ³</h2><h4 id="è½¯ä»¶æ¼”åŒ–">6.1 è½¯ä»¶æ¼”åŒ–</h4><p>è½¯ä»¶æ¼”åŒ–çš„<span class="math inline">\(Lehman\)</span>å®šå¾‹</p><ul><li><p>æŒç»­å˜åŒ–ï¼šç°å®ä¸–ç•Œçš„ç³»ç»Ÿè¦ä¹ˆå˜å¾—è¶Šæ¥è¶Šæ²¡æœ‰ä»·å€¼ï¼Œè¦ä¹ˆè¿›è¡ŒæŒç»­ä¸æ–­çš„å˜åŒ–ä»¥é€‚åº”ç¯å¢ƒçš„å˜åŒ–ï¼›ç¯å¢ƒå˜åŒ–äº§ç”Ÿè½¯ä»¶ä¿®æ”¹ï¼Œè½¯ä»¶ä¿®æ”¹åˆç»§ç»­ä¿ƒè¿›ç¯å¢ƒå˜åŒ–</p></li><li><p>å¤æ‚åº¦é€æ¸å¢å¤§ï¼šå½“ç³»ç»Ÿé€æ¸å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå…¶ç»“æ„å’ŒåŠŸèƒ½å°†å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œå¹¶é€æ¸éš¾ä»¥ç»´æŠ¤å¹¶å¤±å»æ§åˆ¶ï¼Œç›´è‡³æ— æ³•ç»§ç»­æ¼”åŒ–ï¼Œä»è€Œéœ€è¦å¤§é‡é¢å¤–çš„èµ„æºå’Œç»´æŠ¤å·¥ä½œæ¥ä¿æŒç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œï¼›è½¯ä»¶ä¿®æ”¹ä¼šå¼•å…¥æ–°çš„é”™è¯¯ï¼Œé€ æˆæ•…éšœç‡çš„å‡é«˜</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20211211095223736.png" style="zoom:80%;" /></p></li></ul><p>è½¯ä»¶æ¼”åŒ–çš„å¤„ç†ç­–ç•¥ï¼š</p><ul><li>è½¯ä»¶ç»´æŠ¤ï¼šä¸ºäº†ä¿®æ”¹è½¯ä»¶ç¼ºé™·æˆ–å¢åŠ æ–°çš„åŠŸèƒ½è€Œå¯¹è½¯ä»¶è¿›è¡Œçš„å˜æ›´ï¼›è½¯ä»¶å˜æ›´é€šå¸¸å‘ç”Ÿåœ¨å±€éƒ¨ï¼Œä¸ä¼šæ”¹å˜æ•´ä¸ªç»“æ„</li><li>è½¯ä»¶å†å·¥ç¨‹ï¼šä¸ºäº†é¿å…è½¯ä»¶é€€åŒ–è€Œå¯¹è½¯ä»¶çš„ä¸€éƒ¨åˆ†è¿›è¡Œé‡æ–°è®¾è®¡ã€ç¼–ç å’Œæµ‹è¯•ï¼Œæé«˜è½¯ä»¶çš„å¯ç»´æŠ¤æ€§å’Œå¯é æ€§ç­‰</li><li><strong>å‰è€…åŠ›åº¦å°</strong></li></ul><h4 id="è½¯ä»¶ç»´æŠ¤">6.2 è½¯ä»¶ç»´æŠ¤</h4><p>è½¯ä»¶ç»´æŠ¤ç±»å‹</p><ul><li>çº é”™æ€§ç»´æŠ¤ï¼ˆå¼€å‘ä¸­æœ‰é”™è¯¯ï¼‰</li><li>é€‚åº”æ€§ç»´æŠ¤ï¼ˆå¤–éƒ¨ç¯å¢ƒå’Œæ•°æ®ç¯å¢ƒå˜åŒ–ï¼‰</li><li>å®Œå–„æ€§ç»´æŠ¤ï¼ˆæ–°çš„éœ€æ±‚å’Œè¦æ±‚ï¼‰ã€å æ¯”æœ€å¤§ã€‘</li><li>é¢„é˜²æ€§ç»´æŠ¤ï¼ˆå‡å°‘æˆ–é¿å…å‰ä¸‰ç±»ç»´æŠ¤æ‰€åšçš„ç»´æŠ¤ï¼‰</li></ul><p>è½¯ä»¶ç»´æŠ¤å†…å®¹ï¼š</p><ul><li>ç¨‹åºç»´æŠ¤</li><li>æ•°æ®ç»´æŠ¤</li><li>ç¡¬ä»¶ç»´æŠ¤</li></ul><h4 id="è½¯ä»¶é…ç½®ç®¡ç†scm">6.3 è½¯ä»¶é…ç½®ç®¡ç†(SCM)</h4><p><spanclass="math inline">\(SCI\)</span>ï¼šè½¯ä»¶é…ç½®é¡¹ï¼Œè½¯ä»¶é…ç½®çš„åŸºæœ¬å•ä½ï¼ˆæ–‡ä»¶ï¼‰</p><p><spanclass="math inline">\(SCM\)</span>è´¯ç©¿æ•´ä¸ªè½¯ä»¶ç”Ÿå‘½å‘¨æœŸä¸è½¯ä»¶å·¥ç¨‹è¿‡ç¨‹</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251338393.png" style="zoom:75%;" /></p><p><spanclass="math inline">\(SCM\)</span>ç›®æ ‡ï¼šå½“å˜æ›´å‘ç”Ÿæ—¶ï¼Œèƒ½å¤Ÿæé«˜é€‚åº”å˜æ›´çš„å®¹æ˜“ç¨‹åº¦ï¼Œå¹¶ä¸”èƒ½å¤Ÿå‡å°‘æ‰€èŠ±è´¹çš„å·¥ä½œé‡</p><p><span class="math inline">\(SCM\)</span>åŸºæœ¬å…ƒç´ ï¼š</p><ul><li><p>é…ç½®é¡¹<span class="math inline">\((CI)\)</span></p><p>è½¯ä»¶è¿‡ç¨‹çš„è¾“å‡ºä¿¡æ¯å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªä¸»è¦ç±»åˆ«ï¼šç¨‹åºã€æ–‡æ¡£ï¼Œæ•°æ®ã€‚</p><p>è½¯ä»¶é…ç½®é¡¹<spanclass="math inline">\(SCI\)</span>ï¼šä¸Šè¿°ä¸‰é¡¹çš„æ€»ç§°ï¼ŒåŒ…å«äº†æ‰€æœ‰åœ¨è½¯ä»¶ä¸­äº§ç”Ÿçš„ä¿¡æ¯ï¼Œ<strong>æ˜¯è½¯ä»¶å…¨ç”Ÿå‘½å‘¨æœŸå†…å—ç®¡ç†å’Œæ§åˆ¶çš„åŸºæœ¬å•ä½</strong>ï¼Œå¤§åˆ°æ•´ä¸ªç³»ç»Ÿï¼Œå°åˆ°æŸä¸ªç¡¬ä»¶è®¾å¤‡æˆ–è½¯ä»¶æ¨¡å—</p><p><span class="math inline">\(SCI\)</span>å…·æœ‰å”¯ä¸€çš„åç§°å’Œå¤šä¸ªå±æ€§</p><p><spanclass="math inline">\(CI\)</span>ä¹‹é—´<strong>ä¾èµ–å…³ç³»</strong>ï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251338465.png" style="zoom:80%;" /></p><p>å¯¹æ¯ä¸€ä¸ª<spanclass="math inline">\(CI\)</span>å»ºç«‹ä¸€ä¸ªæ¼”å˜å›¾ï¼Œä»¥è®°å½•å¯¹è±¡çš„å˜æ›´å†å²</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251338247.png" style="zoom:80%;" /></p></li><li><p>åŸºçº¿<span class="math inline">\((Baseline)\)</span></p><p>åœ¨è½¯ä»¶é…ç½®é¡¹æˆä¸ºåŸºçº¿ä¹‹å‰ï¼Œå¯ä»¥è¿…é€Ÿè€Œéšæ„çš„è¿›è¡Œå˜æ›´ï¼Œä¸€æ—¦æˆä¸ºåŸºçº¿ï¼Œ<strong>å˜æ›´æ—¶éœ€è¦éµå¾ªæ­£å¼çš„è¯„å®¡æµç¨‹æ‰å¯ä»¥å˜æ›´</strong>ï¼Œå› æ­¤ï¼ŒåŸºçº¿å¯çœ‹ä½œæ˜¯è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­çš„â€œé‡Œç¨‹ç¢‘â€</p><p>åŸºçº¿æ˜¯åœ¨æŸä¸ªæ—¶é—´ç‚¹ä¸Šå¯¹äº§å“å±æ€§çš„ä¸€è‡´æè¿°ï¼Œå®ƒæ˜¯å®šä¹‰å˜åŒ–çš„åŸºç¡€</p><p><span class="math inline">\(Version \geqslant Release \geqslantBaseline \geqslant Milestone \geqslant checkpoint\)</span></p><p><span class="math inline">\(Version\)</span>ï¼šå¯¹å¤–å‘å¸ƒç‰ˆæœ¬</p><p><spanclass="math inline">\(Release\)</span>ï¼šä¸ä¸€å®šè¦å¯¹å¤–å‘å¸ƒï¼Œä½†å¯¹å¤–å‘å¸ƒç‰ˆæœ¬ä¸€å®šæ˜¯<spanclass="math inline">\(Release\)</span></p><p><span class="math inline">\(Baseline\)</span>ï¼šä¸èƒ½æ”¹åŠ¨</p><p><span class="math inline">\(Milestone\)</span>ï¼šé‡Œç¨‹ç¢‘</p><p><spanclass="math inline">\(checkpoint\)</span>ï¼šæ£€æŸ¥ç‚¹ï¼Œæœ€ä¸ºçµæ´»</p></li><li><p>é…ç½®ç®¡ç†æ•°æ®åº“<span class="math inline">\((CMDB)\)</span></p><p>ä¹Ÿç§°ä¸º<spanclass="math inline">\(SCM\)</span>ä¸­å¿ƒå­˜å‚¨åº“ï¼Œç”¨äºä¿å­˜ä¸è½¯ä»¶ç›¸å…³çš„æ‰€æœ‰é…ç½®é¡¹çš„ä¿¡æ¯ä»¥åŠé…ç½®é¡¹ä¹‹é—´å…³ç³»çš„æ•°æ®åº“</p><p><span class="math inline">\(\alphaæµ‹è¯•\)</span>ï¼šå†…éƒ¨å•ç”¨æˆ·åœ¨å¼€å‘ç¯å¢ƒæµ‹è¯•</p><p><span class="math inline">\(\betaæµ‹è¯•\)</span>ï¼šå¤šç”¨æˆ·åœ¨å¼€å‘ç¯å¢ƒæµ‹è¯•</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251338613.png"  style="zoom:80%;" /></p></li><li><p>æœ€ç»ˆç¡¬ä»¶åº“<span class="math inline">\((DHS)\)</span></p></li><li><p>æœ€ç»ˆè½¯ä»¶åº“<span class="math inline">\((DSL)\)</span></p></li></ul><h4 id="æŒç»­é›†æˆ">6.4 æŒç»­é›†æˆ</h4><p>æ•æ·å¼€å‘çš„ä¸€é¡¹é‡è¦å®è·µ</p><p>é›†æˆï¼šé›†æˆæµ‹è¯•ã€é›†æˆæµ‹è¯•ï¼Œä¹Ÿå«ç»„è£…æµ‹è¯•æˆ–è”åˆæµ‹è¯•ã€‚åœ¨å•å…ƒæµ‹è¯•çš„åŸºç¡€ä¸Šï¼Œå°†æ‰€æœ‰æ¨¡å—æŒ‰ç…§è®¾è®¡è¦æ±‚ï¼ˆå¦‚æ ¹æ®ç»“æ„å›¾ï¼‰ç»„è£…æˆä¸ºå­ç³»ç»Ÿæˆ–ç³»ç»Ÿï¼Œè¿›è¡Œé›†æˆæµ‹è¯•ã€‚å®è·µè¡¨æ˜ï¼Œä¸€äº›æ¨¡å—è™½ç„¶èƒ½å¤Ÿå•ç‹¬åœ°å·¥ä½œï¼Œä½†å¹¶ä¸èƒ½ä¿è¯è¿æ¥èµ·æ¥ä¹Ÿèƒ½æ­£å¸¸çš„å·¥ä½œã€‚ä¸€äº›å±€éƒ¨åæ˜ ä¸å‡ºæ¥çš„é—®é¢˜ï¼Œåœ¨å…¨å±€ä¸Šå¾ˆå¯èƒ½æš´éœ²å‡ºæ¥ã€‚ï¼‰ã€‘</p><p>æ‰€æœ‰çš„å¼€å‘äººå‘˜éœ€è¦åœ¨æœ¬åœ°æœºå™¨ä¸Šåšæœ¬åœ°æ„å»ºï¼Œç„¶åå†æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶åº“ä¸­ï¼Œä»è€Œç¡®ä¿ä»–ä»¬çš„å˜æ›´ä¸ä¼šå¯¼è‡´æŒç»­é›†æˆå¤±è´¥ï¼Œå¼€å‘äººå‘˜æ¯å¤©è‡³å°‘å‘ç‰ˆæœ¬æ§åˆ¶åº“ä¸­æäº¤ä¸€æ¬¡ä»£ç ï¼Œå¼€å‘äººå‘˜æ¯å¤©è‡³å°‘éœ€è¦ä»ç‰ˆæœ¬æ§åˆ¶åº“ä¸­æ›´æ–°ä¸€æ¬¡ä»£ç åˆ°æœ¬åœ°æœºå™¨ã€‚éœ€è¦æœ‰ä¸“é—¨çš„é›†æˆæœåŠ¡å™¨æ¥æ‰§è¡Œé›†æˆæ„å»ºï¼Œæ¯å¤©è¦æ‰§è¡Œå¤šæ¬¡æ„å»ºï¼Œæ¯æ¬¡æ„å»ºéƒ½è¦<spanclass="math inline">\(100\%\)</span>é€šè¿‡ï¼Œæ¯æ¬¡æ„å»ºéƒ½å¯ä»¥ç”Ÿæˆå¯å‘å¸ƒçš„äº§å“ï¼Œ<strong>ä¿®å¤å¤±è´¥çš„æ„å»ºæ˜¯ä¼˜å…ˆçº§æœ€é«˜çš„äº‹æƒ…</strong></p><h4 id="æœ¬åœ°-vs-åˆ†å¸ƒå¼-ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ">6.5 æœ¬åœ° vs åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</h4><ul><li><p>æœ¬åœ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ(<span class="math inline">\(Local\VCS\)</span>)</p><p>é‡‡ç”¨ç®€å•çš„æ•°æ®åº“æˆ–æ–‡ä»¶ç³»ç»Ÿæ¥è®°å½•æœ¬åœ°æ–‡ä»¶çš„å†æ¬¡æ›´æ–°å·®å¼‚</p></li><li><p>é›†ä¸­åŒ–ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ<span class="math inline">\((Centralized\VCS)\)</span></p><p>æœ‰ä¸€ä¸ªå•ä¸€çš„é›†ä¸­ç®¡ç†çš„æœåŠ¡å™¨ï¼Œä¿å­˜æ‰€æœ‰æ–‡ä»¶çš„ä¿®è®¢ç‰ˆæœ¬ï¼Œè€ŒååŒå·¥ä½œçš„å¼€å‘è€…é€šè¿‡å®¢æˆ·ç«¯è¿åˆ°è¿™å°æœåŠ¡å™¨ï¼Œå–å‡ºæœ€æ–°çš„æ–‡ä»¶æˆ–è€…æäº¤æ›´æ–°</p><p>ç¼ºç‚¹ï¼šå•ç‚¹æ•…éšœï¼Œå¯é æ€§</p></li><li><p>åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ<span class="math inline">\((Distributed\VCS)\)</span></p><p>å®¢æˆ·ç«¯å¹¶ä¸åªæå–æœ€æ–°ç‰ˆæœ¬çš„æ–‡ä»¶å¿«ç…§ï¼Œè€Œæ˜¯æŠŠåŸå§‹çš„ä»£ç ä»“åº“å®Œæ•´åœ°é•œåƒä¸‹æ¥</p><p>ä»»ä½•ä¸€å¤„ååŒå·¥ä½œç”¨çš„æœåŠ¡å™¨å‘ç”Ÿæ•…éšœï¼Œäº‹åéƒ½å¯ä»¥ç”¨ä»»ä½•ä¸€ä¸ªé•œåƒå‡ºæ¥çš„æœ¬åœ°ä»“åº“æ¢å¤</p><p>æ¯ä¸€æ¬¡çš„æå–æ“ä½œï¼Œå®é™…ä¸Šéƒ½æ˜¯ä¸€æ¬¡å¯¹ä»£ç ä»“åº“çš„å®Œæ•´å¤‡ä»½</p></li></ul><h4 id="gitçš„åŸºæœ¬æ€æƒ³">6.6 Gitçš„åŸºæœ¬æ€æƒ³</h4><p><spanclass="math inline">\(git\)</span>å…³æ³¨æ–‡ä»¶æ•°æ®æ•´ä½“æ˜¯å¦å‘ç”Ÿå˜åŒ–è€Œä¸æ˜¯æ–‡ä»¶å†…å®¹</p><ul><li><p>ä¼ ç»Ÿæ€è·¯ï¼šå­˜å‚¨æ¯ä¸ªæ–‡ä»¶ä¸åˆå§‹ç‰ˆæœ¬çš„å·®å¼‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202204251338587.png" /></p></li><li><p><spanclass="math inline">\(git\)</span>æ€è·¯ï¼šå­˜å‚¨é¡¹ç›®éšæ—¶é—´å˜åŒ–çš„å¿«ç…§ï¼ˆåœ¨æœ¬åœ°ç£ç›˜ä¿ç•™é¡¹ç›®çš„å®Œæ•´å†å²ï¼Œä»¥ç©ºé—´æ¢æ—¶é—´ï¼‰</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202204251338023.png" /></p></li></ul><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20211211134742881.png" style="zoom:40%;" /></p><ul><li><span class="math inline">\(workspace\)</span>å·¥ä½œç›®å½•ã€å·²ä¿®æ”¹<spanclass="math inline">\(modified\)</span>ã€‘</li><li><spanclass="math inline">\(staging\)</span>æš‚å­˜åŒºï¼ˆæœ¬åœ°ä¸å å†…å­˜ï¼‰ã€å·²æš‚å­˜<spanclass="math inline">\(stages\)</span>ã€‘ï¼šæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä¿å­˜äº†ä¸‹æ¬¡è¦æäº¤çš„æ–‡ä»¶åˆ—è¡¨ä¿¡æ¯</li><li><span class="math inline">\(local\repository\)</span>æœ¬åœ°ä»“åº“ã€å·²æäº¤<spanclass="math inline">\(committed\)</span>ã€‘</li><li><span class="math inline">\(remote\ repository\)</span>è¿œç¨‹ä»“åº“</li></ul><p><span class="math inline">\(git\)</span>å·¥ä½œæµç¨‹</p><ul><li>åœ¨å·¥ä½œç›®å½•ä¸­ä¿®æ”¹æŸäº›æ–‡ä»¶</li><li>å¯¹ä¿®æ”¹åçš„æ–‡ä»¶è¿›è¡Œå¿«ç…§ï¼Œç„¶åä¿å­˜åˆ°æš‚å­˜åŒºåŸŸ</li><li>æäº¤æ›´æ–°ï¼Œå°†ä¿å­˜åœ¨æš‚å­˜åŒºåŸŸçš„æ–‡ä»¶å¿«ç…§æ°¸ä¹…è½¬å‚¨åˆ°Gitç›®å½•ä¸­</li></ul><h4 id="åŸºæœ¬gitæŒ‡ä»¤">6.7 åŸºæœ¬GitæŒ‡ä»¤</h4><figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs git">git status<br>å“ªäº›æ›´æ–°æœªæš‚å­˜ï¼Ÿå“ªäº›æ›´æ–°å·²æš‚å­˜ï¼Ÿ<br></code></pre></div></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs git">git diff<br>æ¯”è¾ƒçš„æ˜¯å·¥ä½œç›®å½•ä¸­å½“å‰æ–‡ä»¶å’Œæš‚å­˜åŒºåŸŸå¿«ç…§ä¹‹é—´çš„å·®å¼‚ï¼Œä¹Ÿå°±æ˜¯ä¿®æ”¹ä¹‹åè¿˜æ²¡æœ‰æš‚å­˜èµ·æ¥çš„å˜åŒ–å†…å®¹ï¼ˆä¿®æ”¹ä¹‹åä½†æœªåŠ å…¥æš‚å­˜ï¼‰<br></code></pre></div></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs git">git diff --cached<br>æ¯”è¾ƒçš„æ˜¯æš‚å­˜åŒºåŸŸå†…çš„æ–‡ä»¶çš„æ›´æ”¹ï¼ˆä¿®æ”¹ä¹‹ååŠ å…¥ç¼“å­˜ä½†å°šæœªæäº¤ï¼‰<br></code></pre></div></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs git">git diff HEAD<br>æŸ¥çœ‹å·²ç¼“å­˜å’Œæœªç¼“å­˜çš„æ‰€æœ‰å·®å¼‚<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251338492.png" style="zoom:70%;" /></p><figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs git">git commit -a<br>è·³è¿‡git add<br></code></pre></div></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs git">git reset<br>git addçš„åå‘æ“ä½œ,ä½¿å¾—æš‚å­˜åŒºä¸ä»“åº“ç‰ˆæœ¬ä¸€è‡´<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251338369.png" style="zoom:80%;" /></p><p>æ›´æ”¹ä¸€æ¬¡<span class="math inline">\(commit\)</span></p><figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs git">1.git commit --amend<br>2.git reset HEAD^<br>^è¡¨ç¤ºä¸Šä¸€æ¬¡æäº¤<br></code></pre></div></td></tr></table></figure><h4 id="gitè¿œç¨‹ä»“åº“æŒ‡ä»¤">6.8 Gitè¿œç¨‹ä»“åº“æŒ‡ä»¤</h4><figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs git">git fetch<br>ä»è¿œç¨‹ä»“åº“æŠ“å–æ•°æ®åˆ°æœ¬åœ°ï¼Œè·å–æœ¬åœ°ä»“åº“å°šæœªæ‹¥æœ‰çš„å…¨éƒ¨æ›´æ–°<br>å¦‚æœæœ¬åœ°ä»“åº“æœ‰äº†ä¸åŒçš„ä¿®æ”¹ï¼Œåˆ™éœ€è¦æ‰‹å·¥å°†æœ¬åœ°ä¿®æ”¹ä¸è¿œç¨‹ä»“åº“çš„ä¿®æ”¹åˆå¹¶èµ·æ¥<br>git merge<br>åˆ†æ”¯åˆå¹¶<br>git pull = git fetch + git merge<br></code></pre></div></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251338982.png" style="zoom:70%;" /></p><h4 id="gitåˆ†æ”¯æŒ‡ä»¤">6.9 Gitåˆ†æ”¯æŒ‡ä»¤</h4><p><span class="math inline">\(git\)</span>åˆ†æ”¯æœ¬è´¨ï¼šæŒ‡å‘<spanclass="math inline">\(commit\)</span>å¯¹è±¡çš„å¯å˜æŒ‡é’ˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs git">git checkout -b xxx = git branch xxx + git checkout xxx<br>åˆ›å»ºåˆ†æ”¯å¹¶è·³è½¬<br></code></pre></div></td></tr></table></figure><p><a href="https://www.cnblogs.com/techflow/p/13876755.html"><spanclass="math inline">\(git\)</span>åˆ†æ”¯</a></p><h4 id="è¿œç¨‹åˆ†æ”¯">6.10 è¿œç¨‹åˆ†æ”¯</h4><p>è¿œç¨‹ä»“åº“åªèƒ½çœ‹ï¼Œä¸èƒ½ä¿®æ”¹</p><h4 id="ä½¿ç”¨gitè¿›è¡ŒååŒå¼€å‘çš„å®ä¾‹">6.11 ä½¿ç”¨Gitè¿›è¡ŒååŒå¼€å‘çš„å®ä¾‹</h4><h2 id="umlåŠå»ºæ¨¡å·¥å…·">7. UMLåŠå»ºæ¨¡å·¥å…·ğŸª‚</h2><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251338391.png" style="zoom:80%;" /></p><p>UMLä¸­äº‹ç‰©ï¼š</p><ul><li>ç»“æ„äº‹ç‰©</li><li>è¡Œä¸ºäº‹ç‰©</li><li>åˆ†ç»„äº‹ç‰©<ul><li>åŒ…ï¼ˆåªå­˜åœ¨äºå¼€å‘é˜¶æ®µï¼‰</li></ul></li><li>æ³¨é‡Šäº‹ç‰©</li></ul><p>UMLä¸­å…³ç³»ï¼š</p><ul><li><p>å…³è”</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202204251338747.png" /></p></li><li><p>ä¾èµ–</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202204251339834.png" /></p></li><li><p>æ³›åŒ–</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202204251339535.png" /></p></li><li><p>å®ç°</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202204251339262.png" /></p></li><li><p>èšåˆ</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202204251339198.png" /></p></li></ul><h4 id="ç”¨ä¾‹å›¾">7.1 ç”¨ä¾‹å›¾</h4><p>ç”¨ä¾‹å›¾åˆ†ç±»ï¼š<strong>ä¸šåŠ¡ç”¨ä¾‹å›¾ã€ç³»ç»Ÿç”¨ä¾‹å›¾</strong></p><p>ç”¨ä¾‹å›¾ç»„æˆï¼š<strong>å‚ä¸è€…<spanclass="math inline">\(Actor\)</span>ï¼Œç”¨ä¾‹<spanclass="math inline">\(Use\ Case\)</span>ï¼Œå…³è”å…³ç³»<spanclass="math inline">\(Association\)</span>ï¼ŒåŒ…å«å…³ç³»<spanclass="math inline">\(Include\)</span>ï¼Œæ‰©å±•å…³ç³»<spanclass="math inline">\(Extend\)</span>ï¼Œæ³›åŒ–å…³ç³»<spanclass="math inline">\(Generalization\)</span></strong></p><ul><li><p>å‚ä¸è€…</p><ul><li>å‚ä¸è€…å¯¹ç³»ç»Ÿè€Œè¨€æ€»æ˜¯å¤–éƒ¨çš„</li><li>åˆ†ä¸ºå¯åŠ¨è€…ï¼ˆæ¶ˆè´¹è€…ï¼‰å’Œæ”¯æŒè€…ï¼ˆå•†å®¶ï¼‰</li><li>å‚ä¸è€…ä¹‹é—´å¯ä»¥æœ‰æ³›åŒ–å…³ç³»</li></ul></li><li><p>ç”¨ä¾‹</p><ul><li><p>åŒºåˆ†ç”¨ä¾‹å’Œäº‹ä»¶æµï¼šç”¨ä¾‹å¤„äºç³»ç»Ÿçš„éœ€æ±‚åˆ†æé˜¶æ®µï¼Œé¿å…è€ƒè™‘ç»†èŠ‚æ€§é—®é¢˜ï¼›äº‹ä»¶æµæè¿°ç³»ç»Ÿâ€œåšä»€ä¹ˆâ€ï¼Œä¼šæœ‰æ›´å¤šçš„ç»†èŠ‚ï¼Œä¹Ÿæ˜¯åœ¨éœ€æ±‚åˆ†æé˜¶æ®µã€‚</p></li><li><p>ç”¨ä¾‹å¯¹åº”æœ‰äº‹ä»¶æµæ–‡ä»¶</p><p>ä¸¾ä¾‹ï¼š<strong>ç”¨ä¾‹åç§°ï¼šå­¦ç”Ÿé€‰è¯¾</strong></p><p><strong>ç®€è¦æè¿°ï¼šæŠŠå…·æœ‰é€‰è¯¾èµ„æ ¼çš„æŸä¸€å­¦ç”ŸåŠ åˆ°è¯¥è¯¾ç¨‹çš„é€‰è¯¾åå•ä¸­</strong></p><p><strong>å‰ææ¡ä»¶ï¼šå­¦ç”Ÿå·²æ³¨å†Œï¼Œé€‰è¿‡è¯¥è¯¾ç¨‹çš„å…ˆå¯¼è¯¾ç¨‹å¹¶è·å¾—å­¦åˆ†</strong></p><p><strong>åç½®æ¡ä»¶ï¼šå¦‚æœå­¦ç”Ÿå…·æœ‰æ³¨å†Œèµ„æ ¼ï¼Œå¹¶ä¸”è¯¥è¯¾ç¨‹ä»æœ‰ç©ºä½ï¼Œåˆ™å­¦ç”Ÿæ³¨å†Œåˆ°è¯¥è¯¾ç¨‹</strong></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251339512.png" style="zoom:60%;" /></p><p>ğŸ‘†ğŸ»ä¸€ä¸ªç”¨ä¾‹å¯¹åº”çš„äº‹ä»¶æµæ–‡ä»¶</p></li></ul></li><li><p>å…³è”å…³ç³»</p><ul><li>å‚ä¸è€…ä¸ç”¨ä¾‹ä¹‹é—´çš„å…³ç³»</li></ul></li><li><p>åŒ…å«å…³ç³»</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20211213201926513.png" style="zoom:70%;" /></p><ul><li>ç”¨æˆ·ç”¨ä¾‹æ‰§è¡Œï¼Œæä¾›è€…ç”¨ä¾‹å¿…é¡»æ‰§è¡Œ</li></ul></li><li><p>æ‰©å±•å…³ç³»</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251339441.png" style="zoom:70%;" /></p><ul><li>æ²¡æœ‰åŸºç¡€ç”¨ä¾‹ï¼Œæ‰©å±•ç”¨ä¾‹ä¹Ÿæ˜¯å®Œæ•´çš„ç”¨ä¾‹</li><li>åŸºç¡€ç”¨ä¾‹è¢«æ‰§è¡Œæ—¶ï¼Œä¸€èˆ¬ä¸ä¼šæ¶‰åŠæ‰©å±•ç”¨ä¾‹ï¼Œåªæœ‰ç‰¹å®šçš„æ¡ä»¶å‘ç”Ÿï¼Œæ‰©å±•ç”¨ä¾‹æ‰å¯èƒ½è¢«æ‰§è¡Œï¼Œè¿™æ˜¯ä¸åŒ…å«å…³ç³»çš„å·®åˆ«</li></ul></li><li><p>æ³›åŒ–å…³ç³»</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251339556.png" style="zoom:70%;" /></p><ul><li>å­ç”¨ä¾‹è¡¨ç¤ºçˆ¶ç”¨ä¾‹çš„ç‰¹æ®Šå½¢å¼</li><li>ä¸€ä¸ªç”¨ä¾‹ï¼ˆçˆ¶ç”¨ä¾‹ï¼‰å¯ä»¥è¢«ç‰¹åˆ«åœ°åˆ—ä¸¾ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªå­ç”¨ä¾‹</li><li>æ³›åŒ–å…³ç³»æ˜¯ä¸€èˆ¬å’Œç‰¹æ®Šçš„å…³ç³»</li></ul></li><li><p>ç”¨ä¾‹æ˜¯æœ‰ç²’åº¦çš„ï¼Œç”¨ä¾‹çš„ç²’åº¦æŒ‡çš„æ˜¯ç”¨ä¾‹æ‰€åŒ…å«çš„ç³»ç»ŸæœåŠ¡æˆ–åŠŸèƒ½å•å…ƒçš„å¤šå°‘ã€‚</p><ul><li>ç”¨ä¾‹çš„ç²’åº¦è¶Šå¤§ï¼Œç”¨ä¾‹åŒ…å«çš„åŠŸèƒ½è¶Šå¤šï¼Œåä¹‹åˆ™åŒ…å«çš„åŠŸèƒ½è¶Šå°‘ã€‚</li><li><strong>æ­¥éª¤ä¸æ˜¯ç”¨ä¾‹</strong></li><li>ç”¨ä¾‹è¯†åˆ«çš„æ ‡å‡†ï¼š<spanclass="math inline">\(actor\)</span>ä¸ç³»ç»Ÿä¹‹é—´çš„ä¸€æ¬¡ç‹¬ç«‹äº¤äº’</li></ul></li><li><p>æ³¨æ„ç”¨ä¾‹çš„è¾¹ç•Œ</p></li><li><p>ç”¨ä¾‹æ˜¯<spanclass="math inline">\(actor\)</span>ä¸ç³»ç»Ÿä¹‹é—´çš„äº¤äº’ï¼Œ<spanclass="math inline">\(actor\)</span>ä¸<spanclass="math inline">\(actor\)</span>åœ¨ç°å®ä¸­çš„äº¤äº’ä¸åº”åŒ…å«åœ¨<spanclass="math inline">\(use\ case\)</span></p></li><li><p>æ³¨æ„åŒºåˆ†<span class="math inline">\(actor\)</span>å’Œç³»ç»Ÿ</p></li><li><p>æˆ‘ä»¬è¦å¼€å‘çš„ç³»ç»Ÿï¼ˆè½¯ä»¶ï¼‰æ˜¯ä¸šåŠ¡ç»„ç»‡é‡Œé¢çš„ä¸€ä¸ªä¸šåŠ¡å¯¹è±¡ï¼Œç³»ç»Ÿ<strong>ç”¨ä¾‹å°±æ˜¯è¿™ä¸ªä¸šåŠ¡å¯¹è±¡å¯¹å¤–æä¾›çš„æœåŠ¡</strong></p></li></ul><h4 id="æ´»åŠ¨å›¾">7.2 æ´»åŠ¨å›¾</h4><p>æ´»åŠ¨å›¾æè¿°æ´»åŠ¨çš„é¡ºåºï¼Œå±•ç°ä»ä¸€ä¸ªæ´»åŠ¨åˆ°å¦ä¸€ä¸ªæ´»åŠ¨çš„æ§åˆ¶æµï¼Œæœ¬è´¨æ˜¯ä¸€ç§<strong>æµç¨‹å›¾</strong>ï¼Œç€é‡è¡¨ç°ä»ä¸€ä¸ªæ´»åŠ¨åˆ°å¦ä¸€ä¸ªæ´»åŠ¨çš„æ§åˆ¶æµã€‚</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20211214141101491.png"  style="zoom:80%;" /></p><p>æ´»åŠ¨å›¾å…ƒç´ ï¼š</p><ul><li><p>åŠ¨ä½œçŠ¶æ€</p><p><span class="math inline">\(Action\)</span> èŠ‚ç‚¹</p><p>åŸå­ï¼ˆæ— æ³•åˆ†è§£ï¼‰ï¼Œä¸å¯ä¸­æ–­ï¼ˆä¸€æ—¦å¼€å§‹ï¼Œä¸€ç›´è¿è¡Œåˆ°ç»“æŸï¼‰ï¼Œç¬æ—¶ï¼Œå¯ä»¥æœ‰å…¥è½¬æ¢ï¼Œè‡³å°‘æœ‰ä¸€æ¡å‡ºè½¬æ¢</p><p><strong>ä¸èƒ½æœ‰</strong>å…¥å£åŠ¨ä½œå’Œå‡ºå£åŠ¨ä½œï¼Œ<strong>ä¸èƒ½æœ‰</strong>å†…éƒ¨è½¬ç§»</p></li><li><p>æ´»åŠ¨çŠ¶æ€</p><p><span class="math inline">\(Activity\)</span>èŠ‚ç‚¹</p><p>éåŸå­è¿è¡Œï¼ˆå¯ä»¥åˆ†è§£ï¼‰ï¼Œæ´»åŠ¨çŠ¶æ€çš„å†…éƒ¨æ´»åŠ¨å¯ä»¥ç”¨å¦ä¸€ä¸ª<strong>æ´»åŠ¨å›¾</strong>æ¥è¡¨ç¤ºï¼Œå¯ä»¥æœ‰å…¥å£åŠ¨ä½œå’Œå‡ºå£åŠ¨ä½œï¼Œå¯ä»¥æœ‰å†…éƒ¨è½¬ç§»</p><p><strong>åŠ¨ä½œçŠ¶æ€æ˜¯æ´»åŠ¨çŠ¶æ€çš„ä¸€ä¸ªç‰¹ä¾‹ï¼Œå¦‚æœæŸä¸ªæ´»åŠ¨çŠ¶æ€åªåŒ…æ‹¬ä¸€ä¸ªåŠ¨ä½œï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ªåŠ¨ä½œçŠ¶æ€</strong></p></li><li><p>å¼€å§‹ç‚¹&amp;ç»“æŸç‚¹</p><p><span class="math inline">\(\bullet\)</span> è¡¨ç¤ºå¼€å§‹</p><p><span class="math inline">\(\bigotimes\)</span> è¡¨ç¤ºå­æµç¨‹ç»“æŸ</p><p><span class="math inline">\(\odot\)</span> è¡¨ç¤ºæ•´ä¸ªæ´»åŠ¨ç»“æŸ</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251339185.png"  style="zoom:60%;" /></p><p>ç­‰ä»·äºï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251339939.png" style="zoom:60%;" /></p></li><li><p>åˆ†æ”¯ä¸åˆå¹¶</p><p><span class="math inline">\(\lozenge\)</span> èŠ‚ç‚¹</p></li><li><p>åˆ†å‰ä¸æ±‡åˆ</p><p>åˆ†å‰ç”¨å°†æ§åˆ¶æµåˆ†ä¸ºä¸¤ä¸ªæˆ–è€…å¤šä¸ª<strong>å¹¶å‘</strong>è¿è¡Œçš„åˆ†æ”¯ï¼›æ±‡åˆç”¨äºåŒæ­¥è¿™äº›<strong>å¹¶å‘</strong>åˆ†æ”¯ï¼Œä»¥è¾¾åˆ°å…±åŒå®Œæˆä¸€é¡¹äº‹åŠ¡çš„ç›®çš„</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251339135.png" style="zoom:67%;" /></p></li><li><p>æ³³é“</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251339325.png" style="zoom:50%;" /></p></li><li><p>å¯¹è±¡æµ</p><p>å¯¹è±¡æµæ˜¯åŠ¨ä½œçŠ¶æ€æˆ–è€…æ´»åŠ¨çŠ¶æ€ä¸å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œè¡¨ç¤ºåŠ¨ä½œä½¿ç”¨å¯¹è±¡æˆ–åŠ¨ä½œå¯¹å¯¹è±¡çš„å½±å“ï¼›å¯ä»¥ç†è§£ä¸ºæ•°æ®æµ</p></li></ul><p>æ´»åŠ¨å›¾ <span class="math inline">\(VS\)</span> çŠ¶æ€å›¾</p><p><strong>æ´»åŠ¨å›¾</strong>ç€é‡è¡¨ç°ä»ä¸€ä¸ªæ´»åŠ¨åˆ°å¦ä¸€ä¸ªæ´»åŠ¨çš„æ§åˆ¶æµï¼Œæ˜¯<strong>å†…éƒ¨å¤„ç†é©±åŠ¨çš„æµç¨‹</strong>ï¼›<strong>çŠ¶æ€å›¾</strong>ç€é‡æè¿°ä»ä¸€ä¸ªçŠ¶æ€åˆ°å¦ä¸€ä¸ªçŠ¶æ€çš„æµç¨‹ï¼Œä¸»è¦æœ‰<strong>å¤–éƒ¨äº‹ä»¶çš„å‚ä¸</strong></p><p>æ´»åŠ¨å›¾ <span class="math inline">\(VS\)</span> æµç¨‹å›¾</p><p><strong>æµç¨‹å›¾</strong>ç€é‡æè¿°å¤„ç†è¿‡ç¨‹ï¼Œå®ƒçš„ä¸»è¦æ§åˆ¶ç»“æ„æ˜¯é¡ºåºã€åˆ†æ”¯å’Œå¾ªç¯ï¼Œå„ä¸ªå¤„ç†ä¹‹é—´æœ‰ä¸¥æ ¼çš„é¡ºåºå’Œæ—¶é—´å…³ç³»ï¼›<strong>æ´»åŠ¨å›¾</strong>æè¿°çš„åˆ™æ˜¯å¯¹è±¡æ´»åŠ¨çš„é¡ºåºå…³ç³»æ‰€éµå¾ªçš„è§„åˆ™ï¼Œå®ƒç€é‡è¡¨ç°çš„æ˜¯ç³»ç»Ÿçš„è¡Œä¸ºï¼Œè€Œéç³»ç»Ÿçš„å¤„ç†è¿‡ç¨‹ï¼›<strong>æ´»åŠ¨å›¾èƒ½å¤Ÿè¡¨ç¤ºå¹¶å‘æ´»åŠ¨çš„æƒ…å½¢ï¼Œæµç¨‹å›¾ä¸èƒ½</strong></p><h4 id="ç±»å›¾å¯¹è±¡å›¾">7.3 ç±»å›¾/å¯¹è±¡å›¾</h4><p>æè¿°ç±»ã€æ¥å£åŠä»–ä»¬ä¹‹é—´å…³ç³»çš„å›¾</p><p>æ˜¾ç¤ºç³»ç»Ÿå„ä¸ªç±»çš„<strong>é™æ€ç»“æ„</strong></p><p>ç±»å›¾çš„å…ƒç´ </p><ul><li><p>ç±»</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20211214155332101.png" style="zoom:70%;" /></p><p>ç±»å±æ€§å¯è§æ€§ï¼š</p><p><span class="math inline">\(public \mapsto +\)</span></p><p><span class="math inline">\(private \mapsto -\)</span></p><p><span class="math inline">\(protected \mapsto\#\)</span></p><p><span class="math inline">\(package \mapsto\)</span> ~</p></li><li><p>æ¥å£</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20211214160404753.png" style="zoom:80%;" /></p></li><li><p>ä¾èµ–å…³ç³»</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251339425.png" style="zoom:70%;" /></p></li><li><p>æ³›åŒ–å…³ç³»</p><p><span class="math inline">\(is\ a\ kind\ of\)</span></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251339243.png" style="zoom:60%;" /></p></li><li><p>å…³è”å…³ç³»</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251339923.png" style="zoom:60%;" /></p><ul><li><p>å…³è”çš„åç§°ä¸æ˜¯å¿…éœ€çš„</p></li><li><p>å…³è”çš„è§’è‰²</p></li></ul><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20211214161919998.png" style="zoom:60%;" /></p><ul><li>å…³è”çš„å¤šé‡æ€§</li></ul><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251339601.png" style="zoom:60%;" /></p><ul><li><p>èšåˆå…³ç³»</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20211214162140753.png" style="zoom:60%;" /></p><p>æ•´ä½“å’Œéƒ¨åˆ† <span class="math inline">\(has\ a\)</span></p></li><li><p>ç»„åˆå…³ç³»</p><p>ä¸€ç§ç‰¹æ®Šçš„èšåˆå…³ç³»--&gt;å¼ºèšåˆ</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251340625.png" style="zoom:60%;" /></p><p><strong>æˆå‘˜å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå–å†³äºèšåˆçš„ç”Ÿå‘½å‘¨æœŸ</strong></p><p>èšåˆä¸ä»…æ§åˆ¶ç€æˆå‘˜å¯¹è±¡çš„è¡Œä¸ºï¼Œè€Œä¸”æ§åˆ¶ç€æˆå‘˜å¯¹è±¡çš„<strong>åˆ›å»ºå’Œææ„</strong></p></li></ul></li><li><p>å®ç°å…³ç³»</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251340457.png" style="zoom:80%;" /></p></li></ul><h4 id="åºåˆ—å›¾åä½œå›¾">7.4 åºåˆ—å›¾/åä½œå›¾</h4><p>äº¤äº’å›¾ï¼šæè¿°ç³»ç»Ÿä¸­å¯¹è±¡ä¹‹é—´æ¶ˆæ¯é€šä¿¡çš„å›¾ï¼ŒåŒ…æ‹¬ï¼šåºåˆ—å›¾ï¼Œåä½œå›¾</p><p>åºåˆ—å›¾ç”¨æ¥æè¿°ç³»ç»Ÿä¸­å¯¹è±¡é—´é€šè¿‡æ¶ˆæ¯è¿›è¡Œäº¤äº’ï¼Œå®ƒå¼ºè°ƒæ¶ˆæ¯åœ¨æ—¶é—´è½´ä¸Šçš„å…ˆåé¡ºåºï¼šçºµè½´æ˜¯æ—¶é—´è½´ï¼Œæ—¶é—´æ²¿ç«–çº¿å‘ä¸‹å»¶ä¼¸ï¼›æ¨ªè½´ä»£è¡¨äº†åœ¨äº¤äº’ä¸­çš„å„ç‹¬ç«‹çš„å¯¹è±¡</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251340272.png" style="zoom:80%;" /></p><p>åºåˆ—å›¾ç”¨æ¥æè¿°<strong>ç”¨ä¾‹çš„å®ç°</strong>ï¼Œæ ‡è¯†äº†æ¶ˆæ¯å‘ç”Ÿäº¤äº’çš„å…ˆåé¡ºåºï¼Œ<strong>æ˜ç¡®ç±»çš„èŒè´£</strong></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251340372.png" style="zoom:70%;" /></p><p>åºåˆ—å›¾ç»„æˆï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251340467.png" style="zoom:70%;" /></p><ul><li><p>å¯¹è±¡</p><p>åˆ›å»ºå¯¹è±¡çš„ä¸¤ç§è¡¨ç¤ºæ–¹æ³•ï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/image-20211214190345889.png" style="zoom:67%;" /></p><p>æ³¨é”€å¯¹è±¡ï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251340653.png" style="zoom:67%;" /></p></li><li><p>ç”Ÿå‘½çº¿</p></li><li><p>æ¶ˆæ¯</p><p>å¯¹è±¡ä¹‹é—´æŸç§å½¢å¼çš„é€šä¿¡ï¼›å¯ä»¥æ˜¯<strong>ä¿¡å·</strong>ï¼Œä¹Ÿå¯ä»¥æ˜¯<strong>è°ƒç”¨</strong>ï¼›å¯ä»¥ç”¨äºåœ¨å¯¹è±¡é—´ä¼ é€’å‚æ•°</p><p>æ¶ˆæ¯åˆ†ç±»ï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251340425.png" style="zoom:67%;" /></p></li><li><p>æ¿€æ´»</p></li></ul><p>ç”¨ä¾‹å›¾ã€ç±»å›¾ï¼Œåºåˆ—å›¾å…³ç³»</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251340337.png" style="zoom:80%;" /></p><p><span class="math inline">\(BCE\)</span>æ¨¡å¼</p><p>è¾¹ç•Œç±»ï¼ˆ<spanclass="math inline">\(Boundary\)</span>ï¼‰ï¼šè¾¹ç•Œç±»ç”¨æ¥<strong>éš”ç¦»ç³»ç»Ÿå†…éƒ¨å’Œå¤–éƒ¨</strong>ï¼Œè´Ÿè´£æ¥æ”¶å‚ä¸è€…çš„æ¶ˆæ¯</p><p>æ§åˆ¶ç±»ï¼ˆ<spanclass="math inline">\(Control\)</span>ï¼‰ï¼šæ§åˆ¶ç±»å¯¹åº”ç”¨ä¾‹ï¼Œç”¨æ¥æ§åˆ¶ç”¨ä¾‹æ‰§è¡ŒæœŸé—´çš„å¤æ‚è¿ç®—æˆ–è€…ä¸šåŠ¡é€»è¾‘ï¼›<strong>åœ¨åˆ†æé˜¶æ®µï¼Œé€šå¸¸é’ˆå¯¹ä¸€ä¸ªç”¨ä¾‹ç”Ÿæˆä¸€ä¸ªæ§åˆ¶ç±»</strong></p><p>å®ä½“ç±»ï¼ˆ<spanclass="math inline">\(Entity\)</span>ï¼‰ï¼šå¯¹åº”äºç±»å›¾ä¸­é¢†åŸŸæ¦‚å¿µä¸­çš„ç±»ï¼›å°è£…äº†æ•°æ®ç»“æ„å’Œæ•°æ®å­˜å‚¨æœ‰å…³çš„ç±»</p><p>è¾¹ç•Œç±»ç”»æ³•ï¼š<img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251340947.png" style="zoom:80%;" /></p><p>æ§åˆ¶ç±»ç”»æ³•ï¼š<img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251340254.png" style="zoom:80%;" /></p><p>å®ä½“ç±»ç”»æ³•ï¼š<img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251340303.png" style="zoom:80%;" /></p><p>åŸåˆ™ï¼š</p><ul><li>é’ˆå¯¹æ¯ä¸€ä¸ªç”¨ä¾‹ï¼Œå¯ä»¥å¯¹åº”ç”Ÿæˆä¸€ä¸ªæ§åˆ¶ç±»</li><li>å‚ä¸è€…å¯¹è±¡åªèƒ½è·Ÿè¾¹ç•Œå¯¹è±¡äº’åŠ¨</li><li>å®ä½“å¯¹è±¡ä¸èƒ½å‘é€æ¶ˆæ¯ç»™è¾¹ç•Œå¯¹è±¡å’Œæ§åˆ¶å¯¹è±¡</li><li>ç‰¹åˆ«æƒ…å†µï¼Œå¦‚åªæ˜¯å¯¹æ•°æ®è¿›è¡Œå¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹å’ŒæŸ¥è¯¢æ“ä½œä¹Ÿå¯ä»¥ä¸è®¾ç½®æ§åˆ¶å¯¹è±¡ï¼Œè®©è¾¹ç•Œå¯¹è±¡ç›´æ¥å‘é€æ¶ˆæ¯ç»™å®ä½“å¯¹è±¡ï¼Œä»¥æé«˜æ‰§è¡Œé€Ÿåº¦</li></ul><p>ä¸€ä¸ªåºåˆ—å›¾å¯ä»¥æè¿°å¤šä¸ªåœºæ™¯</p><p>ç»„åˆç‰‡æ®µï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251340021.png" style="zoom:70%;" /></p><p>æ“ä½œç¬¦åˆ†ç±»ï¼š</p><ul><li><p><spanclass="math inline">\(opt\)</span>ï¼šåŒ…å«ä¸€ä¸ªå¯èƒ½å‘ç”Ÿæˆ–å¯èƒ½ä¸å‘ç”Ÿçš„åºåˆ—ï¼Œå¯ä»¥åœ¨ä¸´ç•Œæ¡ä»¶ä¸­æŒ‡å®šåºåˆ—å‘ç”Ÿçš„æ¡ä»¶</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251340371.png"  style="zoom:70%;" /></p></li><li><p><spanclass="math inline">\(alt\)</span>ï¼šå¯ä»¥åœ¨æ¯ä¸ªç‰‡æ®µä¸­è®¾ç½®ä¸€ä¸ªä¸´ç•Œæ¡ä»¶æ¥æŒ‡ç¤ºè¯¥ç‰‡æ®µå¯ä»¥è¿è¡Œçš„æ¡ä»¶ï¼›elseçš„æŒ‡ç¤ºå…¶ä»–ä»»ä½•ä¸´ç•Œæ¡ä»¶éƒ½ä¸ä¸ºtrueæ—¶åº”è¿è¡Œçš„ç‰‡æ®µï¼›å¦‚æœæ‰€æœ‰ä¸´ç•Œæ¡ä»¶éƒ½ä¸ºfalseå¹¶ä¸”æ²¡æœ‰elseï¼Œåˆ™ä¸æ‰§è¡Œä»»ä½•ç‰‡æ®µ</p></li><li><p><spanclass="math inline">\(loop\)</span>ï¼šç‰‡æ®µé‡å¤ä¸€å®šæ¬¡æ•°ï¼Œå¯ä»¥åœ¨ä¸´ç•Œæ¡ä»¶ä¸­æŒ‡ç¤ºç‰‡æ®µé‡å¤çš„æ¡ä»¶</p></li><li><p><spanclass="math inline">\(break\)</span>ï¼šå¦‚æœæ‰§è¡Œæ­¤ç‰‡æ®µï¼Œåˆ™æ”¾å¼ƒåºåˆ—çš„å…¶ä½™éƒ¨åˆ†ï¼Œå¯ä»¥ä½¿ç”¨ä¸´ç•Œæ¥æŒ‡ç¤ºå‘ç”Ÿä¸­æ–­çš„æ¡ä»¶</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251342515.png" style="zoom:70%;" /></p></li><li><p><spanclass="math inline">\(par\)</span>ï¼šå¹¶è¡Œå¤„ç†ï¼Œç‰‡æ®µä¸­çš„äº‹ä»¶å¯ä»¥äº¤é”™</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251342987.png" style="zoom:70%;" /></p></li><li><p><spanclass="math inline">\(critical\)</span>ï¼šæŒ‡ç¤ºæ­¤ç‰‡æ®µä¸­çš„æ¶ˆæ¯ä¸å¾—ä¸å…¶ä»–æ¶ˆæ¯äº¤é”™ï¼Œé€šå¸¸æ˜¯ä¸€äº›åŸå­æ€§æ“ä½œ</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251342038.png" style="zoom:70%;" /></p></li><li><p><spanclass="math inline">\(ref\)</span>ï¼šç”¨æ¥åœ¨ä¸€ä¸ªäº¤äº’å›¾ä¸­ï¼Œå¼•ç”¨å…¶ä»–çš„äº¤äº’å›¾</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251342976.png" style="zoom:90%;" /></p></li></ul><p>åä½œå›¾ç»„æˆï¼š</p><ul><li>å¯¹è±¡</li><li>é“¾</li><li>æ¶ˆæ¯</li></ul><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251342783.png" style="zoom:80%;" /></p><p>åºåˆ—å›¾å’Œåä½œå›¾æ˜¯ç­‰ä»·çš„ï¼Œå¯ä»¥ä»ä¸€ç§å½¢å¼çš„å›¾è½¬æ¢ä¸ºå¦ä¸€ç§å½¢å¼çš„å›¾è€Œä¸ä¸¢å¤±ä»»ä½•ä¿¡æ¯</p><h4 id="çŠ¶æ€å›¾">7.5 çŠ¶æ€å›¾</h4><p>çŠ¶æ€å›¾ä¸»è¦ç”¨äºæè¿°<strong>ä¸€ä¸ªå¯¹è±¡</strong>åœ¨å…¶ç”Ÿå­˜æœŸé—´çš„<strong>åŠ¨æ€è¡Œä¸º</strong>ï¼Œè¡¨ç°ä¸º<strong>ä¸€ä¸ªå¯¹è±¡æ‰€ç»å†çš„çŠ¶æ€åºåˆ—</strong>ï¼Œå¼•èµ·çŠ¶æ€è½¬ç§»çš„<strong>äº‹ä»¶</strong>ï¼ˆ<spanclass="math inline">\(Event\)</span>ï¼‰ï¼Œä»¥åŠå› çŠ¶æ€è½¬ç§»è€Œä¼´éšçš„<strong>åŠ¨ä½œ</strong>ï¼ˆ<spanclass="math inline">\(Action\)</span>ï¼‰</p><p>çŠ¶æ€å›¾å…ƒç´ ï¼š</p><ul><li><p>çŠ¶æ€</p><p>çŠ¶æ€æŒ‡åœ¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸­çš„æŸä¸ªæ¡ä»¶æˆ–è€…çŠ¶å†µï¼›åœ¨æ­¤æœŸé—´å¯¹è±¡å°†æ»¡è¶³<strong>æŸäº›æ¡ä»¶ã€æ‰§è¡ŒæŸäº›æ´»åŠ¨æˆ–ç­‰å¾…æŸäº›äº‹ä»¶</strong></p><ul><li>åˆå§‹çŠ¶æ€ <span class="math inline">\(\bullet\)</span></li><li>ç»ˆæ­¢çŠ¶æ€ <span class="math inline">\(\bigodot\)</span></li></ul></li><li><p>è½¬ç§»</p><p>å¯¹è±¡åœ¨æºçŠ¶æ€ä¸­æ‰§è¡Œä¸€å®šçš„åŠ¨ä½œï¼Œå¹¶åœ¨æŸä¸ªç‰¹å®šäº‹ä»¶ï¼ˆ<strong>è§¦å‘äº‹ä»¶</strong>ï¼‰å‘ç”Ÿè€Œä¸”æŸä¸ªç‰¹å®šçš„<strong>è­¦ç•Œæ¡ä»¶</strong>æ»¡è¶³æ—¶è¿›å…¥<strong>ç›®æ ‡çŠ¶æ€</strong>ï¼›çŠ¶æ€å¯ä»¥æœ‰è¿”å›è‡ªèº«çŠ¶æ€çš„è½¬ç§»ï¼ˆ<strong>è‡ªèº«è½¬ç§»</strong>ï¼‰<span class="math inline">\(\rightarrow\)</span></p></li><li><p>åŠ¨ä½œ</p><p>åŸå­æ“ä½œ</p></li><li><p>ç»„åˆçŠ¶æ€</p><p>å«æœ‰å­çŠ¶æ€çš„çŠ¶æ€</p></li><li><p>è¿›å…¥èŠ‚ç‚¹&amp;é€€å‡ºèŠ‚ç‚¹</p><p>è¿›å…¥èŠ‚ç‚¹ <spanclass="math inline">\(\bigcirc\)</span>ï¼šä¸éœ€è¦åˆå§‹åŒ–ï¼Œç›´æ¥é€šè¿‡è¿›å…¥èŠ‚ç‚¹è¿›å…¥çŠ¶æ€</p><p>é€€å‡ºèŠ‚ç‚¹ <span class="math inline">\(\bigotimes\)</span>ï¼šä»å­çŠ¶æ€è½¬ç§»åˆ°å¤–éƒ¨çŠ¶æ€</p></li><li><p>å†å²çŠ¶æ€</p><p>è®°ä½ä»ç»„åˆçŠ¶æ€ä¸­é€€å‡ºæ—¶æ‰€å¤„çš„å­çŠ¶æ€</p></li><li><p>å¹¶å‘</p><p>ç»„åˆçŠ¶æ€åœ¨æŸä¸€æ—¶åˆ»åŒæ—¶åˆ°è¾¾å¤šä¸ªå­çŠ¶æ€</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251342111.png"  style="zoom:70%;" /></p></li></ul><h4 id="ç»„ä»¶å›¾">7.6 ç»„ä»¶å›¾</h4><h4 id="éƒ¨ç½²å›¾">7.7 éƒ¨ç½²å›¾</h4><h2 id="éœ€æ±‚è·å–ä¸åˆ†æ">8.éœ€æ±‚è·å–ä¸åˆ†æğŸ¦·</h2><h4 id="è½¯ä»¶éœ€æ±‚ä¸éœ€æ±‚è·å–">8.1 è½¯ä»¶éœ€æ±‚ä¸éœ€æ±‚è·å–</h4><h5 id="è½¯ä»¶éœ€æ±‚çš„å®šä¹‰">8.1.1 è½¯ä»¶éœ€æ±‚çš„å®šä¹‰</h5><p><strong>å¯¹ç”¨æˆ·éœ€æ±‚çš„ç®¡ç†æ°´å¹³æ˜¯å†³å®šè½¯ä»¶æˆè´¥çš„é‡è¦åŸå› </strong></p><p>éœ€æ±‚ç”¨äºè¡¨è¾¾ï¼šâ€œåšä»€ä¹ˆâ€ï¼Œä¸æ˜¯è¡¨è¾¾ï¼šâ€œæ€ä¹ˆåšâ€</p><h5 id="éœ€æ±‚çš„åˆ†ç±»">8.1.2 éœ€æ±‚çš„åˆ†ç±»</h5><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251342633.png" style="zoom:60%;" /></p><ul><li><p>ä¸šåŠ¡éœ€æ±‚</p><p>å®¢æˆ·å¯¹äºç³»ç»Ÿçš„é«˜å±‚æ¬¡ç›®æ ‡è¦æ±‚<span class="math inline">\(high-level\objectives\)</span>) ï¼Œå®šä¹‰äº†é¡¹ç›®çš„è¿œæ™¯å’ŒèŒƒç•´(<spanclass="math inline">\(vision\ and\ scope\)</span>)</p></li><li><p>ç”¨æˆ·éœ€æ±‚</p><p>ä»ç”¨æˆ·è§’åº¦æè¿°çš„<strong>ç³»ç»ŸåŠŸèƒ½éœ€æ±‚ä¸éåŠŸèƒ½éœ€æ±‚</strong>ï¼Œé€šå¸¸åªæ¶‰åŠç³»ç»Ÿçš„<strong>å¤–éƒ¨è¡Œä¸º</strong>è€Œä¸æ¶‰åŠå†…éƒ¨ç‰¹æ€§</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251342566.png" style="zoom:60%;" /></p><ul><li><p>åŠŸèƒ½éœ€æ±‚</p><p>ç³»ç»Ÿåº”æä¾›çš„åŠŸèƒ½æˆ–æœåŠ¡</p></li><li><p>éåŠŸèƒ½éœ€æ±‚</p><p>å¯¹<strong>è´¨é‡å’Œæ€§èƒ½</strong>çš„é¢å¤–è¦æ±‚</p><ul><li>é€Ÿåº¦ã€å­˜å‚¨ç©ºé—´ã€å¯ç”¨æ€§ã€å¯é æ€§ã€å®¹é”™æ€§ï¼ˆä¸€èˆ¬ç”¨ä¸€äº›å¯åº¦é‡çš„ç‰¹æ€§æ¥æè¿°ï¼‰</li></ul></li></ul></li></ul><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251342423.png" style="zoom:60%;" /></p><ul><li><p>çº¦æŸæ¡ä»¶</p><p>æ³•å¾‹æ³•è§„ã€ç¡¬ä»¶/èµ„æºé™åˆ¶ã€å¼€å‘è¯­è¨€</p></li><li><p>ä¸šåŠ¡è§„åˆ™</p><p><strong>å†…éƒ¨æ‰§è¡Œé€»è¾‘</strong></p><p>â€œå¦‚æœ...ï¼Œé‚£ä¹ˆ...â€</p></li><li><p>å¤–éƒ¨æ¥å£éœ€æ±‚</p></li></ul><h5 id="å¥½çš„éœ€æ±‚ä¸åçš„éœ€æ±‚">8.1.3 å¥½çš„éœ€æ±‚ä¸åçš„éœ€æ±‚</h5><p>äº§ç”Ÿä¸åˆæ ¼éœ€æ±‚çš„åŸå› ï¼š</p><ul><li>æ— è¶³å¤Ÿç”¨æˆ·å‚ä¸</li><li>ç”¨æˆ·éœ€æ±‚çš„ä¸æ–­å¢åŠ </li><li>æ¨¡æ£±ä¸¤å¯çš„éœ€æ±‚</li><li>ä¸å¿…è¦çš„ç‰¹æ€§</li><li>è¿‡äºç²¾ç®€çš„è§„æ ¼è¯´æ˜</li><li>å¿½ç•¥çš„ç”¨æˆ·åˆ†ç±»</li><li>ä¸å‡†ç¡®çš„è®¡åˆ’</li></ul><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251342635.png" style="zoom:70%;" /></p><h5 id="éœ€æ±‚å·¥ç¨‹">8.1.4 éœ€æ±‚å·¥ç¨‹</h5><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251342624.png" style="zoom:60%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251342468.png" style="zoom:65%;" /></p><h5 id="éœ€æ±‚è·å–æ–¹æ³•">8.1.5 éœ€æ±‚è·å–æ–¹æ³•</h5><p>éœ€æ±‚è·å–çš„åŸºæœ¬æ­¥éª¤ï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251342373.png" style="zoom:60%;" /></p><p>ç¬¬1æ­¥ï¼š<strong>äº†è§£ç›¸å…³èƒŒæ™¯å’Œé¢†åŸŸ/è¡Œä¸šçš„çŸ¥è¯†</strong>ï¼Œç¡®å®šäº§å“æ‰€æœŸæœ›çš„<strong>ç”¨æˆ·ç±»</strong></p><p>ç¬¬2æ­¥ï¼šä¸å®¢æˆ·ä¼ä¸šæˆ–ç»„ç»‡çš„<strong>é«˜å±‚äººå‘˜è¿›è¡Œäº¤æµ</strong>ï¼Œäº†è§£å®é™…ç”¨æˆ·ä»»åŠ¡å’Œç›®æ ‡ä»¥åŠè¿™äº›ä»»åŠ¡æ‰€æ”¯æŒçš„<strong>ä¸šåŠ¡éœ€æ±‚</strong></p><p>ç¬¬3æ­¥ï¼šä¸å®¢æˆ·ä¼ä¸šæˆ–ç»„ç»‡çš„<strong>åº•å±‚äººå‘˜è¿›è¡Œäº¤æµ</strong>ï¼Œè·å–æ¯ä¸ªç”¨æˆ·ç±»çš„è¯¦ç»†çš„<strong>ç”¨æˆ·éœ€æ±‚</strong></p><p>ç¬¬4æ­¥ï¼šæ•´ç†éœ€æ±‚çºªè¦ï¼Œ<strong>å‘ç°æ–°é—®é¢˜</strong>ï¼Œå¹¶é‡å¤1-3æ­¥</p><p>ç¬¬5æ­¥ï¼š<strong>éœ€æ±‚åˆ†ç±»å’Œç»„ç»‡</strong>ï¼Œä»¥åŒºåˆ«<strong>åŠŸèƒ½éœ€æ±‚ã€éåŠŸèƒ½éœ€æ±‚ã€çº¦æŸæ¡ä»¶ã€ä¸šåŠ¡è§„åˆ™ã€å¤–éƒ¨æ¥å£éœ€æ±‚</strong>ã€å»ºè®®è§£å†³æ–¹æ³•å’Œé™„åŠ ä¿¡æ¯</p><p>ç¬¬6æ­¥ï¼š<strong>ä¼˜å…ˆæ’åºå’Œå†²çªè§£å†³</strong></p><p>ç¬¬7æ­¥ï¼šå¾—åˆ°æœ€ç»ˆéœ€æ±‚æ¸…å•ï¼Œå¹¶ä¸å®¢æˆ·åšæœ€ç»ˆ<strong>ç­¾å­—ç¡®è®¤</strong></p><p>éœ€æ±‚è·å–ä¸­çš„é—®é¢˜ï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251342857.png" style="zoom:70%;" /></p><p>éœ€æ±‚è·å–æŠ€æœ¯</p><ul><li><p>æ”¶é›†ç°æœ‰çº¸é¢ææ–™</p><ul><li>æ”¶é›†ç°æœ‰çš„æŠ¥è¡¨ã€è¡¨æ ¼å’Œè¿‡ç¨‹æè¿°</li><li>æ”¶é›†ç°æœ‰çš„å·¥ä½œæµç¨‹å›¾</li><li>åˆ†å‘å’Œæ”¶é›†éœ€æ±‚æ”¶é›†è¡¨</li></ul></li><li><p>é¢å¯¹é¢è®¿è°ˆ</p><p>é—®é¢˜åˆ†ç±»ï¼š</p><p>ä¸Šä¸‹æ–‡æ— å…³é—®é¢˜ï¼šå……åˆ†ç†è§£ç”¨æˆ·çš„é—®é¢˜ï¼Œä¸æ¶‰åŠå…·ä½“çš„è§£å†³æ–¹æ¡ˆ</p><p>è§£å†³æ–¹æ¡ˆç›¸å…³çš„é—®é¢˜ï¼šé€šè¿‡è¿™ç±»é—®é¢˜ï¼Œæ¢å¯»ç‰¹å®šçš„è§£å†³æ–¹æ¡ˆå¹¶å¾—åˆ°ç”¨æˆ·çš„è®¤å¯</p></li><li><p>éœ€æ±‚ç ”è®¨ä¼š</p><p><span class="math inline">\(JAD\)</span>ä¼šè®®</p></li><li><p>ç°åœºè§‚å¯Ÿ/ä½“éªŒ</p><p>è¢«åŠ¨è§‚å¯Ÿï¼šç”¨æˆ·å®åœ°å·¥ä½œï¼Œéœ€æ±‚åˆ†æäººå‘˜åœ¨æ—è¾¹çœ‹</p><p>ä¸»åŠ¨è§‚å¯Ÿï¼šéœ€æ±‚åˆ†æäººå‘˜ç›´æ¥å‚ä¸åˆ°ç”¨æˆ·çš„å®é™…å·¥ä½œ</p></li><li><p>å¤´è„‘é£æš´</p></li></ul><p>å¯¹å®¢æˆ·è¾“å…¥è¿›è¡Œåˆ†ç±»ï¼š</p><ul><li>ä¸šåŠ¡éœ€æ±‚ï¼šæè¿°å®¢æˆ·å¯ä»¥ä»äº§å“ä¸­å¾—åˆ°çš„<strong>èµ„é‡‘ã€å¸‚åœºæˆ–å…¶å®ƒä¸šåŠ¡åˆ©æ¶¦çš„éœ€æ±‚</strong></li><li>ä¸šåŠ¡è§„åˆ™ï¼šä¸€äº›æ´»åŠ¨åªèƒ½<strong>åœ¨ç‰¹å®šçš„æ¡ä»¶ä¸‹ï¼Œç”±ä¸€äº›ç‰¹å®šçš„äººæ¥å®Œæˆæ—¶</strong>ï¼Œè¯¥ç”¨æˆ·å¯èƒ½åœ¨æè¿°ä¸€ä¸ªä¸šåŠ¡è§„åˆ™</li><li>åŠŸèƒ½éœ€æ±‚ï¼šç”¨æˆ·åº”è¯¥èƒ½<spanclass="math inline">\(&lt;æ‰§è¡ŒæŸäº›åŠŸèƒ½&gt;\)</span>æˆ–è€…ç³»ç»Ÿåº”è¯¥<spanclass="math inline">\(&lt;å…·æœ‰æŸäº›è¡Œä¸º&gt;\)</span></li><li>éåŠŸèƒ½éœ€æ±‚</li><li>å¤–éƒ¨æ¥å£åºéœ€æ±‚ï¼šä»<spanclass="math inline">\(&lt;æŸäº›è®¾å¤‡&gt;\)</span>è¯»å–ä¿¡å·ï¼›ç»™<spanclass="math inline">\(&lt;ä¸€äº›å…¶ä»–ç³»ç»Ÿ&gt;\)</span>å‘é€ä¿¡æ¯ï¼›ä»¥<spanclass="math inline">\(&lt;æŸç§æ ¼å¼&gt;\)</span>è¯»å–æ–‡ä»¶ï¼›èƒ½æ§åˆ¶<spanclass="math inline">\(&lt;ä¸€äº›ç¡¬ä»¶&gt;\)</span></li><li>çº¦æŸæ¡ä»¶ï¼šå¿…é¡»ä½¿ç”¨<spanclass="math inline">\(&lt;ä¸€ä¸ªç‰¹å®šçš„æ•°æ®åº“äº§å“æˆ–è¯­è¨€&gt;\)</span>ï¼›ä¸èƒ½ç”³è¯·å¤šäº<spanclass="math inline">\(&lt;ä¸€å®šæ•°é‡çš„å†…å­˜&gt;\)</span>ï¼›æ“ä½œå¿…é¡»ä¸<spanclass="math inline">\(&lt;å…¶å®ƒç³»ç»Ÿ&gt;\)</span>ç›¸åŒï¼›å¿…é¡»ä¸<spanclass="math inline">\(&lt;å…¶å®ƒåº”ç”¨ç¨‹åº&gt;\)</span>ä¸€è‡´</li><li>æ•°æ®å®šä¹‰</li></ul><h4 id="ç”¨æˆ·æ•…äº‹ä¸ç”¨ä¾‹å»ºæ¨¡">8.2 ç”¨æˆ·æ•…äº‹ä¸ç”¨ä¾‹å»ºæ¨¡</h4><h5 id="æ•æ·å¼€å‘ä¸­çš„ç”¨æˆ·æ•…äº‹user-story">8.2.1æ•æ·å¼€å‘ä¸­çš„â€œç”¨æˆ·æ•…äº‹â€ï¼ˆUser Storyï¼‰</h5><p>åœ¨æ•æ·å¼€å‘ä¸­ï¼Œéœ€æ±‚è¡¨è¿°ä¸ºä¸€ç»„â€œç”¨æˆ·æ•…äº‹â€ï¼›åœ¨ä¼ ç»Ÿçš„<spanclass="math inline">\(OO\)</span>åˆ†æä¸è®¾è®¡æ–¹æ³•ä¸­ï¼Œéœ€æ±‚è¢«è¡¨è¿°ä¸ºä¸€ç»„â€œç”¨ä¾‹â€</p><p>ç»„æˆéƒ¨åˆ†ï¼šå¡ç‰‡ã€äº¤è°ˆã€ç¡®è®¤</p><p><span class="math inline">\(As\ a\ [user\ role],I\ want\ to\[goal]\,so\ I\ can\ [reason]\ \ \ \rightarrow\ Who/What/Why\)</span></p><p>å¥½çš„ç”¨æˆ·æ•…äº‹å…·å¤‡çš„ç‰¹å¾ï¼š <spanclass="math inline">\(INVEST\)</span></p><p><spanclass="math inline">\(Independentã€Negotiable(å¯è®¨è®ºçš„)ã€Valuableã€Estimableã€Smallã€Testable\)</span></p><p><span class="math inline">\(TDD\)</span>ï¼šå†™ä»£ç å‰å…ˆå†™æµ‹è¯•</p><h5 id="é¢å‘å¯¹è±¡æ–¹æ³•ä¸­çš„ç”¨ä¾‹use-case">8.2.2 é¢å‘å¯¹è±¡æ–¹æ³•ä¸­çš„â€œç”¨ä¾‹â€ï¼ˆUseCaseï¼‰</h5><h5 id="ç”¨ä¾‹å»ºæ¨¡çš„åŸºæœ¬è¿‡ç¨‹">8.2.3 ç”¨ä¾‹å»ºæ¨¡çš„åŸºæœ¬è¿‡ç¨‹</h5><ol type="1"><li><p>è¯†åˆ«å¹¶æè¿°å‚ä¸è€…ï¼ˆActorï¼‰</p><p>ç‰¹æ®ŠActorï¼šç³»ç»Ÿæ—¶é’Ÿ</p></li><li><p>è¯†åˆ«ç”¨ä¾‹</p></li><li><p>è¯†åˆ«å‚ä¸è€…ä¸è§’è‰²ä¹‹é—´çš„é€šè®¯å…³è”ï¼ˆAssociationï¼‰</p></li><li><p>ç»™å‡ºç”¨ä¾‹è¯¦ç»†æè¿°</p><p>äº‹ä»¶æµ</p><ul><li>å¸¸è§„æµ</li><li>å¤‡é€‰æµï¼ˆextendå¯ä»¥çœ‹æˆæ˜¯å¤‡é€‰æµï¼‰</li></ul></li><li><p>ç»†åŒ–ç”¨ä¾‹æ¨¡å‹ï¼ˆextendã€includeã€æ³›åŒ–ï¼‰</p><p>Actorä¹‹é—´å­˜åœ¨æ³›åŒ–å…³ç³»</p></li></ol><p>ç”¨ä¾‹è¯†åˆ«æ ‡å‡†ï¼šactorä¸ç³»ç»Ÿä¹‹é—´çš„ä¸€æ¬¡ç‹¬ç«‹äº¤äº’</p><p>ç”¨ä¾‹æ˜¯actorä¸ç³»ç»Ÿä¹‹é—´çš„äº¤äº’ï¼Œactorä¸actoråœ¨ç°å®ä¸­çš„äº¤äº’ï¼ˆè®¨ä»·è¿˜ä»·ï¼‰ä¸åº”åŒ…å«åœ¨ç”¨ä¾‹ä¸­</p><p>æ³¨æ„åŒºåˆ†actorå’Œç³»ç»Ÿï¼Œç³»ç»Ÿè‡ªå·±åšçš„äº‹æƒ…ï¼Œä¸æ˜¯ç‹¬ç«‹çš„ç”¨ä¾‹</p><h5 id="ç”¨ä¾‹æ¨¡å‹çš„æäº¤ç‰©">8.2.4 ç”¨ä¾‹æ¨¡å‹çš„æäº¤ç‰©</h5><h5 id="æ´»åŠ¨å›¾-æ³³é“å›¾">8.2.5 æ´»åŠ¨å›¾ &amp; æ³³é“å›¾</h5><h4 id="éœ€æ±‚çš„ç»“æ„åŒ–åˆ†æ">8.3 éœ€æ±‚çš„ç»“æ„åŒ–åˆ†æ</h4><h5 id="ç»“æ„åŒ–æ–¹æ³•vsé¢å‘å¯¹è±¡æ–¹æ³•">8.3.1 ç»“æ„åŒ–æ–¹æ³•vsé¢å‘å¯¹è±¡æ–¹æ³•</h5><p>ç»“æ„åŒ–æ–¹æ³•ï¼šå¤æ‚ä¸–ç•Œ<spanclass="math inline">\(\rightarrow\)</span>å¤æ‚å¤„ç†è¿‡ç¨‹ï¼ˆäº‹æƒ…çš„å‘ç”Ÿå‘å±•ï¼‰ï¼Œè®¾è®¡ä¸€ç³»åˆ—åŠŸèƒ½è§£å†³</p><p>é¢å‘å¯¹è±¡æ–¹æ³•ï¼šä»»ä½•ç³»ç»Ÿéƒ½æ˜¯ç”±èƒ½å¤Ÿå®Œæˆä¸€ç»„ç›¸å…³ä»»åŠ¡çš„å¯¹è±¡æ„æˆ</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251342199.png" style="zoom:60%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251342024.png" style="zoom:65%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251342738.png" style="zoom:67%;" /></p><h5 id="éœ€æ±‚çš„ç»“æ„åŒ–åˆ†ææ–¹æ³•">8.3.2 éœ€æ±‚çš„ç»“æ„åŒ–åˆ†ææ–¹æ³•</h5><p>ç»“æ„åŒ–åˆ†æï¼šå¸®åŠ©å¼€å‘äººå‘˜å®šä¹‰ç³»ç»Ÿéœ€è¦åšä»€ä¹ˆï¼ˆå¤„ç†éœ€æ±‚ï¼‰ï¼Œç³»ç»Ÿéœ€è¦å­˜å‚¨å’Œä½¿ç”¨å“ªäº›æ•°æ®ï¼ˆæ•°æ®éœ€æ±‚ï¼‰ï¼Œç³»ç»Ÿéœ€è¦ä»€ä¹ˆæ ·çš„è¾“å…¥å’Œè¾“å‡ºä»¥åŠå¦‚ä½•æŠŠè¿™äº›åŠŸèƒ½ç»“åˆåœ¨ä¸€èµ·æ¥å®Œæˆä»»åŠ¡</p><p>ç»“æ„åŒ–åˆ†ææ–¹æ³•ï¼š</p><ul><li>æ•°æ®æµå›¾ï¼ˆ<span class="math inline">\(DFD\)</span>ï¼‰</li><li>å®ä½“-å…³ç³»å›¾ï¼ˆ<span class="math inline">\(ERD,IDEF1X\)</span>ï¼‰</li></ul><h5 id="æ•°æ®æµå›¾dfd">8.3.3 æ•°æ®æµå›¾ï¼ˆDFDï¼‰</h5><p>æ•°æ®æµå›¾ï¼šç”¨å¤„ç†ã€å¤–éƒ¨å®ä½“ã€æ•°æ®æµä»¥åŠæ•°æ®å­˜å‚¨æ¥è¡¨ç¤ºç³»ç»Ÿéœ€æ±‚çš„å›¾è¡¨</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251342161.png" style="zoom:60%;" /></p><p>ä»å¤–éƒ¨å®ä½“å‘å‡ºçš„â€œæ•°æ®æµâ€å¯ä»¥æ˜¯ï¼š1.å¤–éƒ¨å®ä½“å‘å‡ºçš„â€œå¤„ç†è¯·æ±‚â€ï¼Œå³ä¸€ä¸ªäº‹ä»¶2.å¤–éƒ¨å®ä½“ç»™å‡ºçš„â€œè¾“å…¥æ•°æ®â€</p><p>æŒ‡å‘â€œå¤–éƒ¨å®ä½“â€çš„â€œæ•°æ®æµâ€ä¸€èˆ¬æ˜¯â€œå¤„ç†â€çš„åé¦ˆæˆ–å¤„ç†ç»“æœ</p><p>DFDå›¾å¯ä»¥æè¿°é«˜å±‚æ¬¡çš„å…·æœ‰é«˜åº¦æ¦‚æ‹¬çš„ç³»ç»Ÿå¤„ç†ä¹Ÿå¯ä»¥æè¿°ä½å±‚æ¬¡çš„å…·æœ‰æ›´è¯¦ç»†åˆ†è§£çš„ç³»ç»Ÿå¤„ç†</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251342013.png" style="zoom:60%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251342258.png" style="zoom:67%;" /></p><ul><li><p>å…³è”å›¾ï¼šåœ¨<strong>å•ä¸ªå¤„ç†ç¬¦å·</strong>ä¸­æ¦‚æ‹¬ç³»ç»Ÿå†…æ‰€æœ‰å¤„ç†æ´»åŠ¨çš„DFD</p><p><strong>å…³è”å›¾åœ¨è¡¨è¾¾ç³»ç»Ÿè¾¹ç•Œæ—¶ç”¨å¤„å¾ˆå¤§</strong>ï¼Œç³»ç»Ÿçš„èŒƒå›´æ˜¯é€šè¿‡å•ä¸ªçš„å¤„ç†å’Œå¤–éƒ¨å®ä½“æ‰€è¡¨ç¤ºçš„äº‹ç‰©æ¥å®šä¹‰çš„ï¼›</p><p><strong>æ•°æ®å­˜å‚¨ä¸ç”»åœ¨å…³è”å›¾</strong>ä¸­æ˜¯å› ä¸ºå®ƒæœ¬èº«è¢«è®¤ä¸ºæ˜¯ç³»ç»Ÿå†…éƒ¨çš„å†…å®¹</p><p>å½“ä¸€ä¸ªç³»ç»Ÿå“åº”äº‹ä»¶è¾ƒå¤šæ—¶ï¼Œå¸¸å¸¸å°†ç³»ç»Ÿåˆ†æˆå¤šä¸ªå­ç³»ç»Ÿï¼Œå¹¶ä¸ºæ¯ä¸ªå­ç³»ç»Ÿåˆ›å»ºä¸€å¼ å…³è”å›¾</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343220.png" style="zoom:70%;" /></p></li><li><p>DFDç‰‡æ®µï¼šç”¨ä¸€ä¸ªå•ä¸€å¤„ç†ç¬¦å·è¡¨ç¤ºç³»ç»Ÿå“åº”ä¸€ä¸ªäº‹ä»¶çš„DFD</p><p>åœ¨DFDç‰‡æ®µä¸­ï¼Œå±•ç¤ºäº†<strong>å¤„ç†ã€å¤–éƒ¨å®ä½“å’Œå†…éƒ¨æ•°æ®å­˜å‚¨</strong>ä¹‹é—´çš„äº¤äº’ç»†èŠ‚</p><p>æ¯ä¸ªDFDç‰‡æ®µä»…æ˜¾ç¤ºè¦å“åº”è¯¥äº‹ä»¶çš„ç›¸å…³çš„é‚£äº›æ•°æ®å­˜å‚¨</p><p><strong>ä¸€ä¸ªDFDç‰‡æ®µæ˜¯ä¸ºäº‹ä»¶è¡¨ä¸­çš„æ¯ä¸€ä¸ªäº‹ä»¶åˆ›å»ºçš„</strong></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343251.png" style="zoom:70%;" /></p></li><li><p>DFDçš„0å±‚å›¾ï¼šå°†ä¸€ä¸ªç³»ç»Ÿæˆ–å­ç³»ç»Ÿçš„æ‰€æœ‰DFDç‰‡æ®µç»„åˆåˆ°ä¸€ä¸ªå•ä¸ªçš„DFDå›¾ä¸­ï¼Œè¿™æ ·çš„DFDå›¾ç§°ä¸º<strong>äº‹ä»¶åˆ†ç¦»çš„ç³»ç»Ÿæ¨¡å‹/0å±‚å›¾</strong></p><p><strong>0å±‚DFDå›¾ï¼šâ€œå¤„ç†â€çš„ç¼–å·ä¸º<spanclass="math inline">\(i\)</span></strong></p></li><li><p>DFDå±‚æ¬¡ï¼šä¸€ä¸ªDFDç‰‡æ®µä¸­çš„<strong>å¤„ç†</strong>ä¹Ÿå¯ä»¥åŒ…å«å¤šä¸ªæ›´å°çš„<strong>å¤„ç†</strong>ï¼Œæœ‰æ—¶åˆ†æå‘˜éœ€è¦å°†è¯¥DFDç‰‡æ®µè¿›ä¸€æ­¥ç»†åŒ–ï¼Œç”Ÿæˆæ›´è¯¦ç»†å±‚æ¬¡çš„DFDå›¾</p><p>1å±‚DFDå›¾ï¼šå°†0å±‚DFDä¸­çš„å¤„ç†è¿›ä¸€æ­¥ç»†åŒ–ç­‰åˆ°çš„DFDå›¾â€œå¤„ç†â€çš„ç¼–å·ä¸ºâ€œ<spanclass="math inline">\(i.j\)</span>â€</p><p>2å±‚DFDå›¾ï¼šå°†1å±‚DFDä¸­çš„å¤„ç†è¿›ä¸€æ­¥ç»†åŒ–ç­‰åˆ°çš„DFDå›¾ â€œå¤„ç†â€çš„ç¼–å·ä¸ºâ€œ<spanclass="math inline">\(i.j.k\)</span>â€</p></li></ul><p>å¦‚ä½•ç”»ä¸€ä¸ªå¥½çš„DFDå›¾ï¼š</p><ul><li><p>æœ€å°åŒ–å¤æ‚åº¦ï¼šé‡‡ç”¨åˆ†å±‚ç»“æ„å°†DFDåˆ’åˆ†ä¸ºå°çš„ä¸”ç›¸å¯¹ç‹¬ç«‹çš„å­é›†è¿™æ ·å¯ä»¥é€çº§é˜…è¯»ã€è€ƒå¯ŸDFD</p><p><strong>å•ä¸ªDFDå›¾ä¸­ä¸åº”æœ‰è¶…è¿‡7Â±2ä¸ªå¤„ç†ï¼Œå•ä¸ªDFDä¸­ä¸åº”è¶…è¿‡7Â±2ä¸ªæ•°æ®æµè¿›å‡ºåŒä¸€ä¸ªå¤„ç†/æ•°æ®å­˜å‚¨</strong></p><p>æ¥å£æœ€å°åŒ–ï¼šDFDä¸­å„ä¸ªå…ƒç´ ä¹‹é—´çš„è¿æ¥æ•°è¶Šå°‘è¶Šå¥½</p></li><li><p>ä¿æŒæ•°æ®æµä¸€è‡´ï¼š</p><p><strong>ä¸€ä¸ªâ€œå¤„ç†â€å’Œè¯¥â€œå¤„ç†â€è¢«è¯¦ç»†åˆ†è§£ååœ¨æ•°æ®æµå†…å®¹ä¸Šåº”è¯¥ä¸€è‡´</strong></p><p><strong>å¯¹ä¸€ä¸ªâ€œå¤„ç†â€ï¼Œæœ‰æ•°æ®æµå…¥åˆ™å¿…é¡»æœ‰ç›¸å¯¹åº”çš„æ•°æ®æµå‡º</strong></p><p><strong>å¯¹ä¸€ä¸ªâ€œå¤„ç†â€ï¼Œæœ‰æ•°æ®æµå‡ºåˆ™å¿…é¡»æœ‰ç›¸å¯¹åº”çš„æ•°æ®æµå…¥</strong></p></li><li><p><strong>é»‘æ´</strong>ï¼šå¸¦æœ‰è¾“å…¥æ•°æ®çš„ä½†å¹¶ä¸ç”¨å…¶äº§ç”Ÿè¾“å‡ºæ•°æ®çš„å¤„ç†æˆ–æ•°æ®å­˜å‚¨</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343749.png" style="zoom:50%;" /></p></li><li><p><strong>å¥‡è¿¹</strong>ï¼šæ²¡æœ‰è¶³å¤Ÿæ•°æ®å…ƒç´ ä½œä¸ºè¾“å…¥æˆ–äº§ç”Ÿæ¥æºçš„ä¸€ä¸ªå¤„ç†æˆ–æ•°æ®å­˜å‚¨</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343727.png" style="zoom:50%;" /></p></li><li><p>å…¸å‹é”™è¯¯ï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343082.png" style="zoom:80%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343139.png" style="zoom:60%;" /></p></li></ul><p>åœ¨ä¼ ç»Ÿæ–¹æ³•ä¸­ï¼ŒDFDå›¾ä¸€èˆ¬æè¿°3ç§å…ƒç´ ï¼šå¤„ç†ã€ä½¿ç”¨DFDã€‘ï¼Œï¼ˆæ•°æ®æµï¼Œæ•°æ®å­˜å‚¨ï¼‰ã€ä½¿ç”¨DDã€‘</p><p>DFDç»†èŠ‚æè¿°ï¼šå†³ç­–è¡¨ã€å†³ç­–æ ‘</p><h5 id="æ•°æ®å­—å…¸dd">8.3.4 æ•°æ®å­—å…¸ï¼ˆDDï¼‰</h5><p>æ•°æ®å­—å…¸æ˜¯æ•°æ®åˆ†æçš„æè¿°æ¨¡å‹ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li><p>æ•°æ®é¡¹å®šä¹‰ï¼šå®šä¹‰ç‰¹å®šæ•°æ®é¡¹çš„ç»„æˆå’Œæ„ä¹‰</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343555.png" style="zoom:60%;" /></p></li><li><p>æ•°æ®ç»“æ„å®šä¹‰ï¼šå®šä¹‰æœ‰æ•°æ®é¡¹ç»„æˆçš„è¡¨è¾¾æ•°æ®çš„åŸºæœ¬æ•°æ®</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343415.png"  style="zoom:60%;" /></p></li><li><p>æ•°æ®æµæè¿°ï¼šæè¿°æ•°æ®æµçš„æ•°æ®æ„æˆï¼Œå¹¶æŒ‡æ˜å…¶æ¥æºæˆ–å»å‘</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343471.png" style="zoom:60%;" /></p></li><li><p>æ•°æ®å­˜å‚¨æè¿°ï¼šæè¿°ä¿å­˜åœ¨å­˜å‚¨ä»‹è´¨ä¸Šçš„æ•°æ®æ–‡ä»¶æˆ–æ•°æ®åº“è¡¨çš„æ ¼å¼å’Œå†…å®¹</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343049.png" style="zoom:60%;" /></p></li><li><p>æ•°æ®å¤„ç†ï¼ˆå¹¿ä¹‰DDï¼‰ï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343127.png" style="zoom:60%;" /></p></li></ul><h5 id="æ•°æ®åˆ†æerdidef1x">8.3.5 æ•°æ®åˆ†æï¼ˆERDã€IDEF1Xï¼‰</h5><p>å®ä½“å…³ç³»å›¾ï¼ˆ<span class="math inline">\(ERD\)</span>ï¼‰</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343154.png"  style="zoom:80%;" /></p><p>å…³è”å®ä½“ï¼šè§£å†³ä¸Šè¿°é—®é¢˜çš„äººä¸ºå¢åŠ çš„æ•°æ®å®ä½“ï¼Œå®ƒä¸€å®šåŒ…å«ä¸¤ç«¯æ•°æ®å®ä½“çš„å…³é”®å­—</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343157.png" style="zoom:80%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343885.png" style="zoom:80%;" /></p><h4 id="é¢å‘å¯¹è±¡çš„åˆ†æ">8.4 é¢å‘å¯¹è±¡çš„åˆ†æ</h4><h5 id="é¢å‘å¯¹è±¡çš„åˆ†ææ–¹æ³•æ¦‚è¿°">8.4.1 é¢å‘å¯¹è±¡çš„åˆ†ææ–¹æ³•æ¦‚è¿°</h5><p>é¢å‘å¯¹è±¡çš„åˆ†ææ¨¡å‹ç”±ä¸‰ä¸ªç‹¬ç«‹æ¨¡å‹æ„æˆï¼ˆåˆ†ä¸º3ä¸ªé˜¶æ®µï¼‰ï¼š</p><ul><li>åŠŸèƒ½æ¨¡å‹ï¼šä»ç”¨æˆ·è§’åº¦è·å–åŠŸèƒ½éœ€æ±‚ï¼Œç”±<strong>ç”¨ä¾‹æ¨¡å‹</strong>è¡¨ç¤º</li><li>é™æ€ç»“æ„æ¨¡å‹ï¼šæè¿°ç³»ç»Ÿçš„æ¦‚å¿µå®ä½“ï¼Œç”±<strong>ç±»å›¾</strong>è¡¨ç¤º</li><li>åŠ¨æ€ç»“æ„æ¨¡å‹ï¼šæè¿°å¯¹è±¡ä¹‹é—´çš„äº¤äº’è¡Œä¸ºï¼Œç”±<strong>æ—¶åºå›¾å’Œåä½œå›¾</strong>è¡¨ç¤º</li></ul><p>é™æ€ç»“æ„æ¨¡å‹&amp;åŠ¨æ€ç»“æ„æ¨¡å‹å»ºç«‹ä¸å®ç°æŠ€æœ¯æ— å…³çš„ç³»ç»Ÿé€»è¾‘ç»“æ„</p><h5 id="å»ºç«‹é™æ€ç»“æ„æ¨¡å‹">8.4.2 å»ºç«‹é™æ€ç»“æ„æ¨¡å‹</h5><p>é™æ€ç»“æ„æ¨¡å‹</p><ul><li><p>è¾¹ç•Œç±»</p><p>ç”¨æˆ·ç•Œé¢ã€ç³»ç»Ÿæ¥å£ã€è®¾å¤‡æ¥å£</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343809.png" style="zoom:80%;" /></p></li><li><p>æ§åˆ¶ç±»</p><p>å¯¹ç”¨ä¾‹è¡Œä¸ºçš„å°è£…ï¼Œä¸€èˆ¬ä¸€ä¸ªç”¨ä¾‹å¯¹äºä¸€ä¸ªæ§åˆ¶ç±»</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343423.png" style="zoom:100%;" /></p></li><li><p>å®ä½“ç±»</p><p>â€œäº‹ç‰©â€</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343679.png" style="zoom:100%;" /></p><p>ä¸‰ç§ç±»ä¹‹é—´æ˜¯â€œå…³è”â€å…³ç³»</p><p><strong>ä¸€ä¸ªè¾¹ç•Œç±»</strong>å¯ä»¥<strong>ä¸å¤šä¸ªæ§åˆ¶ç±»</strong>ç›¸å…³è”</p><p><strong>ä¸€ä¸ªæ§åˆ¶ç±»</strong>å¯ä»¥ä¸<strong>å¤šä¸ªè¾¹ç•Œç±»</strong>ç›¸å…³è”ã€ä¸<strong>å¤šä¸ªå®ä½“ç±»</strong>å…³è”</p><p><strong>ä¸€ä¸ªå®ä½“ç±»</strong>å¯ä»¥ä¸<strong>å¤šä¸ªæ§åˆ¶ç±»</strong>ç›¸å…³è”</p><ul><li><p>é™¤éç³»ç»Ÿéœ€è¦åœ¨å„ç”¨ä¾‹ä¸­ç®¡ç†å’Œç»´æŠ¤è¯¥è§’è‰²çš„ä¿¡æ¯(ä¸æ˜¯æŒ‡IDã€å¯†ç )ï¼Œå¦åˆ™åªéœ€å°†å…¶ä½œä¸ºactorï¼Œæ— éœ€ä½œä¸ºå®ä½“ç±»</p></li><li><p><spanclass="math inline">\(actor\)</span>è‡ªå·±åšçš„åŠ¨ä½œï¼Œéƒ½æ˜¯è¾¹ç•Œç±»çš„æ“ä½œï¼Œä¸æ§åˆ¶ç±»å’Œå®ä½“ç±»æ— å…³</p></li><li><p>å®ä½“ç±»æ“ä½œåˆ†ä¸¤ç±»ï¼š</p><ol type="a"><li><p><span class="math inline">\(new()ã€destroy()\)</span></p></li><li><p>å¯¹è¯¥å®ä½“å†…éƒ¨çš„ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§çš„CRUDï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰æ“ä½œ â€”<strong>æ˜¯è‡ªå·±çš„å±æ€§ï¼Œä¸æ˜¯å…¶ä»–å®ä½“çš„ï¼</strong>å› æ­¤ï¼Œå¯¹ç”¨ä¾‹ä¸­actoræ‰€å‘å‡ºçš„æ¯ä¸ªåŠ¨ä½œï¼Œéœ€è¦ä»”ç»†åˆ†æå®ƒå¯¹å“ªäº›å®ä½“ç±»çš„å“ªäº›å±æ€§åšCRUD</p></li></ol></li></ul><p>å¦‚æœæ“ä½œCRUDçš„å¯¹è±¡ä¸æ˜¯è¯¥å®ä½“ç±»çš„å±æ€§ï¼Œåˆ™è¯´æ˜è¯¥æ“ä½œåº”ç§»åŠ¨åˆ°ç›¸åº”çš„å®ä½“ç±»ä¸­ã€‚</p><p>è‹¥æŸæ“ä½œopä¼šCRUDå¤šä¸ªå®ä½“ç±»çš„å±æ€§ï¼Œé€šå¸¸å¯ä»¥æŠŠè¿™ä¸ªæ“ä½œåˆ†è§£ä¸ºå¤šä¸ªå°ç²’åº¦æ“ä½œï¼Œæ¯ä¸ªå°æ“ä½œæ”¾åœ¨ä¸“é—¨çš„å®ä½“ç±»ä¸­ï¼Œå¦‚æœæ²¡åŠæ³•åˆ†è§£ï¼Œåˆ™ä½¿ç”¨æ§åˆ¶ç±»åŠ ä»¥å®Œæˆã€‚</p></li></ul><p>å…³ç³»ï¼šæ³›åŒ–ã€å…³è”ã€ç»„åˆã€èšåˆã€ä¾èµ–</p><ul><li><p>åˆ†æç±»å›¾ï¼šä¸»è¦åŒºåˆ†è¾¹ç•Œç±»ã€æ§åˆ¶ç±»ã€å®ä½“ç±»</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343643.png" style="zoom:70%;" /></p></li><li><p>é¢†åŸŸç±»å›¾ï¼šä¸»è¦åŒºåˆ†æ³›åŒ–ã€å…³è”ã€ç»„åˆã€èšåˆã€ä¾èµ–</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343837.png" style="zoom:70%;" /></p></li></ul><h5 id="å»ºç«‹åŠ¨æ€è¡Œä¸ºæ¨¡å‹">8.4.3 å»ºç«‹åŠ¨æ€è¡Œä¸ºæ¨¡å‹</h5><p>è§7.4</p><h5 id="æ¡ˆä¾‹åˆ†æ-1">8.4.4 æ¡ˆä¾‹åˆ†æ</h5><ol type="1"><li><p>è§’è‰²è¯†åˆ«</p></li><li><p>ç”¨ä¾‹è¯†åˆ«</p></li><li><p>å»ºç«‹ç”¨ä¾‹æ¨¡å‹</p></li><li><p>å¯¹ç”¨ä¾‹å›¾è¿›è¡Œç²¾åŒ–</p><p>ï¼ˆé’ˆå¯¹æ¯ä¸ªç”¨ä¾‹ï¼‰</p></li><li><p>æ’°å†™ç”¨ä¾‹æè¿°</p></li><li><p>ç»˜åˆ¶ç”¨ä¾‹çš„æ´»åŠ¨ï¼ˆæ³³é“ï¼‰å›¾</p></li><li><p>è¯†åˆ«åˆ†æç±»ï¼ˆè¾¹ç•Œç±»ã€æ§åˆ¶ç±»ã€å®ä½“ç±»ï¼‰</p></li><li><p>è¯†åˆ«æ¯ä¸ªç±»çš„å±æ€§å’Œæ–¹æ³•</p></li><li><p>å»ºç«‹åˆ†æç±»å›¾</p></li><li><p>å»ºç«‹é¢†åŸŸç±»å›¾</p></li><li><p>å»ºç«‹æ—¶åºå›¾</p></li></ol><h2 id="è½¯ä»¶è®¾è®¡">9.è½¯ä»¶è®¾è®¡ğŸŒ</h2><h4 id="ç»“æ„åŒ–è®¾è®¡">9.1 ç»“æ„åŒ–è®¾è®¡</h4><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343353.png" style="zoom:70%;" /></p><p>è‡ªåŠ¨åŒ–ç³»ç»Ÿè¾¹ç•Œåˆ’åˆ†ï¼šå°†æ•°æ®æµå›¾åˆ†ä¸ºæ‰‹å·¥å¤„ç†éƒ¨åˆ†å’Œç³»ç»Ÿèƒ½è‡ªåŠ¨å®Œæˆçš„éƒ¨åˆ†</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343277.png" style="zoom:70%;" /></p><p>ç»“æ„å›¾åˆ›å»ºæ–¹æ³•ï¼š</p><ul><li><p>DFDç‰‡æ®µ</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343667.png" style="zoom:70%;" /></p></li><li><p>DFDåˆ†è§£å›¾</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343962.png" style="zoom:70%;" /></p></li><li><p>DFDé‡ç»„</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251343136.png" style="zoom:70%;" /></p></li><li><p>ç»“æ„å›¾</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251344086.png" style="zoom:70%;" /></p></li></ul><p>å˜æ¢å‹ç»“æ„çš„æ•°æ®æµå›¾å‘ˆä¸€ç§çº¿æ€§çŠ¶æ€ï¼Œå®ƒæ‰€æè¿°çš„å·¥ä½œå¯è¡¨ç¤ºä¸ºè¾“å…¥ã€ä¸»å¤„ç†åŠè¾“å‡ºã€‚</p><p>äº‹åŠ¡å‹ç»“æ„çš„æ•°æ®æµå›¾åˆ™å‘ˆæŸçŠ¶ï¼Œå³ä¸€æŸæ•°æ®æµå¹³è¡Œæµäººæˆ–æµå‡ºï¼Œå¯èƒ½åŒæ—¶æœ‰å‡ ä¸ªäº‹åŠ¡è¦æ±‚å¤„ç†ã€‚</p><p>DFDåˆ°ç³»ç»Ÿç»“æ„å›¾è½¬æ¢çš„æ¨¡å¼ï¼š</p><ul><li>äº‹åŠ¡å‹</li><li>å¤æ‚å˜æ¢å‹</li></ul><p>ç»“æ„å›¾ï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251344018.png" style="zoom:60%;" /></p><p><strong>ä¸‰ç§è½¬æ¢</strong>ã€é‡ä¸­ä¹‹é‡ã€‘</p><p><strong>è§<span class="math inline">\(PPT\)</span></strong></p><p><a href="https://www.it610.com/article/1864147.htm">è½¬æ¢</a></p><h4 id="é¢å‘å¯¹è±¡è®¾è®¡">9.2 é¢å‘å¯¹è±¡è®¾è®¡</h4><p>ç»“æ„åŒ–æ–¹æ³•ï¼šåˆ†æé˜¶æ®µä¸è®¾è®¡é˜¶æ®µåˆ†å¾—ç‰¹åˆ«æ¸…æ¥šï¼Œåˆ†åˆ«ä½¿ç”¨ä¸¤å¥—å®Œå…¨ä¸åŒçš„å»ºæ¨¡ç¬¦å·å’Œå»ºæ¨¡æ–¹æ³•</p><p>é¢å‘å¯¹è±¡è®¾è®¡ï¼ˆ<span class="math inline">\(OOD\)</span>ï¼‰ï¼š<spanclass="math inline">\(OO\)</span>å„é˜¶æ®µå‡é‡‡ç”¨ç»Ÿä¸€çš„â€œå¯¹è±¡â€æ¦‚å¿µï¼Œå„é˜¶æ®µä¹‹é—´çš„åŒºåˆ†å˜å¾—ä¸æ˜æ˜¾ï¼Œå½¢æˆâ€œæ— ç¼â€è¿æ¥</p><p>ç³»ç»Ÿè®¾è®¡ï¼ˆ<strong>æ¦‚è¦è®¾è®¡</strong>ï¼‰<span class="math inline">\(\\rightarrow\ \)</span>å¯¹è±¡è®¾è®¡ï¼ˆ<strong>è¯¦ç»†è®¾è®¡</strong>ï¼‰</p><p>å­ç³»ç»Ÿçš„åˆ’åˆ†åº”è¯¥ç¬¦åˆ<strong>é«˜å†…èšä½è€¦åˆ</strong>çš„åŸåˆ™</p><p>ç±»ä¸ç±»ä¹‹é—´å­˜åœ¨çš„â€œèšåˆã€ç»„åˆã€å…³è”ã€ä¾èµ–â€å…³ç³»å¯¼è‡´åŒ…ä¸åŒ…ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œå³â€œåŒ…çš„ä¾èµ–â€(<spanclass="math inline">\(dependency\)</span>)ï¼›ç±»ä¸ç±»ä¹‹é—´çš„å­˜åœ¨çš„â€œç»§æ‰¿â€å…³ç³»å¯¼è‡´åŒ…ä¸åŒ…ä¹‹é—´å­˜åœ¨ç»§æ‰¿å…³ç³»ï¼Œå³â€œåŒ…çš„æ³›åŒ–â€(<spanclass="math inline">\(generalization\)</span>)</p><p>å¯¹è±¡è®¾è®¡åŸºæœ¬æ­¥éª¤</p><ol type="1"><li>åˆ›å»ºåˆå§‹çš„è®¾è®¡ç±»</li><li>ç»†åŒ–å±æ€§</li><li>ç»†åŒ–æ“ä½œ</li><li>å®šä¹‰çŠ¶æ€</li><li>ç»†åŒ–ä¾èµ–å…³ç³»</li><li>ç»†åŒ–å…³è”å…³ç³»</li><li>ç»†åŒ–æ³›åŒ–å…³ç³»</li></ol><h4 id="æ•°æ®åº“è®¾è®¡">9.3 æ•°æ®åº“è®¾è®¡</h4><p>æ•°æ®åº“ç³»ç»Ÿ = æ•°æ®åº“ï¼ˆDBï¼‰ + æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰</p><p>æ•°æ®åº“è®¾è®¡ä»»åŠ¡ï¼š</p><ul><li>é€»è¾‘è®¾è®¡ï¼šè®¾è®¡<span class="math inline">\(ER\)</span>æ¨¡å‹</li><li>ç‰©ç†è®¾è®¡ï¼šåœ¨å…·ä½“çš„æ•°æ®åº“ç³»ç»Ÿä¸­å®ç°<spanclass="math inline">\(ER\)</span>æ¨¡å‹</li></ul><p>æ•°æ®åº“<strong>é€»è¾‘æ¨¡å‹è®¾è®¡</strong>ï¼šERDå›¾</p><p><span class="math inline">\(3NF\)</span>èŒƒå¼ï¼š</p><ul><li><spanclass="math inline">\(1NF\)</span>ï¼šæ²¡æœ‰é‡å¤çš„å±æ€§æˆ–å±æ€§ç»„ï¼ˆåŒæ ·çš„ä¸œè¥¿ä¸èƒ½é‡å¤æ‹¥æœ‰ï¼‰</li><li><span class="math inline">\(2NF\)</span>ï¼šæ˜¯<spanclass="math inline">\(1NF\)</span>ä¸”æ¯ä¸ªéä¸»å±æ€§å‡å‡½æ•°ä¾èµ–äºä¸»å±æ€§ï¼ˆä¸»é”®ï¼‰ï¼ˆé¢†å¯¼åœ¨ï¼Œä»–å°±åœ¨ï¼Œæ‰¾åˆ°é¢†å¯¼å°±èƒ½æ‰¾åˆ°ä»–ï¼‰</li><li><span class="math inline">\(3NF\)</span> ï¼šæ˜¯<spanclass="math inline">\(2NF\)</span>ä¸”éä¸»å±æ€§é—´å‡ä¸å­˜åœ¨å‡½æ•°ä¾èµ–ï¼ˆé¢†å¯¼åªæœ‰ä¸€ä¸ªï¼Œä¸èƒ½æœ‰å¤šçº§é¢†å¯¼ï¼‰</li></ul><p>æ ¹æ®ERDè®¾è®¡ç‰©ç†æ•°æ®åº“</p><ol type="1"><li>ä¸ºæ¯ä¸ªå®ä½“åˆ›å»ºä¸€ä¸ªäºŒç»´è¡¨</li><li>ä¸ºæ¯ä¸ªå­—æ®µé€‰æ‹©é€‚å½“çš„æ•°æ®ç±»å‹å’Œå–å€¼èŒƒå›´</li><li>å®šä¹‰æ¯ä¸ªè¡¨çš„ä¸»é”®</li><li>é’ˆå¯¹1ï¼šMå…³è”å…³ç³»çš„å­è¡¨æ·»åŠ å¤–é”®</li><li>å®šä¹‰å®Œæ•´å‹çº¦æŸ</li></ol><p>åˆ†æç±»å›¾æ˜ å°„åˆ°ERD</p><p>æœ¬è´¨ï¼šæŠŠ<strong>æ¯ä¸€ä¸ªç±»ï¼Œç±»ä¹‹é—´çš„å…³ç³»</strong>åˆ†åˆ«æ˜ å°„åˆ°ä¸€å¼ è¡¨æˆ–å¤šå¼ è¡¨</p><ul><li><p>ä¸€ç±»ä¸€è¡¨</p></li><li><p>ä¸ç®¡æ˜¯<span class="math inline">\(1\ :\ 1ï¼Œ1\ :\ nï¼Œm\ :\n\)</span>çš„å…³è”å…³ç³»ï¼Œå‡å¯ä»¥ï¼šAï¼ŒBåˆ†åˆ«æ˜ å°„ä¸ºç‹¬ç«‹çš„æ•°æ®è¡¨ï¼Œç„¶åå†åŠ å…¥ä¸€å¼ æ–°è¡¨æ¥å­˜å‚¨äºŒè€…ä¹‹é—´çš„å…³è”</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251344870.png" style="zoom:70%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251344820.png" style="zoom:70%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251344920.png" style="zoom:67%;" /></p></li><li><p>èšåˆ/ç»„åˆå…³ç³»</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251344279.png" style="zoom:67%;" /></p></li><li><p>æ³›åŒ–å…³ç³»</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251344472.png" style="zoom:67%;" /></p></li></ul><h4 id="ç”¨æˆ·ç•Œé¢è®¾è®¡">9.4 ç”¨æˆ·ç•Œé¢è®¾è®¡</h4><ul><li><span class="math inline">\(CUI\)</span>ï¼šå­—ç¬¦ç”¨æˆ·ç•Œé¢</li><li><span class="math inline">\(GUI\)</span>ï¼šå›¾å½¢ç”¨æˆ·ç•Œé¢ <spanclass="math inline">\(\rightarrow\ WIMP\)</span></li><li><span class="math inline">\(MUI\)</span>ï¼šå¤šé€šé“ç”¨æˆ·ç•Œé¢</li></ul><p>ç¼ºçœè®¾è®¡æ–¹æ³•ï¼š</p><ul><li>ç”¨æˆ·æ“ä½œè®¾å®šç¼ºçœå€¼ï¼ˆä¹Ÿå¯ä»¥ä½œä¸ºå¼ºåˆ¶å€¼è¾“å…¥ï¼‰</li><li>ç»éªŒå€¼ä½œä¸ºç¼ºçœå€¼</li><li>ç»Ÿè®¡æ–¹æ³•ç¡®å®šå‡ºç°å‡ ç‡å¤§çš„å€¼ä½œä¸ºç¼ºçœå€¼</li><li>ç»Ÿè®¡æ–¹æ³•ç¡®å®šå‡ºç°å‡ ç‡å¤§çš„å€¼ä½œä¸ºç¼ºçœå€¼</li><li>æœ€è¿‘ä½¿ç”¨å€¼ä½œä¸ºç¼ºçœå€¼</li><li>è¾“å…¥æ•°æ®çš„ä¸Šä¸‹æ–‡å…³è”ç¼ºçœå€¼</li><li>å½“å‰çŠ¶æ€å€¼å¯ä½œä¸ºç¼ºçœå€¼</li><li>å½“å‰çŠ¶æ€å€¼å¯ä½œä¸ºç¼ºçœå€¼</li><li>æ­£å¸¸æ“ä½œåºåˆ—é€‰é¡¹ä½œä¸ºç¼ºçœå€¼</li><li>æ ‘çŠ¶éš¶å±å…³ç³»çº¦æŸé€‰é¡¹åˆ—è¡¨</li><li>æ™ºèƒ½ç„¦ç‚¹</li></ul><h2 id="è½¯ä»¶æµ‹è¯•">10.è½¯ä»¶æµ‹è¯•ğŸª</h2><h4 id="è½¯ä»¶æµ‹è¯•åŸºç¡€">10.1 è½¯ä»¶æµ‹è¯•åŸºç¡€</h4><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251344061.png" style="zoom:60%;" /></p><p>ä¸Šé¢çš„<span class="math inline">\(Venn\Diagram\)</span>å¯ä»¥ç†è§£æµ‹è¯•</p><p>æµ‹è¯•å¯ä»¥è¯æ˜â€œç¨‹åºæœ‰é”™â€ï¼Œä¸èƒ½è¯æ˜â€œç¨‹åºæ­£ç¡®â€</p><h4 id="æµ‹è¯•è¿‡ç¨‹">10.2 æµ‹è¯•è¿‡ç¨‹</h4><p>è½¯ä»¶æµ‹è¯•çš„<span class="math inline">\(V\)</span>æ¨¡å‹</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251344859.png" style="zoom:60%;" /></p><h4 id="æµ‹è¯•æ–¹æ³•åˆ†ç±»">10.3 æµ‹è¯•æ–¹æ³•åˆ†ç±»</h4><ul><li><p>å•å…ƒæµ‹è¯•</p><p><strong>å¼€å‘äººå‘˜</strong>æ‰§è¡Œ</p><p>é©±åŠ¨æ¨¡å—ï¼šæ¨¡ä»¿è¢«æµ‹æ¨¡å—çš„ä¸Šä¸€çº§æ¨¡å—</p><p>æ¡©æ¨¡å—ï¼šæ¨¡æ‹Ÿè¢«æµ‹å•å…ƒéœ€è°ƒç”¨çš„å…¶ä»–å‡½æ•°æ¥å£</p></li><li><p>é›†æˆæµ‹è¯•</p><p>æµ‹è¯•çš„å¯¹è±¡æ˜¯æ¨¡å—é—´çš„æ¥å£</p><ul><li><p>æ•´ä½“é›†æˆ</p><p>å°†æ‰€æœ‰æ¨¡å—æŒ‰è®¾è®¡è¦æ±‚ä¸€æ¬¡å…¨éƒ¨ç»„è£…èµ·æ¥ï¼Œç„¶åè¿›è¡Œæ•´ä½“æµ‹è¯•</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251344081.png" style="zoom:60%;" /></p></li><li><p>å¢é‡é›†æˆ</p><p>é€æ­¥å°†æ–°æ¨¡å—åŠ å…¥å¹¶æµ‹è¯•</p><ul><li><p>è‡ªé¡¶å‘ä¸‹å¢é‡é›†æˆ</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251345446.png" style="zoom:60%;" /></p><p>æ·±åº¦ä¼˜å…ˆï¼šA,B,E,C,D,F</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251344771.png" style="zoom:80%;" /></p><p>å¹¿åº¦ä¼˜å…ˆï¼šA,B,C,D,E,F</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251345884.png" style="zoom:80%;" /></p><p><strong>æ‰€éœ€æ¡©æ¨¡å—å·¨å¤§</strong></p><p>è¾ƒå°‘éœ€è¦é©±åŠ¨æ¨¡å—</p></li><li><p>è‡ªåº•å‘ä¸‹å¢é‡é›†æˆ</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251345781.png" style="zoom:80%;" /></p><p><strong>ä¸ç”¨æ¡©æ¨¡å—</strong></p><p>éš¾ä»¥å°½æ—©å»ºç«‹ä¿¡å¿ƒ</p></li><li><p>ä¸‰æ˜æ²»é›†æˆ</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251345073.png" style="zoom:60%;" /></p></li></ul></li></ul></li><li><p>ç¡®è®¤æµ‹è¯•</p><p>æ˜¯å¦æ»¡è¶³è½¯ä»¶éœ€æ±‚è¯´æ˜ä¹¦ä¸­çš„ç¡®è®¤æ ‡å‡†</p></li><li><p>ç³»ç»Ÿæµ‹è¯•</p></li><li><p>éªŒæ”¶æµ‹è¯•</p><p>ä»¥ç”¨æˆ·ä¸ºä¸»çš„æµ‹è¯•</p><p><spanclass="math inline">\(\alpha\)</span>æµ‹è¯•ï¼šç”±ç”¨æˆ·åœ¨å¼€å‘ç¯å¢ƒä¸‹è¿›è¡Œçš„æµ‹è¯•</p><p><spanclass="math inline">\(\beta\)</span>æµ‹è¯•ï¼šç”±è½¯ä»¶çš„å¤šä¸ªç”¨æˆ·åœ¨å®é™…ä½¿ç”¨ç¯å¢ƒä¸‹è¿›è¡Œæµ‹è¯•</p></li><li><p>å›å½’æµ‹è¯•</p></li></ul><h4 id="é»‘ç›’æµ‹è¯•">10.4 é»‘ç›’æµ‹è¯•</h4><h5 id="é»‘ç›’æµ‹è¯•æ¦‚è¿°">10.4.1 é»‘ç›’æµ‹è¯•æ¦‚è¿°</h5><p>é€šå¸¸åœ¨è½¯ä»¶æ¥å£å¤„è¿›è¡Œ</p><p>åŸç†ï¼šä»»ä½•ç¨‹åºéƒ½å¯ä»¥çœ‹æˆæ˜¯å°†è¾“å…¥å®šä¹‰åŸŸå–å€¼æ˜ å°„åˆ°è¾“å‡ºå€¼åŸŸçš„å‡½æ•°</p><p>ä¸å¯èƒ½ç©·ä¸¾æ‰€æœ‰çš„æƒ…å†µ</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251345324.png" style="zoom:67%;" /></p><h5 id="ç­‰ä»·ç±»åˆ’åˆ†æ–¹æ³•">10.4.2 ç­‰ä»·ç±»åˆ’åˆ†æ–¹æ³•</h5><p>ç¡®å®šç­‰ä»·ç±»çš„å…­å¤§åŸåˆ™</p><ul><li>åœ¨è¾“å…¥æ¡ä»¶è§„å®šäº†å–å€¼èŒƒå›´æˆ–å€¼çš„ä¸ªæ•°çš„æƒ…å†µä¸‹ï¼Œåˆ™å¯ä»¥ç¡®ç«‹1ä¸ªæœ‰æ•ˆç­‰ä»·ç±»å’Œ2ä¸ªæ— æ•ˆç­‰ä»·ç±»</li><li>åœ¨è¾“å…¥æ¡ä»¶è§„å®šäº†è¾“å…¥å€¼çš„é›†åˆæˆ–è€…è§„å®šäº†â€œå¿…é¡»å¦‚ä½•â€çš„æ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œå¯ç¡®ç«‹1ä¸ªæœ‰æ•ˆç­‰ä»·ç±»å’Œ1ä¸ªæ— æ•ˆç­‰ä»·ç±»</li><li>åœ¨è¾“å…¥æ¡ä»¶æ˜¯ä¸€ä¸ªå¸ƒå°”é‡çš„æƒ…å†µä¸‹ï¼Œå¯ç¡®å®š1ä¸ªæœ‰æ•ˆç­‰ä»·ç±»å’Œ1ä¸ªæ— æ•ˆç­‰ä»·ç±»</li><li>åœ¨è§„å®šäº†è¾“å…¥æ•°æ®çš„ä¸€ç»„å€¼(å‡å®šnä¸ª)ã€å¹¶ä¸”ç¨‹åºè¦å¯¹æ¯ä¸€ä¸ªè¾“å…¥å€¼åˆ†åˆ«å¤„ç†çš„æƒ…å†µä¸‹ï¼Œå¯ç¡®ç«‹nä¸ªæœ‰æ•ˆç­‰ä»·ç±»å’Œ1ä¸ªæ— æ•ˆç­‰ä»·ç±»</li><li>åœ¨è§„å®šäº†è¾“å…¥æ•°æ®å¿…é¡»éµå®ˆçš„è§„åˆ™çš„æƒ…å†µä¸‹ï¼Œå¯ç¡®ç«‹1ä¸ªæœ‰æ•ˆç­‰ä»·ç±»(ç¬¦åˆè§„åˆ™)å’Œnä¸ªæ— æ•ˆç­‰ä»·ç±»(ä»ä¸åŒè§’åº¦è¿åè§„åˆ™)</li><li>åœ¨ç¡®çŸ¥å·²åˆ’åˆ†çš„ç­‰ä»·ç±»ä¸­å„å…ƒç´ åœ¨ç¨‹åºå¤„ç†ä¸­çš„æ–¹å¼ä¸åŒçš„æƒ…å†µä¸‹ï¼Œåˆ™åº”å†å°†è¯¥ç­‰ä»·ç±»è¿›ä¸€æ­¥çš„åˆ’åˆ†ä¸ºæ›´å°çš„ç­‰ä»·ç±»</li></ul><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251345728.png" style="zoom:80%;" /></p><h5 id="è¾¹ç•Œå€¼æ–¹æ³•">10.4.3 è¾¹ç•Œå€¼æ–¹æ³•</h5><p>åŸåˆ™</p><ul><li>å¦‚æœè¾“å…¥æ¡ä»¶è§„å®šäº†å€¼çš„èŒƒå›´ï¼Œåˆ™åº”å–åˆšè¾¾åˆ°è¿™ä¸ªèŒƒå›´çš„è¾¹ç•Œçš„å€¼ï¼Œä»¥åŠåˆšåˆšè¶…è¶Šè¿™ä¸ªèŒƒå›´è¾¹ç•Œçš„å€¼ä½œä¸ºæµ‹è¯•è¾“å…¥æ•°æ®</li><li>å¦‚æœè¾“å…¥æ¡ä»¶è§„å®šäº†å€¼çš„ä¸ªæ•°ï¼Œåˆ™ç”¨æœ€å¤§ä¸ªæ•°ã€æœ€å°ä¸ªæ•°ã€æ¯”æœ€å°ä¸ªæ•°å°‘1,æ¯”æœ€å¤§ä¸ªæ•°å¤š1çš„æ•°æ®ä½œä¸ºæµ‹è¯•æ•°æ®</li><li>å°†åŸåˆ™1å’ŒåŸåˆ™2åº”ç”¨äºè¾“å‡ºæ¡ä»¶ï¼Œå³è®¾è®¡æµ‹è¯•ç”¨ä¾‹ä½¿è¾“å‡ºå€¼è¾¾åˆ°è¾¹ç•Œå€¼åŠå…¶å·¦å³çš„å€¼</li><li>å¦‚æœç¨‹åºçš„è§„æ ¼è¯´æ˜ç»™å‡ºçš„è¾“å…¥åŸŸæˆ–è¾“å‡ºåŸŸæ˜¯æœ‰åºé›†åˆï¼Œåˆ™åº”é€‰å–é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ å’Œæœ€åä¸€ä¸ªå…ƒç´ ä½œä¸ºæµ‹è¯•ç”¨ä¾‹</li><li>å¦‚æœç¨‹åºä¸­ä½¿ç”¨äº†ä¸€ä¸ªå†…éƒ¨æ•°æ®ç»“æ„ï¼Œåˆ™åº”å½“é€‰æ‹©è¿™ä¸ªå†…éƒ¨æ•°æ®ç»“æ„çš„è¾¹ç•Œä¸Šçš„å€¼ä½œä¸ºæµ‹è¯•ç”¨ä¾‹</li><li>åˆ†æè§„æ ¼è¯´æ˜ï¼Œæ‰¾å‡ºå…¶å®ƒå¯èƒ½çš„è¾¹ç•Œæ¡ä»¶</li></ul><h4 id="ç™½ç›’æµ‹è¯•">10.5 ç™½ç›’æµ‹è¯•</h4><h5 id="ç™½ç›’æµ‹è¯•æ¦‚è¿°">10.5.1 ç™½ç›’æµ‹è¯•æ¦‚è¿°</h5><p><strong>ç™½ç›’æµ‹è¯•ç”¨ä¾‹ä¸­çš„è¾“å…¥æ•°æ®ä»ç¨‹åºç»“æ„å¯¼å‡ºï¼Œä½†æœŸæœ›è¾“å‡ºåŠ¡å¿…ä»éœ€æ±‚è§„æ ¼ä¸­å¯¼å‡º</strong></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251345499.png" style="zoom:70%;" /></p><h5 id="ç™½ç›’æµ‹è¯•çš„è¦†ç›–æ ‡å‡†">10.5.2 ç™½ç›’æµ‹è¯•çš„è¦†ç›–æ ‡å‡†</h5><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251345445.png" style="zoom:70%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251345190.png" style="zoom:70%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251345956.png" style="zoom:80%;" /></p><ul><li><p>è¯­å¥è¦†ç›–</p><p>ä½¿æ¯æ¡è¯­å¥è‡³å°‘è¢«æ‰§è¡Œä¸€æ¬¡</p></li><li><p>åˆ¤å®šè¦†ç›–</p><p>ä½¿ç¨‹åºä¸­çš„æ¯ä¸ªåˆ†æ”¯è‡³å°‘éƒ½é€šè¿‡ä¸€æ¬¡</p></li><li><p>æ¡ä»¶è¦†ç›–</p><p>ä½¿åˆ¤å®šä¸­çš„<strong>æ¯ä¸ªæ¡ä»¶ï¼ˆä¸ç”¨è€ƒè™‘æ•´ä½“çš„ç»“æœï¼‰</strong>è·å¾—å„ç§å¯èƒ½çš„ç»“æœ</p><p><strong>æ¡ä»¶è¦†ç›–å¹¶ä¸èƒ½å®Œå…¨åŒ…å«åˆ¤å®šè¦†ç›–ï¼Œä¹Ÿå¯èƒ½ä¸åŒ…å«è¯­å¥è¦†ç›–</strong></p></li><li><p>åˆ¤å®š/æ¡ä»¶è¦†ç›–</p><p>ä½¿åˆ¤å®šä¸­çš„æ¯ä¸ªæ¡ä»¶å–å¾—å„ç§å¯èƒ½çš„ç»“æœï¼Œå¹¶ä½¿å¾—æ¯ä¸ªåˆ†æ”¯å–å¾—å„ç§å¯èƒ½çš„ç»“æœ</p><p>ä¸ä¸€å®šæŸ¥å‡ºé€»è¾‘è¡¨è¾¾å¼çš„æ‰€æœ‰é”™è¯¯</p></li><li><p>æ¡ä»¶ç»„åˆè¦†ç›–</p><p>ä½¿å¾—æ¯ä¸ªåˆ¤å®šä¸­å¤šä¸ªæ¡ä»¶çš„å„ç§å–å€¼çš„å¯èƒ½ç»„åˆéƒ½è‡³å°‘å‡ºç°ä¸€æ¬¡</p></li></ul><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251345199.png" style="zoom:70%;" /></p><h5 id="åŸºæœ¬è·¯å¾„æ³•">10.5.3 åŸºæœ¬è·¯å¾„æ³•</h5><p>è·¯å¾„æµ‹è¯•ï¼šè®¾è®¡è¶³å¤Ÿå¤šçš„æµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–è¢«æµ‹è¯•å¯¹è±¡çš„æ‰€æœ‰å¯èƒ½è·¯å¾„</p><p>åŸºæœ¬è·¯å¾„æµ‹è¯•ï¼šä¿è¯æµ‹è¯•ä¸­ç¨‹åºçš„æ¯ä¸€ä¸ªåŸºæœ¬ç‹¬ç«‹è·¯å¾„è‡³å°‘æ‰§è¡Œä¸€æ¬¡</p><ol type="1"><li>ç¨‹åºçš„æ§åˆ¶æµå›¾ï¼šæè¿°ç¨‹åºæ§åˆ¶æµçš„ä¸€ç§å›¾ç¤ºæ–¹æ³•</li><li>ç¨‹åºåœˆå¤æ‚åº¦ï¼š<spanclass="math inline">\(McCabe\)</span>å¤æ‚æ€§åº¦é‡ã€‚ä»ç¨‹åºçš„ç¯è·¯å¤æ‚æ€§å¯å¯¼å‡ºç¨‹åºåŸºæœ¬è·¯å¾„é›†åˆä¸­çš„ç‹¬ç«‹è·¯å¾„æ¡æ•°ï¼Œè¿™æ˜¯ç¡®å®šç¨‹åºä¸­æ¯ä¸ªå¯æ‰§è¡Œè¯­å¥è‡³å°‘æ‰§è¡Œä¸€æ¬¡æ‰€å¿…é¡»çš„æµ‹è¯•ç”¨ä¾‹æ•°ç›®çš„ä¸Šç•Œ</li><li>å¯¼å‡ºæµ‹è¯•ç”¨ä¾‹ï¼šæ ¹æ®åœˆå¤æ‚åº¦å’Œç¨‹åºç»“æ„è®¾è®¡ç”¨ä¾‹æ•°æ®è¾“å…¥å’Œé¢„æœŸç»“æœ</li><li>å‡†å¤‡æµ‹è¯•ç”¨ä¾‹ï¼šç¡®ä¿åŸºæœ¬è·¯å¾„é›†ä¸­çš„æ¯ä¸€æ¡è·¯å¾„çš„æ‰§è¡Œ</li></ol><ul><li><p>ç¨‹åºæµå›¾</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251345315.png" style="zoom:60%;" /></p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251345807.png" style="zoom:60%;" /></p><p>å¦‚æœåˆ¤æ–­ä¸­çš„æ¡ä»¶è¡¨è¾¾å¼æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªé€»è¾‘è¿ç®—ç¬¦ (<spanclass="math inline">\(OR, AND, NAND, NOR\)</span>)è¿æ¥çš„å¤åˆæ¡ä»¶è¡¨è¾¾å¼ï¼Œåˆ™éœ€è¦æ”¹ä¸ºä¸€ç³»åˆ—åªæœ‰å•æ¡ä»¶çš„åµŒå¥—çš„åˆ¤æ–­</p><p>ç‹¬ç«‹è·¯å¾„ï¼šä¸€æ¡ç¨‹åºæ‰§è¡Œçš„è·¯å¾„ï¼Œè‡³å°‘åŒ…å«ä¸€æ¡åœ¨å®šä¹‰è¯¥è·¯å¾„ä¹‹å‰çš„å…¶ä»–åŸºæœ¬è·¯å¾„ä¸æ›¾ç”¨è¿‡å¾—è¾¹</p><p>åœˆå¤æ‚åº¦ï¼š</p><p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/202204251345553.png" style="zoom:80%;" /></p><p><strong>æŸäº›ç‹¬ç«‹è·¯å¾„ä¸èƒ½ä»¥ç‹¬ç«‹çš„æ–¹å¼è¢«æµ‹è¯•(å³ç©¿è¶Šè·¯å¾„æ‰€éœ€çš„æ•°æ®ç»„åˆä¸èƒ½å½¢æˆç¨‹åºçš„æ­£å¸¸æµ)ï¼›åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™äº›è·¯å¾„å¿…é¡»ä½œä¸ºå¦ä¸€ä¸ªè·¯å¾„æµ‹è¯•çš„ä¸€éƒ¨åˆ†æ¥è¿›è¡Œæµ‹è¯•</strong></p><p>â€œåœˆå¤æ‚åº¦â€è¡¨ç¤ºï¼š<strong>åªè¦æœ€å¤šV(G)ä¸ªæµ‹è¯•ç”¨ä¾‹å°±å¯ä»¥è¾¾åˆ°åŸºæœ¬è·¯å¾„è¦†ç›–ï¼Œä½†å¹¶éä¸€å®šè¦è®¾è®¡V(G)ä¸ªç”¨ä¾‹</strong></p><p>ä½†æ˜¯ï¼š<strong>æµ‹è¯•ç”¨ä¾‹è¶Šç®€åŒ–ï¼Œä»£è¡¨æµ‹è¯•è¶Šå°‘ã€å¯èƒ½å‘ç°çš„é”™è¯¯å°±è¶Šå°‘</strong></p></li></ul><h5 id="å¾ªç¯æµ‹è¯•æ³•">10.5.4 å¾ªç¯æµ‹è¯•æ³•</h5><h5 id="xunitç™½ç›’æµ‹è¯•">10.5.5 xUnitç™½ç›’æµ‹è¯•</h5>]]></content>
    
    
    <categories>
      
      <category>è¯¾ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è½¯ä»¶è¿‡ç¨‹ä¸å·¥å…·</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JDBCå­¦ä¹ </title>
    <link href="/post/1c335eca.html"/>
    <url>/post/1c335eca.html</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦å¯¹JDBCè¿›è¡Œç›¸å…³æ€»ç»“</p><span id="more"></span><p><spanclass="math inline">\(JDBC\)</span>æ˜¯SUNå…¬å¸å®šä¹‰çš„ä¸€å¥—æ¥å£ï¼Œå› ä¸ºæ¯ä¸€ä¸ªæ•°æ®åº“çš„åº•å±‚å®ç°åŸç†éƒ½ä¸ä¸€æ ·ï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥è¿™ä¸€å¥—è§„èŒƒã€‚</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202204251400895.png" /></p><p>é¦–å…ˆå¼•å…¥ä¾èµ–ï¼Œå¯ä»¥ä¸‹è½½å¯¹åº”<ahref="https://mvnrepository.com/artifact/mysql/mysql-connector-java">jaråŒ…</a>,å…·ä½“æ­¥éª¤è¿™é‡Œä¸å†è¯¦è¯´ã€‚æ¥ä¸‹æ¥åˆ°äº†å…·ä½“JDBCä»£ç çš„ç¼–å†™ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹6æ­¥ã€‚</p><p><strong>1.æ³¨å†Œé©±åŠ¨</strong>ï¼ˆå‘Šè¯‰<spanclass="math inline">\(java\)</span>ç¨‹åºï¼Œå³å°†è¿æ¥çš„æ˜¯å“ªä¸ªå…¬å¸çš„æ•°æ®åº“ï¼‰</p><p>è¿™ä¸€æ­¥æœ€åŸå§‹çš„å†™æ³•æ˜¯ï¼š <figure class="highlight reasonml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs reasonml"><span class="hljs-keyword">try</span> &#123;<br>    Driver driver = <span class="hljs-keyword">new</span> com.mysql.cj.jdbc.<span class="hljs-constructor">Driver()</span>;<br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">DriverManager</span>.</span></span>register<span class="hljs-constructor">Driver(<span class="hljs-params">driver</span>)</span>;<br>&#125; catch (SQLException e) &#123;<br>    e.print<span class="hljs-constructor">StackTrace()</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>é€šè¿‡Driverç±»è·å–åˆ°JDBCé©±åŠ¨ã€‚è€ŒæŸ¥çœ‹<code>com.mysql.cj.jdbc.Driver</code>çš„æºç <figure class="highlight scala"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs scala"><span class="hljs-keyword">package</span> com.mysql.cj.jdbc;<br><br><span class="hljs-keyword">import</span> java.sql.<span class="hljs-type">DriverManager</span>;<br><span class="hljs-keyword">import</span> java.sql.<span class="hljs-type">SQLException</span>;<br><br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Driver</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">NonRegisteringDriver</span> <span class="hljs-title">implements</span> <span class="hljs-title">java</span>.<span class="hljs-title">sql</span>.<span class="hljs-title">Driver</span> </span>&#123;<br>    public <span class="hljs-type">Driver</span>() <span class="hljs-keyword">throws</span> <span class="hljs-type">SQLException</span> &#123;<br>    &#125;<br><br>    static &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">DriverManager</span>.registerDriver(<span class="hljs-keyword">new</span> <span class="hljs-type">Driver</span>());<br>        &#125; <span class="hljs-keyword">catch</span> (<span class="hljs-type">SQLException</span> var1) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-type">RuntimeException</span>(<span class="hljs-string">&quot;Can&#x27;t register driver!&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªé™æ€ä»£ç å—å®Œæˆäº†<code>registerDriver</code>çš„å·¥ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨åå°„æœºåˆ¶å³å¯ï¼š<figure class="highlight reasonml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs reasonml"><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Class</span>.</span></span><span class="hljs-keyword">for</span><span class="hljs-constructor">Name(<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span>;<br>&#125; catch (ClassNotFoundException e) &#123;<br>    e.print<span class="hljs-constructor">StackTrace()</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure></p><p><strong>2.è·å–è¿æ¥</strong>ï¼ˆè¡¨ç¤º<spanclass="math inline">\(JVM\)</span>çš„è¿›ç¨‹å’Œæ•°æ®åº“è¿›ç¨‹ä¹‹é—´çš„é€šé“æ‰“å¼€äº†ï¼Œè¿™å±äºè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œæ¯”è¾ƒé‡é‡çº§ï¼Œä½¿ç”¨å®Œéœ€è¦å…³é—­ï¼‰</p><p>è¿™é‡Œä½¿ç”¨å¦‚ä¸‹æ–¹æ³•è¿›è¡Œè¿æ¥çš„è·å–ï¼š <figure class="highlight reasonml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">DriverManager</span>.</span></span>get<span class="hljs-constructor">Connection(<span class="hljs-string">&quot;jdbc:mysql://ip:port/dbname&quot;</span>,<span class="hljs-params">user</span>,<span class="hljs-params">passwd</span>)</span>;<br></code></pre></div></td></tr></table></figure>æ¯”å¦‚æˆ‘çš„ipå°±ç”¨æœ¬åœ°<code>localhost</code>æˆ–è€…<code>127.0.0.1</code>ï¼Œ<code>port</code>ä¸€èˆ¬ä½¿ç”¨3306ï¼Œ<code>dbname</code>ã€<code>user</code>å’Œ<code>passwd</code>æ ¹æ®è‡ªå·±çš„æ•°æ®åº“ä¿®æ”¹å³å¯ã€‚</p><p><strong>3.è·å–æ•°æ®åº“å¯¹è±¡</strong>ï¼ˆä¸“é—¨æ‰§è¡Œ<spanclass="math inline">\(SQL\)</span>è¯­å¥çš„å¯¹è±¡ï¼‰</p><p>å¯ä»¥ä½¿ç”¨<code>Statement</code>æ¥è·å–æ•°æ®åº“å¯¹è±¡ï¼š <figure class="highlight abnf"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs abnf">Statement stmt <span class="hljs-operator">=</span> conn.createStatement()<span class="hljs-comment">;</span><br>String sql <span class="hljs-operator">=</span> <span class="hljs-string">&quot;....&quot;</span><span class="hljs-comment">;</span><br></code></pre></div></td></tr></table></figure>æ³¨æ„è¿™é‡Œçš„sqlè¯­å¥å®šä¹‰åœ¨stmtä¹‹å,å¦‚æœä½¿ç”¨<code>Statement</code>çš„è¯ï¼Œå¯èƒ½ä¼šé‡åˆ°sqlæ³¨å…¥é—®é¢˜ï¼Œå…·ä½“å¯ä»¥å‚è€ƒï¼š<ahref="https://www.jianshu.com/p/643866408bb7">SQLæ³¨å…¥</a>è¿™ç¯‡åšå®¢ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨<code>PreparedStatement</code>è·å–æ•°æ®åº“å¯¹è±¡ï¼š<figure class="highlight abnf"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs abnf">String sql <span class="hljs-operator">=</span> <span class="hljs-string">&quot;....&quot;</span><span class="hljs-comment">;</span><br>PreparedStatement ps <span class="hljs-operator">=</span> conn.prepareStatement(sql)<span class="hljs-comment">;</span><br></code></pre></div></td></tr></table></figure> æ³¨æ„è¿™é‡Œçš„sqlè¯­å¥å®šä¹‰åœ¨psä¹‹å‰,å¯ä»¥çœ‹çœ‹æºç  <figure class="highlight angelscript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs angelscript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-symbol">PreparedStatement</span> <span class="hljs-symbol">extends</span> <span class="hljs-symbol">Statement</span> &#123;<br>    ...<br>&#125;<br></code></pre></div></td></tr></table></figure><code>PreparedStatement</code>ç»§æ‰¿è‡ª<code>Statement</code>ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªæ¥å£ã€‚è§£å†³sqlæ³¨å…¥é—®é¢˜çš„å…³é”®åœ¨äºä¸è®©ç”¨æˆ·è¾“å…¥çš„è¯­å¥å‚ä¸sqlè¯­å¥çš„ç¼–è¯‘è¿‡ç¨‹ï¼Œ<code>PreparedStatement</code>çš„åŸç†æ˜¯é¢„å…ˆå¯¹sqlè¯­å¥çš„æ¡†æ¶è¿›è¡Œé¢„ç¼–è¯‘ï¼Œç„¶åå†ç»™sqlè¯­å¥ä¼ å€¼ã€‚åœ¨sqlè¯­å¥é‡Œéœ€è¦çš„å€¼å…ˆç”¨<code>?</code>æ›¿æ¢ï¼Œå…·ä½“ä½¿ç”¨å¯ä»¥å‚è§ä¸‹ä¸€éƒ¨åˆ†ã€‚<strong>Tips</strong>ï¼šå½“ç„¶è¿™é‡Œè¯´ä¸€å¥<code>Statement</code>å’Œ<code>PreparedStatement</code>å„æœ‰å„çš„ç”¨å¤„ï¼Œå¹¶ä¸æ˜¯ä¸€è‚¡è„‘å°±ç”¨<code>PreparedStatement</code>çš„ï¼Œä»¥ä¸‹æƒ…å†µä¸€èˆ¬ä½¿ç”¨<code>Statement</code>ï¼š(1).ä¸šåŠ¡é€»è¾‘éœ€è¦sqlæ³¨å…¥ï¼›(2).éœ€è¦sqlè¯­å¥æ‹¼æ¥ã€‚</p><p><strong>4.æ‰§è¡Œ<spanclass="math inline">\(SQL\)</span>è¯­å¥</strong>ï¼ˆ<spanclass="math inline">\(DQLï¼ŒDML\)</span>ï¼‰</p><p>åŸè¡¨</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202204251401265.png" /></p><ul><li><p>å¢ <figure class="highlight reasonml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs reasonml">String sql = <span class="hljs-string">&quot;insert into sc value(?,?,?)&quot;</span>;<br>ps = conn.prepare<span class="hljs-constructor">Statement(<span class="hljs-params">sql</span>)</span>;<br>ps.set<span class="hljs-constructor">String(1,<span class="hljs-string">&quot;12345678&quot;</span>)</span>;<br>ps.set<span class="hljs-constructor">String(2,<span class="hljs-string">&quot;222&quot;</span>)</span>;<br>ps.set<span class="hljs-constructor">String(3,<span class="hljs-string">&quot;96&quot;</span>)</span>;<br><span class="hljs-built_in">int</span> count = ps.execute<span class="hljs-constructor">Update()</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(count);<br></code></pre></div></td></tr></table></figure></p><p>è¿è¡Œç»“æœï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202204251401211.png" /></p><p>ç°åœ¨çš„è¡¨ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202204251401993.png" /></p></li><li><p>åˆ  <figure class="highlight reasonml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs reasonml">String sql = <span class="hljs-string">&quot;delete from sc where s_id = ?&quot;</span>;<br>ps = conn.prepare<span class="hljs-constructor">Statement(<span class="hljs-params">sql</span>)</span>;<br>ps.set<span class="hljs-constructor">String(1,<span class="hljs-string">&quot;12345678&quot;</span>)</span>;<br><span class="hljs-built_in">int</span> count = ps.execute<span class="hljs-constructor">Update()</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(count);<br></code></pre></div></td></tr></table></figure></p><p>è¿è¡Œç»“æœï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202204251401860.png" /></p><p>ç°åœ¨çš„è¡¨ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202204251401617.png" /></p></li><li><p>æ”¹ <figure class="highlight reasonml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs reasonml">String sql = <span class="hljs-string">&quot;update sc set score = ? where s_id = 98020101&quot;</span>;<br>ps = conn.prepare<span class="hljs-constructor">Statement(<span class="hljs-params">sql</span>)</span>;<br>ps.set<span class="hljs-constructor">String(1,<span class="hljs-string">&quot;90&quot;</span>)</span>;<br><span class="hljs-built_in">int</span> count = ps.execute<span class="hljs-constructor">Update()</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(count);<br></code></pre></div></td></tr></table></figure></p><p>è¿è¡Œç»“æœï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202204251401487.png" /></p><p>ç°åœ¨çš„è¡¨ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202204251401601.png" /></p></li><li><p>æŸ¥ <figure class="highlight wren"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs wren"><span class="hljs-title class_">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select s_id,c_id,score from sc where score &gt; ?&quot;</span>;<br><span class="hljs-variable">ps</span> <span class="hljs-operator">=</span> <span class="hljs-variable">conn</span>.<span class="hljs-property">prepareStatement</span>(<span class="hljs-variable">sql</span>);<br><span class="hljs-variable">ps</span>.<span class="hljs-property">setString</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;85&quot;</span>);<br><span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> <span class="hljs-variable">ps</span>.<span class="hljs-property">executeQuery</span>();<br><span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-property">println</span>(<span class="hljs-string">&quot;s_id<span class="hljs-char escape_">\t</span>c_id<span class="hljs-char escape_">\t</span>score&quot;</span>);<br><span class="hljs-keyword">while</span> (<span class="hljs-variable">rs</span>.<span class="hljs-property">next</span>()) &#123;<br>  <span class="hljs-title class_">String</span> <span class="hljs-variable">sid</span> <span class="hljs-operator">=</span> <span class="hljs-variable">rs</span>.<span class="hljs-property">getString</span>(<span class="hljs-string">&quot;s_id&quot;</span>);<br>  <span class="hljs-title class_">String</span> <span class="hljs-variable">cid</span> <span class="hljs-operator">=</span> <span class="hljs-variable">rs</span>.<span class="hljs-property">getString</span>(<span class="hljs-string">&quot;c_id&quot;</span>);<br>  <span class="hljs-title class_">String</span> <span class="hljs-variable">score</span> <span class="hljs-operator">=</span> <span class="hljs-variable">rs</span>.<span class="hljs-property">getString</span>(<span class="hljs-string">&quot;score&quot;</span>);<br>  <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-property">println</span>(<span class="hljs-variable">sid</span> <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\t</span>&quot;</span> <span class="hljs-operator">+</span> <span class="hljs-variable">cid</span> <span class="hljs-operator">+</span> <span class="hljs-string">&quot;<span class="hljs-char escape_">\t</span>&quot;</span> <span class="hljs-operator">+</span> <span class="hljs-variable">score</span>);<br>&#125;<br></code></pre></div></td></tr></table></figure></p><p>ä»¥ä¸‹ä¸ºè¿è¡Œç»“æœï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202204251402376.png" /></p></li></ul><p><strong>5.å¤„ç†æŸ¥è¯¢ç»“æœé›†</strong>ï¼ˆåªæœ‰æ‰§è¡Œ<spanclass="math inline">\(DQL\)</span>è¯­å¥åéœ€è¦ï¼‰ <spanclass="math inline">\(DML\)</span>ä¸€è¯­å¥ä¸€èˆ¬è¿”å›<code>int</code>ç±»å‹çš„é‡ï¼Œè€Œ<spanclass="math inline">\(DQL\)</span>è¯­å¥è¿”å›ä¸€ä¸ª<spanclass="math inline">\(ResultSet\)</span>ç±»å‹çš„é‡ã€‚ <figure class="highlight reasonml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs reasonml"><span class="hljs-comment">//if DML</span><br><span class="hljs-built_in">int</span> res = ps.execute<span class="hljs-constructor">Update()</span>;<br></code></pre></div></td></tr></table></figure></p><figure class="highlight reasonml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs reasonml"><span class="hljs-comment">//if DQL</span><br>ResultSet rs = ps.execute<span class="hljs-constructor">Query()</span>;<br><span class="hljs-keyword">while</span> (rs.next<span class="hljs-literal">()</span>) &#123;<br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(rs.get<span class="hljs-constructor">String(1)</span>);<br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(rs.get<span class="hljs-constructor">String(2)</span>);<br>    ....<br>&#125;<br></code></pre></div></td></tr></table></figure><p>ä½†æ˜¯ä¸Šé¢è¿™ç§å¯èƒ½æ²¡æœ‰çµæ´»æ€§ï¼Œæ‰€ä»¥æœ‰ä»¥ä¸‹å†™æ³•ï¼š <figure class="highlight reasonml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs reasonml"><span class="hljs-comment">//if DQL</span><br>ResultSet rs = ps.execute<span class="hljs-constructor">Query()</span>;<br><span class="hljs-keyword">while</span> (rs.next<span class="hljs-literal">()</span>) &#123;<br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(rs.get<span class="hljs-constructor">String(<span class="hljs-params">col_name1</span>)</span>);<br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(rs.get<span class="hljs-constructor">String(<span class="hljs-params">col_name2</span>)</span>);<br>    ....<br>&#125;<br></code></pre></div></td></tr></table></figure>ä¸Šé¢çš„<code>col_name1</code>,<code>col_name2</code>éƒ½æ˜¯åˆ—åï¼Œè¿™æ ·ä¹Ÿæ›´åŠ å…·æœ‰çµæ´»æ€§ã€‚</p><p><strong>6.é‡Šæ”¾èµ„æº</strong>æ ¹æ®å¼€å¯çš„é¡ºåºåå‘å…³é—­<code>conn</code>ï¼Œ<code>ps</code>ï¼Œ<code>rs</code><figure class="highlight scss"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs scss">if (rs != null) &#123;<br>    try &#123;<br>        rs<span class="hljs-selector-class">.close</span>();<br>    &#125; catch (SQLException e) &#123;<br>        e<span class="hljs-selector-class">.printStackTrace</span>();<br>    &#125;<br>&#125;<br>if (ps != null) &#123;<br>    try &#123;<br>        ps<span class="hljs-selector-class">.close</span>();<br>    &#125; catch (SQLException e) &#123;<br>        e<span class="hljs-selector-class">.printStackTrace</span>();<br>    &#125;<br>&#125;<br>if (conn != null) &#123;<br>    try &#123;<br>        conn<span class="hljs-selector-class">.close</span>();<br>    &#125; catch (SQLException e) &#123;<br>        e<span class="hljs-selector-class">.printStackTrace</span>();<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure></p><p>æ¥ä¸‹æ¥ï¼Œå¯ä»¥å¯¹ä»¥ä¸Šå†…å®¹è¿›è¡Œå°è£… å°è£…ä¸€ä¸ªå·¥å…·ç±»<code>DBUtil</code><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.sql.*;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å°è£…JDBCå·¥å…·ç±»</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> fly-beep</span><br><span class="hljs-comment"> */</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DBUtil</span> &#123;<br><br>    <span class="hljs-keyword">static</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            Class.forName(<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">ps</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è·å–æ•°æ®åº“è¿æ¥å¯¹è±¡</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> è¿æ¥å¯¹è±¡</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> SQLException</span><br><span class="hljs-comment">       */</span><br>         <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-keyword">return</span> DriverManager.getConnection(<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/sct&quot;</span>,<span class="hljs-string">&quot;root&quot;</span>,<span class="hljs-string">&quot;333&quot;</span>);<br>         &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å…³é—­å„ç§å·²ç»å»ºç«‹çš„èµ„æº</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> conn</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> ps</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> rs</span><br><span class="hljs-comment">       */</span><br>       <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">(Connection conn,Statement ps,ResultSet rs)</span> &#123;<br>        <span class="hljs-keyword">if</span> (rs != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                rs.close();<br>            &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (ps != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                ps.close();<br>            &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (conn != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                conn.close();<br>            &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>       &#125;<br>         &#125;<br>         <br></code></pre></div></td></tr></table></figure></p><p>å…·ä½“ä½¿ç”¨å¦‚ä¸‹ï¼š <figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.sql.*;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æŸ¥è¯¢ä»¥ç‹å¼€å¤´çš„å­¦ç”Ÿå­¦å·å’Œå§“å</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> fly-beep</span><br><span class="hljs-comment"> */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">jdbcTest</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">ps</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            conn = DBUtil.getConnection();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select s_id,s_name from student where s_name like ?&quot;</span>;<br>            ps = conn.prepareStatement(sql);<br>            ps.setString(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;ç‹%&quot;</span>);<br>            rs = ps.executeQuery();<br>            System.out.println(<span class="hljs-string">&quot;s_id&quot;</span> + <span class="hljs-string">&quot;\t\t&quot;</span> + <span class="hljs-string">&quot;s_name&quot;</span>);<br>            <span class="hljs-keyword">while</span> (rs.next()) &#123;<br>                System.out.println(rs.getString(<span class="hljs-string">&quot;s_id&quot;</span>) + <span class="hljs-string">&quot;\t&quot;</span> + rs.getString(<span class="hljs-string">&quot;s_name&quot;</span>));<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            DBUtil.close(conn,ps,rs);<br>        &#125;<br>    &#125;<br>    &#125;<br>    <br></code></pre></div></td></tr></table></figure></p><p>æŸ¥è¯¢ç»“æœå¦‚ä¸‹ï¼š <imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202204251402843.png" /></p><p>JDBCæ‰§è¡Œäº‹åŠ¡æ“ä½œJDBCä¸­çš„äº‹åŠ¡æ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œåªè¦æ‰§è¡Œä»»æ„ä¸€æ¡<code>DML</code>è¯­å¥ï¼Œåˆ™è‡ªåŠ¨æäº¤ä¸€æ¬¡ã€‚è€Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨connçš„<code>setAutoCommit</code>å‡½æ•°å–æ¶ˆè¿™ç§è‡ªåŠ¨æäº¤æœºåˆ¶ã€‚<figure class="highlight reasonml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs reasonml"><span class="hljs-keyword">try</span> &#123;<br>    .....<br>    conn = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">DriverManager</span>.</span></span>get<span class="hljs-constructor">Connection(<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/sct&quot;</span>,<span class="hljs-string">&quot;root&quot;</span>,<span class="hljs-string">&quot;333&quot;</span>)</span>;<br>    <span class="hljs-comment">//å–æ¶ˆè‡ªåŠ¨æäº¤äº‹åŠ¡</span><br>    conn.set<span class="hljs-constructor">AutoCommit(<span class="hljs-params">false</span>)</span>;<br>    String sql1 = <span class="hljs-string">&quot;&quot;</span>;<br>    String sql2 = <span class="hljs-string">&quot;&quot;</span>;<br>    .....<br><br>    ps = conn.prepare<span class="hljs-constructor">Statement(<span class="hljs-params">sql1</span>)</span>;<br>    ps = conn.prepare<span class="hljs-constructor">Statement(<span class="hljs-params">sql2</span>)</span>;<br>    .....<br>    <br>    <span class="hljs-comment">//è¿è¡Œåˆ°è¿™è¯´æ˜æ²¡æœ‰é—®é¢˜ï¼Œæäº¤äº‹åŠ¡</span><br>    conn.commit<span class="hljs-literal">()</span>;<br>&#125; catch (Exception e) &#123;<br>    <span class="hljs-keyword">if</span>(conn != null) &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//å›æ»šäº‹åŠ¡</span><br>            conn.rollback<span class="hljs-literal">()</span>;<br>        &#125; catch (SQLException ex) &#123;<br>            ex.print<span class="hljs-constructor">StackTrace()</span>;<br>        &#125;<br>    &#125;<br>e.print<span class="hljs-constructor">StackTrace()</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure> ä»¥ä¸Šå³ä¸ºJDBCéƒ¨åˆ†çš„å…¨éƒ¨å†…å®¹ï¼</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>JDBC</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>postgresqlå®‰è£…pg_hint_planæ’ä»¶</title>
    <link href="/post/72be2669.html"/>
    <url>/post/72be2669.html</url>
    
    <content type="html"><![CDATA[<p>è§£å†³postgresqlå®‰è£…pg_hint_planæ’ä»¶çš„ç›¸å…³é—®é¢˜</p><span id="more"></span><p>å‰è¨€ï¼šç”±äºé¡¹ç›®éœ€è¦ï¼Œæˆ‘éœ€è¦ä½¿ç”¨<spanclass="math inline">\(postgresql\)</span>ä¸­çš„pg_hint_planæ’ä»¶è¿›è¡Œç›¸å…³çš„åˆ†æï¼Œä½†æ˜¯åœ¨å®‰è£…ä¸­ç½‘ä¸Šå´å¹¶æœªæ‰¾åˆ°å¾ˆæœ‰æ•ˆçš„ç›¸å…³èµ„æ–™ï¼Œç°æ€»ç»“å¦‚ä¸‹ï¼š</p><p>æœ¬æœºé…ç½®ï¼š <span class="math inline">\(CentOs\ 7.6\)</span></p><h2 id="å®‰è£…postgresql">å®‰è£…<spanclass="math inline">\(postgresql\)</span></h2><p>å‚è€ƒ<ahref="https://www.postgresql.org/download/linux/redhat/">å®˜ç½‘</a>ä¸Šçš„æè¿°ï¼Œä¸»è¦ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs awk">sudo yum install -y https:<span class="hljs-regexp">//</span>download.postgresql.org<span class="hljs-regexp">/pub/</span>repos<span class="hljs-regexp">/yum/</span>reporpms<span class="hljs-regexp">/EL-7-x86_64/</span>pgdg-redhat-repo-latest.noarch.rpm<br>sudo yum install -y postgresql14-server<br>sudo <span class="hljs-regexp">/usr/</span>pgsql-<span class="hljs-number">14</span><span class="hljs-regexp">/bin/</span>postgresql-<span class="hljs-number">14</span>-setup initdb<br>sudo systemctl enable postgresql-<span class="hljs-number">14</span><br>sudo systemctl start postgresql-<span class="hljs-number">14</span><br></code></pre></div></td></tr></table></figure><p>åˆå§‹åŒ–æ•°æ®åº“ï¼š <figure class="highlight awk"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs awk">sudo <span class="hljs-regexp">/usr/</span>pgsql-<span class="hljs-number">14</span><span class="hljs-regexp">/bin/</span>postgresql-<span class="hljs-number">14</span>-setup initdb<br></code></pre></div></td></tr></table></figure></p><p>è®¾ç½®å¼€æœºå¯åŠ¨ï¼š <figure class="highlight routeros"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs routeros">sudo systemctl <span class="hljs-built_in">enable</span> postgresql-14<br></code></pre></div></td></tr></table></figure></p><p>å¯åŠ¨postgresqlæœåŠ¡ <figure class="highlight apache"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs apache"><span class="hljs-attribute">sudo</span> systemctl start postgresql-<span class="hljs-number">14</span><br></code></pre></div></td></tr></table></figure></p><p>è®¾ç½®æ•°æ®åº“å¯†ç  <figure class="highlight pgsql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs pgsql">su postgres<br>psql<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">user</span> postgres <span class="hljs-keyword">with</span> <span class="hljs-keyword">password</span> <span class="hljs-string">&#x27;yourpwd&#x27;</span><br></code></pre></div></td></tr></table></figure></p><p>å¼€å¯è¿œç¨‹è®¿é—® <figure class="highlight awk"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs awk">vi <span class="hljs-regexp">/var/</span>lib<span class="hljs-regexp">/pgsql/</span><span class="hljs-number">14</span><span class="hljs-regexp">/data/</span>postgresql.conf<br></code></pre></div></td></tr></table></figure></p><p>æ‰¾åˆ°ä¸‹é¢çš„listen_address: <figure class="highlight ini"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs ini"><span class="hljs-attr">listen_address</span> = <span class="hljs-string">&#x27;*&#x27;</span><br></code></pre></div></td></tr></table></figure></p><p>å¢åŠ ä¿¡ä»»è¿æ¥ <figure class="highlight pgsql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs pgsql">vi /var/lib/pgsql/<span class="hljs-number">14</span>/data/pg_hba.conf<br></code></pre></div></td></tr></table></figure></p><figure class="highlight apache"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs apache"><span class="hljs-comment"># IPv4 local connections:</span><br><span class="hljs-attribute">host</span>    <span class="hljs-literal">all</span>             <span class="hljs-literal">all</span>             <span class="hljs-number">0.0.0.0</span>/<span class="hljs-number">0</span>               trust<br></code></pre></div></td></tr></table></figure><p>é‡å¯æœåŠ¡ <figure class="highlight apache"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs apache"><span class="hljs-attribute">systemctl</span> restart postgresql-<span class="hljs-number">14</span><br></code></pre></div></td></tr></table></figure></p><p>æ·»åŠ ç«¯å£å·å¹¶é‡å¯é˜²ç«å¢™ <figure class="highlight brainfuck"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs brainfuck"><span class="hljs-comment">firewall</span><span class="hljs-literal">-</span><span class="hljs-comment">cmd</span> <span class="hljs-literal">--</span><span class="hljs-comment">zone=public</span> <span class="hljs-literal">--</span><span class="hljs-comment">add</span><span class="hljs-literal">-</span><span class="hljs-comment">port=5432/tcp</span> <span class="hljs-literal">--</span><span class="hljs-comment">permanent</span><br><span class="hljs-comment">firewall</span><span class="hljs-literal">-</span><span class="hljs-comment">cmd</span> <span class="hljs-literal">--</span><span class="hljs-comment">reload</span><br></code></pre></div></td></tr></table></figure></p><p>è¿™æ—¶å€™å¯ä»¥æ£€æŸ¥ä¸€ä¸‹ï¼š <figure class="highlight vim"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs vim">rpm -<span class="hljs-keyword">qa</span> | <span class="hljs-keyword">grep</span> postgresql<br></code></pre></div></td></tr></table></figure></p><p>å‘½ä»¤è¡Œä¼šè¾“å‡ºä»¥ä¸‹ä¿¡æ¯ï¼š <figure class="highlight apache"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs apache"><span class="hljs-attribute">postgresql14</span>-<span class="hljs-number">14</span>.<span class="hljs-number">2</span>-<span class="hljs-number">1</span>PGDG.rhel7.x86_64<br><span class="hljs-attribute">postgresql14</span>-libs-<span class="hljs-number">14</span>.<span class="hljs-number">2</span>-<span class="hljs-number">1</span>PGDG.rhel7.x86_64<br><span class="hljs-attribute">postgresql14</span>-server-<span class="hljs-number">14</span>.<span class="hljs-number">2</span>-<span class="hljs-number">1</span>PGDG.rhel7.x86_64<br></code></pre></div></td></tr></table></figure></p><p>å¹¶ä¸”ä¿è¯æ­¤æ—¶åœ¨rootçš„æƒé™ä¸‹ç›´æ¥è¾“å…¥ï¼š <figure class="highlight ebnf"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs ebnf"><span class="hljs-attribute">su postgres</span><br></code></pre></div></td></tr></table></figure></p><figure class="highlight ebnf"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs ebnf"><span class="hljs-attribute">su postgres</span><br></code></pre></div></td></tr></table></figure><figure class="highlight ebnf"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs ebnf"><span class="hljs-attribute">psql</span><br></code></pre></div></td></tr></table></figure><p>æ­¤æ—¶å¯ä»¥æˆåŠŸæ‰“å¼€postgreså³å¯ï¼</p><h2 id="å®‰è£…postgresql-devel">å®‰è£…<spanclass="math inline">\(postgresql-devel\)</span></h2><p>è¿™ä¸€æ­¥å¯ä»¥è¯´æ˜¯æœ€å‘çš„äº†ï¼Œå› ä¸ºä¸€èˆ¬å®‰è£…postgresqlæ—¶åªä¼šå®‰è£…<figure class="highlight apache"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs apache"><span class="hljs-attribute">postgresql14</span>-<span class="hljs-number">14</span>.<span class="hljs-number">2</span>-<span class="hljs-number">1</span>PGDG.rhel7.x86_64<br><span class="hljs-attribute">postgresql14</span>-libs-<span class="hljs-number">14</span>.<span class="hljs-number">2</span>-<span class="hljs-number">1</span>PGDG.rhel7.x86_64<br><span class="hljs-attribute">postgresql14</span>-server-<span class="hljs-number">14</span>.<span class="hljs-number">2</span>-<span class="hljs-number">1</span>PGDG.rhel7.x86_64<br></code></pre></div></td></tr></table></figure></p><p>è¿™ä¸‰ä¸ªåŒ…ï¼Œä½†æ˜¯è¿™æ—¶çš„postgresqlæ˜¯<strong>æ²¡æœ‰C/C++ç¯å¢ƒ</strong>çš„ï¼Œè€Œæˆ‘ä»¬å¦‚æœæƒ³è¦å®‰è£…pg_hint_plançš„è¯æ˜¯éœ€è¦çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®‰è£…<spanclass="math inline">\(postgresql-devel\)</span>ã€‚</p><p>ç›´æ¥è¿è¡Œï¼š <figure class="highlight cmake"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs cmake">yum <span class="hljs-keyword">install</span> postgresql14-devel<br></code></pre></div></td></tr></table></figure></p><p>è¿™æ—¶è¾“å…¥ï¼š <figure class="highlight vim"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs vim">rpm -<span class="hljs-keyword">qa</span> | <span class="hljs-keyword">grep</span> postgresql<br></code></pre></div></td></tr></table></figure></p><p>å‘½ä»¤è¡Œä¼šè¾“å‡ºä»¥ä¸‹ä¿¡æ¯ï¼š <figure class="highlight apache"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs apache"><span class="hljs-attribute">postgresql14</span>-<span class="hljs-number">14</span>.<span class="hljs-number">2</span>-<span class="hljs-number">1</span>PGDG.rhel7.x86_64<br><span class="hljs-attribute">postgresql14</span>-libs-<span class="hljs-number">14</span>.<span class="hljs-number">2</span>-<span class="hljs-number">1</span>PGDG.rhel7.x86_64<br><span class="hljs-attribute">postgresql14</span>-devel-<span class="hljs-number">14</span>.<span class="hljs-number">2</span>-<span class="hljs-number">1</span>PGDG.rhel7.x86_64<br><span class="hljs-attribute">postgresql14</span>-server-<span class="hljs-number">14</span>.<span class="hljs-number">2</span>-<span class="hljs-number">1</span>PGDG.rhel7.x86_64<br></code></pre></div></td></tr></table></figure></p><h2 id="å®‰è£…pg_hint_planæ’ä»¶">å®‰è£…pg_hint_planæ’ä»¶</h2><p>ä»<ahref="https://github.com/ossc-db/pg_hint_plan/tags">å®˜ç½‘</a>æŒ‰ç…§å¯¹åº”PG14ç‰ˆæœ¬çš„pg_hint_plançš„<spanclass="math inline">\(.tar.gz\)</span>æ–‡ä»¶ã€‚</p><p>æˆ‘ä¸‹è½½çš„æ˜¯pg_hint_plan-REL14_1_4_0.tar.gz</p><figure class="highlight pgsql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs pgsql">tar -zxvf pg_hint_plan-REL14_1_4_0.tar.gz<br>make<br>make install<br></code></pre></div></td></tr></table></figure><p>ä½†æ˜¯è¿™æ—¶ä¼šé‡åˆ°å¦ä¸€ä¸ªå‘äº†ï¼Œä»¥ä¸Šä»£ç æ˜¯ä½œè€…å†™åœ¨<spanclass="math inline">\(README.md\)</span>ä¸­çš„ä¸‹è½½æ–¹æ³•ï¼Œä½†æ˜¯è¿™æ—¶ä½ éœ€è¦è®¾ç½®è·¯å¾„ï¼Œæ‰€ä»¥åº”è¯¥æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs pgsql">tar -zxvf pg_hint_plan-REL14_1_4_0.tar.gz<br>export <span class="hljs-type">PATH</span>=&quot;$PATH:/usr/pgsql-14/bin&quot;<br>make<br>make install<br></code></pre></div></td></tr></table></figure><p>è¿™æ—¶å°±æ²¡é—®é¢˜äº†ï¼</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/202204251402401.png" /></p><hr /><p>å‚è€ƒé“¾æ¥ï¼š</p><ul><li><ahref="https://www.postgresql.org/download/linux/redhat/">https://www.postgresql.org/download/linux/redhat/</a></li><li><ahref="https://centos.pkgs.org/7/postgresql-14-aarch64/postgresql14-devel-14.2-1PGDG.rhel7.aarch64.rpm.html">https://centos.pkgs.org/7/postgresql-14-aarch64/postgresql14-devel-14.2-1PGDG.rhel7.aarch64.rpm.html</a></li><li><ahref="https://stackoverflow.com/questions/4293111/postgresql-pg-config-bash-pg-config-command-not-found">https://stackoverflow.com/questions/4293111/postgresql-pg-config-bash-pg-config-command-not-found</a></li><li><ahref="https://github.com/ossc-db/pg_hint_plan/tags">https://github.com/ossc-db/pg_hint_plan/tags</a></li><li><ahref="https://github.com/ossc-db/pg_hint_plan/issues/57">https://github.com/ossc-db/pg_hint_plan/issues/57</a></li><li><ahref="https://osdn.net/projects/pghintplan/howto/install">https://osdn.net/projects/pghintplan/howto/install</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>é¡¹ç›®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é—®é¢˜è§£å†³</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢</title>
    <link href="/post/63785.html"/>
    <url>/post/63785.html</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€ç¯‡æ–‡ç« ">ç¬¬ä¸€ç¯‡æ–‡ç« </h1><p>å†™è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯è¦è­¦ç¤ºè‡ªå·±ï¼š<strong>ç»çŸ¥æ­¤äº‹è¦èº¬è¡Œ</strong><span id="more"></span></p><hr /><p>ä¸‹é¢æ”¾ä¸€äº›è‡ªå·±å–œæ¬¢çš„å¥å­ï¼š</p><hr /><p>è‹¦éš¾æ—¢ç„¶æŠŠæˆ‘æ¨åˆ°äº†æ‚¬å´–çš„è¾¹ç¼˜ï¼Œé‚£ä¹ˆå°±è®©æˆ‘åœ¨è¿™æ‚¬å´–è¾¹åä¸‹æ¥ï¼Œé¡ºä¾¿çœ‹çœ‹æ‚¬å´–ä¸‹çš„æµå²šé›¾éœ­ï¼Œå”±æ”¯æ­Œç»™ä½ å¬ã€‚</p><hr /><p>é…’ä¸€æ¯ï¼Œæ•¬æ¸©åä¸ç»ƒå‰‘ï¼Œ</p><p>é…’äºŒæ¯ï¼Œæ•¬ææ·³ç½¡ä¸ºåè¾ˆå¼€å±±ï¼Œ</p><p>é…’ä¸‰æ¯ï¼Œæ•¬æ›¹å®˜å­ä¸€äººæ”»åŸï¼Œ</p><p>é…’å››æ¯ï¼Œæ•¬é»„ä¸‰ç”²ä¸ºä¸‡ä¸–å¼€å¤ªå¹³ï¼Œ</p><p>é…’äº”æ¯ï¼Œæ•¬æä¹‰å±±ä¸ºåŒ—å‡‰è°‹ç”Ÿè·¯ï¼Œ</p><p>é…’å…­æ¯ï¼Œæ•¬æ´ªæ´—è±¡ä¸ºçº¢é¢œä¿®æ­£é“ï¼Œ</p><p>é…’ä¸ƒæ¯ï¼Œæ•¬æç‰æ–§ä¸ºåä¸–å…³å¤©é—¨ï¼Œ</p><p>é…’å…«æ¯ï¼Œæ•¬å¾å‡¤å¹´ä¸ºä¸­åŸç™¾å§“å®ˆå›½é—¨ï¼Œ</p><p>é…’ä¹æ¯ï¼Œæ•¬ä¸­åŸå®—å¸ˆæ‹’åŒ—åŸæ‚ç„¶èµ´æ­»ã€‚</p><hr /><p>æœ€åï¼ŒSaberé•‡ç«™ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/fly-beep/picb/master/Saber.jpg" /></p>]]></content>
    
    
    <categories>
      
      <category>æ‚è°ˆ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>çºªå¿µ</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
