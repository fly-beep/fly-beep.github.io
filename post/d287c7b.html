

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="é¡¾æµ·è€€">
  <meta name="keywords" content="">
  
    <meta name="description" content="æœ¬ç³»åˆ—æ–‡ç« ä¸»è¦å¯¹VTKçš„ç›¸å…³çŸ¥è¯†è¿›è¡Œæ€»ç»“ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="VTKå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰">
<meta property="og:url" content="https://fly-beep.top/post/d287c7b.html">
<meta property="og:site_name" content="Fly-beep&#39;s Blog">
<meta property="og:description" content="æœ¬ç³»åˆ—æ–‡ç« ä¸»è¦å¯¹VTKçš„ç›¸å…³çŸ¥è¯†è¿›è¡Œæ€»ç»“ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://fly-beep.top/img/vtk.jpg">
<meta property="article:published_time" content="2022-12-06T12:57:10.272Z">
<meta property="article:modified_time" content="2022-12-07T01:39:32.344Z">
<meta property="article:author" content="é¡¾æµ·è€€">
<meta property="article:tag" content="VTK">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://fly-beep.top/img/vtk.jpg">
  
  
  <title>VTKå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰ - Fly-beep&#39;s Blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hint.css@2/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->

  
<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/bynotes/texiao/source/css/toubudaziji.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"fly-beep.top","root":"/","version":"1.8.14","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"9SDM4ZdpdF76KYx9z9yK89zC-MdYXbMMI","app_key":"OiJBGDhFh3KBbnMdv3G0Wf45","server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 6.1.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>fly-beep</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="VTKå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-12-06 20:57" pubdate>
        2022å¹´12æœˆ6æ—¥ æ™šä¸Š
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      20k å­—
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      165 åˆ†é’Ÿ
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">VTKå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰</h1>
            
            <div class="markdown-body">
              <p>æœ¬ç³»åˆ—æ–‡ç« ä¸»è¦å¯¹<a
target="_blank" rel="noopener" href="https://vtk.org/">VTK</a>çš„ç›¸å…³çŸ¥è¯†è¿›è¡Œæ€»ç»“ã€‚ <span id="more"></span></p>
<h1 id="vtkå­¦ä¹ ç¬”è®°ä¸‰">VTKå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰</h1>
<h2 id="vtkå›¾åƒæ•°æ®ç»“æ„">VTKå›¾åƒæ•°æ®ç»“æ„ğŸ¦­</h2>
<p>æ•°å­—å›¾åƒæ–‡ä»¶å†…å®¹ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼šå›¾åƒå¤´ä¿¡æ¯å’Œæ•°æ®ã€‚å›¾åƒå¤´ä¿¡æ¯å®šä¹‰äº†å›¾åƒçš„åŸºæœ¬ä¿¡æ¯ï¼Œä¸»è¦åŒ…æ‹¬èµ·ç‚¹ä½ç½®ï¼ˆOriginï¼‰ï¼Œåƒç´ é—´éš”ï¼ˆspaceï¼‰å’Œç»´æ•°ï¼ˆdimensionï¼‰ã€‚é€šè¿‡è¿™ä¸‰ä¸ªå‚æ•°å³å¯ä»¥å†³å®šå›¾åƒç©ºé—´ä½ç½®å’Œè§„æ¨¡ã€‚å›¾åƒå¯ä»¥çœ‹åšæ˜¯ç©ºé—´ä¸­çš„ä¸€ä¸ªè§„åˆ™ç½‘æ ¼ï¼Œç½‘æ ¼ä¸­çš„æ¯ä¸ªæœ€å°å•å…ƒç§°ä¹‹ä¸ºä¸€ä¸ªåƒç´ ï¼ˆäºŒç»´ï¼‰æˆ–è€…ä½“ç´ ï¼ˆä¸‰ç»´ï¼‰ï¼Œè¿™æ ·ç½‘æ ¼åœ¨æ¯ä¸ªæ–¹å‘ä¸Šçš„åƒç´ æˆ–è€…ä½“ç´ ä¸ªæ•°å³ä¸ºå›¾åƒåœ¨è¯¥æ–¹å‘çš„ç»´æ•°ã€‚åƒç´ ç´¢å¼•è¡¨ç¤ºæ¯ä¸ªåƒç´ åœ¨å›¾åƒç½‘æ ¼ä¸­çš„ä½ç½®ï¼Œæ˜¯å›¾åƒå†…éƒ¨çš„ç½‘æ ¼åæ ‡ã€‚è€Œåœ¨åŒ»å­¦å›¾åƒä¸­ï¼Œæ¯ä¸ªå›¾åƒé™¤äº†å†…éƒ¨åæ ‡å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªä¸–ç•Œåæ ‡ã€‚è¿™ä¸ªä¸–ç•Œåæ ‡ä¾èµ–äºæˆåƒè®¾å¤‡ã€‚åœ¨åŒ»å­¦å›¾åƒä¸­èµ·ç‚¹ä½ç½®ï¼ˆOriginï¼‰ï¼Œåƒç´ é—´éš”ï¼ˆspaceï¼‰å’Œå›¾åƒç»´æ•°å†³å®šäº†ä¸–ç•Œåæ ‡ç³»ã€‚è¿™æ ·é€šè¿‡èµ·ç‚¹ä½ç½®ï¼Œåƒç´ é—´éš”å’Œåƒç´ ç´¢å¼•å³å¯è®¡ç®—æ¯ä¸ªåƒç´ çš„ä¸–ç•Œåæ ‡ä½ç½®ã€‚</p>
<p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212031654586.png" srcset="/img/loading.gif" lazyload style="zoom:80%;" /></p>
<p>ä¸Šå›¾è¡¨ç¤ºä¸€ä¸ª4x2x3çš„å›¾åƒï¼Œå³å›¾åƒçš„ç»´æ•°ï¼Œæ¯ä¸€ä¸ªå°çƒè¡¨ç¤ºä¸€ä¸ªåƒç´ ï¼›è€Œå›¾åƒçš„åŸç‚¹ä¸º(5.1,10.0,6.5)ï¼Œä¸¤ä¸¤åƒç´ ä¹‹é—´çš„é—´éš”è¡¨ç¤ºåƒç´ é—´éš”ï¼Œæ¯ä¸ªæ–¹å‘çš„åƒç´ é—´éš”ä¸º1.5ï¼Œ1.5å’Œ1.8ã€‚</p>
<p>å›¾åƒæ•°æ®å³ä¸ºå›¾åƒåƒç´ çš„åƒç´ å€¼ï¼Œä¸€èˆ¬é‡‡ç”¨ä¸€ç»´æ•°ç»„æ¥è¡¨ç¤ºå’Œå­˜å‚¨ã€‚å·²çŸ¥åƒç´ ç´¢å¼•å’Œå›¾åƒç»´æ•°ä¸‹ï¼Œå³å¯è®¡ç®—æ¯ä¸ªåƒç´ å¯¹åº”çš„åƒç´ å€¼ã€‚é€šå¸¸å›¾åƒçš„åƒç´ å€¼ä¸ºä¸€ä¸ªæ ‡é‡ï¼Œä¾‹å¦‚ä¸€èˆ¬ç°åº¦å›¾åƒï¼›å›¾åƒåƒç´ å€¼ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‘é‡ï¼Œä¾‹å¦‚å½©è‰²å›¾åƒï¼›å¦å¤–å›¾åƒåƒç´ å€¼è¿˜å¯ä»¥æ˜¯å¼ é‡ï¼Œå¦‚æ¢¯åº¦åœºå›¾åƒã€‚åŒ»å­¦å›¾åƒå¤„ç†ä¸­å¤§éƒ¨åˆ†çš„å›¾åƒéƒ½æ˜¯ç°åº¦å›¾åƒã€‚</p>
<p>è¿™é‡Œéœ€è¦æ³¨æ„ç°åº¦å›¾åƒçš„ç°åº¦å€¼çš„æ•°æ®ç±»å‹ï¼Œåœ¨ä¸€èˆ¬çš„ç°åº¦å›¾åƒå¤„ç†ä¸­ä¸éœ€è¦è€ƒè™‘ï¼Œå› ä¸ºå…¶èŒƒå›´é»˜è®¤ä¸º0-255ï¼Œå¯ä»¥é‡‡ç”¨ä¸€ä¸ªunsigned
charç±»å‹ç±»è¡¨ç¤ºã€‚ä½†æ˜¯åœ¨åŒ»å­¦å›¾åƒå¤„ç†ä¸­ï¼Œ256ç°åº¦çº§è¿œè¿œä¸èƒ½æ»¡è¶³è¦æ±‚ï¼Œå› æ­¤ç°åº¦èŒƒå›´å¾€å¾€å¤§äº256çº§ã€‚å¸¸è§çš„åŒ»å­¦å›¾åƒçš„åƒç´ æ•°æ®ç±»å‹ä¸ºunsigned
shortï¼Œç°åº¦èŒƒå›´ä¸º0-65536ã€‚å¦å¤–ï¼Œæœ‰æ—¶ä¸ºäº†ç²¾åº¦çš„è€ƒè™‘ï¼Œä¹Ÿä¼šä½¿ç”¨intã€floatç”šè‡³doubleç±»å‹ï¼Œå› æ­¤éœ€è¦æ ¼å¤–æ³¨æ„ã€‚</p>
<p>åˆ©ç”¨vtkImageDataï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„åˆ›å»ºã€è¯»å†™ã€å’Œè®¿é—®å›¾åƒæ•°æ®ã€‚</p>
<hr />
<h2 id="vtkå›¾åƒåˆ›å»º">VTKå›¾åƒåˆ›å»ºğŸ˜¼</h2>
<h4 id="é€šè¿‡source">é€šè¿‡SourceğŸ¤¥</h4>
<p>VTKä¸­å†…ç½®äº†å¤šä¸ªåˆ›å»ºå›¾åƒçš„Sourceï¼Œåˆ©ç”¨è¿™äº›Sourceå¯ä»¥å¿«é€Ÿçš„åˆ›å»ºå›¾åƒï¼Œå…¶ä¸­ä»¥vtkImageCanvasSource2Dä¸ºä»£è¡¨ã€‚è¯¥SourceåŠŸèƒ½æ˜¯åˆ›å»ºä¸€ä¸ªç”»å¸ƒï¼ˆç©ºç™½å›¾åƒï¼‰ï¼Œå¹¶æä¾›äº†å¤šç§å‡ ä½•å›¾å½¢ï¼ˆç‚¹ã€çº¿æ®µã€åœ†ã€çŸ©å½¢ä»¥åŠå›¾åƒç­‰ï¼‰çš„ç»˜åˆ¶å¡«å……åŠŸèƒ½ã€‚</p>
<figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vtkSmartPointer&lt;vtkImageCanvasSource2D&gt; canvas = vtkSmartPointer&lt;vtkImageCanvasSource2D&gt;::<span class="hljs-built_in">New</span>();<br>    canvas-&gt;<span class="hljs-built_in">SetScalarTypeToUnsignedChar</span>();<br>    canvas-&gt;<span class="hljs-built_in">SetNumberOfScalarComponents</span>(<span class="hljs-number">1</span>);<br>    canvas-&gt;<span class="hljs-built_in">SetExtent</span>(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>, <span class="hljs-number">0</span>, <span class="hljs-number">100</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br><br>    canvas-&gt;<span class="hljs-built_in">SetDrawColor</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>    canvas-&gt;<span class="hljs-built_in">FillBox</span>(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>, <span class="hljs-number">0</span>, <span class="hljs-number">100</span>);<br><br>    canvas-&gt;<span class="hljs-built_in">SetDrawColor</span>(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>    canvas-&gt;<span class="hljs-built_in">FillBox</span>(<span class="hljs-number">20</span>, <span class="hljs-number">40</span>, <span class="hljs-number">20</span>, <span class="hljs-number">40</span>);<br><br>    canvas-&gt;<span class="hljs-built_in">Update</span>();<br><br>    <span class="hljs-comment">// ç”Ÿæˆæ¸²æŸ“å¯¹è±¡</span><br>    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; iren = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>    vtkSmartPointer&lt;vtkImageViewer2&gt; viewer = vtkSmartPointer&lt;vtkImageViewer2&gt;::<span class="hljs-built_in">New</span>();<br>    viewer-&gt;<span class="hljs-built_in">SetInputConnection</span>(canvas-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br>    viewer-&gt;<span class="hljs-built_in">SetupInteractor</span>(iren);<br>    iren-&gt;<span class="hljs-built_in">Initialize</span>();<br>    iren-&gt;<span class="hljs-built_in">Start</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212031736847.png" srcset="/img/loading.gif" lazyload style="zoom:67%;" /></p>
<p>åœ¨ä¸Šé¢ä»£ç ç‰‡æ®µä¸­ï¼Œé¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªvtkImageCanvasSource2Dçš„æŒ‡é’ˆï¼Œç„¶åè®¾ç½®ç”»å¸ƒçš„åƒç´ æ•°æ®ç±»å‹ï¼Œåƒç´ æˆåˆ†æ•°ç›®å’Œç”»å¸ƒçš„å¤§å°ã€‚ç„¶åï¼Œåœ¨è¯¥ç”»å¸ƒä¸­ï¼Œåˆ©ç”¨FillBoxç»˜åˆ¶ä¸¤ä¸ªå¡«å……çŸ©å½¢ï¼Œå¹¶é€šè¿‡SetDrawColor()æ¥è®¾ç½®ä¸¤ä¸ªçŸ©å½¢çš„é¢œè‰²ã€‚</p>
<p>é™¤äº†vtkImageCanvasSource2Då¤–ï¼ŒVTKä¸­è¿˜æä¾›äº†å…¶ä»–ç±»ä¼¼çš„sourceç±»æ¥å¿«é€Ÿç”Ÿæˆç‰¹å®šçš„å›¾åƒï¼Œä¾‹å¦‚vtkImageEllipsoidSourceï¼Œè¯¥ç±»æ ¹æ®æŒ‡å®šçš„ä¸­å¿ƒï¼Œå„ä¸ªè½´çš„åŠå¾„æ¥ç”Ÿæˆä¸€ä¸ªå‰æ™¯ä¸ºæ¤­åœ†ï¼ˆçƒï¼‰çš„äºŒå€¼å›¾åƒï¼›vtkImageGaussianSourceç±»ç”Ÿæˆä¸€å‰¯åƒç´ å€¼æœä»é«˜æ–¯åˆ†å¸ƒçš„å›¾åƒï¼›vtkImageGridSourceç”¨äºç”Ÿæˆç½‘æ ¼çº¿å›¾åƒï¼›vtkImageNoiseSourceç”Ÿæˆä¸€ä¸ªåƒç´ å€¼ä¸ºéšæœºæ•°çš„å™ªå£°å›¾åƒï¼›vtkImageSinusoidSourceç”Ÿæˆçš„å›¾åƒåƒç´ å€¼ç”±æ­£å¼¦å‡½æ•°å†³å®šã€‚</p>
<hr />
<h4 id="é€šè¿‡æ‰‹åŠ¨">é€šè¿‡æ‰‹åŠ¨ğŸ‚ğŸ»</h4>
<p>åˆ©ç”¨ä¸Šè¿°å›¾åƒSourceå¯ä»¥å¿«é€Ÿçš„ç”Ÿæˆç‰¹å®šçš„å›¾åƒï¼Œä¸è¿‡ç›¸å¯¹æ¥è¯´ï¼Œåœ¨å®é™…åº”ç”¨ä¸­è¾ƒå°‘ç”¨åˆ°ä»–ä»¬ã€‚VTKä¸­å¯ä»¥æ‰‹åŠ¨ç”Ÿæˆå›¾åƒï¼Œç„¶åæ ¹æ®éœ€è¦è¿›è¡Œåƒç´ èµ‹å€¼ã€‚</p>
<figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-type">int</span> main	<br>&#123;<br>    vtkSmartPointer&lt;vtkImageData&gt; img = vtkSmartPointer&lt;vtkImageData&gt;::<span class="hljs-built_in">New</span>();<br>    vtkSmartPointer&lt;vtkInformation&gt; info = vtkSmartPointer&lt;vtkInformation&gt;::<span class="hljs-built_in">New</span>();<br>    img-&gt;<span class="hljs-built_in">SetDimensions</span>(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-number">10</span>);<br>    img-&gt;<span class="hljs-built_in">SetScalarType</span>(VTK_UNSIGNED_CHAR, info);<br>    img-&gt;<span class="hljs-built_in">SetNumberOfScalarComponents</span>(<span class="hljs-number">1</span>,info); <span class="hljs-comment">// æ¯ä¸ªåƒç´ éœ€è¦è¡¨ç¤ºçš„ç»„ä»½ =1æ˜¯æŒ‡æ ‡é‡å›¾</span><br>    img-&gt;<span class="hljs-built_in">AllocateScalars</span>(info);<br><br>    <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>* ptr = (<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>*)img-&gt;<span class="hljs-built_in">GetScalarPointer</span>();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span> * <span class="hljs-number">10</span> * <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        *ptr++ = i % <span class="hljs-number">256</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// ç”Ÿæˆæ¸²æŸ“å¯¹è±¡</span><br>    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; iren = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>    vtkSmartPointer&lt;vtkImageViewer2&gt; viewer = vtkSmartPointer&lt;vtkImageViewer2&gt;::<span class="hljs-built_in">New</span>();<br>    viewer-&gt;<span class="hljs-built_in">SetInputData</span>(img);<br>    viewer-&gt;<span class="hljs-built_in">SetupInteractor</span>(iren);<br>    iren-&gt;<span class="hljs-built_in">Initialize</span>();<br>    iren-&gt;<span class="hljs-built_in">Start</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062100953.png" srcset="/img/loading.gif" lazyload alt="" style="zoom:67%;" /></p>
<p>é¦–å…ˆå®šä¹‰vtkImageDataæŒ‡é’ˆï¼Œç„¶åæŒ‡å®šå›¾åƒçš„ç»´æ•°ï¼Œè€Œå›¾åƒçš„åŸç‚¹å’Œåƒç´ é—´éš”åˆ™éƒ½æ˜¯é‡‡ç”¨é»˜è®¤å€¼ï¼Œå› æ­¤ä¸éœ€è¦è®¾ç½®ã€‚SetScalarTypeæŒ‡å®šå›¾åƒçš„æ¯ä¸ªåƒç´ å€¼çš„æ•°æ®ç±»å‹ä¸ºunsigned
charï¼ŒSetNumberOfScalarComponentsåˆ™æŒ‡å®šäº†æ¯ä¸ªåƒç´ å€¼çš„æ•°æ®æˆåˆ†ä¸º1ï¼Œæ¯ä¸ªåƒç´ å€¼ä¸º1ä¸ªæ ‡é‡å€¼ï¼Œå‚æ•°è®¾ç½®å®Œæ¯•åï¼Œè°ƒç”¨AllocateScalars()åˆ†é…å†…å­˜ï¼Œç”Ÿæˆå›¾åƒæ•°æ®ã€‚å›¾åƒç”Ÿæˆåï¼Œé»˜è®¤æ‰€æœ‰åƒç´ å€¼ä¸º0ã€‚å¯ä»¥é€šè¿‡è®¿é—®å›¾åƒæ•°æ®æ•°ç»„æ¥è®¾ç½®æ¯ä¸ªåƒç´ å€¼ï¼ŒGetScalarPointer()å³è¿”å›å›¾åƒçš„æ•°æ®æ•°ç»„ï¼ˆå›¾åƒæ•°æ®æ•°ç»„éƒ½é‡‡ç”¨ä¸€ç»´æ•°ç»„ï¼‰ï¼Œç„¶åæ ¹æ®å›¾åƒçš„å¤§å°ï¼Œè®¿é—®æ¯ä¸ªåƒç´ å¹¶ä¸ºå…¶èµ‹å€¼ã€‚</p>
<hr />
<h2 id="vtkå›¾åƒæ˜¾ç¤º">VTKå›¾åƒæ˜¾ç¤ºğŸŒƒ</h2>
<h4 id="vtkimageviewer2">vtkImageViewer2ğŸš</h4>
<p>åœ¨VTKæ—©æœŸç‰ˆæœ¬ä¸­ï¼Œæä¾›äº†vtkImageViewerç±»æ¥æ˜¾ç¤ºå›¾åƒã€‚éšç€ç‰ˆæœ¬çš„å‘å±•ï¼Œç›®å‰ä½¿ç”¨vtkImageViewer2æ¥ä»£æ›¿vtkImageViewerå®ç°å›¾åƒçš„æ˜¾ç¤ºã€‚vtkImageViewer2ä¸­å°è£…äº†VTKå›¾åƒæ˜¾ç¤ºçš„ç®¡çº¿ï¼ŒåŒ…æ‹¬vtkActorï¼ŒvtkRenderï¼ŒvtkRenderWindowï¼ŒvtkInteractorStypeImageç­‰å¯¹è±¡ï¼Œå¯ä»¥æ–¹ä¾¿çš„å®Œæˆå›¾åƒæ˜¾ç¤ºå’Œäº¤äº’ã€‚è¯¥ç±»æä¾›çš„ä¸»è¦äº¤äº’æ“ä½œæœ‰ï¼šå›¾åƒæ”¾ç¼©ï¼Œçª—å®½çª—ä½è°ƒèŠ‚ï¼Œå¹¶æä¾›åˆ‡ç‰‡é€‰æ‹©ï¼Œåˆ‡ç‰‡æ–¹å‘è®¾ç½®æ¥å£ï¼Œå°¤å…¶é€‚åˆä¸‰ç»´å›¾åƒçš„æ˜¾ç¤ºã€‚</p>
<figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vtkSmartPointer&lt;vtkMetaImageReader&gt;reader = vtkSmartPointer&lt;vtkMetaImageReader&gt;::<span class="hljs-built_in">New</span>();<br>    reader-&gt;<span class="hljs-built_in">SetFileName</span>(<span class="hljs-string">&quot;brain.mhd&quot;</span>);<br>    reader-&gt;<span class="hljs-built_in">Update</span>();<br><br>    vtkSmartPointer&lt;vtkImageViewer2&gt; imageViewer = vtkSmartPointer&lt;vtkImageViewer2&gt;::<span class="hljs-built_in">New</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">SetInputConnection</span>(reader-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br>    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;renderWindowInteractor = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">SetupInteractor</span>(renderWindowInteractor);<br><br>    imageViewer-&gt;<span class="hljs-built_in">SetColorLevel</span>(<span class="hljs-number">500</span>);<br>    imageViewer-&gt;<span class="hljs-built_in">SetColorWindow</span>(<span class="hljs-number">2000</span>);<br>    imageViewer-&gt;<span class="hljs-built_in">SetSlice</span>(<span class="hljs-number">40</span>);<br>    imageViewer-&gt;<span class="hljs-built_in">SetSliceOrientationToXY</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">Render</span>();<br><br>    renderWindowInteractor-&gt;<span class="hljs-built_in">Start</span>();<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062100488.png" srcset="/img/loading.gif" lazyload style="zoom: 50%;" /></p>
<p>é¦–å…ˆä½¿ç”¨vtkMetaImageReaderè¯»å…¥ä¸€ä¸ªmhdå›¾åƒï¼Œç„¶åå®šä¹‰ä¸€ä¸ªvtkImageViewer2å¯¹è±¡æ˜¾ç¤ºå›¾åƒã€‚æ¥ä¸‹æ¥å®šä¹‰äº†ä¸€ä¸ªvtkRenderWindowInteractorå¯¹è±¡ï¼Œå¹¶ä¼ é€’ç»™vtkImageViewer2å¯¹è±¡ï¼Œç”¨äºå®Œæˆé¼ æ ‡ã€é”®ç›˜ç­‰æ¶ˆæ¯å“åº”ï¼Œä¾¿äºè¿›è¡Œå›¾åƒçš„äº¤äº’æ“ä½œã€‚æ¥ä¸‹æ¥åˆ†åˆ«è®¾ç½®äº†å››ä¸ªå‚æ•°ï¼Œçª—ä½(ColorLevel)ã€çª—å®½(ColorWindow)ã€åˆ‡ç‰‡(Slice)å’Œåˆ‡ç‰‡æ–¹å‘(Orientation)ã€‚å¦å¤–ï¼ŒæŒ‰ä¸‹é¼ æ ‡å·¦é”®æ‹–åŠ¨é¼ æ ‡ï¼Œå¯ä»¥è°ƒèŠ‚å›¾åƒçš„çª—å®½çª—ä½ï¼Œä»è€Œæ˜¾ç¤ºä¸åŒç°åº¦èŒƒå›´å†…å®¹ï¼›æŒ‰ä¸‹é¼ æ ‡å³é”®æ‹–åŠ¨é¼ æ ‡å¯ä»¥æ”¾ç¼©å›¾åƒã€‚å½“ç„¶è¿™äº›äº¤äº’æ“ä½œå¯ä»¥ç”±ç”¨æˆ·æ ¹æ®éœ€è¦è‡ªå·±å®šä¹‰vtkInteractorStyleå­ç±»ï¼Œå¹¶å“åº”ç›¸åº”çš„æ“ä½œã€‚</p>
<p>çª—å®½æ˜¯CTå›¾åƒä¸Šæ˜¾ç¤ºçš„CTå€¼èŒƒå›´ã€‚ä¸€èˆ¬æ˜¾ç¤ºå™¨çš„ç°åº¦èŒƒå›´ä¸º256çº§ï¼Œè€ŒXå…‰å›¾åƒçš„ç°åº¦èŒƒå›´åˆ™è¿œè¿œå¤§äºè¯¥èŒƒå›´ï¼Œå› æ­¤é€šè¿‡æ˜¾ç¤ºå™¨æ˜¾ç¤ºæ—¶ä¸èƒ½æ˜¾ç¤ºæ‰€æœ‰ç°åº¦çº§ã€‚å› æ­¤éœ€è¦çª—å®½æ¥å®šä¹‰éœ€è¦æ˜¾ç¤ºçš„ç°åº¦èŒƒå›´ã€‚å½“ç°åº¦å€¼é«˜äºè¯¥èŒƒå›´çš„æœ€å¤§å€¼æ—¶ï¼Œå‡ä»¥ç™½å½±æ˜¾ç¤ºï¼›è€Œä½äºè¯¥èŒƒå›´æ—¶å‡æ˜¾ç¤ºä¸ºé»‘è‰²ã€‚å¢å¤§çª—å®½ï¼Œæ˜¾ç¤ºå…·æœ‰ä¸åŒç°åº¦å€¼çš„ç»„ç»‡ç»“æ„å¢å¤šï¼Œä½†æ˜¯ä¼šé™ä½ç»„ç»‡ä¹‹é—´çš„å¯¹æ¯”åº¦ã€‚å‡å°çª—å®½ï¼Œåˆ™å¯è§†çš„ä¸åŒç°åº¦ç»„ç»‡ç»“æ„ä¼šå‡å°‘ï¼ŒåŒæ—¶å¢å¤§ç»„ç»‡ç»“æ„çš„å¯¹æ¯”åº¦ã€‚</p>
<p>çª—ä½æ˜¯çª—çš„ä¸­å¿ƒä½ç½®ã€‚çª—å®½åªæ˜¯ç¡®å®šäº†CTå›¾åƒç°åº¦èŒƒå›´ä¸Šçš„å¯è§†éƒ¨åˆ†èŒƒå›´ï¼Œè¿˜éœ€è¦çª—ä½æ¥ç¡®å®šå¯è§†ç°åº¦èŒƒå›´çš„å…·ä½“ä½ç½®ã€‚åŒæ ·çš„çª—å®½ï¼Œä¼šæ ¹æ®çª—ä½çš„ä½ç½®å˜åŒ–æ¥æ˜¾ç¤ºä¸åŒçš„ç»„ç»‡ç»“æ„ã€‚æ¯”å¦‚ï¼Œçª—å®½ä¸º200æ—¶ï¼Œå½“çª—ä½ä¸º100æ—¶ï¼Œå¯è§†ç°åº¦èŒƒå›´ä¸º0è‡³200ï¼›å½“çª—ä½ä¸º500æ—¶ï¼Œåˆ™å¯è§†ç°åº¦èŒƒå›´ä¸º400è‡³600ã€‚å½“çª—å®½çª—ä½ç¡®å®šä»¥åï¼Œæ˜¾ç¤ºæ—¶åº•å±‚ä¼šå°†å¯è§†ç°åº¦èŒƒå›´è½¬æ¢åˆ°256ç°åº¦çº§è¿›è¡Œæ˜¾ç¤ºã€‚</p>
<p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062100201.png" srcset="/img/loading.gif" lazyload style="zoom:80%;" /></p>
<p>è€Œæ˜¾ç¤ºä¸‰ç»´å›¾åƒæ—¶ï¼Œéœ€è¦ç¡®å®šå½“å‰æ˜¾ç¤ºåˆ‡ç‰‡å’Œæ–¹å‘ã€‚vtkImageViewer2æä¾›äº†SetSlice()å‡½æ•°è®¾ç½®åˆ‡ç‰‡å·ï¼ŒSetSliceOrientationToXY()åˆ™å°†åˆ‡ç‰‡çš„æ–¹å‘è®¾ç½®ä¸ºå‚ç›´XYå¹³é¢æ–¹å‘ã€‚æ­¤å¤–è¿˜å¯ä»¥è®¾ç½®ä¸ºå‚ç›´YZæˆ–è€…XZå¹³é¢æ–¹å‘ï¼Œå…¶å¯¹åº”å‡½æ•°åˆ†åˆ«ä¸ºSetSliceOrientationToYZ()å’ŒSetSliceOrientationToXZ()ã€‚é»˜è®¤æƒ…å†µä¸‹åˆ‡ç‰‡æ–¹å‘ä¸ºå‚ç›´äºXYå¹³é¢å³æ²¿ç€Zè½´æ–¹å‘ï¼Œæ ¹æ®è®¾ç½®çš„åˆ‡ç‰‡å·è·å–Zè½´æ–¹å‘çš„å…·ä½“åˆ‡ç‰‡è¿›è¡Œæ˜¾ç¤ºã€‚</p>
<p>åˆ‡ç‰‡ï¼ˆsliceï¼‰ä¸åˆ‡é¢æ˜¯ä¸‰ç»´å›¾åƒæ¯”è¾ƒå¸¸ç”¨çš„æ¦‚å¿µã€‚å°¤å…¶æ˜¯åœ¨åŒ»å­¦å›¾åƒä¸­ï¼Œä¸åŒæ–¹å‘çš„åˆ‡é¢éƒ½æœ‰ç‰¹å®šçš„åå­—ã€‚çŸ¢çŠ¶é¢ï¼ˆsagitalï¼‰æ˜¯æ²¿ç€èº«ä½“å‰åå¾„æ‰€åšçš„ä¸åœ°é¢å‚ç›´çš„åˆ‡é¢ï¼›å† çŠ¶é¢ï¼ˆcoronalï¼‰æ˜¯æ²¿ç€èº«ä½“å·¦å³å¾„æ‰€åšçš„ä¸åœ°é¢å‚ç›´çš„åˆ‡é¢ï¼›è€Œæ¨ªæ–­é¢ï¼ˆtransverse/axialï¼‰æ˜¯æŒ‡æ¨ªæ–­èº«ä½“ä¸åœ°é¢å¹³è¡Œçš„åˆ‡é¢ã€‚</p>
<p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062100035.png" srcset="/img/loading.gif" lazyload style="zoom:60%;" /></p>
<p>è®¾ç½®åˆ‡ç‰‡çš„æ–¹å‘å³æ˜¯é€šè¿‡ä¸åŒçš„æ–¹å‘æ¥è§‚å¯Ÿäººä½“å†…éƒ¨ç»„ç»‡ç»“æ„ã€‚å› æ­¤ï¼Œå¸¸è§çš„åŒ»å­¦å›¾åƒå¯è§†åŒ–è½¯ä»¶å¸¸å¸¸æä¾›å››ä¸ªè§†å›¾ç”¨æ¥æ˜¾ç¤ºå›¾åƒï¼šæ¨ªæ–­é¢è§†å›¾ï¼ŒçŸ¢çŠ¶é¢è§†å›¾ï¼Œå† çŠ¶é¢è§†å›¾å’Œä¸‰ç»´è§†å›¾ã€‚</p>
<hr />
<h4 id="vtkimageactor">vtkImageActorğŸ’´</h4>
<p>vtkImageActoræ˜¯ä¸€ä¸ªä¸‰ç»´å›¾åƒæ¸²æŸ“Actorï¼Œé€šè¿‡çº¹ç†æ˜ å°„å°†å›¾åƒæ˜ å°„åˆ°ä¸€ä¸ªå¤šè¾¹å½¢ä¸Šè¿›è¡Œæ˜¾ç¤ºã€‚ä½¿ç”¨vtkImageActorè¾ƒvtkImageViewer2è¦å¤æ‚ä¸€äº›ï¼Œéœ€è¦å»ºç«‹å®Œæ•´çš„æ¸²æŸ“ç®¡çº¿ï¼šåŒ…æ‹¬vtkImageActorï¼ŒvtkRenderï¼ŒvtkRenderWindowï¼ŒvtkRenderWindowInteractorç®¡çº¿ã€‚å¦å¤–ï¼Œä½œä¸ºå›¾åƒäºŒç»´æµè§ˆå™¨ï¼Œä¸éœ€è¦åœ¨ä¸‰ç»´ç©ºé—´ä¸­è¿›è¡Œæ—‹è½¬æ“ä½œï¼Œå› æ­¤è¿˜éœ€è¦ä¸ºvtkRenderWindowå®šä¹‰ä¸€ä¸ªvtkInteractorStyleImageå¯¹è±¡ã€‚</p>
<figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vtkSmartPointer&lt;vtkBMPReader&gt; reader = vtkSmartPointer&lt;vtkBMPReader&gt;::<span class="hljs-built_in">New</span>();<br>    reader-&gt;<span class="hljs-built_in">SetFileName</span>(<span class="hljs-string">&quot;lena.bmp&quot;</span>);<br>    reader-&gt;<span class="hljs-built_in">Update</span>();<br><br>    vtkSmartPointer&lt;vtkImageActor&gt; imgActor = vtkSmartPointer&lt;vtkImageActor&gt;::<span class="hljs-built_in">New</span>();<br>    imgActor-&gt;<span class="hljs-built_in">SetInputData</span>(reader-&gt;<span class="hljs-built_in">GetOutput</span>());<br><br>    vtkSmartPointer&lt;vtkRenderer&gt; renderer = vtkSmartPointer&lt;vtkRenderer&gt;::<span class="hljs-built_in">New</span>();<br>    renderer-&gt;<span class="hljs-built_in">AddActor</span>(imgActor);<br>    renderer-&gt;<span class="hljs-built_in">SetBackground</span>(<span class="hljs-number">0.4</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.6</span>);<br><br>    vtkSmartPointer&lt;vtkRenderWindow&gt; renderWindow = vtkSmartPointer&lt;vtkRenderWindow&gt;::<span class="hljs-built_in">New</span>();<br>    renderWindow-&gt;<span class="hljs-built_in">SetSize</span>(<span class="hljs-number">500</span>, <span class="hljs-number">500</span>);<br>    renderWindow-&gt;<span class="hljs-built_in">AddRenderer</span>(renderer);<br>    renderWindow-&gt;<span class="hljs-built_in">Render</span>();<br><br>    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; renderWindowInteractor = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>    vtkSmartPointer&lt;vtkInteractorObserver&gt; style = vtkSmartPointer&lt;vtkInteractorStyle&gt;::<span class="hljs-built_in">New</span>();<br><br>    renderWindowInteractor-&gt;<span class="hljs-built_in">SetInteractorStyle</span>(style);<br>    renderWindowInteractor-&gt;<span class="hljs-built_in">SetRenderWindow</span>(renderWindow);<br>    renderWindowInteractor-&gt;<span class="hljs-built_in">Initialize</span>();<br><br>    renderWindowInteractor-&gt;<span class="hljs-built_in">Start</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062100024.png" srcset="/img/loading.gif" lazyload style="zoom:67%;" /></p>
<p>ä¸Šé¢ä»£ç ä¸­åœ¨è¯»å…¥å›¾åƒåï¼Œä¾æ¬¡å»ºç«‹vtkImageActorï¼ŒvtkRenderï¼ŒvtkRenderWindowï¼ŒvtkRenderWindowInteractorï¼Œå¹¶ç»„è£…ä¸ºç®¡çº¿ã€‚ä¸ºäº†å±è”½æ—‹è½¬æ“ä½œï¼Œå»ºç«‹vtkInteractorStyleImageå¯¹è±¡ï¼Œå¹¶é€šè¿‡renderWindowInteractor-&gt;SetInteractorStyle(style)è®¾ç½®äº¤äº’å¯¹è±¡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒvtkImageActoræ¥æ”¶çš„å›¾åƒvtkImageDataæ•°æ®ç±»å‹å¿…é¡»ä¸ºunsigned
charç±»å‹ï¼Œå› æ­¤åœ¨æ˜¾ç¤ºä¹‹å‰ï¼Œéœ€è¦åˆ©ç”¨vtkImageCastå°†å›¾åƒæ•°æ®ç±»å‹è½¬æ¢ä¸ºunsigned
charã€‚</p>
<hr />
<h4 id="å›¾åƒèåˆ">å›¾åƒèåˆğŸ¤¿</h4>
<p>ä¸Šé¢ä¸¤ç§æ–¹æ³•éƒ½æ˜¯åœ¨ä¸€ä¸ªçª—å£ä¸­æ˜¾ç¤ºä¸€ä¸ªå›¾åƒã€‚ä½†æ˜¯åœ¨å¸¸è§çš„åŒ»å­¦å¤„ç†è½¯ä»¶ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°åœ¨ä¸€ä¸ªçª—å£ä¸­æ˜¾ç¤ºå¤šä¸ªå›¾åƒï¼Œè¿™å°±ä¼šç”¨åˆ°å›¾åƒèåˆæŠ€æœ¯ã€‚å›¾åƒèåˆæ˜¯åˆ©ç”¨å›¾åƒçš„alphaé€šé“å’Œä¸é€æ˜åº¦æ¥å®ç°ã€‚VTKä¸­vtkImageBlendå®ç°å›¾åƒçš„èåˆã€‚</p>
<p>vtkImageBlendå¯ä»¥æ¥æ”¶å¤šä¸ªå›¾åƒè¾“å…¥ï¼Œè¾“å‡ºä¸ºèåˆå›¾åƒã€‚è¾“å‡ºå›¾åƒçš„åƒç´ é—´éš”ã€åŸç‚¹ã€èŒƒå›´ï¼ˆextentï¼‰ä»¥åŠåƒç´ ç»„åˆ†ä¸ªæ•°ä¸ç¬¬ä¸€ä¸ªå›¾åƒä¸€è‡´ã€‚è¯¥ç±»æä¾›äº†ä¸¤ç§èåˆæ¨¡å¼ï¼Œç¬¬ä¸€ç§æ˜¯æ ‡å‡†æ¨¡å¼ï¼Œä¹Ÿæ˜¯é»˜è®¤çš„èåˆæ–¹å¼ã€‚</p>
<figure class="highlight scss"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs scss">output &lt;- <span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[0]</span><br>foreach <span class="hljs-selector-tag">input</span> <span class="hljs-selector-tag">i</span> &#123;<br>    foreach pixel px &#123;<br>        r &lt;- <span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[i]</span>(px)(alpha)* <span class="hljs-attribute">opacity</span><span class="hljs-selector-attr">[i]</span><br>        f &lt;- (<span class="hljs-number">255</span> - r)<br>        <span class="hljs-built_in">output</span>(px) &lt;- <span class="hljs-built_in">output</span>(px) * f + <span class="hljs-selector-tag">input</span>(px) *r<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>ç¬¬äºŒç§æ˜¯æ··åˆæ¨¡å¼ï¼ˆCompoundï¼‰ã€‚è¯¥æ¨¡å¼ä¸‹è¾“å‡ºç»“æœç»è¿‡alpha/opacityä¸é€æ˜åº¦çš„å’Œåšè¿‡å½’ä¸€åŒ–ã€‚å¦å¤–è¿˜å¯ä»¥è®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œå½“alpha*opacityå°äºç­‰äºè¯¥é˜ˆå€¼æ—¶ä¼šå¿½ç•¥è¯¥åƒç´ ã€‚</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-built_in">output</span> &lt;- <span class="hljs-number">0</span><br><span class="hljs-built_in">foreach</span> pixel px &#123;<br>    sum &lt;- <span class="hljs-number">0</span><br>    <span class="hljs-built_in">foreach</span> <span class="hljs-built_in">input</span> i &#123;<br>        r &lt;- <span class="hljs-built_in">input</span>[i](px)(alpha) * opacity(i)<br>        sum &lt;- sum + r<br>        <span class="hljs-keyword">if</span> r &gt; threshold &#123;<br>        <span class="hljs-built_in">output</span>(px) &lt;- <span class="hljs-built_in">output</span>(px) + <span class="hljs-built_in">input</span>(px) *r<br>    	&#125;<br>    &#125;<br>	<span class="hljs-built_in">output</span>(px) &lt;- <span class="hljs-built_in">output</span>(px) / sum<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>ä¸‹é¢çš„ä»£ç ä¸­è¯»å…¥äº†ä¸€å‰¯ç°åº¦å›¾åƒï¼Œå¹¶ç”Ÿæˆäº†ä¸€ä¸ªäºŒå€¼å›¾åƒï¼›ç„¶åå®šä¹‰äº†vtkImageBlendå¯¹è±¡ï¼Œå‡½æ•°SetInput()è®¾ç½®ä¸¤ä¸ªå›¾åƒä½œä¸ºè¾“å…¥ã€‚è¿™é‡Œè®¾ç½®è¾“å…¥å›¾åƒæ—¶ï¼Œç”±äºå¯ä»¥è¾“å…¥å¤šä¸ªå›¾åƒï¼Œå› æ­¤éœ€è¦ç»™å®šå›¾åƒçš„idå·æ¥è®¾ç½®è¾“å…¥ã€‚SetOpacity()ç”¨äºè®¾ç½®å¯¹åº”idå·çš„å›¾åƒä¸é€æ˜åº¦çš„å¤§å°ï¼Œå½“ä¸é€æ˜åº¦ä¸º1.0æ—¶ï¼Œä¸ºå®Œå…¨ä¸é€æ˜ã€‚</p>
<figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vtkSmartPointer&lt;vtkJPEGReader&gt;reader = vtkSmartPointer&lt;vtkJPEGReader&gt;::<span class="hljs-built_in">New</span>();<br>    reader-&gt;<span class="hljs-built_in">SetFileName</span>(<span class="hljs-string">&quot;lena.jpg&quot;</span>);<br>    reader-&gt;<span class="hljs-built_in">Update</span>();<br><br>    vtkSmartPointer&lt;vtkImageCanvasSource2D&gt; imageSource = vtkSmartPointer&lt;vtkImageCanvasSource2D&gt;::<span class="hljs-built_in">New</span>();<br>    imageSource-&gt;<span class="hljs-built_in">SetNumberOfScalarComponents</span>(<span class="hljs-number">1</span>);<br>    imageSource-&gt;<span class="hljs-built_in">SetScalarTypeToUnsignedChar</span>();<br>    imageSource-&gt;<span class="hljs-built_in">SetExtent</span>(<span class="hljs-number">0</span>, <span class="hljs-number">512</span>, <span class="hljs-number">0</span>, <span class="hljs-number">512</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>    imageSource-&gt;<span class="hljs-built_in">SetDrawColor</span>(<span class="hljs-number">0.0</span>);<br>    imageSource-&gt;<span class="hljs-built_in">FillBox</span>(<span class="hljs-number">0</span>, <span class="hljs-number">512</span>, <span class="hljs-number">0</span>, <span class="hljs-number">512</span>);<br>    imageSource-&gt;<span class="hljs-built_in">SetDrawColor</span>(<span class="hljs-number">255.0</span>);<br>    imageSource-&gt;<span class="hljs-built_in">FillBox</span>(<span class="hljs-number">100</span>, <span class="hljs-number">400</span>, <span class="hljs-number">100</span>, <span class="hljs-number">400</span>);<br>    imageSource-&gt;<span class="hljs-built_in">Update</span>();<br><br>    vtkSmartPointer&lt;vtkImageBlend&gt; imageBlend = vtkSmartPointer&lt;vtkImageBlend&gt;::<span class="hljs-built_in">New</span>();<br>	imageBlend-&gt;<span class="hljs-built_in">AddInputData</span>(reader-&gt;<span class="hljs-built_in">GetOutput</span>());<br>    imageBlend-&gt;<span class="hljs-built_in">AddInputData</span>(imageSource-&gt;<span class="hljs-built_in">GetOutput</span>());<br>    imageBlend-&gt;<span class="hljs-built_in">SetOpacity</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0.4</span>);<br>    imageBlend-&gt;<span class="hljs-built_in">SetOpacity</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0.6</span>);<br>    imageBlend-&gt;<span class="hljs-built_in">Update</span>();<br><br>	<span class="hljs-comment">// Create actors</span><br>	vtkSmartPointer&lt;vtkImageActor&gt; originalActor1 = vtkSmartPointer&lt;vtkImageActor&gt;::<span class="hljs-built_in">New</span>();<br>	originalActor1-&gt;<span class="hljs-built_in">SetInputData</span>(reader-&gt;<span class="hljs-built_in">GetOutput</span>());<br><br>	vtkSmartPointer&lt;vtkImageActor&gt; originalActor2 = vtkSmartPointer&lt;vtkImageActor&gt;::<span class="hljs-built_in">New</span>();<br>	originalActor2-&gt;<span class="hljs-built_in">SetInputData</span>(imageSource-&gt;<span class="hljs-built_in">GetOutput</span>());<br><br>	vtkSmartPointer&lt;vtkImageActor&gt; blendActor = vtkSmartPointer&lt;vtkImageActor&gt;::<span class="hljs-built_in">New</span>();<br>	blendActor-&gt;<span class="hljs-built_in">SetInputData</span>(imageBlend-&gt;<span class="hljs-built_in">GetOutput</span>());<br><br>	<span class="hljs-comment">// Define viewport ranges</span><br>	<span class="hljs-comment">// (xmin, ymin, xmax, ymax)</span><br>	<span class="hljs-type">double</span> leftViewport[<span class="hljs-number">4</span>] = &#123; <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">0.33</span>, <span class="hljs-number">1.0</span> &#125;;<br>	<span class="hljs-type">double</span> midViewport[<span class="hljs-number">4</span>] = &#123; <span class="hljs-number">0.33</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">0.66</span>, <span class="hljs-number">1.0</span> &#125;;<br>	<span class="hljs-type">double</span> rightViewport[<span class="hljs-number">4</span>] = &#123; <span class="hljs-number">0.66</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span> &#125;;<br><br>	<span class="hljs-comment">// Setup renderers</span><br>	vtkSmartPointer&lt;vtkRenderer&gt; originalRenderer1 = vtkSmartPointer&lt;vtkRenderer&gt;::<span class="hljs-built_in">New</span>();<br>	originalRenderer1-&gt;<span class="hljs-built_in">SetViewport</span>(leftViewport);<br>	originalRenderer1-&gt;<span class="hljs-built_in">AddActor</span>(originalActor1);<br>	originalRenderer1-&gt;<span class="hljs-built_in">ResetCamera</span>();<br>	originalRenderer1-&gt;<span class="hljs-built_in">SetBackground</span>(<span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>);<br><br>	vtkSmartPointer&lt;vtkRenderer&gt; originalRenderer2 = vtkSmartPointer&lt;vtkRenderer&gt;::<span class="hljs-built_in">New</span>();<br>	originalRenderer2-&gt;<span class="hljs-built_in">SetViewport</span>(midViewport);<br>	originalRenderer2-&gt;<span class="hljs-built_in">AddActor</span>(originalActor2);<br>	originalRenderer2-&gt;<span class="hljs-built_in">ResetCamera</span>();<br>	originalRenderer2-&gt;<span class="hljs-built_in">SetBackground</span>(<span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>);<br><br>	vtkSmartPointer&lt;vtkRenderer&gt; blendRenderer = vtkSmartPointer&lt;vtkRenderer&gt;::<span class="hljs-built_in">New</span>();<br>	blendRenderer-&gt;<span class="hljs-built_in">SetViewport</span>(rightViewport);<br>	blendRenderer-&gt;<span class="hljs-built_in">AddActor</span>(blendActor);<br>	blendRenderer-&gt;<span class="hljs-built_in">ResetCamera</span>();<br>	blendRenderer-&gt;<span class="hljs-built_in">SetBackground</span>(<span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>);<br><br>	vtkSmartPointer&lt;vtkRenderWindow&gt; renderWindow = vtkSmartPointer&lt;vtkRenderWindow&gt;::<span class="hljs-built_in">New</span>();<br>	renderWindow-&gt;<span class="hljs-built_in">AddRenderer</span>(originalRenderer1);<br>	renderWindow-&gt;<span class="hljs-built_in">AddRenderer</span>(originalRenderer2);<br>	renderWindow-&gt;<span class="hljs-built_in">AddRenderer</span>(blendRenderer);<br>	renderWindow-&gt;<span class="hljs-built_in">SetSize</span>(<span class="hljs-number">640</span>, <span class="hljs-number">320</span>);<br>	renderWindow-&gt;<span class="hljs-built_in">Render</span>();<br><br>	vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; renderWindowInteractor = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>	vtkSmartPointer&lt;vtkInteractorObserver&gt; style = vtkSmartPointer&lt;vtkInteractorStyleImage&gt;::<span class="hljs-built_in">New</span>();<br>	renderWindowInteractor-&gt;<span class="hljs-built_in">SetInteractorStyle</span>(style);<br>	renderWindowInteractor-&gt;<span class="hljs-built_in">SetRenderWindow</span>(renderWindow);<br>	renderWindowInteractor-&gt;<span class="hljs-built_in">Initialize</span>();<br>	renderWindowInteractor-&gt;<span class="hljs-built_in">Start</span>();<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062100647.png" srcset="/img/loading.gif" lazyload style="zoom:80%;" /></p>
<hr />
<h2 id="vtkimagedataåŸºæœ¬æ“ä½œ">vtkImageDataåŸºæœ¬æ“ä½œğŸ˜ï¸</h2>
<h4 id="å›¾åƒä¿¡æ¯è®¿é—®å’Œä¿®æ”¹">å›¾åƒä¿¡æ¯è®¿é—®å’Œä¿®æ”¹ğŸ«</h4>
<p>å›¾åƒå¤„ç†ç¦»ä¸å¼€ä¸€äº›åŸºæœ¬çš„å›¾åƒæ•°æ®æ“ä½œï¼Œä¾‹å¦‚è·å–å’Œä¿®æ”¹å›¾åƒçš„åŸºæœ¬ä¿¡æ¯ï¼Œè®¿é—®å’Œä¿®æ”¹å›¾åƒåƒç´ å€¼ï¼Œå›¾åƒæ˜¾ç¤ºï¼Œå›¾åƒç±»å‹è½¬æ¢ç­‰ç­‰ã€‚ç†Ÿç»ƒæŒæ¡è¿™äº›åŸºæœ¬æ“ä½œæœ‰åŠ©äºä½¿ç”¨VTKè¿›è¡Œå›¾åƒå¤„ç†çš„å¿«é€Ÿå¼€å‘ã€‚</p>
<p>vtkImageDataä¸­æä¾›äº†å¤šä¸ªå‡½æ•°ç”¨äºè®¿é—®æˆ–è€…è·å–å›¾åƒçš„åŸºæœ¬ä¿¡æ¯ï¼Œè¿™äº›å‡½æ•°é€šå¸¸ä½¿ç”¨Setæˆ–è€…GetåŠ ä¸Šç›¸åº”çš„ä¿¡æ¯åçš„å½¢å¼ï¼Œä¾‹å¦‚è·å–å›¾åƒç»´æ•°çš„æ–¹æ³•å®šä¹‰ä¸ºGetDimensions()ã€‚å½“ç„¶è¿™é‡Œä¸»è¦ä»ç±»çš„å±‚æ¬¡ä¸Šè¿›è¡ŒVTKçš„å­¦ä¹ ï¼Œè¿™é‡Œä¸å†å…·ä½“èµ˜è¿°æ¯ä¸ªå‡½æ•°çš„åŸºæœ¬åç§°å’Œä½¿ç”¨ï¼Œç”¨æˆ·å¯ä»¥æŸ¥é˜…ç›¸åº”çš„ç±»æ–‡æ¡£ã€‚</p>
<figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vtkSmartPointer&lt;vtkBMPReader&gt; reader = vtkSmartPointer&lt;vtkBMPReader&gt;::<span class="hljs-built_in">New</span>();<br>    reader-&gt;<span class="hljs-built_in">SetFileName</span>(<span class="hljs-string">&quot;lena.bmp&quot;</span>);<br>    reader-&gt;<span class="hljs-built_in">Update</span>();<br><br>    <span class="hljs-type">int</span> dims[<span class="hljs-number">3</span>];<br>    reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetDimensions</span>(dims);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;å›¾åƒç»´æ•°:&quot;</span> &lt;&lt; dims[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; dims[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; dims[<span class="hljs-number">2</span>] &lt;&lt; std::endl;<br><br>    <span class="hljs-type">double</span> origin[<span class="hljs-number">3</span>];<br>    reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetOrigin</span>(origin);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;å›¾åƒåŸç‚¹:&quot;</span> &lt;&lt; origin[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; origin[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; origin[<span class="hljs-number">2</span>] &lt;&lt; std::endl;<br><br>    <span class="hljs-type">double</span> spaceing[<span class="hljs-number">3</span>];<br>    reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetSpacing</span>(spaceing);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;åƒç´ é—´éš”:&quot;</span> &lt;&lt; spaceing[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; spaceing[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; spaceing[<span class="hljs-number">2</span>] &lt;&lt; std::endl;<br><br><br>    vtkSmartPointer&lt;vtkImageViewer2&gt; imageViewer = vtkSmartPointer&lt;vtkImageViewer2&gt;::<span class="hljs-built_in">New</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">SetInputConnection</span>(reader-&gt;<span class="hljs-built_in">GetOutputPort</span>()); <br>    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; renderWindowInteractor = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">SetupInteractor</span>(renderWindowInteractor);<br>    imageViewer-&gt;<span class="hljs-built_in">Render</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">GetRenderer</span>()-&gt;<span class="hljs-built_in">ResetCamera</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">Render</span>();<br><br>    renderWindowInteractor-&gt;<span class="hljs-built_in">Start</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062100151.png" srcset="/img/loading.gif" lazyload style="zoom: 50%;" /></p>
<p>ä¸Šä¾‹ä¸­ä¸»è¦è·å–äº†å›¾åƒçš„ä¸‰ä¸ªä¿¡æ¯ï¼Œå›¾åƒç»´æ•°ï¼Œå›¾åƒåŸç‚¹å’Œåƒç´ é—´éš”ã€‚VTKä¸­äºŒç»´å’Œä¸‰ç»´å›¾åƒéƒ½ç”¨vtkImageDataè¡¨ç¤ºï¼Œå› æ­¤ç¬¬å…­è¡Œä¸­å®šä¹‰å›¾åƒç»´æ•°ä¸ºdims[3]ï¼Œç„¶ååˆ©ç”¨GetDimensions()å‡½æ•°è·å–å›¾åƒçš„ç»´æ•°ï¼›å›¾åƒçš„åŸç‚¹å’Œåƒç´ é—´éš”éƒ½æ˜¯ç‰©ç†ç©ºé—´æ•°å€¼ï¼Œå› æ­¤éƒ½æ˜¯å®šä¹‰doubleç±»å‹ã€‚æœ¬ä¾‹è¯»å…¥äº†äºŒç»´lenaå›¾åƒï¼Œä¸Šå›¾ä¸­æ˜¾ç¤ºäº†è·å–çš„å›¾åƒä¿¡æ¯ã€‚å…¶ä¸­ï¼Œå›¾åƒç»´æ•°ä¸º512*512*1ï¼Œé€šè¿‡ç»´æ•°å¯ä»¥çœ‹æˆzæ–¹å‘çš„ç»´æ•°ä¸º1ï¼Œè¯´æ˜è¯¥å›¾åƒä¸ºäºŒç»´å›¾åƒï¼›è€Œå›¾åƒçš„åŸç‚¹ä¸º(0,0,0)ç‚¹ï¼Œè€Œåƒç´ é—´éš”ä¸º(1,1,1)ã€‚</p>
<hr />
<p>vtkImageDataä¸­æä¾›äº†å¤šä¸ªSetå‡½æ•°ç”¨äºè®¾ç½®å›¾åƒçš„åŸºæœ¬ä¿¡æ¯ã€‚å½“å¯¹ä¸€ä¸ªç®¡çº¿çš„è¾“å‡ºä¿®æ”¹å›¾åƒä¿¡æ¯åï¼Œå¦‚æœç®¡çº¿é‡æ–°Updateï¼Œé‚£ä¹ˆè¿™äº›ä¿®æ”¹éƒ½ä¼šæ¢å¤å›åŸæ¥çš„å€¼ã€‚è€ŒvtkChangeImageInformationå¯ä»¥ä½œä¸ºç®¡çº¿ä¸­çš„ä¸€ä¸ªfilteræ¥ä¿®æ”¹å›¾åƒä¿¡æ¯ã€‚åˆ©ç”¨è¿™ä¸ªfilterå¯ä»¥ä¿®æ”¹å›¾åƒçš„åŸç‚¹ï¼Œåƒç´ é—´éš”ï¼Œä»¥åŠèŒƒå›´èµ·ç‚¹ï¼ˆextentï¼‰ï¼Œå¦å¤–è¿˜å¯ä»¥å¯¹å›¾åƒå¹³ç§»ç¼©æ”¾ç­‰æ“ä½œã€‚</p>
<figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vtkSmartPointer&lt;vtkBMPReader&gt; reader = vtkSmartPointer&lt;vtkBMPReader&gt;::<span class="hljs-built_in">New</span>();<br>    reader-&gt;<span class="hljs-built_in">SetFileName</span>(<span class="hljs-string">&quot;lena.bmp&quot;</span>);<br>    reader-&gt;<span class="hljs-built_in">Update</span>();<br><br>    <span class="hljs-type">int</span> dims[<span class="hljs-number">3</span>];<br>    <span class="hljs-type">double</span> origin[<span class="hljs-number">3</span>];<br>    <span class="hljs-type">double</span> spaceing[<span class="hljs-number">3</span>];<br><br>    reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetDimensions</span>(dims);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;åŸå›¾åƒç»´æ•°:&quot;</span> &lt;&lt; dims[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; dims[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; dims[<span class="hljs-number">2</span>] &lt;&lt; std::endl;<br>    reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetOrigin</span>(origin);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;åŸå›¾åƒåŸç‚¹:&quot;</span> &lt;&lt; origin[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; origin[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; origin[<span class="hljs-number">2</span>] &lt;&lt; std::endl;<br>    reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetSpacing</span>(spaceing);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;åŸåƒç´ é—´éš”:&quot;</span> &lt;&lt; spaceing[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; spaceing[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; spaceing[<span class="hljs-number">2</span>] &lt;&lt; std::endl &lt;&lt; std::endl;<br><br>    vtkSmartPointer&lt;vtkImageChangeInformation&gt; changer =  vtkSmartPointer&lt;vtkImageChangeInformation&gt;::<span class="hljs-built_in">New</span>();<br>    changer-&gt;<span class="hljs-built_in">SetInputConnection</span>(reader-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br>    changer-&gt;<span class="hljs-built_in">SetOutputOrigin</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">0</span>);<br>    changer-&gt;<span class="hljs-built_in">SetOutputSpacing</span>(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>);<br>    changer-&gt;<span class="hljs-built_in">SetCenterImage</span>(<span class="hljs-number">1</span>);<br>    changer-&gt;<span class="hljs-built_in">Update</span>();<br><br><br>    changer-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetDimensions</span>(dims);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;ä¿®æ”¹åå›¾åƒç»´æ•°:&quot;</span> &lt;&lt; dims[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; dims[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot;&quot;</span> &lt;&lt; dims[<span class="hljs-number">2</span>] &lt;&lt; std::endl;<br>    changer-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetOrigin</span>(origin);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;ä¿®æ”¹å›¾åƒåŸç‚¹:&quot;</span> &lt;&lt; origin[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; origin[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot;&quot;</span> &lt;&lt; origin[<span class="hljs-number">2</span>] &lt;&lt; std::endl;<br>    changer-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetSpacing</span>(spaceing);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;ä¿®æ”¹ååƒç´ é—´éš”:&quot;</span> &lt;&lt; spaceing[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; spaceing[<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot;&quot;</span> &lt;&lt; spaceing[<span class="hljs-number">2</span>] &lt;&lt; std::endl;<br><br><br>    vtkSmartPointer&lt;vtkImageViewer2&gt; imageViewer = vtkSmartPointer&lt;vtkImageViewer2&gt;::<span class="hljs-built_in">New</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">SetInputConnection</span>(changer-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br><br>    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; renderWindowInteractor = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">SetupInteractor</span>(renderWindowInteractor);<br>    imageViewer-&gt;<span class="hljs-built_in">Render</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">GetRenderer</span>()-&gt;<span class="hljs-built_in">ResetCamera</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">Render</span>();<br><br>    renderWindowInteractor-&gt;<span class="hljs-built_in">Start</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062101523.png" srcset="/img/loading.gif" lazyload style="zoom: 50%;" /></p>
<p>ä¸Šä¾‹ä¸­é¦–å…ˆè¯»å…¥å›¾åƒï¼Œç”±vtkImageDataæä¾›å‡½æ•°æ¥å£è·å–å›¾åƒçš„ç»´æ•°ï¼ŒåŸç‚¹å’Œåƒç´ é—´éš”ã€‚ç„¶åå®šä¹‰vtkImageChangeInformationæŒ‡é’ˆï¼Œå¹¶è®¾ç½®è¾“å‡ºå›¾åƒåŸç‚¹ä¸ºï¼ˆ100,
100, 0ï¼‰ï¼Œè¾“å‡ºå›¾åƒåƒç´ é—´éš”ä¸ºï¼ˆ5, 5,
1ï¼‰ï¼Œç„¶åè°ƒç”¨CenterImage()å‡½æ•°å°†å›¾åƒçš„åŸç‚¹ç½®äºå›¾åƒçš„ä¸­å¿ƒã€‚</p>
<p>ä»ä¸Šé¢ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼Œæ“ä½œåçš„ç»“æœä½¿å¾—å›¾åƒçš„åŸç‚¹ä½äº(-1277.5,
-1275.5, 0)ï¼ŒSetOutputOrigin(100, 100,
0)å¹¶æ²¡æœ‰èµ·ä½œç”¨ã€‚åŸå› åœ¨å“ªé‡Œå‘¢ï¼Ÿå¦‚æœçœ‹ä¸‹CenterImage()å‡½æ•°çš„æ³¨é‡Šï¼Œå¯ä»¥å‘ç°è¯¥å‡½æ•°çš„ä½œç”¨æ˜¯å°†ï¼ˆ0,
0,
0ï¼‰ç‚¹ç½®äºå›¾åƒçš„ä¸­å¿ƒã€‚å½“CenterImageè¯¥å‡½æ•°æ‰§è¡Œæ—¶ä¼šé‡å†™SetOutputOrigin()ï¼Œæ‰€ä»¥SetOutputOriginå‡½æ•°ä¸ä¼šäº§ç”Ÿä»»ä½•ä½œç”¨ã€‚é‚£(-1277.5,
-1275.5,
0)åˆæ˜¯å¦‚ä½•è®¡ç®—å‡ºæ¥çš„å‘¢ï¼Ÿå¦‚ä¸‹å›¾ï¼Œæ ¹æ®å›¾åƒçš„ç»´æ•°å’Œåƒç´ é—´éš”è®¡ç®—å¾—åˆ°æ–°çš„å›¾åƒçš„å®½åº¦å’Œé«˜åº¦ä¸º(512-1)*5
ï¼Œåˆå§‹å›¾åƒçš„åŸç‚¹ä½äºï¼ˆ0,0,0ï¼‰ï¼Œç°åœ¨å°†å›¾åƒçš„ä¸­å¿ƒå¹³ç§»è‡³åŸç‚¹ï¼Œå¹³ç§»é‡ä¸ºï¼ˆ-(512-1)*5/2,(512-1)*5/2,
0ï¼‰ = (-1277.5, -1275.5,0)ã€‚</p>
<p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062101233.png" srcset="/img/loading.gif" lazyload style="zoom: 80%;" /></p>
<hr />
<h4 id="å›¾åƒåƒç´ å€¼è®¿é—®å’Œä¿®æ”¹">å›¾åƒåƒç´ å€¼è®¿é—®å’Œä¿®æ”¹ğŸ¨</h4>
<p>å›¾åƒåƒç´ å€¼çš„è®¿é—®ä¸ä¿®æ”¹æ˜¯æœ€å¸¸ç”¨çš„ä¸€ä¸ªæ“ä½œã€‚VTKä¸­æä¾›äº†ä¸¤ç§è®¿é—®å›¾åƒåƒç´ å€¼çš„æ–¹æ³•ã€‚ç¬¬ä¸€ç§æ˜¯ç›´æ¥è®¿é—®vtkImageDataçš„æ•°æ®æ•°ç»„ã€‚è¿™ç§æ–¹å¼æœ€ç›´æ¥ã€‚åœ¨ç¬¬ä¸€èŠ‚ä¸Šæ–°å»ºå›¾åƒèµ‹å€¼ä¹Ÿæ˜¯é‡‡ç”¨çš„è¿™ç§æ–¹æ³•ã€‚vtkImageDataä¸­æä¾›äº†GetScalarPointer()å‡½æ•°è·å–æ•°æ®æ•°ç»„æŒ‡é’ˆï¼Œè¯¥å‡½æ•°æœ‰ä¸‰ç§å½¢å¼ï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> *<span class="hljs-title">GetScalarPointer</span><span class="hljs-params">(<span class="hljs-type">int</span> coordinates[<span class="hljs-number">3</span>])</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> *<span class="hljs-title">GetScalarPointer</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y, <span class="hljs-type">int</span> z)</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> *<span class="hljs-title">GetScalarPointer</span><span class="hljs-params">()</span></span>;<br></code></pre></div></td></tr></table></figure>
<p>å‰ä¸¤ç§å½¢å¼æ ¹æ®ç»™å®šçš„åƒç´ ç´¢å¼•å¾—åˆ°æŒ‡å®šçš„åƒç´ å€¼ï¼Œæ³¨æ„è¿”å›çš„æ˜¯ç¬¬(x,y,z)ä¸ªåƒç´ å€¼çš„åœ°å€ã€‚è€Œç¬¬ä¸‰ç§æ–¹å¼æ˜¯è¿”å›å›¾åƒæ•°æ®æ•°ç»„çš„å¤´æŒ‡é’ˆï¼Œç„¶åæ ¹æ®å¤´æŒ‡é’ˆå¯ä»¥ä¾æ¬¡è®¿é—®ç´¢å¼•åƒç´ ã€‚</p>
<figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vtkSmartPointer&lt;vtkBMPReader&gt; reader = vtkSmartPointer&lt;vtkBMPReader&gt;::<span class="hljs-built_in">New</span>();<br>    reader-&gt;<span class="hljs-built_in">SetFileName</span>(<span class="hljs-string">&quot;lena.bmp&quot;</span>);<br>    reader-&gt;<span class="hljs-built_in">Update</span>();<br><br>    <span class="hljs-type">int</span> dims[<span class="hljs-number">3</span>];<br>    reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetDimensions</span>(dims);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt; dims[<span class="hljs-number">2</span>]; k++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; dims[<span class="hljs-number">1</span>]; j++)<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; dims[<span class="hljs-number">0</span>]; i++)<br>            &#123;<br>                <span class="hljs-keyword">if</span> (i &lt; <span class="hljs-number">100</span> &amp;&amp; j &lt; <span class="hljs-number">100</span>)<br>                &#123;<br>                    <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>* pixel = (<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>*)(reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetScalarPointer</span>(i, j, k));<br>                    *pixel = <span class="hljs-number">0</span>;<br>                    *(pixel + <span class="hljs-number">1</span>) = <span class="hljs-number">0</span>;<br>                    *(pixel + <span class="hljs-number">2</span>) = <span class="hljs-number">0</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    vtkSmartPointer&lt;vtkImageViewer2&gt; imageViewer = vtkSmartPointer&lt;vtkImageViewer2&gt;::<span class="hljs-built_in">New</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">SetInputConnection</span>(reader-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br>    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; renderWindowInteractor = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">SetupInteractor</span>(renderWindowInteractor);<br>    imageViewer-&gt;<span class="hljs-built_in">Render</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">GetRenderer</span>()-&gt;<span class="hljs-built_in">ResetCamera</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">Render</span>();<br><br>    renderWindowInteractor-&gt;<span class="hljs-built_in">Start</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062101893.png" srcset="/img/loading.gif" lazyload style="zoom:67%;" /></p>
<p>ä¸Šé¢ä»£ç å®ç°äº†å°†å›¾åƒçš„100*100å¤§å°çš„åŒºåŸŸè®¾ç½®ä¸ºé»‘è‰²ã€‚é¦–å…ˆå®šä¹‰ä¸€ä¸ªreaderè¯»å–ä¸€å‰¯bmpå›¾åƒï¼Œé€šè¿‡vtkImageDataå‡½æ•°GetDimensions()è·å–å›¾åƒçš„å¤§å°ã€‚å»ºç«‹ä¸‰æ¬¡å¾ªç¯ï¼Œé€šè¿‡GetScalarPointer(i,j,k)å‡½æ•°è·å–è®¿é—®å›¾åƒåƒç´ å€¼ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒGetScalarPointer()å‡½æ•°è¿”å›çš„æ˜¯void<em>ç±»å‹ï¼Œå› æ­¤éœ€è¦æ ¹æ®å›¾åƒçš„å®é™…ç±»å‹è¿›è¡Œå¼ºåˆ¶è½¬æ¢ã€‚å¦‚ä¸Šé¢ä»£ç ä¸­å°†åƒç´ å€¼æ•°ç»„çš„å¤´æŒ‡é’ˆç±»å‹è½¬æ¢ä¸ºunsigned
char
</em>ã€‚å¦‚æœå¯¹äºæ•°æ®ç±»å‹ä¸ç¡®å®šçš„è¯ï¼Œè¿˜å¯ä»¥å…ˆé€šè¿‡vtkImageCastå°†å›¾åƒæ•°æ®ç±»å‹å¼ºåˆ¶è½¬æ¢ä¸ºç‰¹å®šçš„æ•°æ®ç±»å‹ï¼Œå†è¿›è¡Œéå†ã€‚</p>
<p>å¦å¤–è¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„åœ°æ–¹ï¼Œå½©è‰²ä»¥åŠå‘é‡å›¾åƒé‡‡ç”¨çš„æ˜¯ç±»ä¼¼ä¸‹å›¾è¿™ç§åƒç´ å­˜å‚¨æ ¼å¼ï¼š</p>
<p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062101901.png" srcset="/img/loading.gif" lazyload style="zoom:67%;" /></p>
<p>å› æ­¤åœ¨ä¿®æ”¹RGBå›¾åƒä»¥åŠå‘é‡å›¾åƒåƒç´ æ—¶ï¼Œéœ€è¦æ ¹æ®åƒç´ çš„å…ƒç»„çš„ç»„åˆ†æ•°ç›®æ¥è®¿é—®ã€‚ä¸Šä¾‹ä¸­ï¼Œéœ€è¦ä¿®æ”¹æ¯ä¸ªåƒç´ çš„RGBå€¼æ—¶ï¼Œé¦–å…ˆè·å¾—ç¬¬(i,
j,
k)ä¸ªåƒç´ çš„åœ°å€ä¹Ÿå°±æ˜¯Rå€¼çš„åœ°å€ï¼Œç„¶åå°†åœ°å€åŠ 1æ¥è®¿é—®åç»­Gå€¼ä»¥åŠBå€¼ã€‚å¦‚æœå¯¹äºåƒç´ çš„å…ƒç»„ç»„åˆ†ä¸ç¡®å®šæ—¶ï¼Œå¯ä»¥é€šè¿‡å‡½æ•°GetNumberOfScalarComponents()æ¥è·å–ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-type">int</span> nbOfComp = reader-&gt;<span class="hljs-built_in">GetOutput</span>()-&gt;<span class="hljs-built_in">GetNumberOfScalarComponents</span>();<br></code></pre></div></td></tr></table></figure>
<hr />
<p>VTKä¸­æä¾›äº†vtkImageIteratorç±»æ¥åˆ©ç”¨è¿­ä»£å™¨æ–¹æ³•è®¿é—®å›¾åƒåƒç´ ã€‚è¯¥ç±»æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œä½¿ç”¨æ—¶ï¼Œéœ€è¦æä¾›è¿­ä»£çš„å›¾åƒåƒç´ ç±»å‹ä»¥åŠè¿­ä»£çš„åŒºåŸŸå¤§å°ã€‚</p>
<figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vtkSmartPointer&lt;vtkBMPReader&gt;reader = vtkSmartPointer&lt;vtkBMPReader&gt;::<span class="hljs-built_in">New</span>();<br>    reader-&gt;<span class="hljs-built_in">SetFileName</span>(<span class="hljs-string">&quot;lena.bmp&quot;</span>);<br>    reader-&gt;<span class="hljs-built_in">Update</span>();<br><br>    <span class="hljs-type">int</span> subRegion[<span class="hljs-number">6</span>] = &#123; <span class="hljs-number">0</span>,<span class="hljs-number">300</span>, <span class="hljs-number">0</span>, <span class="hljs-number">300</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span> &#125;;<br>    <span class="hljs-function">vtkImageIterator&lt;<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>&gt; <span class="hljs-title">it</span><span class="hljs-params">(reader-&gt;GetOutput(), subRegion)</span></span>;<br><br>    <span class="hljs-keyword">while</span> (!it.<span class="hljs-built_in">IsAtEnd</span>())<br>    &#123;<br>        <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>* inSI = it.<span class="hljs-built_in">BeginSpan</span>();<br>        <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>* inSIEnd = it.<span class="hljs-built_in">EndSpan</span>();<br><br>        <span class="hljs-keyword">while</span> (inSI != inSIEnd)<br>        &#123;<br>            *inSI = <span class="hljs-number">255</span> - *inSI;<br>            ++inSI;<br>        &#125;<br>    it.<span class="hljs-built_in">NextSpan</span>();<br>    &#125;<br><br>    vtkSmartPointer&lt;vtkImageViewer2&gt; imageViewer = vtkSmartPointer&lt;vtkImageViewer2&gt;::<span class="hljs-built_in">New</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">SetInputConnection</span>(reader-&gt;<span class="hljs-built_in">GetOutputPort</span>());<br>    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; renderWindowInteractor = vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="hljs-built_in">New</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">SetupInteractor</span>(renderWindowInteractor);<br>    imageViewer-&gt;<span class="hljs-built_in">Render</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">GetRenderer</span>()-&gt;<span class="hljs-built_in">ResetCamera</span>();<br>    imageViewer-&gt;<span class="hljs-built_in">Render</span>();<br><br>    renderWindowInteractor-&gt;<span class="hljs-built_in">Start</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/fly-beep/picb/master/img/202212062101936.png" srcset="/img/loading.gif" lazyload style="zoom:67%;" /></p>
<p>ä¸Šé¢ä»£ç ä¸­é¦–å…ˆè¯»å–äº†ä¸€å‰¯bmpå›¾åƒï¼Œç„¶åå®šä¹‰äº†ä¸€ä¸ªå­åŒºåŸŸã€‚æ³¨æ„åœ¨å®šä¹‰å­åŒºåŸŸçš„æ—¶å€™ï¼Œä¸è¦è¶…è¿‡å›¾åƒçš„å¤§å°èŒƒå›´ã€‚subRegionçš„å…­ä¸ªå€¼åˆ†åˆ«è¡¨ç¤ºåŒºåŸŸä¸­xçš„æœ€å°æœ€å¤§å€¼ï¼Œyçš„æœ€å°æœ€å¤§å€¼ï¼Œzçš„æœ€å°æœ€å¤§å€¼ã€‚ç”±äºå¤„ç†çš„å›¾åƒä¸ºäºŒç»´å›¾åƒï¼Œå› æ­¤zçš„å–å€¼èŒƒå›´ä¸º[0,0]ã€‚ç„¶åæ ¹æ®å›¾åƒç±»å‹unsigned
charå®šä¹‰å®ä¾‹åŒ–ä¸€ä¸ªå›¾åƒè¿­ä»£å™¨itï¼Œå®šä¹‰itæ—¶æœ‰ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªæ˜¯è¦è®¿é—®çš„å›¾åƒï¼Œå¦å¤–ä¸€ä¸ªæ˜¯è®¿é—®çš„å›¾åƒåŒºåŸŸã€‚è®¾ç½®å®Œæ¯•åï¼Œè¿­ä»£å™¨å¼€å§‹å·¥ä½œã€‚æ³¨æ„ï¼Œä¸Šé¢ä»£ç ä¸­æœ‰ä¸¤ä¸ªwhileå¾ªç¯ã€‚</p>
<p>é¦–å…ˆçœ‹ç¬¬ä¸€ä¸ªwhileå¾ªç¯ï¼Œè¿™é‡Œåˆ¤æ–­è¿­ä»£å™¨æ˜¯å¦ç»“æŸã€‚è¿›å…¥å¾ªç¯åï¼Œå¯¹äºæ¯ä¸ªè¿­ä»£å™¨itï¼Œåˆå­˜åœ¨ç¬¬äºŒä¸ªå¾ªç¯ã€‚è¿™ä¸ªå¾ªç¯åˆ¤æ–­çš„æ˜¯å½“å‰åƒç´ çš„ç»„åˆ†æ˜¯å¦è¿­ä»£å®Œæ¯•ã€‚ç”±äºvtkä¸­æ‰€æœ‰ç±»å‹çš„å›¾åƒæ ¼å¼éƒ½æ˜¯vtkImageDataï¼Œå› æ­¤æ¯ä¸ªåƒç´ å¯èƒ½æ˜¯æ ‡é‡ï¼Œä¹Ÿå¯èƒ½æ˜¯å‘é‡ã€‚å› æ­¤ï¼Œæ¯å½“è®¿é—®åˆ°ä¸€ä¸ªåƒç´ æ—¶ï¼Œéœ€è¦è¿­ä»£å½“å‰åƒç´ çš„ç»„åˆ†ã€‚ç»„åˆ†è¿­ä»£æ—¶ï¼ŒinSI
= it.BeginSpan()è·å–ç¬¬ä¸€ä¸ªç»„åˆ†ï¼ŒinSIEnd =
it.EndSpan()è¡¨ç¤ºç»„åˆ†è¿­ä»£å®Œæ¯•ï¼Œé€šè¿‡++inSIä¸æ–­è¿­ä»£ç»„åˆ†ï¼Œå¹¶å¯¹åƒç´ çš„ç»„åˆ†å€¼è¿›è¡Œå¤„ç†ï¼Œå½“inSIä¸inSIEndç›¸ç­‰æ—¶ç»„åˆ†è¿­ä»£å®Œæ¯•ã€‚ç„¶åç»§ç»­è¿­ä»£åƒç´ itï¼Œç›´è‡³è¿­ä»£å®Œæ¯•æ‰€æœ‰åƒç´ ã€‚ä¸Šé¢ä»£ç ä¸­å°†æŒ‡å®šåŒºåŸŸçš„åƒç´ å€¼å–åã€‚</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/">æŠ€æœ¯å­¦ä¹ </a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/VTK/">VTK</a>
                    
                  </div>
                
              </div>
              <p class="note note-warning">
                <strong>æœ¬æ–‡ä½œè€…: </strong><a href="/">fly-beep</a> <br>
                <strong>æœ¬æ–‡é“¾æ¥: </strong><a href="https://fly-beep.top/post/d287c7b.html">https://fly-beep.top/post/d287c7b.html</a> <br>
                <strong>ç‰ˆæƒå£°æ˜: </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
                   </p>
                   
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/post/ba05651e.html">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">VTKå­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/post/4036df29.html">
                        <span class="hidden-mobile">VTKå­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="waline"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#waline', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/@waline/client@1/dist/Waline.min.js', function() {
        var options = Object.assign(
          {"serverURL":"https://waline-3s11u25y3-fly-beep.vercel.app/","path":"window.location.pathname","placeholder":null,"meta":["nick","mail","link"],"requiredMeta":["nick"],"lang":"zh-CN","emoji":["https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili"],"dark":"html[data-user-color-scheme=\"dark\"]","avatar":"retro","avatarCDN":"https://seccdn.libravatar.org/avatar/","avatarForce":false,"wordLimit":0,"pageSize":10,"highlight":true},
          {
            el: '#waline',
            path: window.location.pathname
          }
        )
        new Waline(options);
        Fluid.utils.waitElementVisible('#waline .vcontent', () => {
          Fluid.plugins.initFancyBox('#waline .vcontent img:not(.vemoji)');
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <div> <span id="timeDate">è½½å…¥å¤©æ•°...</span> <span id="times">è½½å…¥æ—¶åˆ†ç§’...</span> <script src="/js/duration.js"></script> </div> <div> äººç”Ÿå¤©åœ°é—´ï¼Œå¿½å¦‚è¿œè¡Œå®¢ã€‚ </div> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- LeanCloud ç»Ÿè®¡PV -->
        <span id="leancloud-site-pv-container" style="display: none">
            æ€»è®¿é—®é‡ 
            <span id="leancloud-site-pv"></span>
             æ¬¡
          </span>
      
      
        <!-- LeanCloud ç»Ÿè®¡UV -->
        <span id="leancloud-site-uv-container" style="display: none">
            æ€»è®¿å®¢æ•° 
            <span id="leancloud-site-uv"></span>
             äºº
          </span>
      

    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  




  <script defer src="/js/leancloud.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
        typing(title);
      
    })(window, document);
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        loader: {
          load: ['ui/lazy']
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" ></script>

  








  

  

  

  

  

  




  
<script src="//cdn.jsdelivr.net/gh/EmoryHuang/BlogBeautify@1.1/Cherry.min.js"></script>



<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ ä¿æŒåœ¨æœ€åº•éƒ¨ -->
<script  src="/js/boot.js" ></script>


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/miku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script></body>
</html>
